"use strict";(self.webpackChunkuptc_music=self.webpackChunkuptc_music||[]).push([[508],{8421:(F,b,d)=>{d.r(b),d.d(b,{BuitresComponent:()=>K});var h=d(177),v=d(8435),_=d(4341),k=d(1413),E=d(152),x=d(3294),m=d(1179),e=d(6276),C=d(8440),M=d(3205),g=d(5455);function o(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.logout())}),e.nrm(1,"i",13),e.EFF(2," Cerrar Sesi\xf3n "),e.k0s()}}function s(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",14)(1,"div",15),e.nrm(2,"i",16),e.k0s(),e.j41(3,"h3"),e.EFF(4,"Acceso Restringido"),e.k0s(),e.j41(5,"p",17),e.EFF(6,"Para ver esta seccion, debes iniciar sesi\xf3n con tu cuenta institucional de la UPTC. (Por politica de tratamiento de datos)"),e.k0s(),e.j41(7,"div",18)(8,"h5",19),e.EFF(9,"Compromiso de Uso Responsable:"),e.k0s(),e.j41(10,"p",20),e.EFF(11,"Al iniciar sesi\xf3n, te comprometes a utilizar esta informaci\xf3n **exclusivamente para fines personales y comunitarios**. Queda estrictamente prohibido el uso de estos datos para acoso, discriminaci\xf3n, fines comerciales o cualquier actividad que vulnere la privacidad de los integrantes de la universidad."),e.k0s()(),e.j41(12,"div",21)(13,"div",22)(14,"input",23),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.dataAccepted=n)}),e.k0s(),e.j41(15,"label",24),e.EFF(16," Acepto el tratamiento de mis datos personales seg\xfan la "),e.j41(17,"b"),e.EFF(18,"Ley 1581 de 2012 de Colombia"),e.k0s(),e.EFF(19," y la pol\xedtica de privacidad institucional. "),e.k0s()()(),e.j41(20,"div",25),e.nrm(21,"div",26),e.k0s(),e.j41(22,"p",27),e.nrm(23,"i",28),e.EFF(24," Solo se permiten correos @uptc.edu.co "),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(14),e.Y8G("ngModel",t.dataAccepted),e.R7$(6),e.xc7("pointer-events",t.dataAccepted?"auto":"none")("opacity",t.dataAccepted?"1":"0.5"),e.Y8G("title",t.dataAccepted?"":"Debes aceptar el tratamiento de datos para continuar")}}function c(i,l){if(1&i&&e.nrm(0,"img",60),2&i){const t=e.XpG().$implicit;e.Y8G("src",t.image_url,e.B4B)}}function p(i,l){1&i&&e.nrm(0,"i",63)}function f(i,l){1&i&&e.nrm(0,"i",64)}function w(i,l){if(1&i&&(e.qex(0),e.DNE(1,p,1,0,"i",61),e.DNE(2,f,1,0,"i",62),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf","male"===t.gender),e.R7$(1),e.Y8G("ngIf","female"===t.gender)}}function B(i,l){if(1&i&&(e.j41(0,"small",65),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(1),e.JRh(t.email)}}function I(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",54),e.bIt("click",function(){const a=e.eBV(t).$implicit,u=e.XpG(4);return e.Njj(u.selectSuggestion(a))}),e.j41(1,"div",55),e.DNE(2,c,1,1,"img",56),e.DNE(3,w,3,2,"ng-container",11),e.k0s(),e.j41(4,"div",57)(5,"span",58),e.EFF(6),e.k0s(),e.DNE(7,B,2,1,"small",59),e.k0s()()}if(2&i){const t=l.$implicit,r=e.XpG(4);e.R7$(2),e.Y8G("ngIf",t.image_url),e.R7$(1),e.Y8G("ngIf",!t.image_url),e.R7$(3),e.JRh(t.name),e.R7$(1),e.Y8G("ngIf",r.isAdmin&&t.email)}}function y(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",66),e.bIt("click",function(){e.eBV(t);const n=e.XpG(4);return e.Njj(n.openCreateFormWithSearch())}),e.j41(1,"div",67),e.nrm(2,"i",68),e.k0s(),e.j41(3,"div")(4,"span",69),e.EFF(5),e.k0s(),e.j41(6,"small",70),e.EFF(7,"Haz clic aqu\xed para crear este perfil"),e.k0s()()()}if(2&i){const t=e.XpG(4);e.R7$(5),e.SpI('"',t.searchQuery,'" no existe')}}function O(i,l){if(1&i&&(e.j41(0,"div",51),e.DNE(1,I,8,4,"div",52),e.DNE(2,y,8,1,"div",53),e.k0s()),2&i){const t=e.XpG(3);e.R7$(1),e.Y8G("ngForOf",t.suggestions),e.R7$(1),e.Y8G("ngIf",0===t.suggestions.length&&!t.loading)}}function T(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",71)(1,"button",72),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.setSort("tags"))}),e.nrm(2,"i",73),e.EFF(3," M\xe1s Etiquetas "),e.k0s(),e.j41(4,"button",72),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.setSort("comments"))}),e.nrm(5,"i",74),e.EFF(6," M\xe1s Comentados "),e.k0s(),e.j41(7,"button",72),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.setSort("notes"))}),e.nrm(8,"i",75),e.EFF(9," M\xe1s Notas "),e.k0s(),e.j41(10,"button",72),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.setSort("recent"))}),e.nrm(11,"i",76),e.EFF(12," Recientes "),e.k0s(),e.j41(13,"button",72),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.setSort("likes"))}),e.nrm(14,"i",77),e.EFF(15," M\xe1s Votados "),e.k0s()()}if(2&i){const t=e.XpG(3);e.R7$(1),e.AVh("active","tags"===t.currentSort),e.R7$(3),e.AVh("active","comments"===t.currentSort),e.R7$(3),e.AVh("active","notes"===t.currentSort),e.R7$(3),e.AVh("active","recent"===t.currentSort),e.R7$(3),e.AVh("active","likes"===t.currentSort)}}function G(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",78)(1,"div",79)(2,"div",80),e.nrm(3,"i",81),e.j41(4,"div")(5,"h4",82),e.EFF(6,"Modo Fusi\xf3n Activo"),e.k0s(),e.j41(7,"p",83),e.EFF(8,"Selecciona el perfil que quieres fusionar DENTRO DE "),e.j41(9,"strong"),e.EFF(10),e.k0s()()(),e.j41(11,"button",84),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.resetMerge())}),e.EFF(12,"Cancelar"),e.k0s()(),e.j41(13,"div",85),e.nrm(14,"i",38),e.j41(15,"input",86),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG(3);return e.Njj(a.mergeQuery=n)}),e.k0s()()()()}if(2&i){const t=e.XpG(3);e.R7$(10),e.JRh(t.mergeSelected.name),e.R7$(5),e.Y8G("ngModel",t.mergeQuery)}}function S(i,l){1&i&&(e.j41(0,"div",87)(1,"div",88)(2,"span",89),e.EFF(3,"Cargando..."),e.k0s()()())}function R(i,l){if(1&i&&e.nrm(0,"img",60),2&i){const t=e.XpG().$implicit;e.Y8G("src",t.image_url,e.B4B)}}function D(i,l){1&i&&e.nrm(0,"i",103)}function N(i,l){1&i&&e.nrm(0,"i",104)}function $(i,l){if(1&i&&(e.qex(0),e.DNE(1,D,1,0,"i",101),e.DNE(2,N,1,0,"i",102),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf","male"===t.gender),e.R7$(1),e.Y8G("ngIf","female"===t.gender)}}function A(i,l){if(1&i&&(e.j41(0,"div",105),e.nrm(1,"i",106),e.EFF(2),e.k0s()),2&i){const t=e.XpG().$implicit,r=e.XpG(4);e.R7$(2),e.SpI(" Actividad ",r.formatTimeAgo(t.updated_at||t.created_at)," ")}}function V(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",107),e.bIt("click",function(n){return n.stopPropagation()}),e.j41(1,"button",108),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(4);return e.Njj(a.startMerge(n))}),e.nrm(2,"i",109),e.EFF(3," Fusionar "),e.k0s(),e.j41(4,"button",110),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(4);return e.Njj(a.deletePerson(n))}),e.nrm(5,"i",111),e.k0s()()}}function X(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",92),e.bIt("click",function(){const a=e.eBV(t).$implicit,u=e.XpG(4);return e.Njj(u.isMerging?u.selectForMerge(a):u.router.navigate(["/buitres/person",a.id]))}),e.j41(1,"div",93),e.DNE(2,R,1,1,"img",56),e.DNE(3,$,3,2,"ng-container",11),e.k0s(),e.j41(4,"div",94)(5,"h3"),e.EFF(6),e.k0s(),e.DNE(7,A,3,1,"div",95),e.j41(8,"div",96)(9,"span"),e.nrm(10,"i",97),e.EFF(11),e.k0s(),e.j41(12,"span",98),e.nrm(13,"i",99),e.EFF(14),e.k0s()(),e.DNE(15,V,6,0,"div",100),e.k0s()()}if(2&i){const t=l.$implicit,r=e.XpG(4);e.AVh("selecting-merge",r.isMerging&&(null==r.mergeSelected?null:r.mergeSelected.id)!==t.id)("animate-flash",r.flashStates[t.id]),e.R7$(2),e.Y8G("ngIf",t.image_url),e.R7$(1),e.Y8G("ngIf",!t.image_url),e.R7$(3),e.JRh(t.name),e.R7$(1),e.Y8G("ngIf",t.updated_at||t.created_at),e.R7$(4),e.SpI(" ",t.likes_count,""),e.R7$(3),e.SpI(" ",t.dislikes_count,""),e.R7$(1),e.Y8G("ngIf",r.isAdmin&&!r.isMerging)}}function Y(i,l){if(1&i&&(e.j41(0,"div",90),e.DNE(1,X,16,11,"div",91),e.k0s()),2&i){const t=e.XpG(3);e.R7$(1),e.Y8G("ngForOf",t.filteredPeople)}}function L(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",112),e.nrm(1,"i",113),e.j41(2,"h3"),e.EFF(3,"No encontramos a nadie con ese nombre"),e.k0s(),e.j41(4,"p"),e.EFF(5,"\xbfCrees que deber\xeda estar aqu\xed? \xa1Puedes crearlo!"),e.k0s(),e.j41(6,"button",114),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.showCreateForm=!0)}),e.nrm(7,"i",115),e.EFF(8,"Crear Persona "),e.k0s()()}}function U(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",35)(1,"div",36)(2,"div",37),e.nrm(3,"i",38),e.j41(4,"input",39),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.searchQuery=n)})("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onSearchChange(n))})("keyup.enter",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.search())}),e.k0s(),e.j41(5,"button",40),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.search())}),e.nrm(6,"i",41),e.k0s(),e.DNE(7,O,3,2,"div",42),e.k0s()(),e.j41(8,"div",43)(9,"small",44),e.nrm(10,"i",45),e.EFF(11," Todo usuario en su perfil puede eliminar las notas, tags y comentarios."),e.k0s()(),e.DNE(12,T,16,10,"div",46),e.DNE(13,G,16,2,"div",47),e.DNE(14,S,4,0,"div",48),e.DNE(15,Y,2,1,"div",49),e.DNE(16,L,9,0,"div",50),e.k0s()}if(2&i){const t=e.XpG(2);e.R7$(4),e.Y8G("ngModel",t.searchQuery),e.R7$(3),e.Y8G("ngIf",t.searchQuery.length>=2&&t.suggestions.length>=0),e.R7$(5),e.Y8G("ngIf",!t.isMerging),e.R7$(1),e.Y8G("ngIf",t.isMerging&&t.mergeSelected),e.R7$(1),e.Y8G("ngIf",t.loading),e.R7$(1),e.Y8G("ngIf",!t.loading&&t.people.length>0),e.R7$(1),e.Y8G("ngIf",!t.loading&&0===t.people.length)}}function z(i,l){1&i&&(e.j41(0,"div",35),e.nrm(1,"app-discussion"),e.k0s())}function Q(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",116),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.showCreateForm=!1)}),e.j41(1,"div",117),e.bIt("click",function(n){return n.stopPropagation()}),e.j41(2,"h3"),e.EFF(3,"Agregar Nuevo Buitre"),e.k0s(),e.j41(4,"form",118),e.bIt("submit",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.createPerson(n))}),e.j41(5,"div",119)(6,"label",120),e.EFF(7,"Nombre Completo"),e.k0s(),e.j41(8,"input",121),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.newName=n)}),e.k0s()(),e.j41(9,"div",119)(10,"label",120),e.EFF(11,"G\xe9nero"),e.k0s(),e.j41(12,"div",122)(13,"div",123)(14,"input",124),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.newGender=n)}),e.k0s(),e.j41(15,"label",125),e.nrm(16,"i",126),e.EFF(17," Masculino "),e.k0s()(),e.j41(18,"div",123)(19,"input",127),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.newGender=n)}),e.k0s(),e.j41(20,"label",128),e.nrm(21,"i",129),e.EFF(22," Femenino "),e.k0s()()()(),e.j41(23,"div",119)(24,"p",130),e.nrm(25,"i",45),e.EFF(26,' Una vez creada la persona, la comunidad podr\xe1 agregar etiquetas como "Sistemas", "Bonito", "Feo", etc.'),e.k0s()(),e.j41(27,"div",131)(28,"button",132),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.showCreateForm=!1)}),e.EFF(29,"Cancelar"),e.k0s(),e.j41(30,"button",133),e.EFF(31,"Crear"),e.k0s()()()()()}if(2&i){const t=e.XpG(2);e.R7$(8),e.Y8G("ngModel",t.newName),e.R7$(6),e.Y8G("ngModel",t.newGender),e.R7$(5),e.Y8G("ngModel",t.newGender),e.R7$(11),e.Y8G("disabled",!t.newName||!t.newGender)}}function W(i,l){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",29)(2,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.activeTab="people")}),e.nrm(3,"i",31),e.EFF(4,"Personas "),e.k0s(),e.j41(5,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.activeTab="discussion")}),e.nrm(6,"i",32),e.EFF(7,"Foro "),e.k0s()(),e.DNE(8,U,17,7,"div",33),e.DNE(9,z,2,0,"div",33),e.DNE(10,Q,32,4,"div",34),e.bVm()}if(2&i){const t=e.XpG();e.R7$(2),e.AVh("active","people"===t.activeTab),e.R7$(3),e.AVh("active","discussion"===t.activeTab),e.R7$(3),e.Y8G("ngIf","people"===t.activeTab),e.R7$(1),e.Y8G("ngIf","discussion"===t.activeTab),e.R7$(1),e.Y8G("ngIf",t.showCreateForm)}}let K=(()=>{class i{buitresService;authService;router;modalService;activeTab="discussion";people=[];suggestions=[];searchQuery="";loading=!1;showCreateForm=!1;totalPeople=0;currentSort="recent";flashStates={};subscriptions=[];isAdmin=!1;isMerging=!1;mergeSelected=null;mergeQuery="";newName="";newEmail="";newGender="";newDescription="";searchSubject=new k.B;isLoggedIn=!1;loginError="";dataAccepted=!1;constructor(t,r,n,a){this.buitresService=t,this.authService=r,this.router=n,this.modalService=a}ngOnInit(){this.isLoggedIn=this.authService.isBuitresLoggedIn(),this.isAdmin=this.authService.isRoleAdmin(),this.isLoggedIn&&(this.loadPeople(),this.loadTotalCount(),this.setupRealtime()),this.searchSubject.pipe((0,E.B)(300),(0,x.F)()).subscribe(t=>{t.length>=2?this.buitresService.getPeople(t,this.currentSort).subscribe(r=>{this.suggestions=r}):(this.suggestions=[],0===t.length&&this.loadPeople())})}ngAfterViewInit(){this.isLoggedIn||this.initGoogleAuth()}initGoogleAuth(){const t=setInterval(()=>{typeof google<"u"&&google.accounts&&(this.renderGoogleButton(),clearInterval(t))},1e3)}renderGoogleButton(){google.accounts.id.initialize({client_id:"361673258362-sf6ils8hu37d9b5ptmvds329aspgtiao.apps.googleusercontent.com",callback:t=>this.handleGoogleLogin(t)}),google.accounts.id.renderButton(document.getElementById("google-btn-container"),{theme:"outline",size:"large",width:"100%"})}handleGoogleLogin(t){const r=t.credential;this.loading=!0,this.authService.googleLogin(r).subscribe({next:()=>{this.isLoggedIn=!0,this.isAdmin=this.authService.isRoleAdmin(),this.loadPeople(),this.loadTotalCount(),this.loading=!1},error:n=>{this.loginError=n.error?.error||"Error al iniciar sesi\xf3n",this.loading=!1,this.modalService.alert(this.loginError,"Error de Acceso","danger")}})}logout(){this.authService.isRoleAdmin()?this.authService.logoutAdmin():this.authService.logoutBuitres(),this.isLoggedIn=!1,this.isAdmin=!1,this.dataAccepted=!1,this.people=[],setTimeout(()=>this.initGoogleAuth(),100)}loadTotalCount(){this.buitresService.getTotalPeopleCount().subscribe(t=>{this.totalPeople=t})}setSort(t){this.currentSort=t,this.loadPeople()}selectSuggestion(t){this.router.navigate(["/buitres/person",t.id]),this.suggestions=[],this.searchQuery=""}search(){0!==this.searchQuery.trim().length?(this.loading=!0,this.suggestions=[],this.buitresService.getPeople(this.searchQuery,this.currentSort).subscribe({next:t=>{this.people=t,this.loading=!1},error:()=>{this.loading=!1}})):this.loadPeople()}loadPeople(t=""){this.loading=!0,this.buitresService.getPeople(t,this.currentSort).subscribe(r=>{this.people=r,this.loading=!1})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}setupRealtime(){this.subscriptions.push(this.buitresService.subscribeToChanges("buitres_people",t=>{if("UPDATE"===t.eventType){const r=this.people.findIndex(n=>n.id===t.new.id);-1!==r&&(this.people[r]={...this.people[r],...t.new},this.triggerFlash(t.new.id))}else("INSERT"===t.eventType||"DELETE"===t.eventType)&&(this.loadPeople(),this.loadTotalCount())}))}triggerFlash(t){this.flashStates[t]=!0,setTimeout(()=>{this.flashStates[t]=!1},1500)}onSearchChange(t){this.searchSubject.next(t)}openCreateFormWithSearch(){this.newName=this.searchQuery,this.showCreateForm=!0,this.suggestions=[],this.searchQuery=""}createPerson(t){if(t.preventDefault(),!this.newName||!this.newGender)return;if(!this.newName.trim().includes(" "))return void this.modalService.alert("Por favor, ingresa nombre y al menos un apellido (m\xednimo un espacio).","Nombre Incompleto","warning");const r=this.newName.toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ");this.buitresService.createPerson(r,this.newEmail?`Email: ${this.newEmail}`:this.newDescription,this.newGender,this.newEmail).subscribe({next:n=>{this.modalService.alert(`Perfil de "${r}" creado correctamente.`,"\xa1\xc9xito!","success"),this.showCreateForm=!1,this.newName="",this.newEmail="",this.newGender="",this.newDescription="",this.loadPeople(),this.loadTotalCount()},error:n=>{n.message&&n.message.includes('email" does not exist')?this.buitresService.createPerson(r,this.newEmail?`Email: ${this.newEmail}`:this.newDescription,this.newGender).subscribe(()=>{this.showCreateForm=!1,this.newName="",this.newEmail="",this.newGender="",this.newDescription="",this.loadPeople(),this.loadTotalCount()}):"23505"===n.code?this.modalService.alert("Esta persona ya existe en la base de datos.","Error","warning"):this.modalService.alert("Error al crear persona.","Error","danger")}})}get filteredPeople(){if(!this.isMerging)return this.people;if(!this.mergeQuery)return this.people;const t=this.mergeQuery.toLowerCase().split(" ").filter(r=>r.length>0);return this.people.filter(r=>{const n=r.name.toLowerCase();return t.every(u=>n.includes(u))&&r.id!==this.mergeSelected?.id})}startMerge(t){this.mergeSelected=t,this.isMerging=!0}selectForMerge(t){!this.mergeSelected||this.mergeSelected.id===t.id||this.modalService.confirm(`\xbfEst\xe1s seguro de fusionar a "${t.name}" dentro de "${this.mergeSelected.name}"? Los votos y comentarios se mantendr\xe1n, pero el perfil de "${t.name}" desaparecer\xe1.`,"Confirmar Fusi\xf3n").subscribe(r=>{r&&this.mergeSelected&&this.buitresService.mergePersons(this.mergeSelected.id,t.id).subscribe({next:()=>{this.modalService.alert("Perfiles fusionados correctamente.","\xa1\xc9xito!","success"),this.resetMerge(),this.loadPeople()},error:n=>{console.error("Error merging:",n),this.modalService.alert("Error al fusionar perfiles.","Error","danger")}})})}resetMerge(){this.isMerging=!1,this.mergeSelected=null}deletePerson(t){this.modalService.confirm(`\xbfEst\xe1s seguro de eliminar el perfil de "${t.name}" permanentemente? Se borrar\xe1n todos sus votos y comentarios.`,"Eliminar Perfil").subscribe(r=>{r&&this.buitresService.deletePerson(t.id).subscribe({next:()=>{this.modalService.alert("Perfil eliminado.","\xa1\xc9xito!","success"),this.loadPeople(),this.loadTotalCount()},error:n=>this.modalService.alert("Error al eliminar perfil.","Error","danger")})})}formatTimeAgo(t){if(!t)return"";const r=new Date(t),a=Math.floor(((new Date).getTime()-r.getTime())/1e3);if(a<60)return"hace un momento";const u=Math.floor(a/60);if(u<60)return`hace ${u} min`;const j=Math.floor(u/60);if(j<24)return`hace ${j} h`;const P=Math.floor(j/24);return P<30?`hace ${P} d`:r.toLocaleDateString()}static \u0275fac=function(r){return new(r||i)(e.rXU(C.m),e.rXU(M.u),e.rXU(v.Ix),e.rXU(g.B))};static \u0275cmp=e.VBU({type:i,selectors:[["app-buitres"]],standalone:!0,features:[e.aNF],decls:22,vars:4,consts:[[1,"buitres-container","mt-4","animate-fade-in"],[1,"header-section","text-center","mb-5"],[1,"section-title"],[1,"text-gradient"],[1,"section-subtitle"],[1,"section-subtitle","small","mt-2"],["href","https://www.instagram.com/buitresuptcsogamoso/","target","_blank",1,"text-gradient","fw-bold"],[1,"stats-badge","mt-2","d-flex","align-items-center","justify-content-center","gap-3"],[1,"fas","fa-users","me-1"],["class","btn btn-link text-danger btn-sm p-0 text-decoration-none",3,"click",4,"ngIf"],["class","login-prompt card-dark p-5 text-center mb-5 animate-fade-in",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-link","text-danger","btn-sm","p-0","text-decoration-none",3,"click"],[1,"fas","fa-sign-out-alt","me-1"],[1,"login-prompt","card-dark","p-5","text-center","mb-5","animate-fade-in"],[1,"login-icon","mb-4"],[1,"fab","fa-google","fa-3x","text-gradient"],[1,"text-muted","mb-4"],[1,"disclaimer-alert","alert","alert-info","mb-4","text-start"],[1,"alert-heading","small","fw-bold"],[1,"mb-0","x-small"],[1,"data-acceptance-container","mb-4","text-start","p-3"],[1,"form-check","d-flex","align-items-center","gap-3"],["type","checkbox","id","dataTreatment",1,"form-check-input","flex-shrink-0",2,"width","20px","height","20px","cursor","pointer",3,"ngModel","ngModelChange"],["for","dataTreatment",1,"form-check-label","small","mb-0","cursor-pointer"],[1,"google-btn-wrapper",3,"title"],["id","google-btn-container",1,"mb-3",2,"min-height","40px"],[1,"mt-3","small","text-warning"],[1,"fas","fa-shield-alt","me-1"],[1,"nav-tabs-custom","mb-4","d-flex","justify-content-center","gap-3"],[1,"tab-btn",3,"click"],[1,"fas","fa-users","me-2"],[1,"fas","fa-comments","me-2"],["class","animate-fade-in",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"animate-fade-in"],[1,"search-section","mb-2"],[1,"search-box"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","Digite Nombre o etiquetas ...","autocomplete","off",1,"search-input",3,"ngModel","ngModelChange","keyup.enter"],["title","Buscar",1,"search-btn-icon",3,"click"],[1,"fas","fa-arrow-right"],["class","search-suggestions",4,"ngIf"],[1,"text-center","mb-4","opacity-50"],[1,"text-white-50"],[1,"fas","fa-info-circle","me-1"],["class","filters-section d-flex justify-content-center flex-wrap gap-2 mb-5",4,"ngIf"],["class","merge-banner card-dark mb-4 text-center animate-fade-in",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","people-grid",4,"ngIf"],["class","empty-state text-center py-5",4,"ngIf"],[1,"search-suggestions"],["class","suggestion-item",3,"click",4,"ngFor","ngForOf"],["class","suggestion-item create-option",3,"click",4,"ngIf"],[1,"suggestion-item",3,"click"],[1,"suggestion-avatar","overflow-hidden","d-flex","align-items-center","justify-content-center"],["alt","Profile","class","w-100 h-100 object-fit-cover",3,"src",4,"ngIf"],[1,"suggestion-info"],[1,"suggestion-name","d-block"],["class","suggestion-email text-muted",4,"ngIf"],["alt","Profile",1,"w-100","h-100","object-fit-cover",3,"src"],["class","fas fa-user-tie male",4,"ngIf"],["class","fas fa-user-graduate female",4,"ngIf"],[1,"fas","fa-user-tie","male"],[1,"fas","fa-user-graduate","female"],[1,"suggestion-email","text-muted"],[1,"suggestion-item","create-option",3,"click"],[1,"suggestion-avatar"],[1,"fas","fa-plus","text-success"],[1,"suggestion-name"],[1,"d-block","text-muted"],[1,"filters-section","d-flex","justify-content-center","flex-wrap","gap-2","mb-5"],[1,"filter-btn",3,"click"],[1,"fas","fa-tags","me-1"],[1,"fas","fa-comments","me-1"],[1,"fas","fa-music","me-1"],[1,"fas","fa-clock","me-1"],[1,"fas","fa-heart","me-1"],[1,"merge-banner","card-dark","mb-4","text-center","animate-fade-in"],[1,"d-flex","flex-column","p-3","gap-3"],[1,"d-flex","align-items-center","justify-content-center","gap-3"],[1,"fas","fa-code-merge","text-primary","fa-2x"],[1,"mb-0"],[1,"mb-0","text-muted"],[1,"btn","btn-outline-light","btn-sm","ms-3",3,"click"],[1,"search-box","mx-auto",2,"max-width","400px"],["type","text","placeholder","Buscar duplicado...",1,"search-input",3,"ngModel","ngModelChange"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"people-grid"],["class","person-card",3,"selecting-merge","animate-flash","click",4,"ngFor","ngForOf"],[1,"person-card",3,"click"],[1,"person-img","d-flex","align-items-center","justify-content-center","overflow-hidden"],[1,"person-info"],["class","activity-date small text-muted mb-2",4,"ngIf"],[1,"stats","mt-2"],[1,"fas","fa-thumbs-up","me-1"],[1,"ms-3"],[1,"fas","fa-thumbs-down","me-1"],["class","admin-actions mt-3 d-flex gap-2",3,"click",4,"ngIf"],["class","fas fa-user-tie gender-avatar male",4,"ngIf"],["class","fas fa-user-graduate gender-avatar female",4,"ngIf"],[1,"fas","fa-user-tie","gender-avatar","male"],[1,"fas","fa-user-graduate","gender-avatar","female"],[1,"activity-date","small","text-muted","mb-2"],[1,"fas","fa-history","me-1"],[1,"admin-actions","mt-3","d-flex","gap-2",3,"click"],[1,"btn","btn-outline-primary","btn-sm","flex-grow-1",3,"click"],[1,"fas","fa-code-merge","me-1"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt"],[1,"empty-state","text-center","py-5"],[1,"fas","fa-user-ghost","fa-4x","mb-3","text-muted"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"fas","fa-plus","me-2"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[3,"submit"],[1,"mb-3"],[1,"form-label"],["type","text","name","newName","placeholder","Ej: Juan Perez","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","gap-3","mt-2"],[1,"form-check","custom-radio"],["type","radio","name","gender","id","genderMale","value","male",1,"form-check-input",3,"ngModel","ngModelChange"],["for","genderMale",1,"form-check-label"],[1,"fas","fa-mars","me-1"],["type","radio","name","gender","id","genderFemale","value","female",1,"form-check-input",3,"ngModel","ngModelChange"],["for","genderFemale",1,"form-check-label"],[1,"fas","fa-venus","me-1"],[1,"text-muted","small"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Encuentra y "),e.j41(4,"span",3),e.EFF(5,"Buitrea "),e.k0s(),e.EFF(6," a quien quieras "),e.j41(7,"span",3),e.EFF(8,"en completo anonimato"),e.k0s()(),e.j41(9,"p",4),e.EFF(10,"Busca si esa persona ya est\xe1 en nuestra base de datos comunitaria, si no creala."),e.k0s(),e.j41(11,"p",5),e.EFF(12," si no sabes el nombre a quien quieres buitrear, siempre tendremos a nuestros amigos "),e.j41(13,"a",6),e.EFF(14,"@BuitresUptcSogamoso"),e.k0s()(),e.j41(15,"div",7)(16,"span"),e.nrm(17,"i",8),e.EFF(18),e.k0s(),e.DNE(19,o,3,0,"button",9),e.k0s()(),e.DNE(20,s,25,6,"div",10),e.DNE(21,W,11,7,"ng-container",11),e.k0s()),2&r&&(e.R7$(18),e.SpI(" ",n.totalPeople," perfiles registrados"),e.R7$(1),e.Y8G("ngIf",n.isLoggedIn),e.R7$(1),e.Y8G("ngIf",!n.isLoggedIn),e.R7$(1),e.Y8G("ngIf",n.isLoggedIn))},dependencies:[h.MD,h.Sq,h.bT,v.iI,_.YN,_.qT,_.me,_.Zm,_.Fm,_.BC,_.cb,_.YS,_.vS,_.cV,m.DiscussionComponent],styles:['.login-prompt[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;border:1px solid rgba(255,255,255,.1);border-radius:20px;background:rgba(30,30,40,.6);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.login-prompt[_ngcontent-%COMP%]   .login-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4285F4,#34A853,#FBBC05,#EA4335);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.login-prompt[_ngcontent-%COMP%]   .x-small[_ngcontent-%COMP%]{font-size:.75rem}.login-prompt[_ngcontent-%COMP%]   .disclaimer-alert[_ngcontent-%COMP%]{background:rgba(13,110,253,.1);border:1px solid rgba(13,110,253,.2);color:#a5d8ff}.btn-google[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background:white;color:#444;border:none;padding:12px 24px;border-radius:50px;font-weight:600;transition:all .3s ease;box-shadow:0 4px 15px #0003}.btn-google[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #0000004d;background:#f8f8f8}.btn-google[_ngcontent-%COMP%]:active{transform:translateY(0)}.text-gradient[_ngcontent-%COMP%]{background:linear-gradient(45deg,#1DB954,#19e68c);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;font-weight:700}.search-box[_ngcontent-%COMP%]{position:relative;max-width:600px;margin:0 auto;z-index:1001}.search-icon[_ngcontent-%COMP%]{position:absolute;left:20px;top:50%;transform:translateY(-50%);color:#777}.search-input[_ngcontent-%COMP%]{width:100%;padding:15px 50px;border-radius:30px;background:#282828;border:1px solid #404040;color:#fff;font-size:1.1rem;transition:all .3s ease}.search-btn-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:#1DB954;color:#fff;border:none;width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;z-index:2}.search-btn-icon[_ngcontent-%COMP%]:hover{background:#1ed760;transform:translateY(-50%) scale(1.1)}.search-btn-icon[_ngcontent-%COMP%]:active{transform:translateY(-50%) scale(.95)}.stats-badge[_ngcontent-%COMP%]{display:inline-block;background:rgba(29,185,84,.1);color:#1db954;padding:5px 15px;border-radius:20px;font-size:.9rem;font-weight:500;border:1px solid rgba(29,185,84,.3)}.nav-tabs-custom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);color:#b3b3b3;padding:12px 25px;border-radius:30px;cursor:pointer;transition:all .3s ease;font-weight:600;display:flex;align-items:center;font-size:1rem}.nav-tabs-custom[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1);color:#fff;transform:translateY(-2px)}.nav-tabs-custom[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background:#1DB954;color:#fff;border-color:#1db954;box-shadow:0 4px 15px #1db9544d}.filters-section[_ngcontent-%COMP%]{flex-wrap:wrap}.filter-btn[_ngcontent-%COMP%]{background:#282828;border:1px solid #404040;color:#b3b3b3;padding:8px 18px;border-radius:25px;font-size:.85rem;transition:all .2s;cursor:pointer}.filter-btn[_ngcontent-%COMP%]:hover{background:#333;color:#fff}.filter-btn.active[_ngcontent-%COMP%]{background:#1DB954;color:#fff;border-color:#1db954;font-weight:700}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1db954;box-shadow:0 0 10px #1db95433}.search-suggestions[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#282828;border-radius:0 0 12px 12px;margin-top:5px;box-shadow:0 8px 16px #0006;z-index:1002;overflow:hidden;border:1px solid #404040}.suggestion-item[_ngcontent-%COMP%]{padding:12px 20px;display:flex;align-items:center;gap:15px;cursor:pointer;transition:background .2s;border-bottom:1px solid #333}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.buitres-container[_ngcontent-%COMP%]{padding-bottom:5rem}@keyframes _ngcontent-%COMP%_flash-update{0%{transform:scale(1)}50%{transform:scale(1.03);border-color:#1db954;box-shadow:0 0 15px #1db9544d}to{transform:scale(1)}}.animate-flash[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_flash-update .8s ease-out}.suggestion-item[_ngcontent-%COMP%]:hover{background:#333}.create-option[_ngcontent-%COMP%]{background:rgba(29,185,84,.05)}.create-option[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.15)}.suggestion-avatar[_ngcontent-%COMP%]{width:35px;height:35px;background:#181818;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem}.suggestion-avatar[_ngcontent-%COMP%]   .male[_ngcontent-%COMP%]{color:#519df5}.suggestion-avatar[_ngcontent-%COMP%]   .female[_ngcontent-%COMP%]{color:#f551a3}.suggestion-name[_ngcontent-%COMP%]{font-weight:500;color:#fff}.people-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px}.person-card[_ngcontent-%COMP%]{background:#181818;border-radius:12px;padding:20px;display:flex;flex-direction:column;align-items:center;text-align:center;transition:transform .3s ease,background .3s ease;cursor:pointer;border:1px solid transparent}.person-card[_ngcontent-%COMP%]:hover{background:#282828;transform:translateY(-5px);border-color:#404040}.person-img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:#222;margin-bottom:10px;border:2px solid #333}.gender-avatar[_ngcontent-%COMP%]{font-size:2.5rem}.gender-avatar.male[_ngcontent-%COMP%]{color:#519df5}.gender-avatar.female[_ngcontent-%COMP%]{color:#f551a3}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#282828;padding:30px;border-radius:15px;width:90%;max-width:500px;color:#fff}.custom-radio[_ngcontent-%COMP%]{background:#333;padding:10px 20px;border-radius:10px;cursor:pointer;transition:background .2s}.custom-radio[_ngcontent-%COMP%]:hover{background:#444}.custom-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:#1db954;font-weight:700}.selecting-merge[_ngcontent-%COMP%]{border-color:#1db954!important;box-shadow:0 0 15px #1db9544d;animation:_ngcontent-%COMP%_pulse-border 2s infinite}@keyframes _ngcontent-%COMP%_pulse-border{0%{box-shadow:0 0 #1db95466}70%{box-shadow:0 0 0 10px #1db95400}to{box-shadow:0 0 #1db95400}}.merge-banner[_ngcontent-%COMP%]{background:rgba(29,185,84,.1);border:1px solid #1DB954;border-radius:12px}.data-acceptance-container[_ngcontent-%COMP%]{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);transition:all .3s ease;border-radius:12px}.data-acceptance-container[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.06);border-color:#ffffff26}.data-acceptance-container[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{background-color:transparent;border:2px solid rgba(255,255,255,.2)}.data-acceptance-container[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#1db954;border-color:#1db954;box-shadow:0 0 10px #1db95466}.data-acceptance-container[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #1db95440;border-color:#1db954}.data-acceptance-container[_ngcontent-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.google-btn-wrapper[_ngcontent-%COMP%]{transition:all .4s cubic-bezier(.4,0,.2,1);position:relative}.google-btn-wrapper[_ngcontent-%COMP%]:after{content:attr(title);position:absolute;bottom:-25px;left:50%;transform:translate(-50%);font-size:.75rem;color:#ff4d4d;white-space:nowrap;opacity:0;transition:opacity .3s ease;pointer-events:none}.google-btn-wrapper[style*="pointer-events: none"][_ngcontent-%COMP%]:hover:after{opacity:1}']})}return i})()},3888:(F,b,d)=>{d.d(b,{b:()=>M,E:()=>C});var h=d(8359);class v extends h.yU{constructor(o,s){super()}schedule(o,s=0){return this}}const _={setInterval(g,o,...s){const{delegate:c}=_;return c?.setInterval?c.setInterval(g,o,...s):setInterval(g,o,...s)},clearInterval(g){const{delegate:o}=_;return(o?.clearInterval||clearInterval)(g)},delegate:void 0};var k=d(7908);const x={now:()=>(x.delegate||Date).now(),delegate:void 0};class m{constructor(o,s=m.now){this.schedulerActionCtor=o,this.now=s}schedule(o,s=0,c){return new this.schedulerActionCtor(this,o).schedule(c,s)}}m.now=x.now;const C=new class e extends m{constructor(o,s=m.now){super(o,s),this.actions=[],this._active=!1}flush(o){const{actions:s}=this;if(this._active)return void s.push(o);let c;this._active=!0;do{if(c=o.execute(o.state,o.delay))break}while(o=s.shift());if(this._active=!1,c){for(;o=s.shift();)o.unsubscribe();throw c}}}(class E extends v{constructor(o,s){super(o,s),this.scheduler=o,this.work=s,this.pending=!1}schedule(o,s=0){var c;if(this.closed)return this;this.state=o;const p=this.id,f=this.scheduler;return null!=p&&(this.id=this.recycleAsyncId(f,p,s)),this.pending=!0,this.delay=s,this.id=null!==(c=this.id)&&void 0!==c?c:this.requestAsyncId(f,this.id,s),this}requestAsyncId(o,s,c=0){return _.setInterval(o.flush.bind(o,this),c)}recycleAsyncId(o,s,c=0){if(null!=c&&this.delay===c&&!1===this.pending)return s;null!=s&&_.clearInterval(s)}execute(o,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const c=this._execute(o,s);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,s){let p,c=!1;try{this.work(o)}catch(f){c=!0,p=f||new Error("Scheduled action threw falsy error")}if(c)return this.unsubscribe(),p}unsubscribe(){if(!this.closed){const{id:o,scheduler:s}=this,{actions:c}=s;this.work=this.state=this.scheduler=null,this.pending=!1,(0,k.o)(c,this),null!=o&&(this.id=this.recycleAsyncId(s,o,null)),this.delay=null,super.unsubscribe()}}}),M=C}}]);