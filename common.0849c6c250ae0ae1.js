"use strict";(self.webpackChunkuptc_music=self.webpackChunkuptc_music||[]).push([[76],{8440:(m,c,a)=>{a.d(c,{m:()=>h});var p=a(1626),u=a(5321),o=a(5312),d=a(6354),l=a(6276),r=a(3205);let h=(()=>{class i{http;authService;supabase;apiUrl=`${o.c.apiUrl}/api/buitres`;constructor(t,s){this.http=t,this.authService=s,this.supabase=(0,u.UU)(o.c.supabaseUrl,o.c.supabaseKey)}getSongNotes(t){return this.http.get(`${this.apiUrl}/people/${t}/songs`,{headers:this.getAuthHeaders()})}addSongNote(t,s,n,g="song",_=""){return this.http.post(`${this.apiUrl}/people/${t}/songs`,{track_data:s,dedication:n,type:g,bg_color:_},{headers:this.getAuthHeaders()})}deleteSongNote(t){return this.http.delete(`${this.apiUrl}/songs/${t}`,{headers:this.getAuthHeaders()})}searchSongs(t){return this.http.get(`${o.c.apiUrl}/api/search`,{params:{q:t},headers:this.getAuthHeaders()})}getAuthHeaders(){const t=this.authService.getBuitresToken(),s={};return t&&(s.Authorization=`Bearer ${t}`),s}getPeople(t="",s="recent"){let n=(new p.Nl).set("search",t).set("sortBy",s);return this.http.get(`${this.apiUrl}/people`,{params:n,headers:this.getAuthHeaders()})}getTotalPeopleCount(){return this.http.get(`${this.apiUrl}/people/count`,{headers:this.getAuthHeaders()}).pipe((0,d.T)(t=>t.count))}getPersonById(t){return this.http.get(`${this.apiUrl}/people/${t}`,{headers:this.getAuthHeaders()})}createPerson(t,s,n,g=""){return this.http.post(`${this.apiUrl}/people`,{name:t,description:s,gender:n,email:g},{headers:this.getAuthHeaders()})}updatePerson(t,s){return this.http.patch(`${this.apiUrl}/people/${t}`,s,{headers:this.getAuthHeaders()})}deletePerson(t){return this.http.delete(`${this.apiUrl}/people/${t}`,{headers:this.getAuthHeaders()})}getDetails(t){return this.http.get(`${this.apiUrl}/people/${t}/details`,{headers:this.getAuthHeaders()})}addOrIncrementDetail(t,s,n){return this.http.post(`${this.apiUrl}/people/${t}/details`,{content:s,fingerprint:n},{headers:this.getAuthHeaders()})}deleteDetail(t){return this.http.delete(`${this.apiUrl}/details/${t}`,{headers:this.getAuthHeaders()})}getComments(t){return this.http.get(`${this.apiUrl}/people/${t}/comments`,{headers:this.getAuthHeaders()})}addComment(t,s,n){return this.http.post(`${this.apiUrl}/people/${t}/comments`,{content:s,fingerprint:n},{headers:this.getAuthHeaders()})}deleteComment(t){return this.http.delete(`${this.apiUrl}/comments/${t}`,{headers:this.getAuthHeaders()})}likeComment(t,s){return this.http.post(`${this.apiUrl}/comments/${t}/like`,{fingerprint:s},{headers:this.getAuthHeaders()})}votePerson(t,s,n){return this.http.post(`${this.apiUrl}/people/${t}/vote`,{type:s,fingerprint:n},{headers:this.getAuthHeaders()})}mergePersons(t,s){return this.http.post(`${this.apiUrl}/merge`,{keepId:t,removeId:s},{headers:this.getAuthHeaders()})}subscribeToChanges(t,s){return this.supabase.channel(`public:${t}`).on("postgres_changes",{event:"*",schema:"public",table:t},s).subscribe()}uploadImage(t){const s=new FormData;return s.append("file",t),this.http.post(`${o.c.apiUrl}/api/upload`,s)}static \u0275fac=function(s){return new(s||i)(l.KVO(p.Qq),l.KVO(r.u))};static \u0275prov=l.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},5154:(m,c,a)=>{a.d(c,{u:()=>r});var p=a(8141),u=a(5312),o=a(6276),d=a(1626),l=a(3205);let r=(()=>{class h{http;authService;apiUrl=u.c.apiUrl;likedItems=new Set;constructor(e,t){this.http=e,this.authService=t,this.loadLikedItemsFromStorage()}loadLikedItemsFromStorage(){const e=localStorage.getItem("discussion_likes");e&&(this.likedItems=new Set(JSON.parse(e)))}saveLikedItemsToStorage(){localStorage.setItem("discussion_likes",JSON.stringify([...this.likedItems]))}getItemKey(e,t){return`${e}:${t}`}hasUserLiked(e,t){return this.likedItems.has(this.getItemKey(e,t))}updateLikeStatus(e,t,s){const n=this.getItemKey(e,t);s?this.likedItems.add(n):this.likedItems.delete(n),this.saveLikedItemsToStorage()}getThreads(e="updated_at",t="desc"){return this.http.get(`${this.apiUrl}/api/discussion/threads?sort=${e}&order=${t}`)}getThread(e){return this.http.get(`${this.apiUrl}/api/discussion/threads/${e}`)}createThread(e,t,s){return this.http.post(`${this.apiUrl}/api/discussion/threads`,{title:e,content:t,image_url:s},{headers:this.authService.getAuthHeaders()})}uploadImage(e){const t=new FormData;return t.append("file",e),this.http.post(`${u.c.apiUrl}/api/upload`,t)}addComment(e,t,s){return this.http.post(`${this.apiUrl}/api/discussion/threads/${e}/comments`,{content:t,parent_comment_id:s})}likeThread(e){return this.http.post(`${this.apiUrl}/api/discussion/like`,{thread_id:e}).pipe((0,p.M)(t=>{this.updateLikeStatus("thread",e,"liked"===t.action)}))}likeComment(e){return this.http.post(`${this.apiUrl}/api/discussion/like`,{comment_id:e}).pipe((0,p.M)(t=>{this.updateLikeStatus("comment",e,"liked"===t.action)}))}static \u0275fac=function(t){return new(t||h)(o.KVO(d.Qq),o.KVO(l.u))};static \u0275prov=o.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},2915:(m,c,a)=>{a.d(c,{R:()=>o});var p=a(6276),u=a(345);let o=(()=>{class d{title;meta;constructor(r,h){this.title=r,this.meta=h}updateTitle(r){this.title.setTitle(`${r} | MusicaUPTC`)}updateTags(r){r.forEach(h=>{this.meta.updateTag(h)})}updatePageData(r,h,i){this.updateTitle(r);const e=[{name:"description",content:h},{property:"og:title",content:r},{property:"og:description",content:h},{property:"twitter:card",content:"summary_large_image"},{property:"twitter:title",content:r},{property:"twitter:description",content:h}];i&&(e.push({property:"og:image",content:i}),e.push({property:"twitter:image",content:i})),this.updateTags(e)}static \u0275fac=function(h){return new(h||d)(p.KVO(u.hE),p.KVO(u.W8))};static \u0275prov=p.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},7483:(m,c,a)=>{a.d(c,{l:()=>l});var p=a(5312),u=a(6276),o=a(1626),d=a(3205);let l=(()=>{class r{http;authService;apiUrl=p.c.apiUrl;constructor(i,e){this.http=i,this.authService=e}getSchedules(){return this.http.get(`${this.apiUrl}/api/schedules`)}updateSchedules(i){const e=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/api/schedules`,i,{headers:e})}static \u0275fac=function(e){return new(e||r)(u.KVO(o.Qq),u.KVO(d.u))};static \u0275prov=u.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},152:(m,c,a)=>{a.d(c,{B:()=>d});var p=a(3888),u=a(9974),o=a(4360);function d(l,r=p.E){return(0,u.N)((h,i)=>{let e=null,t=null,s=null;const n=()=>{if(e){e.unsubscribe(),e=null;const _=t;t=null,i.next(_)}};function g(){const _=s+l,E=r.now();if(E<_)return e=this.schedule(void 0,_-E),void i.add(e);n()}h.subscribe((0,o._)(i,_=>{t=_,s=r.now(),e||(e=r.schedule(g,l),i.add(e))},()=>{n(),i.complete()},void 0,()=>{t=e=null}))})}}}]);