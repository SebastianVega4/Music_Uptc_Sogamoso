(self.webpackChunkuptc_music=self.webpackChunkuptc_music||[]).push([[792],{731:(Qn,We,tt)=>{"use strict";function Se(n){return"function"==typeof n}function lt(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Dt=lt(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function kt(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class we{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Se(r))try{r()}catch(o){e=o instanceof Dt?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{ye(o)}catch(s){e=e??[],s instanceof Dt?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Dt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ye(e);else{if(e instanceof we){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&kt(t,e)}remove(e){const{_finalizers:t}=this;t&&kt(t,e),e instanceof we&&e._removeParent(this)}}we.EMPTY=(()=>{const n=new we;return n.closed=!0,n})();const W=we.EMPTY;function Y(n){return n instanceof we||n&&"closed"in n&&Se(n.remove)&&Se(n.add)&&Se(n.unsubscribe)}function ye(n){Se(n)?n():n.unsubscribe()}const Re={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ke={setTimeout(n,e,...t){const{delegate:r}=Ke;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ke;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ne(n){Ke.setTimeout(()=>{const{onUnhandledError:e}=Re;if(!e)throw n;e(n)})}function Qe(){}const rn=sn("C",void 0,void 0);function sn(n,e,t){return{kind:n,value:e,error:t}}let Je=null;function vt(n){if(Re.useDeprecatedSynchronousErrorHandling){const e=!Je;if(e&&(Je={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Je;if(Je=null,t)throw r}}else n()}class Or extends we{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Y(e)&&e.add(this)):this.destination=op}static create(e,t,r){return new qr(e,t,r)}next(e){this.isStopped?la(function dr(n){return sn("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?la(function on(n){return sn("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?la(rn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const kn=Function.prototype.bind;function ua(n,e){return kn.call(n,e)}class Bi{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){li(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){li(r)}else li(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){li(t)}}}class qr extends Or{constructor(e,t,r){let i;if(super(),Se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Re.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ua(e.next,o),error:e.error&&ua(e.error,o),complete:e.complete&&ua(e.complete,o)}):i=e}this.destination=new Bi(i)}}function li(n){Re.useDeprecatedSynchronousErrorHandling?function qt(n){Re.useDeprecatedSynchronousErrorHandling&&Je&&(Je.errorThrown=!0,Je.error=n)}(n):Ne(n)}function la(n,e){const{onStoppedNotification:t}=Re;t&&Ke.setTimeout(()=>t(n,e))}const op={closed:!0,next:Qe,error:function Xy(n){throw n},complete:Qe},Ec="function"==typeof Symbol&&Symbol.observable||"@@observable";function Pi(n){return n}function Ql(n){return 0===n.length?Pi:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Ct=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function up(n){return n&&n instanceof Or||function cp(n){return n&&Se(n.next)&&Se(n.error)&&Se(n.complete)}(n)&&Y(n)}(t)?t:new qr(t,r,i);return vt(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ap(r))((i,o)=>{const s=new qr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ec](){return this}pipe(...t){return Ql(t)(this)}toPromise(t){return new(t=ap(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function ap(n){var e;return null!==(e=n??Re.Promise)&&void 0!==e?e:Promise}const Zy=lt(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class n extends Ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new G(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Zy}next(t){vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?W:(this.currentObservers=null,o.push(t),new we(()=>{this.currentObservers=null,kt(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new Ct;return t.source=this,t}}return n.create=(e,t)=>new G(e,t),n})();class G extends ${constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:W}}function J(n){return Se(n?.lift)}function z(n){return e=>{if(J(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(n,e,t,r,i){return new ce(n,e,t,r,i)}class ce extends Or{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ue(n,e){return z((t,r)=>{let i=0;t.subscribe(ee(r,o=>{r.next(n.call(e,o,i++))}))})}var re=tt(215);const Tn=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ue(n){return Se(n?.then)}function Ut(n){return Se(n[Ec])}function vn(n){return Symbol.asyncIterator&&Se(n?.[Symbol.asyncIterator])}function ds(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Jn=function Tt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function xr(n){return Se(n?.[Jn])}function di(n){return(0,re.__asyncGenerator)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,re.__await)(t.read());if(i)return yield(0,re.__await)(void 0);yield yield(0,re.__await)(r)}}finally{t.releaseLock()}})}function Hi(n){return Se(n?.getReader)}function Gr(n){if(n instanceof Ct)return n;if(null!=n){if(Ut(n))return function w8(n){return new Ct(e=>{const t=n[Ec]();if(Se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tn(n))return function E8(n){return new Ct(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ue(n))return function I8(n){return new Ct(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ne)})}(n);if(vn(n))return FS(n);if(xr(n))return function T8(n){return new Ct(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Hi(n))return function P8(n){return FS(di(n))}(n)}throw ds(n)}function FS(n){return new Ct(e=>{(function M8(n,e){var t,r,i,o;return(0,re.__awaiter)(this,void 0,void 0,function*(){try{for(t=(0,re.__asyncValues)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function bo(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Rn(n,e,t=1/0){return Se(e)?Rn((r,i)=>ue((o,s)=>e(r,o,i,s))(Gr(n(r,i))),t):("number"==typeof e&&(t=e),z((r,i)=>function A8(n,e,t,r,i,o,s,a){const c=[];let u=0,l=0,h=!1;const f=()=>{h&&!c.length&&!u&&e.complete()},g=C=>u<r?b(C):c.push(C),b=C=>{o&&e.next(C),u++;let I=!1;Gr(t(C,l++)).subscribe(ee(e,A=>{i?.(A),o?g(A):e.next(A)},()=>{I=!0},void 0,()=>{if(I)try{for(u--;c.length&&u<r;){const A=c.shift();s?bo(e,s,()=>b(A)):b(A)}f()}catch(A){e.error(A)}}))};return n.subscribe(ee(e,g,()=>{h=!0,f()})),()=>{a?.()}}(r,i,n,t)))}function Ic(n=1/0){return Rn(Pi,n)}const zi=new Ct(n=>n.complete());function VS(n){return n&&Se(n.schedule)}function ev(n){return n[n.length-1]}function LS(n){return Se(ev(n))?n.pop():void 0}function Jl(n){return VS(ev(n))?n.pop():void 0}function lp(n,e=0){return z((t,r)=>{t.subscribe(ee(r,i=>bo(r,n,()=>r.next(i),e),()=>bo(r,n,()=>r.complete(),e),i=>bo(r,n,()=>r.error(i),e)))})}function dp(n,e=0){return z((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function US(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ct(t=>{bo(t,e,()=>{const r=n[Symbol.asyncIterator]();bo(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function bn(n,e){return e?function F8(n,e){if(null!=n){if(Ut(n))return function x8(n,e){return Gr(n).pipe(dp(e),lp(e))}(n,e);if(Tn(n))return function k8(n,e){return new Ct(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ue(n))return function D8(n,e){return Gr(n).pipe(dp(e),lp(e))}(n,e);if(vn(n))return US(n,e);if(xr(n))return function R8(n,e){return new Ct(t=>{let r;return bo(t,e,()=>{r=n[Jn](),bo(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>Se(r?.return)&&r.return()})}(n,e);if(Hi(n))return function N8(n,e){return US(di(n),e)}(n,e)}throw ds(n)}(n,e):Gr(n)}class Pn extends ${constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Me(...n){return bn(n,Jl(n))}function jS(n={}){const{connector:e=(()=>new $),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,u=0,l=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),s=c=void 0,l=h=!1},b=()=>{const C=s;g(),C?.unsubscribe()};return z((C,I)=>{u++,!h&&!l&&f();const A=c=c??e();I.add(()=>{u--,0===u&&!h&&!l&&(a=tv(b,i))}),A.subscribe(I),!s&&u>0&&(s=new qr({next:M=>A.next(M),error:M=>{h=!0,f(),a=tv(g,t,M),A.error(M)},complete:()=>{l=!0,f(),a=tv(g,r),A.complete()}}),Gr(C).subscribe(s))})(o)}}function tv(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new qr({next:()=>{r.unsubscribe(),n()}});return Gr(e(...t)).subscribe(r)}function hr(n,e){return z((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(ee(r,c=>{i?.unsubscribe();let u=0;const l=o++;Gr(n(c,l)).subscribe(i=ee(r,h=>r.next(e?e(c,h,l,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function U8(n,e){return n===e}const hp=lt(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Co(n,e){return z((t,r)=>{let i=0;t.subscribe(ee(r,o=>n.call(e,o,i++)&&r.next(o)))})}function hs(n){return n<=0?()=>zi:z((e,t)=>{let r=0;e.subscribe(ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function fp(n){return z((e,t)=>{let r=!1;e.subscribe(ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $S(n=j8){return z((e,t)=>{let r=!1;e.subscribe(ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function j8(){return new hp}function wo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Co((i,o)=>n(i,o,r)):Pi,hs(1),t?fp(e):$S(()=>new hp))}function pt(n){for(let e in n)if(n[e]===pt)return e;throw Error("Could not find renamed property on target object.")}function pp(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Cn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Cn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function nv(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const $8=pt({__forward_ref__:pt});function Pt(n){return n.__forward_ref__=Pt,n.toString=function(){return Cn(this())},n}function Fe(n){return rv(n)?n():n}function rv(n){return"function"==typeof n&&n.hasOwnProperty($8)&&n.__forward_ref__===Pt}function iv(n){return n&&!!n.\u0275providers}const BS="https://g.co/ng/security#xss";class oe extends Error{constructor(e,t){super(function Yl(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function je(n){return"string"==typeof n?n:null==n?"":String(n)}function ov(n,e){throw new oe(-201,!1)}function hi(n,e){null==n&&function De(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fi(n){return{providers:n.providers||[],imports:n.imports||[]}}function gp(n){return HS(n,_p)||HS(n,zS)}function HS(n,e){return n.hasOwnProperty(e)?n[e]:null}function mp(n){return n&&(n.hasOwnProperty(sv)||n.hasOwnProperty(Q8))?n[sv]:null}const _p=pt({\u0275prov:pt}),sv=pt({\u0275inj:pt}),zS=pt({ngInjectableDef:pt}),Q8=pt({ngInjectorDef:pt});var Ye=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ye||{});let av;function Dr(n){const e=av;return av=n,e}function GS(n,e,t){const r=gp(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ye.Optional?null:void 0!==e?e:void ov(Cn(n))}const Mt=globalThis;class _e{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Xl={},hv="__NG_DI_FLAG__",yp="ngTempTokenPath",X8=/\n/gm,KS="__source";let Tc;function fs(n){const e=Tc;return Tc=n,e}function tH(n,e=Ye.Default){if(void 0===Tc)throw new oe(-203,!1);return null===Tc?GS(n,void 0,e):Tc.get(n,e&Ye.Optional?null:void 0,e)}function ve(n,e=Ye.Default){return(function qS(){return av}()||tH)(Fe(n),e)}function pe(n,e=Ye.Default){return ve(n,vp(e))}function vp(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function fv(n){const e=[];for(let t=0;t<n.length;t++){const r=Fe(n[t]);if(Array.isArray(r)){if(0===r.length)throw new oe(900,!1);let i,o=Ye.Default;for(let s=0;s<r.length;s++){const a=r[s],c=nH(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(ve(i,o))}else e.push(ve(r))}return e}function Zl(n,e){return n[hv]=e,n.prototype[hv]=e,n}function nH(n){return n[hv]}function Eo(n){return{toString:n}.toString()}var bp=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(bp||{}),Mi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Mi||{});const qi={},at=[],Cp=pt({\u0275cmp:pt}),pv=pt({\u0275dir:pt}),gv=pt({\u0275pipe:pt}),JS=pt({\u0275mod:pt}),Io=pt({\u0275fac:pt}),ed=pt({__NG_ELEMENT_ID__:pt}),YS=pt({__NG_ENV_ID__:pt});function XS(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function mv(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];eO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function ZS(n){return 3===n||4===n||6===n}function eO(n){return 64===n.charCodeAt(0)}function td(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||tO(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function tO(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const nO="ng-template";function oH(n,e,t){let r=0,i=!0;for(;r<n.length;){let o=n[r++];if("string"==typeof o&&i){const s=n[r++];if(t&&"class"===o&&-1!==XS(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function rO(n){return 4===n.type&&n.value!==nO}function sH(n,e,t){return e===(4!==n.type||t?n.value:nO)}function aH(n,e,t){let r=4;const i=n.attrs||[],o=function lH(n){for(let e=0;e<n.length;e++)if(ZS(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!sH(n,c,t)||""===c&&1===e.length){if(Ai(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!oH(n.attrs,u,t)){if(Ai(r))return!1;s=!0}continue}const h=cH(8&r?"class":c,i,rO(n),t);if(-1===h){if(Ai(r))return!1;s=!0;continue}if(""!==u){let f;f=h>o?"":i[h+1].toLowerCase();const g=8&r?f:null;if(g&&-1!==XS(g,u,0)||2&r&&u!==f){if(Ai(r))return!1;s=!0}}}}else{if(!s&&!Ai(r)&&!Ai(c))return!1;if(s&&Ai(c))continue;s=!1,r=c|1&r}}return Ai(r)||s}function Ai(n){return 0==(1&n)}function cH(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function dH(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function iO(n,e,t=!1){for(let r=0;r<e.length;r++)if(aH(n,e[r],t))return!0;return!1}function oO(n,e){return n?":not("+e.trim()+")":e}function fH(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Ai(s)&&(e+=oO(o,i),i=""),r=s,o=o||!Ai(r);t++}return""!==i&&(e+=oO(o,i)),e}function fr(n){return Eo(()=>{const e=aO(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Mi.Emulated,styles:n.styles||at,_:null,schemas:n.schemas||null,tView:null,id:""};cO(t);const r=n.dependencies;return t.directiveDefs=wp(r,!1),t.pipeDefs=wp(r,!0),t.id=function CH(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function _H(n){return it(n)||Nn(n)}function yH(n){return null!==n}function Si(n){return Eo(()=>({type:n.type,bootstrap:n.bootstrap||at,declarations:n.declarations||at,imports:n.imports||at,exports:n.exports||at,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function sO(n,e){if(null==n)return qi;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}function Ve(n){return Eo(()=>{const e=aO(n);return cO(e),e})}function kr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function it(n){return n[Cp]||null}function Nn(n){return n[pv]||null}function pr(n){return n[gv]||null}function Kr(n,e){const t=n[JS]||null;if(!t&&!0===e)throw new Error(`Type ${Cn(n)} does not have '\u0275mod' property.`);return t}function aO(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||qi,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||at,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sO(n.inputs,e),outputs:sO(n.outputs)}}function cO(n){n.features?.forEach(e=>e(n))}function wp(n,e){if(!n)return null;const t=e?pr:_H;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(yH)}const Xt=0,be=1,ze=2,jt=3,Oi=4,nd=5,Yn=6,Mc=7,an=8,ps=9,Ac=10,$e=11,rd=12,uO=13,Sc=14,cn=15,id=16,Oc=17,Gi=18,od=19,lO=20,gs=21,To=22,sd=23,ad=24,Xe=25,_v=1,dO=2,Wi=7,xc=9,cd=10,Fn=11;function Rr(n){return Array.isArray(n)&&"object"==typeof n[_v]}function gr(n){return Array.isArray(n)&&!0===n[_v]}function yv(n){return 0!=(4&n.flags)}function ha(n){return n.componentOffset>-1}function Ip(n){return 1==(1&n.flags)}function xi(n){return!!n.template}function vv(n){return 0!=(512&n[ze])}function fa(n,e){return n.hasOwnProperty(Io)?n[Io]:null}let Vn=null,Tp=!1;function pi(n){const e=Vn;return Vn=n,e}const pO={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function mO(n){if(!ud(n)||n.dirty){if(!n.producerMustRecompute(n)&&!vO(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function yO(n){n.dirty=!0,function _O(n){if(void 0===n.liveConsumerNode)return;const e=Tp;Tp=!0;try{for(const t of n.liveConsumerNode)t.dirty||yO(t)}finally{Tp=e}}(n),n.consumerMarkedDirty?.(n)}function Cv(n){return n&&(n.nextProducerIndex=0),pi(n)}function wv(n,e){if(pi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ud(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Pp(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vO(n){Dc(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(mO(t),r!==t.version))return!0}return!1}function bO(n){if(Dc(n),ud(n))for(let e=0;e<n.producerNode.length;e++)Pp(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Pp(n,e){if(function wO(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Dc(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Pp(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Dc(i),i.producerIndexOfThis[r]=e}}function ud(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Dc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let EO=null;function PO(n){const e=pi(null);try{return n()}finally{pi(e)}}const MO=()=>{},RH=(()=>({...pO,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:MO}))();class NH{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function gi(){return AO}function AO(n){return n.type.prototype.ngOnChanges&&(n.setInput=VH),FH}function FH(){const n=OO(this),e=n?.current;if(e){const t=n.previous;if(t===qi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function VH(n,e,t,r){const i=this.declaredInputs[t],o=OO(n)||function LH(n,e){return n[SO]=e}(n,{previous:qi,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new NH(c&&c.currentValue,e,a===qi),n[r]=e}gi.ngInherit=!0;const SO="__ngSimpleChanges__";function OO(n){return n[SO]||null}const Ki=function(n,e,t){};function At(n){for(;Array.isArray(n);)n=n[Xt];return n}function Mp(n,e){return At(e[n])}function Nr(n,e){return At(e[n.index])}function kO(n,e){return n.data[e]}function kc(n,e){return n[e]}function Qr(n,e){const t=e[n];return Rr(t)?t:t[Xt]}function _s(n,e){return null==e?null:n[e]}function RO(n){n[Oc]=0}function zH(n){1024&n[ze]||(n[ze]|=1024,FO(n,1))}function NO(n){1024&n[ze]&&(n[ze]&=-1025,FO(n,-1))}function FO(n,e){let t=n[jt];if(null===t)return;t[nd]+=e;let r=t;for(t=t[jt];null!==t&&(1===e&&1===r[nd]||-1===e&&0===r[nd]);)t[nd]+=e,r=t,t=t[jt]}const ke={lFrame:WO(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function UO(){return ke.bindingsEnabled}function Rc(){return null!==ke.skipHydrationRootTNode}function te(){return ke.lFrame.lView}function ot(){return ke.lFrame.tView}function se(n){return ke.lFrame.contextLView=n,n[an]}function ae(n){return ke.lFrame.contextLView=null,n}function Ln(){let n=jO();for(;null!==n&&64===n.type;)n=n.parent;return n}function jO(){return ke.lFrame.currentTNode}function Qi(n,e){const t=ke.lFrame;t.currentTNode=n,t.isParent=e}function Mv(){return ke.lFrame.isParent}function mr(){const n=ke.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Nc(){return ke.lFrame.bindingIndex++}function Mo(n){const e=ke.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nz(n,e){const t=ke.lFrame;t.bindingIndex=t.bindingRootIndex=n,Sv(e)}function Sv(n){ke.lFrame.currentDirectiveIndex=n}function zO(){return ke.lFrame.currentQueryIndex}function xv(n){ke.lFrame.currentQueryIndex=n}function iz(n){const e=n[be];return 2===e.type?e.declTNode:1===e.type?n[Yn]:null}function qO(n,e,t){if(t&Ye.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&Ye.Host||(i=iz(o),null===i||(o=o[Sc],10&i.type))););if(null===i)return!1;e=i,n=o}const r=ke.lFrame=GO();return r.currentTNode=e,r.lView=n,!0}function Dv(n){const e=GO(),t=n[be];ke.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function GO(){const n=ke.lFrame,e=null===n?null:n.child;return null===e?WO(n):e}function WO(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function KO(){const n=ke.lFrame;return ke.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const QO=KO;function kv(){const n=KO();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _r(){return ke.lFrame.selectedIndex}function pa(n){ke.lFrame.selectedIndex=n}function Gt(){const n=ke.lFrame;return kO(n.tView,n.selectedIndex)}function JO(){return ke.lFrame.currentNamespace}let YO=!0;function Ap(){return YO}function ys(n){YO=n}function Sp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=l&&(n.destroyHooks??=[]).push(t,l)}}function Op(n,e,t){XO(n,e,3,t)}function xp(n,e,t,r){(3&n[ze])===t&&XO(n,e,t,r)}function Rv(n,e){let t=n[ze];(3&t)===e&&(t&=8191,t+=1,n[ze]=t)}function XO(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Oc]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Oc]+=65536),(a<o||-1==o)&&(hz(n,t,e,c),n[Oc]=(4294901760&n[Oc])+c+2),c++}function ZO(n,e){Ki(4,n,e);const t=pi(null);try{e.call(n)}finally{pi(t),Ki(5,n,e)}}function hz(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[ze]>>13<n[Oc]>>16&&(3&n[ze])===e&&(n[ze]+=8192,ZO(a,o)):ZO(a,o)}const Fc=-1;class dd{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Fv(n){return n!==Fc}function hd(n){return 32767&n}function fd(n,e){let t=function mz(n){return n>>16}(n),r=e;for(;t>0;)r=r[Sc],t--;return r}let Vv=!0;function Dp(n){const e=Vv;return Vv=n,e}const ex=255,tx=5;let _z=0;const Ji={};function kp(n,e){const t=nx(n,e);if(-1!==t)return t;const r=e[be];r.firstCreatePass&&(n.injectorIndex=e.length,Lv(r.data,n),Lv(e,null),Lv(r.blueprint,null));const i=Rp(n,e),o=n.injectorIndex;if(Fv(i)){const s=hd(i),a=fd(i,e),c=a[be].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Lv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nx(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Rp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=ux(i),null===r)return Fc;if(t++,i=i[Sc],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Fc}function Uv(n,e,t){!function yz(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ed)&&(r=t[ed]),null==r&&(r=t[ed]=_z++);const i=r&ex;e.data[n+(i>>tx)]|=1<<i}(n,e,t)}function rx(n,e,t){if(t&Ye.Optional||void 0!==n)return n;ov()}function ix(n,e,t,r){if(t&Ye.Optional&&void 0===r&&(r=null),!(t&(Ye.Self|Ye.Host))){const i=n[ps],o=Dr(void 0);try{return i?i.get(e,r,t&Ye.Optional):GS(e,r,t&Ye.Optional)}finally{Dr(o)}}return rx(r,0,t)}function ox(n,e,t,r=Ye.Default,i){if(null!==n){if(2048&e[ze]&&!(r&Ye.Self)){const s=function Iz(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[ze]&&!(512&s[ze]);){const a=sx(o,s,t,r|Ye.Self,Ji);if(a!==Ji)return a;let c=o.parent;if(!c){const u=s[lO];if(u){const l=u.get(t,Ji,r);if(l!==Ji)return l}c=ux(s),s=s[Sc]}o=c}return i}(n,e,t,r,Ji);if(s!==Ji)return s}const o=sx(n,e,t,r,Ji);if(o!==Ji)return o}return ix(e,t,r,i)}function sx(n,e,t,r,i){const o=function Cz(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ed)?n[ed]:void 0;return"number"==typeof e?e>=0?e&ex:Ez:e}(t);if("function"==typeof o){if(!qO(e,n,r))return r&Ye.Host?rx(i,0,r):ix(e,t,r,i);try{let s;if(s=o(r),null!=s||r&Ye.Optional)return s;ov()}finally{QO()}}else if("number"==typeof o){let s=null,a=nx(n,e),c=Fc,u=r&Ye.Host?e[cn][Yn]:null;for((-1===a||r&Ye.SkipSelf)&&(c=-1===a?Rp(n,e):e[a+8],c!==Fc&&cx(r,!1)?(s=e[be],a=hd(c),e=fd(c,e)):a=-1);-1!==a;){const l=e[be];if(ax(o,a,l.data)){const h=bz(a,e,t,s,r,u);if(h!==Ji)return h}c=e[a+8],c!==Fc&&cx(r,e[be].data[a+8]===u)&&ax(o,a,e)?(s=l,a=hd(c),e=fd(c,e)):a=-1}}return i}function bz(n,e,t,r,i,o){const s=e[be],a=s.data[n+8],l=Np(a,s,t,null==r?ha(a)&&Vv:r!=s&&0!=(3&a.type),i&Ye.Host&&o===a);return null!==l?ga(e,s,l,a):Ji}function Np(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,l=o>>20,f=i?a+l:n.directiveEnd;for(let g=r?a:a+l;g<f;g++){const b=s[g];if(g<c&&t===b||g>=c&&b.type===t)return g}if(i){const g=s[c];if(g&&xi(g)&&g.type===t)return c}return null}function ga(n,e,t,r){let i=n[t];const o=e.data;if(function fz(n){return n instanceof dd}(i)){const s=i;s.resolving&&function B8(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new oe(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ft(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():je(n)}(o[t]));const a=Dp(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Dr(s.injectImpl):null;qO(n,r,Ye.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function dz(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=AO(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==u&&Dr(u),Dp(a),s.resolving=!1,QO()}}return i}function ax(n,e,t){return!!(t[e+(n>>tx)]&1<<n)}function cx(n,e){return!(n&Ye.Self||n&Ye.Host&&e)}class yr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ox(this._tNode,this._lView,e,vp(r),t)}}function Ez(){return new yr(Ln(),te())}function Un(n){return Eo(()=>{const e=n.prototype.constructor,t=e[Io]||jv(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Io]||jv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function jv(n){return rv(n)?()=>{const e=jv(Fe(n));return e&&e()}:fa(n)}function ux(n){const e=n[be],t=e.type;return 2===t?e.declTNode:1===t?n[Yn]:null}const Lc="__parameters__";function jc(n,e,t){return Eo(()=>{const r=function $v(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,u,l){const h=c.hasOwnProperty(Lc)?c[Lc]:Object.defineProperty(c,Lc,{value:[]})[Lc];for(;h.length<=l;)h.push(null);return(h[l]=h[l]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Bc(n,e){n.forEach(t=>Array.isArray(t)?Bc(t,e):e(t))}function dx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Vp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Jr(n,e,t){let r=Hc(n,e);return r>=0?n[1|r]=t:(r=~r,function xz(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Bv(n,e){const t=Hc(n,e);if(t>=0)return n[1|t]}function Hc(n,e){return function hx(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const vr=Zl(jc("Optional"),8),Up=Zl(jc("SkipSelf"),4),qc="ngSkipHydration";function wx(n){const e=qc.toLowerCase(),t=n.mergedAttrs;if(null===t)return!1;for(let r=0;r<t.length;r+=2){const i=t[r];if("number"==typeof i)return!1;if("string"==typeof i&&i.toLowerCase()===e)return!0}return!1}function Ex(n){return n.hasAttribute(qc)}function zp(n){return 128==(128&n.flags)}var vs=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(vs||{});const Xz=/^>|^->|<!--|-->|--!>|<!-$/g,Zz=/(<|>)/g,e9="\u200b$1\u200b";const Wv=new Map;let t9=0;const Qv="__ngContext__";function Xn(n,e){Rr(e)?(n[Qv]=e[od],function r9(n){Wv.set(n[od],n)}(e)):n[Qv]=e}let Jv;function Yv(n,e){return Jv(n,e)}function vd(n){const e=n[jt];return gr(e)?e[jt]:e}function Dx(n){return Rx(n[rd])}function kx(n){return Rx(n[Oi])}function Rx(n){for(;null!==n&&!gr(n);)n=n[Oi];return n}function Gc(n,e,t,r,i){if(null!=r){let o,s=!1;gr(r)?o=r:Rr(r)&&(s=!0,r=r[Xt]);const a=At(r);0===n&&null!==t?null==i?Lx(e,t,a):ma(e,t,a,i||null,!0):1===n&&null!==t?ma(e,t,a,i||null,!0):2===n?Yp(e,a,s):3===n&&e.destroyNode(a),null!=o&&function T9(n,e,t,r,i){const o=t[Wi];o!==At(t)&&Gc(e,n,r,o,i);for(let a=Fn;a<t.length;a++){const c=t[a];Cd(c[be],c,n,e,r,o)}}(e,n,o,t,i)}}function Gp(n,e){return n.createText(e)}function Xv(n,e){return n.createComment(function Ix(n){return n.replace(Xz,e=>e.replace(Zz,e9))}(e))}function Wp(n,e,t){return n.createElement(e,t)}function Fx(n,e){const t=n[xc],r=t.indexOf(e);NO(e),t.splice(r,1)}function Kp(n,e){if(n.length<=Fn)return;const t=Fn+e,r=n[t];if(r){const i=r[id];null!==i&&i!==n&&Fx(i,r),e>0&&(n[t-1][Oi]=r[Oi]);const o=Vp(n,Fn+e);!function p9(n,e){Cd(n,e,e[$e],2,null,null),e[Xt]=null,e[Yn]=null}(r[be],r);const s=o[Gi];null!==s&&s.detachView(o[be]),r[jt]=null,r[Oi]=null,r[ze]&=-129}return r}function Zv(n,e){if(!(256&e[ze])){const t=e[$e];e[sd]&&bO(e[sd]),e[ad]&&bO(e[ad]),t.destroyNode&&Cd(n,e,t,3,null,null),function _9(n){let e=n[rd];if(!e)return eb(n[be],n);for(;e;){let t=null;if(Rr(e))t=e[rd];else{const r=e[Fn];r&&(t=r)}if(!t){for(;e&&!e[Oi]&&e!==n;)Rr(e)&&eb(e[be],e),e=e[jt];null===e&&(e=n),Rr(e)&&eb(e[be],e),t=e&&e[Oi]}e=t}}(e)}}function eb(n,e){if(!(256&e[ze])){e[ze]&=-129,e[ze]|=256,function C9(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof dd)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Ki(4,a,c);try{c.call(a)}finally{Ki(5,a,c)}}else{Ki(4,i,o);try{o.call(i)}finally{Ki(5,i,o)}}}}}(n,e),function b9(n,e){const t=n.cleanup,r=e[Mc];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[Mc]=null);const i=e[gs];if(null!==i){e[gs]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[be].type&&e[$e].destroy();const t=e[id];if(null!==t&&gr(e[jt])){t!==e[jt]&&Fx(t,e);const r=e[Gi];null!==r&&r.detachView(n)}!function i9(n){Wv.delete(n[od])}(e)}}function tb(n,e,t){return function Vx(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Xt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Mi.None||o===Mi.Emulated)return null}return Nr(r,t)}}(n,e.parent,t)}function ma(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Lx(n,e,t){n.appendChild(e,t)}function Ux(n,e,t,r,i){null!==r?ma(n,e,t,r,i):Lx(n,e,t)}function Qp(n,e){return n.parentNode(e)}let nb,sb,Zp,Bx=function $x(n,e,t){return 40&n.type?Nr(n,t):null};function Jp(n,e,t,r){const i=tb(n,r,e),o=e[$e],a=function jx(n,e,t){return Bx(n,e,t)}(r.parent||e[Yn],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)Ux(o,i,t[c],a,!1);else Ux(o,i,t,a,!1);void 0!==nb&&nb(o,r,e,t,i)}function bd(n,e){if(null!==e){const t=e.type;if(3&t)return Nr(e,n);if(4&t)return rb(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return bd(n,r);{const i=n[e.index];return gr(i)?rb(-1,i):At(i)}}if(32&t)return Yv(e,n)()||At(n[e.index]);{const r=zx(n,e);return null!==r?Array.isArray(r)?r[0]:bd(vd(n[cn]),r):bd(n,e.next)}}return null}function zx(n,e){return null!==e?n[cn][Yn].projection[e.projection]:null}function rb(n,e){const t=Fn+n+1;if(t<e.length){const r=e[t],i=r[be].firstChild;if(null!==i)return bd(r,i)}return e[Wi]}function Yp(n,e,t){const r=Qp(n,e);r&&function w9(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}function qx(n){n.textContent=""}function ib(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],c=t.type;if(s&&0===e&&(a&&Xn(At(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)ib(n,e,t.child,r,i,o,!1),Gc(e,n,i,a,o);else if(32&c){const u=Yv(t,r);let l;for(;l=u();)Gc(e,n,i,l,o);Gc(e,n,i,a,o)}else 16&c?Gx(n,e,r,t,i,o):Gc(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Cd(n,e,t,r,i,o){ib(t,r,n.firstChild,e,i,o,!1)}function Gx(n,e,t,r,i,o){const s=t[cn],c=s[Yn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Gc(e,n,i,c[u],o);else{let u=c;const l=s[jt];zp(r)&&(u.flags|=128),ib(n,e,u,l,i,o,!0)}}function Wx(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Kx(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&mv(n,e,r),null!==i&&Wx(n,e,i),null!==o&&function M9(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function Kc(){if(void 0!==sb)return sb;if(typeof document<"u")return document;throw new oe(210,!1)}function Yx(n){return function ab(){if(void 0===Zp&&(Zp=null,Mt.trustedTypes))try{Zp=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zp}()?.createScriptURL(n)||n}class Xx{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${BS})`}}function bs(n){return n instanceof Xx?n.changingThisBreaksApplicationSecurity:n}function wd(n,e){const t=function V9(n){return n instanceof Xx&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${BS})`)}return t===e}const $9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Qc=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Qc||{});function Vr(n){const e=Id();return e?e.sanitize(Qc.URL,n)||"":wd(n,"URL")?bs(n):function cb(n){return(n=String(n)).match($9)?n:"unsafe:"+n}(je(n))}function oD(n){const e=Id();if(e)return Yx(e.sanitize(Qc.RESOURCE_URL,n)||"");if(wd(n,"ResourceURL"))return Yx(bs(n));throw new oe(904,!1)}function Id(){const n=te();return n&&n[Ac].sanitizer}const Jc=new _e("ENVIRONMENT_INITIALIZER"),aD=new _e("INJECTOR",-1),cD=new _e("INJECTOR_DEF_TYPES");class hb{get(e,t=Xl){if(t===Xl){const r=new Error(`NullInjectorError: No provider for ${Cn(e)}!`);throw r.name="NullInjectorError",r}return t}}function Td(n){return{\u0275providers:n}}function uD(...n){return{\u0275providers:lD(0,n),\u0275fromNgModule:!0}}function lD(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return Bc(e,s=>{const a=s;tg(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&dD(i,o),t}function dD(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];fb(i,o=>{e(o,r)})}}function tg(n,e,t,r){if(!(n=Fe(n)))return!1;let i=null,o=mp(n);const s=!o&&it(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=mp(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)tg(u,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Bc(o.imports,l=>{tg(l,e,t,r)&&(u||=[],u.push(l))})}finally{}void 0!==u&&dD(u,e)}if(!a){const u=fa(i)||(()=>new i);e({provide:i,useFactory:u,deps:at},i),e({provide:cD,useValue:i,multi:!0},i),e({provide:Jc,useValue:()=>ve(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=n;fb(c,l=>{e(l,u)})}}}return i!==n&&void 0!==n.providers}function fb(n,e){for(let t of n)iv(t)&&(t=t.\u0275providers),Array.isArray(t)?fb(t,e):e(t)}const eq=pt({provide:String,useValue:pt});function pb(n){return null!==n&&"object"==typeof n&&eq in n}function _a(n){return"function"==typeof n}const gb=new _e("Set Injector scope."),ng={},nq={};let mb;function rg(){return void 0===mb&&(mb=new hb),mb}class Yr{}class Yc extends Yr{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yb(e,s=>this.processProvider(s)),this.records.set(aD,Xc(void 0,this)),i.has("environment")&&this.records.set(Yr,Xc(void 0,this));const o=this.records.get(gb);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cD.multi,at,Ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=fs(this),r=Dr(void 0);try{return e()}finally{fs(t),Dr(r)}}get(e,t=Xl,r=Ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(YS))return e[YS](this);r=vp(r);const o=fs(this),s=Dr(void 0);try{if(!(r&Ye.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function aq(n){return"function"==typeof n||"object"==typeof n&&n instanceof _e}(e)&&gp(e);c=u&&this.injectableDefInScope(u)?Xc(_b(e),ng):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ye.Self?rg():this.parent).get(e,t=r&Ye.Optional&&t===Xl?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[yp]=a[yp]||[]).unshift(Cn(e)),o)throw a;return function rH(n,e,t,r){const i=n[yp];throw e[KS]&&i.unshift(e[KS]),n.message=function iH(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Cn(e);if(Array.isArray(e))i=e.map(Cn).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Cn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(X8,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[yp]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Dr(s),fs(o)}}resolveInjectorInitializers(){const e=fs(this),t=Dr(void 0);try{const i=this.get(Jc.multi,at,Ye.Self);for(const o of i)o()}finally{fs(e),Dr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Cn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(e){let t=_a(e=Fe(e))?e:Fe(e&&e.provide);const r=function iq(n){return pb(n)?Xc(void 0,n.useValue):Xc(pD(n),ng)}(e);if(_a(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Xc(void 0,ng,!0),i.factory=()=>fv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===ng&&(t.value=nq,t.value=t.factory()),"object"==typeof t.value&&t.value&&function sq(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Fe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function _b(n){const e=gp(n),t=null!==e?e.factory:fa(n);if(null!==t)return t;if(n instanceof _e)throw new oe(204,!1);if(n instanceof Function)return function rq(n){const e=n.length;if(e>0)throw function md(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new oe(204,!1);const t=function K8(n){return n&&(n[_p]||n[zS])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new oe(204,!1)}function pD(n,e,t){let r;if(_a(n)){const i=Fe(n);return fa(i)||_b(i)}if(pb(n))r=()=>Fe(n.useValue);else if(function fD(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...fv(n.deps||[]));else if(function hD(n){return!(!n||!n.useExisting)}(n))r=()=>ve(Fe(n.useExisting));else{const i=Fe(n&&(n.useClass||n.provide));if(!function oq(n){return!!n.deps}(n))return fa(i)||_b(i);r=()=>new i(...fv(n.deps))}return r}function Xc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function yb(n,e){for(const t of n)Array.isArray(t)?yb(t,e):t&&iv(t)?yb(t.\u0275providers,e):e(t)}const vb=new _e("AppId",{providedIn:"root",factory:()=>cq}),cq="ng",gD=new _e("Platform Initializer"),So=new _e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mD=new _e("CSP nonce",{providedIn:"root",factory:()=>Kc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),_D=new _e("",{providedIn:"root",factory:()=>new Set});function uq(){const n=new Zc;return"browser"===pe(So)&&(n.store=function lq(n,e){const t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}(Kc(),pe(vb))),n}let Zc=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=Ee({token:n,providedIn:"root",factory:uq})}get(t,r){return void 0!==this.store[t]?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(const t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();const bb="h",Cb="b";var eu=function(n){return n.FirstChild="f",n.NextSibling="n",n}(eu||{});const wb="e",Eb="t",Pd="c",ig="x",tu="r",Ib="i",Tb="n",og="d",Pb="__\u0275nghData__",Md="ngh";let yD=(n,e,t)=>null;function hq(n,e,t=!1){let r=n.getAttribute(Md);if(null==r)return null;const[i,o]=r.split("|");if(r=t?o:i,!r)return null;const s=t?i:o?`|${o}`:"";let a={};if(""!==r){const u=e.get(Zc,null,{optional:!0});null!==u&&(a=u.get(Pb,[])[Number(r)])}const c={data:a,firstChild:n.firstChild??null};return t&&(c.firstChild=n,sg(c,0,n.nextSibling)),s?n.setAttribute(Md,s):n.removeAttribute(Md),c}function Mb(n,e,t=!1){return yD(n,e,t)}function vD(n){let e=n._lView;return 2===e[be].type?null:(vv(e)&&(e=e[Xe]),e)}function sg(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Ab(n,e){return n.segmentHeads?.[e]??null}function bD(n,e){return n.data[Pd]?.[e]??null}function Sb(n,e){const t=bD(n,e)??[];let r=0;for(let i of t)r+=i[tu]*(i[ig]??1);return r}function ag(n,e){if(typeof n.disconnectedNodes>"u"){const t=n.data[og];n.disconnectedNodes=t?new Set(t):null}return!!n.disconnectedNodes?.has(e)}class yq{}class CD{}class bq{resolveComponentFactory(e){throw function vq(n){const e=Error(`No component factory found for ${Cn(n)}.`);return e.ngComponent=n,e}(e)}}let cg=(()=>{class n{static{this.NULL=new bq}}return n})();function Cq(){return nu(Ln(),te())}function nu(n,e){return new Lr(Nr(n,e))}let Lr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Cq}}return n})();function wq(n){return n instanceof Lr?n.nativeElement:n}class ED{}let Oo=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Eq(){const n=te(),t=Qr(Ln().index,n);return(Rr(t)?t:n)[$e]}()}}return n})(),Iq=(()=>{class n{static{this.\u0275prov=Ee({token:n,providedIn:"root",factory:()=>null})}}return n})();class ru{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ID=new ru("16.2.12"),Ob={};function AD(n,e=null,t=null,r){const i=SD(n,e,t,r);return i.resolveInjectorInitializers(),i}function SD(n,e=null,t=null,r,i=new Set){const o=[t||at,uD(n)];return r=r||("object"==typeof n?void 0:Cn(n)),new Yc(o,e||rg(),r||null,i)}let Zn=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Xl}static{this.NULL=new hb}static create(t,r){if(Array.isArray(t))return AD({name:""},r,t,"");{const i=t.name??"";return AD({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ee({token:n,providedIn:"any",factory:()=>ve(aD)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function Db(n){return n.ngOriginalError}class xo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Db(e);for(;t&&Db(t);)t=Db(t);return t||null}}function kb(n){return e=>{setTimeout(n,void 0,e)}}const Wt=class Dq extends ${constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=kb(o),i&&(i=kb(i)),s&&(s=kb(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof we&&e.add(a),a}};function xD(...n){}class ct{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wt(!1),this.onMicrotaskEmpty=new Wt(!1),this.onStable=new Wt(!1),this.onError=new Wt(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function kq(){const n="function"==typeof Mt.requestAnimationFrame;let e=Mt[n?"requestAnimationFrame":"setTimeout"],t=Mt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Fq(n){const e=()=>{!function Nq(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Nb(n),n.isCheckStableRunning=!0,Rb(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Nb(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(function Lq(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,o,s,a);try{return DD(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),kD(n)}},onInvoke:(t,r,i,o,s,a,c)=>{try{return DD(n),t.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),kD(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Nb(n),Rb(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ct.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(ct.isInAngularZone())throw new oe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Rq,xD,xD);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Rq={};function Rb(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Nb(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function DD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kD(n){n._nesting--,Rb(n)}const RD=new _e("",{providedIn:"root",factory:ND});function ND(){const n=pe(ct);let e=!0;return function V8(...n){const e=Jl(n),t=function O8(n,e){return"number"==typeof ev(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Gr(r[0]):Ic(t)(bn(r,e)):zi}(new Ct(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Ct(i=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{ct.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=n.onUnstable.subscribe(()=>{ct.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(jS()))}function FD(n){return n.ownerDocument}function Do(n){return n instanceof Function?n():n}function ou(n){return"browser"===(n??pe(Zn)).get(So)}let Fb=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Ee({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Ad(n){for(;n;){n[ze]|=64;const e=vd(n);if(vv(n)&&!e)return n;n=e}return null}const lg=new _e(""),$D=new _e("",{providedIn:"root",factory:()=>!1});let dg=null;function qD(n,e){return n[e]??KD()}function GD(n,e){const t=KD();t.producerNode?.length&&(n[e]=dg,t.lView=n,dg=WD())}const Wq={...pO,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ad(n.lView)},lView:null};function WD(){return Object.create(Wq)}function KD(){return dg??=WD(),dg}const Be={};function w(n){QD(ot(),te(),_r()+n,!1)}function QD(n,e,t,r){if(!r)if(3==(3&e[ze])){const o=n.preOrderCheckHooks;null!==o&&Op(e,o,t)}else{const o=n.preOrderHooks;null!==o&&xp(e,o,0,t)}pa(t)}function X(n,e=Ye.Default){const t=te();return null===t?ve(n,e):ox(Ln(),t,Fe(n),e)}function hg(n,e,t,r,i,o,s,a,c,u,l){const h=e.blueprint.slice();return h[Xt]=i,h[ze]=140|r,(null!==u||n&&2048&n[ze])&&(h[ze]|=2048),RO(h),h[jt]=h[Sc]=n,h[an]=t,h[Ac]=s||n&&n[Ac],h[$e]=a||n&&n[$e],h[ps]=c||n&&n[ps]||null,h[Yn]=o,h[od]=function n9(){return t9++}(),h[To]=l,h[lO]=u,h[cn]=2==e.type?n[cn]:h,h}function su(n,e,t,r,i){let o=n.data[e];if(null===o)o=function Vb(n,e,t,r,i){const o=jO(),s=Mv(),c=n.data[e]=function tG(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Rc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,r,i),function tz(){return ke.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function ld(){const n=ke.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Qi(o,!0),o}function Sd(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function YD(n,e,t,r,i){const o=qD(e,sd),s=_r(),a=2&r;try{pa(-1),a&&e.length>Xe&&QD(n,e,Xe,!1),Ki(a?2:0,i);const u=a?o:null,l=Cv(u);try{null!==u&&(u.dirty=!1),t(r,i)}finally{wv(u,l)}}finally{a&&null===e[sd]&&GD(e,sd),pa(s),Ki(a?3:1,i)}}function Lb(n,e,t){if(yv(e)){const r=pi(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{pi(r)}}}function Ub(n,e,t){UO()&&(function cG(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;ha(t)&&function gG(n,e,t){const r=Nr(e,n),i=XD(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=fg(n,hg(n,i,null,s,r,e,null,n[Ac].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||kp(t,e),Xn(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const c=n.data[a],u=ga(e,n,a,t);Xn(u,e),null!==s&&mG(0,a-i,u,c,0,s),xi(c)&&(Qr(t.index,e)[an]=ga(e,n,a,t))}}(n,e,t,Nr(t,e)),64==(64&t.flags)&&rk(n,e,t))}function jb(n,e,t=Nr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function XD(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=$b(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $b(n,e,t,r,i,o,s,a,c,u,l){const h=Xe+r,f=h+i,g=function Qq(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Be);return t}(h,f),b="function"==typeof u?u():u;return g[be]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:l}}let ZD=n=>null;function Xq(n){Ex(n)?qx(n):function gq(n){const e=Kc(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){const s=function pq(n){return n.textContent?.replace(/\s/gm,"")}(o);return"ngetn"===s||"ngtns"===s?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let r;const i=[];for(;r=t.nextNode();)i.push(r);for(const o of i)"ngetn"===o.textContent?o.replaceWith(e.createTextNode("")):o.remove()}(n)}function ek(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?tk(t,e,i,o):r.hasOwnProperty(i)&&tk(t,e,r[i],o)}return t}function tk(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Xr(n,e,t,r,i,o,s,a){const c=Nr(e,t);let l,u=e.inputs;!a&&null!=u&&(l=u[r])?(Gb(n,t,l,r,i),ha(e)&&function iG(n,e){const t=Qr(e,n);16&t[ze]||(t[ze]|=64)}(t,e.index)):3&e.type&&(r=function rG(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i))}function Bb(n,e,t,r){if(UO()){const i=null===r?null:{"":-1},o=function lG(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(iO(e,s.selectors,!1))if(r||(r=[]),xi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Hb(n,e,a.length)}else r.unshift(s),Hb(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&nk(n,e,t,s,i,a),i&&function dG(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new oe(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=td(t.mergedAttrs,t.attrs)}function nk(n,e,t,r,i,o){for(let u=0;u<r.length;u++)Uv(kp(t,e),n,r[u].type);!function fG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Sd(n,e,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];t.mergedAttrs=td(t.mergedAttrs,l.hostAttrs),pG(n,t,e,c,l),hG(c,l,i),null!==l.contentQueries&&(t.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(t.flags|=64);const h=l.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function nG(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,u=null;for(let l=e.directiveStart;l<i;l++){const h=o[l],f=t?t.get(h):null,b=f?f.outputs:null;c=ek(h.inputs,l,c,f?f.inputs:null),u=ek(h.outputs,l,u,b);const C=null===c||null===s||rO(e)?null:_G(c,l,s);a.push(C)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,o)}function rk(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function rz(){return ke.lFrame.currentDirectiveIndex}();try{pa(o);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];Sv(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&uG(c,u)}}finally{pa(-1),Sv(s)}}function uG(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Hb(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function hG(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xi(e)&&(t[""]=n)}}function pG(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=fa(i.type)),s=new dd(o,xi(i),X);n.blueprint[r]=s,t[r]=s,function sG(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function aG(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,Sd(n,t,i.hostVars,Be),i)}function Yi(n,e,t,r,i,o){const s=Nr(n,e);!function zb(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?je(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[$e],s,o,n.value,t,r,i)}function mG(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)ik(r,t,s[a++],s[a++],s[a++])}function ik(n,e,t,r,i){const o=pi(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{pi(o)}}function _G(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function ok(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function sk(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const s=n.data[o];xv(t[r]),s.contentQueries(2,e[o],o)}}}function fg(n,e){return n[rd]?n[uO][Oi]=e:n[rd]=e,n[uO]=e,e}function qb(n,e,t){xv(0);const r=pi(null);try{e(n,t)}finally{pi(r)}}function ak(n){return n[Mc]||(n[Mc]=[])}function ck(n){return n.cleanup||(n.cleanup=[])}function lk(n,e){const t=n[ps],r=t?t.get(xo,null):null;r&&r.handleError(e)}function Gb(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];ik(n.data[s],e[s],r,a,i)}}function ko(n,e,t){const r=Mp(e,n);!function Nx(n,e,t){n.setValue(e,t)}(n[$e],r,t)}function yG(n,e){const t=Qr(e,n),r=t[be];!function vG(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Xt];null!==i&&null===t[To]&&(t[To]=Mb(i,t[ps])),Wb(r,t,t[an])}function Wb(n,e,t){Dv(e);try{const r=n.viewQuery;null!==r&&qb(1,r,t);const i=n.template;null!==i&&YD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&sk(n,e),n.staticViewQueries&&qb(2,n.viewQuery,t);const o=n.components;null!==o&&function bG(n,e){for(let t=0;t<e.length;t++)yG(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ze]&=-5,kv()}}let dk=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function kH(n,e,t){const r=Object.create(RH);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>yO(r),run:()=>{if(r.dirty=!1,r.hasRun&&!vO(r))return;r.hasRun=!0;const s=Cv(r);try{r.cleanupFn(),r.cleanupFn=MO,r.fn(i)}finally{wv(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(t,u=>{this.all.has(u)&&this.queue.set(u,o)},i);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Ee({token:n,providedIn:"root",factory:()=>new n})}}return n})();function pg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=nv(i,a):2==o&&(r=nv(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Od(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];null!==o&&r.push(At(o)),gr(o)&&hk(o,r);const s=t.type;if(8&s)Od(n,e,t.child,r);else if(32&s){const a=Yv(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=zx(e,t);if(Array.isArray(a))r.push(...a);else{const c=vd(e[cn]);Od(c[be],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function hk(n,e){for(let t=Fn;t<n.length;t++){const r=n[t],i=r[be].firstChild;null!==i&&Od(r[be],r,i,e)}n[Wi]!==n[Xt]&&e.push(n[Wi])}function gg(n,e,t,r=!0){const i=e[Ac],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{fk(n,e,n.template,t)}catch(c){throw r&&lk(e,c),c}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function fk(n,e,t,r){const i=e[ze];if(256!=(256&i)){e[Ac].effectManager?.flush(),Dv(e);try{RO(e),function BO(n){return ke.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&YD(n,e,t,2,r);const s=3==(3&i);if(s){const u=n.preOrderCheckHooks;null!==u&&Op(e,u,null)}else{const u=n.preOrderHooks;null!==u&&xp(e,u,0,null),Rv(e,0)}if(function EG(n){for(let e=Dx(n);null!==e;e=kx(e)){if(!e[dO])continue;const t=e[xc];for(let r=0;r<t.length;r++){zH(t[r])}}}(e),pk(e,2),null!==n.contentQueries&&sk(n,e),s){const u=n.contentCheckHooks;null!==u&&Op(e,u)}else{const u=n.contentHooks;null!==u&&xp(e,u,1),Rv(e,1)}!function Kq(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=qD(e,ad);try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)pa(~o);else{const s=o,a=t[++i],c=t[++i];nz(a,s),r.dirty=!1;const u=Cv(r);try{c(2,e[s])}finally{wv(r,u)}}}}finally{null===e[ad]&&GD(e,ad),pa(-1)}}(n,e);const a=n.components;null!==a&&mk(e,a,0);const c=n.viewQuery;if(null!==c&&qb(2,c,r),s){const u=n.viewCheckHooks;null!==u&&Op(e,u)}else{const u=n.viewHooks;null!==u&&xp(e,u,2),Rv(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ze]&=-73,NO(e)}finally{kv()}}}function pk(n,e){for(let t=Dx(n);null!==t;t=kx(t))for(let r=Fn;r<t.length;r++)gk(t[r],e)}function IG(n,e,t){gk(Qr(e,n),t)}function gk(n,e){if(!function BH(n){return 128==(128&n[ze])}(n))return;const t=n[be],r=n[ze];if(80&r&&0===e||1024&r||2===e)fk(t,n,t.template,n[an]);else if(n[nd]>0){pk(n,1);const i=t.components;null!==i&&mk(n,i,1)}}function mk(n,e,t){for(let r=0;r<e.length;r++)IG(n,e[r],t)}class xd{get rootNodes(){const e=this._lView,t=e[be];return Od(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[an]}set context(e){this._lView[an]=e}get destroyed(){return 256==(256&this._lView[ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[jt];if(gr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Kp(e,r),Vp(t,r))}this._attachedToViewContainer=!1}Zv(this._lView[be],this._lView)}onDestroy(e){!function VO(n,e){if(256==(256&n[ze]))throw new oe(911,!1);null===n[gs]&&(n[gs]=[]),n[gs].push(e)}(this._lView,e)}markForCheck(){Ad(this._cdRefInjectingView||this._lView)}detach(){this._lView[ze]&=-129}reattach(){this._lView[ze]|=128}detectChanges(){gg(this._lView[be],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function m9(n,e){Cd(n,e,e[$e],2,null,null)}(this._lView[be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e}}class TG extends xd{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;gg(e[be],e,e[an],!1)}checkNoChanges(){}get context(){return null}}class _k extends cg{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=it(e);return new Dd(t,this.ngModule)}}function yk(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class MG{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=vp(r);const i=this.injector.get(e,Ob,r);return i!==Ob||t===Ob?i:this.parentInjector.get(e,t,r)}}class Dd extends CD{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=yk(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return yk(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function pH(n){return n.map(fH).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof Yr?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new MG(e,o):e,a=s.get(ED,null);if(null===a)throw new oe(407,!1);const h={rendererFactory:a,sanitizer:s.get(Iq,null),effectManager:s.get(dk,null),afterRenderEventManager:s.get(Fb,null)},f=a.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",b=r?function Jq(n,e,t,r){const o=r.get($D,!1)||t===Mi.ShadowDom,s=n.selectRootElement(e,o);return function Yq(n){ZD(n)}(s),s}(f,r,this.componentDef.encapsulation,s):Wp(f,g,function PG(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(g)),A=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let M=null;null!==b&&(M=Mb(b,s,!0));const N=$b(0,null,null,1,0,null,null,null,null,null,null),j=hg(null,N,null,A,null,null,h,f,s,null,M);let Q,le;Dv(j);try{const x=this.componentDef;let P,S=null;x.findHostDirectiveDefs?(P=[],S=new Map,x.findHostDirectiveDefs(x,P,S),P.push(x)):P=[x];const k=function SG(n,e){const t=n[be],r=Xe;return n[r]=e,su(t,r,2,"#host",null)}(j,b),R=function OG(n,e,t,r,i,o,s){const a=i[be];!function xG(n,e,t,r){for(const i of n)e.mergedAttrs=td(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(pg(e,e.mergedAttrs,!0),null!==t&&Kx(r,t,e))}(r,n,e,s);let c=null;null!==e&&(c=Mb(e,i[ps]));const u=o.rendererFactory.createRenderer(e,t);let l=16;t.signals?l=4096:t.onPush&&(l=64);const h=hg(i,XD(t),null,l,i[n.index],n,o,u,null,null,c);return a.firstCreatePass&&Hb(a,n,r.length-1),fg(i,h),i[n.index]=h}(k,b,x,P,j,h,f);le=kO(N,Xe),b&&function kG(n,e,t,r){if(r)mv(n,t,["ng-version",ID.full]);else{const{attrs:i,classes:o}=function gH(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Ai(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&mv(n,t,i),o&&o.length>0&&Wx(n,t,o.join(" "))}}(f,x,b,r),void 0!==t&&function RG(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(le,this.ngContentSelectors,t),Q=function DG(n,e,t,r,i,o){const s=Ln(),a=i[be],c=Nr(s,i);nk(a,i,s,t,null,r);for(let l=0;l<t.length;l++)Xn(ga(i,a,s.directiveStart+l,s),i);rk(a,i,s),c&&Xn(c,i);const u=ga(i,a,s.directiveStart+s.componentOffset,s);if(n[an]=i[an]=u,null!==o)for(const l of o)l(u,e);return Lb(a,s,n),u}(R,x,P,S,j,[NG]),Wb(N,j,null)}finally{kv()}return new AG(this.componentType,Q,nu(le,j),j,le)}}class AG extends yq{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new TG(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;Gb(o[be],o,i,e,t),this.previousInputValues.set(e,t),Ad(Qr(this._tNode.index,o))}}get injector(){return new yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function NG(){const n=Ln();Sp(te()[be],n)}function gt(n){let e=function vk(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(xi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=mg(n.inputs),s.inputTransforms=mg(n.inputTransforms),s.declaredInputs=mg(n.declaredInputs),s.outputs=mg(n.outputs);const a=i.hostBindings;a&&UG(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&VG(n,c),u&&LG(n,u),pp(n.inputs,i.inputs),pp(n.declaredInputs,i.declaredInputs),pp(n.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),pp(s.inputTransforms,i.inputTransforms)),xi(i)&&i.data.animation){const l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===gt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function FG(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=td(i.hostAttrs,t=td(t,i.hostAttrs))}}(r)}function mg(n){return n===qi?{}:n===at?[]:n}function VG(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function LG(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function UG(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function Ek(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function _g(n){return!!Kb(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Kb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Xi(n,e,t){return n[e]=t}function kd(n,e){return n[e]}function er(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ya(n,e,t,r){const i=er(n,e,t);return er(n,e+1,r)||i}function Zi(n,e,t,r){const i=te();return er(i,Nc(),e)&&(ot(),Yi(Gt(),i,n,e,t,r)),Zi}function cu(n,e,t,r){return er(n,Nc(),t)?e+je(t)+r:Be}function uu(n,e,t,r,i,o){const a=ya(n,function Po(){return ke.lFrame.bindingIndex}(),t,i);return Mo(2),a?e+je(t)+r+je(i)+o:Be}const n7=new RegExp(`^(\\d+)*(${Cb}|${bb})*(.*)`);function Xb(n){return n.index-Xe}function bg(n,e,t,r){let i=null;const o=Xb(r),s=n.data[Tb];if(s?.[o])i=function a7(n,e){const[t,...r]=function i7(n){const e=n.match(n7),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(const[c,u,l]of o.matchAll(/(f|n)(\d*)/g)){const h=parseInt(l,10)||1;a.push(u,h)}return[s,...a]}(n);let i;return i=t===bb?e[cn][Xt]:t===Cb?function VD(n){return n.ownerDocument.body}(e[cn][Xt]):At(e[Number(t)+Xe]),function s7(n,e){let t=n;for(let r=0;r<e.length;r+=2){const i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case eu.FirstChild:t=t.firstChild;break;case eu.NextSibling:t=t.nextSibling}}return t}(i,r)}(s[o],t);else if(e.firstChild===r)i=n.firstChild;else{const a=null===r.prev,c=r.prev??r.parent;if(function o7(n){return!n.prev&&8===n.parent?.type}(r))i=Ab(n,Xb(r.parent));else{let u=Nr(c,t);if(a)i=u.firstChild;else{const l=Xb(c),h=Ab(n,l);i=2===c.type&&h?Cg(Sb(n,l)+1,h):u.nextSibling}}}return i}function Cg(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function Z(n,e,t,r,i,o,s,a){const c=te(),u=ot(),l=n+Xe,h=u.firstCreatePass?function l7(n,e,t,r,i,o,s,a,c){const u=e.consts,l=su(e,n,4,s||null,_s(u,a));Bb(e,t,l,_s(u,c)),Sp(e,l);const h=l.tView=$b(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,t,r,i,o,s):u.data[l];Qi(h,!1);const f=Fk(u,c,h,n);Ap()&&Jp(u,c,f,h),Xn(f,c),fg(c,c[l]=ok(f,c,f,h)),Ip(h)&&Ub(u,c,h),null!=s&&jb(c,h,a)}let Fk=Vk;function Vk(n,e,t,r){return ys(!0),e[$e].createComment("")}function d7(n,e,t,r){const i=e[To],o=!i||Rc()||ag(i,r);if(ys(o),o)return Vk(0,e);const s=i.data[Eb]?.[r]??null;null!==s&&null!==t.tView&&null===t.tView.ssrId&&(t.tView.ssrId=s);const a=bg(i,n,e,t);return sg(i,r,a),Cg(Sb(i,r),a)}function eo(n){return kc(function ez(){return ke.lFrame.contextLView}(),Xe+n)}function L(n,e,t){const r=te();return er(r,Nc(),e)&&Xr(ot(),Gt(),r,n,e,r[$e],t,!1),L}function eC(n,e,t,r,i){const s=i?"class":"style";Gb(n,t,e.inputs[s],s,r)}function y(n,e,t,r){const i=te(),o=ot(),s=Xe+n,a=i[$e],c=o.firstCreatePass?function p7(n,e,t,r,i,o){const s=e.consts,c=su(e,n,2,r,_s(s,i));return Bb(e,t,c,_s(s,o)),null!==c.attrs&&pg(c,c.attrs,!1),null!==c.mergedAttrs&&pg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,e,t,r):o.data[s],u=Lk(o,i,c,a,e,n);i[s]=u;const l=Ip(c);return Qi(c,!0),Kx(a,u,c),32!=(32&c.flags)&&Ap()&&Jp(o,i,u,c),0===function GH(){return ke.lFrame.elementDepthCount}()&&Xn(u,i),function WH(){ke.lFrame.elementDepthCount++}(),l&&(Ub(o,i,c),Lb(o,c,i)),null!==r&&jb(i,c),y}function v(){let n=Ln();Mv()?function Av(){ke.lFrame.isParent=!1}():(n=n.parent,Qi(n,!1));const e=n;(function QH(n){return ke.skipHydrationRootTNode===n})(e)&&function ZH(){ke.skipHydrationRootTNode=null}(),function KH(){ke.lFrame.elementDepthCount--}();const t=ot();return t.firstCreatePass&&(Sp(t,n),yv(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function pz(n){return 0!=(8&n.flags)}(e)&&eC(t,e,te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gz(n){return 0!=(16&n.flags)}(e)&&eC(t,e,te(),e.stylesWithoutHost,!1),v}function D(n,e,t,r){return y(n,e,t,r),v(),D}let Lk=(n,e,t,r,i,o)=>(ys(!0),Wp(r,i,JO()));function g7(n,e,t,r,i,o){const s=e[To],a=!s||Rc()||ag(s,o);if(ys(a),a)return Wp(r,i,JO());const c=bg(s,n,e,t);return bD(s,o)&&sg(s,o,c.nextSibling),s&&(wx(t)||Ex(c))&&ha(t)&&(function YH(n){ke.skipHydrationRootTNode=n}(t),qx(c)),c}let jk=(n,e,t,r)=>(ys(!0),Xv(e[$e],""));function y7(n,e,t,r){let i;const o=e[To],s=!o||Rc();if(ys(s),s)return Xv(e[$e],"");const a=bg(o,n,e,t),c=function _q(n,e){const t=n.data;let r=t[wb]?.[e]??null;return null===r&&t[Pd]?.[e]&&(r=Sb(n,e)),r}(o,r);return sg(o,r,a),i=Cg(c,a),i}function He(){return te()}function Vd(n){return!!n&&"function"==typeof n.then}function $k(n){return!!n&&"function"==typeof n.subscribe}function K(n,e,t,r){const i=te(),o=ot(),s=Ln();return function Hk(n,e,t,r,i,o,s){const a=Ip(r),u=n.firstCreatePass&&ck(n),l=e[an],h=ak(e);let f=!0;if(3&r.type||s){const C=Nr(r,e),I=s?s(C):C,A=h.length,M=s?j=>s(At(j[r.index])):r.index;let N=null;if(!s&&a&&(N=function b7(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[Mc],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==N)(N.__ngLastListenerFn__||N).__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,f=!1;else{o=qk(r,e,l,o,!1);const j=t.listen(I,i,o);h.push(o,j),u&&u.push(i,M,A,A+1)}}else o=qk(r,e,l,o,!1);const g=r.outputs;let b;if(f&&null!==g&&(b=g[i])){const C=b.length;if(C)for(let I=0;I<C;I+=2){const Q=e[b[I]][b[I+1]].subscribe(o),le=h.length;h.push(o,Q),u&&u.push(i,r.index,le,-(le+1))}}}(o,i,i[$e],s,n,e,r),K}function zk(n,e,t,r){try{return Ki(6,e,t),!1!==t(r)}catch(i){return lk(n,i),!1}finally{Ki(7,e,t)}}function qk(n,e,t,r,i){return function o(s){if(s===Function)return r;Ad(n.componentOffset>-1?Qr(n.index,e):e);let c=zk(e,t,r,s),u=o.__ngNextListenerFn__;for(;u;)c=zk(e,t,u,s)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&s.preventDefault(),c}}function U(n=1){return function oz(n){return(ke.lFrame.contextLView=function sz(n,e){for(;n>0;)e=e[Sc],n--;return e}(n,ke.lFrame.contextLView))[an]}(n)}function wg(n,e,t){return Eg(n,"",e,"",t),wg}function Eg(n,e,t,r,i){const o=te(),s=cu(o,e,t,r);return s!==Be&&Xr(ot(),Gt(),o,n,s,o[$e],i,!1),Eg}function Ig(n,e){return n<<17|e<<2}function Cs(n){return n>>17&32767}function rC(n){return 2|n}function va(n){return(131068&n)>>2}function iC(n,e){return-131069&n|e<<2}function oC(n){return 1|n}function eR(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Cs(o):va(o),c=!1;for(;0!==a&&(!1===c||s);){const l=n[a+1];S7(n[a],e)&&(c=!0,n[a+1]=r?oC(l):rC(l)),a=r?Cs(l):va(l)}c&&(n[t+1]=r?rC(o):oC(o))}function S7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Hc(n,e)>=0}const En={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tR(n){return n.substring(En.key,En.keyEnd)}function nR(n,e){const t=En.textEnd;return t===e?-1:(e=En.keyEnd=function k7(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,En.key=e,t),mu(n,e,t))}function mu(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Ld(n,e,t){return Di(n,e,t,!1),Ld}function Oe(n,e){return Di(n,e,null,!0),Oe}function no(n,e){for(let t=function x7(n){return function iR(n){En.key=0,En.keyEnd=0,En.value=0,En.valueEnd=0,En.textEnd=n.length}(n),nR(n,mu(n,0,En.textEnd))}(e);t>=0;t=nR(e,t))Jr(n,tR(e),!0)}function Di(n,e,t,r){const i=te(),o=ot(),s=Mo(2);o.firstUpdatePass&&cR(o,n,s,r),e!==Be&&er(i,s,e)&&lR(o,o.data[_r()],i,i[$e],n,i[s+1]=function q7(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Cn(bs(n)))),n}(e,t),r,s)}function aR(n,e){return e>=n.expandoStartIndex}function cR(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[_r()],s=aR(n,t);hR(o,r)&&null===e&&!s&&(e=!1),e=function L7(n,e,t,r){const i=function Ov(n){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Ud(t=sC(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=sC(i,n,e,t,r),null===o){let c=function U7(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==va(r))return n[Cs(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=sC(null,n,e,c[1],r),c=Ud(c,e.attrs,r),function j7(n,e,t,r){n[Cs(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else o=function $7(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ud(r,n[o].hostAttrs,t);return Ud(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function M7(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Cs(s),c=va(s);n[r]=t;let l,u=!1;if(Array.isArray(t)?(l=t[1],(null===l||Hc(t,l)>0)&&(u=!0)):l=t,i)if(0!==c){const f=Cs(n[a+1]);n[r+1]=Ig(f,a),0!==f&&(n[f+1]=iC(n[f+1],r)),n[a+1]=function T7(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Ig(a,0),0!==a&&(n[a+1]=iC(n[a+1],r)),a=r;else n[r+1]=Ig(c,0),0===a?a=r:n[c+1]=iC(n[c+1],r),c=r;u&&(n[r+1]=rC(n[r+1])),eR(n,l,r,!0),eR(n,l,r,!1),function A7(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Hc(o,e)>=0&&(t[r+1]=oC(t[r+1]))}(e,l,n,r,o),s=Ig(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}function sC(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ud(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Ud(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Jr(n,s,!!t||e[++o]))}return void 0===n?null:n}function lR(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],l=function P7(n){return 1==(1&n)}(u)?dR(c,e,t,i,va(u),s):void 0;Tg(l)||(Tg(o)||function I7(n){return 2==(2&n)}(u)&&(o=dR(c,null,t,i,a,s)),function P9(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:vs.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=vs.Important),n.setStyle(t,r,i,o))}}(r,s,Mp(_r(),t),i,o))}function dR(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),l=u?c[1]:c,h=null===l;let f=t[i+1];f===Be&&(f=h?at:void 0);let g=h?Bv(f,r):l===r?f:void 0;if(u&&!Tg(g)&&(g=Bv(c,r)),Tg(g)&&(a=g,s))return a;const b=n[i+1];i=s?Cs(b):va(b)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Bv(c,r))}return a}function Tg(n){return void 0!==n}function hR(n,e){return 0!=(n.flags&(e?8:16))}function T(n,e=""){const t=te(),r=ot(),i=n+Xe,o=r.firstCreatePass?su(r,i,1,e,null):r.data[i],s=fR(r,t,o,e,n);t[i]=s,Ap()&&Jp(r,t,s,o),Qi(o,!1)}let fR=(n,e,t,r,i)=>(ys(!0),Gp(e[$e],r));function G7(n,e,t,r,i){const o=e[To],s=!o||Rc()||ag(o,i);return ys(s),s?Gp(e[$e],r):bg(o,n,e,t)}function me(n){return Ae("",n,""),me}function Ae(n,e,t){const r=te(),i=cu(r,n,e,t);return i!==Be&&ko(r,_r(),i),Ae}function Ro(n,e,t,r,i){const o=te(),s=uu(o,n,e,t,r,i);return s!==Be&&ko(o,_r(),s),Ro}function Pg(n,e,t){!function ki(n,e,t,r){const i=ot(),o=Mo(2);i.firstUpdatePass&&cR(i,null,o,r);const s=te();if(t!==Be&&er(s,o,t)){const a=i.data[_r()];if(hR(a,r)&&!aR(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=nv(c,t||"")),eC(i,a,s,t,r)}else!function z7(n,e,t,r,i,o,s,a){i===Be&&(i=at);let c=0,u=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const f=c<i.length?i[c+1]:void 0,g=u<o.length?o[u+1]:void 0;let C,b=null;l===h?(c+=2,u+=2,f!==g&&(b=h,C=g)):null===h||null!==l&&l<h?(c+=2,b=l):(u+=2,b=h,C=g),null!==b&&lR(n,e,t,r,b,C,s,a),l=c<i.length?i[c]:null,h=u<o.length?o[u]:null}}(i,a,s,s[$e],s[o+1],s[o+1]=function B7(n,e,t){if(null==t||""===t)return at;const r=[],i=bs(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,o)}}(Jr,no,cu(te(),n,e,t),!0)}const yu="en-US";let RR=yu;function uC(n,e,t,r,i){if(n=Fe(n),Array.isArray(n))for(let o=0;o<n.length;o++)uC(n[o],e,t,r,i);else{const o=ot(),s=te(),a=Ln();let c=_a(n)?n:Fe(n.provide);const u=pD(n),l=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(_a(n)||!n.multi){const g=new dd(u,i,X),b=dC(c,e,i?l:l+f,h);-1===b?(Uv(kp(a,s),o,c),lC(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[b]=g,s[b]=g)}else{const g=dC(c,e,l+f,h),b=dC(c,e,l,l+f),I=b>=0&&t[b];if(i&&!I||!i&&!(g>=0&&t[g])){Uv(kp(a,s),o,c);const A=function dK(n,e,t,r,i){const o=new dd(n,t,X);return o.multi=[],o.index=e,o.componentProviders=0,oN(o,i,r&&!t),o}(i?lK:uK,t.length,i,r,u);!i&&I&&(t[b].providerFactory=A),lC(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(A),s.push(A)}else lC(o,n,g>-1?g:b,oN(t[i?b:g],u,!i&&r));!i&&r&&I&&t[b].componentProviders++}}}function lC(n,e,t,r){const i=_a(e),o=function tq(n){return!!n.useClass}(e);if(i||o){const c=(o?Fe(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const l=u.indexOf(t);-1===l?u.push(t,[r,c]):u[l+1].push(r,c)}else u.push(t,c)}}}function oN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function dC(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function uK(n,e,t,r){return hC(this.multi,[])}function lK(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ga(t,t[be],this.providerFactory.index,r);o=a.slice(0,s),hC(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],hC(i,o);return o}function hC(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function $t(n,e=[]){return t=>{t.providersResolver=(r,i)=>function cK(n,e,t){const r=ot();if(r.firstCreatePass){const i=xi(n);uC(t,r.data,r.blueprint,i,!0),uC(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Ca{}class sN{}class fC extends Ca{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _k(this);const i=Kr(e);this._bootstrapComponents=Do(i.bootstrap),this._r3Injector=SD(e,t,[{provide:Ca,useValue:this},{provide:cg,useValue:this.componentFactoryResolver},...r],Cn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class pC extends sN{constructor(e){super(),this.moduleType=e}create(e){return new fC(this.moduleType,e,[])}}class aN extends Ca{constructor(e){super(),this.componentFactoryResolver=new _k(this),this.instance=null;const t=new Yc([...e.providers,{provide:Ca,useValue:this},{provide:cg,useValue:this.componentFactoryResolver}],e.parent||rg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function gC(n,e,t=null){return new aN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let pK=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=lD(0,t.type),i=r.length>0?gC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ee({token:n,providedIn:"environment",factory:()=>new n(ve(Yr))})}}return n})();function Cr(n){n.getStandaloneInjector=e=>e.get(pK).getOrCreateStandaloneInjector(n)}function wa(n,e,t){const r=mr()+n,i=te();return i[r]===Be?Xi(i,r,t?e.call(t):e()):kd(i,r)}function _C(n,e,t,r){return gN(te(),mr(),n,e,t,r)}function pN(n,e,t,r,i,o,s,a,c){const u=mr()+n,l=te(),h=function _i(n,e,t,r,i,o){const s=ya(n,e,t,r);return ya(n,e+2,i,o)||s}(l,u,t,r,i,o);return ya(l,u+4,s,a)||h?Xi(l,u+6,c?e.call(c,t,r,i,o,s,a):e(t,r,i,o,s,a)):kd(l,u+6)}function gN(n,e,t,r,i,o){const s=e+t;return er(n,s,i)?Xi(n,s+1,o?r.call(o,i):r(i)):function qd(n,e){const t=n[e];return t===Be?void 0:t}(n,s+1)}function ws(n,e){const t=ot();let r;const i=n+Xe;t.firstCreatePass?(r=function OK(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=fa(r.type)),a=Dr(X);try{const c=Dp(!1),u=o();return Dp(c),function f7(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,te(),i,u),u}finally{Dr(a)}}function Es(n,e,t){const r=n+Xe,i=te(),o=kc(i,r);return function Gd(n,e){return n[be].data[e].pure}(i,r)?gN(i,mr(),e,o.transform,t,o):o.transform(t)}function NK(){return this._results[Symbol.iterator]()}class yC{get changes(){return this._changes||(this._changes=new Wt)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=yC.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=NK)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function mi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Sz(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function VK(n,e,t,r=!0){const i=e[be];if(function y9(n,e,t,r){const i=Fn+r,o=t.length;r>0&&(t[i-1][Oi]=e),r<o-Fn?(e[Oi]=t[i],dx(t,Fn+r,e)):(t.push(e),e[Oi]=null),e[jt]=t;const s=e[id];null!==s&&t!==s&&function v9(n,e){const t=n[xc];e[cn]!==e[jt][jt][cn]&&(n[dO]=!0),null===t?n[xc]=[e]:t.push(e)}(s,e);const a=e[Gi];null!==a&&a.insertView(n),e[ze]|=128}(i,e,n,t),r){const o=rb(t,n),s=e[$e],a=Qp(s,n[Wi]);null!==a&&function g9(n,e,t,r,i,o){r[Xt]=i,r[Yn]=e,Cd(n,r,t,1,i,o)}(i,n[Yn],s,e,a,o)}}let No=(()=>{class n{static{this.__NG_ELEMENT_ID__=jK}}return n})();const LK=No,UK=class extends LK{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function FK(n,e,t,r){const i=e.tView,a=hg(n,i,t,4096&n[ze]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[id]=n[e.index];const u=n[Gi];return null!==u&&(a[Gi]=u.createEmbeddedView(i)),Wb(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new xd(i)}};function jK(){return xg(Ln(),te())}function xg(n,e){return 4&n.type?new UK(e,n,nu(n,e)):null}function bN(n){const e=n[cd]??[],r=n[jt][$e];for(const i of e)$K(i,r);n[cd]=at}function $K(n,e){let t=0,r=n.firstChild;if(r){const i=n.data[tu];for(;t<i;){const o=r.nextSibling;Yp(e,r,!1),r=o,t++}}}function CN(n){bN(n);for(let e=Fn;e<n.length;e++)Dg(n[e])}function Dg(n){const e=n[be];for(let t=Xe;t<e.bindingStartIndex;t++)gr(n[t])?CN(n[t]):Array.isArray(n[t])&&Dg(n[t])}let wN=(n,e)=>null;function zK(n,e){const t=n[cd];return e&&null!==t&&0!==t.length?t[0].data[Ib]===e?t.shift():(bN(n),null):null}function EN(n,e){return wN(n,e)}let Ri=(()=>{class n{static{this.__NG_ELEMENT_ID__=GK}}return n})();function GK(){return PN(Ln(),te())}const WK=Ri,IN=class extends WK{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return nu(this._hostTNode,this._hostLView)}get injector(){return new yr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Rp(this._hostTNode,this._hostLView);if(Fv(e)){const t=fd(e,this._hostLView),r=hd(e);return new yr(t[be].data[r+8],t)}return new yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=TN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Fn}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=EN(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s),c=!!s&&!zp(this._hostTNode);return this.insertImpl(a,i,c),a}createComponent(e,t,r,i,o){const s=e&&!function gd(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const C=t||{};a=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}const c=s?e:new Dd(it(e)),u=r||this.parentInjector;if(!o&&null==c.ngModule){const I=(s?u:this.parentInjector).get(Yr,null);I&&(o=I)}const l=it(c.componentType??{}),h=EN(this._lContainer,l?.id??null),g=c.create(u,i,h?.firstChild??null,o),b=!!h&&!zp(this._hostTNode);return this.insertImpl(g.hostView,a,b),g}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function HH(n){return gr(n[jt])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const u=i[jt],l=new IN(u,u[Yn],u[jt]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return VK(a,i,s,!r),e.attachToViewContainerRef(),dx(vC(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=TN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Kp(this._lContainer,t);r&&(Vp(vC(this._lContainer),t),Zv(r[be],r))}detach(e){const t=this._adjustIndex(e,-1),r=Kp(this._lContainer,t);return r&&null!=Vp(vC(this._lContainer),t)?new xd(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function TN(n){return n[8]}function vC(n){return n[8]||(n[8]=[])}function PN(n,e){let t;const r=e[n.index];return gr(r)?t=r:(t=ok(r,e,null,n),e[n.index]=t,fg(e,t)),MN(t,e,n,r),new IN(t,n,e)}let MN=AN;function AN(n,e,t,r){if(n[Wi])return;let i;i=8&t.type?At(r):function KK(n,e){const t=n[$e],r=t.createComment(""),i=Nr(e,n);return ma(t,Qp(t,i),r,function E9(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Wi]=i}function QK(n,e,t,r){if(n[Wi]&&n[cd])return;const i=e[To],o=t.index-Xe,s=function qp(n){let e=n.parent;for(;e;){if(wx(e))return!0;e=e.parent}return!1}(t)||zp(t);if(!i||s||ag(i,o))return AN(n,e,t,r);const c=Ab(i,o),u=i.data[Pd]?.[o],[l,h]=function HK(n,e){const t=[];for(const r of e)for(let i=0;i<(r[ig]??1);i++){const o={data:r,firstChild:null};r[tu]>0&&(o.firstChild=n,n=Cg(r[tu],n)),t.push(o)}return[n,t]}(c,u);n[Wi]=l,n[cd]=h}class bC{constructor(e){this.queryList=e,this.matches=null}clone(){return new bC(this.queryList)}setDirty(){this.queryList.setDirty()}}class CC{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new CC(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==RN(e,t).matches&&this.queries[t].setDirty()}}class SN{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class wC{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new wC(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class EC{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new EC(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,YK(t,o)),this.matchTNodeWithReadOption(e,t,Np(t,e,o,!1,!1))}else r===No?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Np(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Lr||i===Ri||i===No&&4&t.type)this.addMatch(t.index,-2);else{const o=Np(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function YK(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function ZK(n,e,t,r){return-1===t?function XK(n,e){return 11&n.type?nu(n,e):4&n.type?xg(n,e):null}(e,n):-2===t?function eQ(n,e,t){return t===Lr?nu(e,n):t===No?xg(e,n):t===Ri?PN(e,n):void 0}(n,e,r):ga(n,n[be],t,e)}function ON(n,e,t,r){const i=e[Gi].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const u=s[c];a.push(u<0?null:ZK(e,o[u],s[c+1],t.metadata.read))}i.matches=a}return i.matches}function IC(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=ON(n,e,i,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],l=e[-c];for(let h=Fn;h<l.length;h++){const f=l[h];f[id]===f[jt]&&IC(f[be],f,u,r)}if(null!==l[xc]){const h=l[xc];for(let f=0;f<h.length;f++){const g=h[f];IC(g[be],g,u,r)}}}}}return r}function kg(n){const e=te(),t=ot(),r=zO();xv(r+1);const i=RN(t,r);if(n.dirty&&function $H(n){return 4==(4&n[ze])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?IC(t,e,r,[]):ON(t,e,i,r);n.reset(o,wq),n.notifyOnChanges()}return!0}return!1}function TC(n,e,t){const r=ot();r.firstCreatePass&&(kN(r,new SN(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),DN(r,te(),e)}function Rg(){return function tQ(n,e){return n[Gi].queries[e].queryList}(te(),zO())}function DN(n,e,t){const r=new yC(4==(4&t));(function eG(n,e,t,r){const i=ak(e);i.push(t),n.firstCreatePass&&ck(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Gi]&&(e[Gi]=new CC),e[Gi].queries.push(new bC(r))}function kN(n,e,t){null===n.queries&&(n.queries=new wC),n.queries.track(new EC(e,t))}function RN(n,e){return n.queries.getByIndex(e)}function Ea(n,e){return xg(n,e)}const xC=new _e("Application Initializer");let DC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=pe(xC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(Vd(o))t.push(o);else if($k(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kC=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Fo=new _e("LocaleId",{providedIn:"root",factory:()=>pe(Fo,Ye.Optional|Ye.SkipSelf)||function EQ(){return typeof $localize<"u"&&$localize.locale||yu}()});let Fg=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Pn(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class PQ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let YN=(()=>{class n{compileModuleSync(t){return new pC(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Do(Kr(t).declarations).reduce((s,a)=>{const c=it(a);return c&&s.push(new Dd(c)),s},[]);return new PQ(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const t2=new _e("");let Is=null;const UC=new _e("PlatformDestroyListeners"),Qd=new _e("appBootstrapListener");class i2{constructor(e,t){this.name=e,this.token=t}}function ZQ(n){try{const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function XQ(n=[]){if(Is)return Is;const e=function s2(n=[],e){return Zn.create({name:e,providers:[{provide:gb,useValue:"platform"},{provide:UC,useValue:new Set([()=>Is=null])},...n]})}(n);return Is=e,function r2(){!function AH(n){EO=n}(()=>{throw new oe(600,!1)})}(),function o2(n){n.get(gD,null)?.forEach(t=>t())}(e),e}(r),o=[iJ(),...t||[]],a=new aN({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ct);return c.run(()=>{a.resolveInjectorInitializers();const u=a.get(xo,null);let l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:g=>{u.handleError(g)}})});const h=()=>a.destroy(),f=i.get(UC);return f.add(h),a.onDestroy(()=>{l.unsubscribe(),f.delete(h)}),function u2(n,e,t){try{const r=t();return Vd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,c,()=>{const g=a.get(DC);return g.runInitializers(),g.donePromise.then(()=>{!function NR(n){hi(n,"Expected localeId to be defined"),"string"==typeof n&&(RR=n.toLowerCase().replace(/_/g,"-"))}(a.get(Fo,yu)||yu);const C=a.get(Ia);return void 0!==e&&C.bootstrap(e),C})})})}catch(e){return Promise.reject(e)}}let Ia=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=pe(h2),this.zoneIsStable=pe(RD),this.componentTypes=[],this.components=[],this.isStable=pe(Fg).hasPendingTasks.pipe(hr(t=>t?Me(!1):this.zoneIsStable),function L8(n,e=Pi){return n=n??U8,z((t,r)=>{let i,o=!0;t.subscribe(ee(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}(),jS()),this._injector=pe(Yr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof CD;if(!this._injector.get(DC).done)throw!i&&function Pc(n){const e=it(n)||Nn(n)||pr(n);return null!==e&&e.standalone}(t),new oe(405,!1);let s;s=i?t:this._injector.get(cg).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function JQ(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ca),u=s.create(Zn.NULL,[],r||s.selector,a),l=u.location.nativeElement,h=u.injector.get(t2,null);return h?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),Ug(this.components,u),h?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Ug(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(Qd,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ug(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new oe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ug(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const h2=new _e("",{providedIn:"root",factory:()=>pe(xo).handleError.bind(void 0)});function nJ(){const n=pe(ct),e=pe(xo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let rJ=(()=>{class n{constructor(){this.zone=pe(ct),this.applicationRef=pe(Ia)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function f2(n){return[{provide:ct,useFactory:n},{provide:Jc,multi:!0,useFactory:()=>{const e=pe(rJ,{optional:!0});return()=>e.initialize()}},{provide:h2,useFactory:nJ},{provide:RD,useFactory:ND}]}function iJ(n){return Td([[],f2(()=>new ct(function c2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}(n)))])}let Cu=(()=>{class n{static{this.__NG_ELEMENT_ID__=oJ}}return n})();function oJ(n){return function sJ(n,e,t){if(ha(n)&&!t){const r=Qr(n.index,e);return new xd(r,r)}return 47&n.type?new xd(e[cn],e):null}(Ln(),te(),16==(16&n))}class y2{constructor(){}supports(e){return _g(e)}create(e){return new dJ(e)}}const lJ=(n,e)=>e;class dJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||lJ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<b2(r,i,o)?t:r,a=b2(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,l=c-i;if(u!=l){for(let f=0;f<u;f++){const g=f<o.length?o[f]:o[f]=0,b=g+f;l<=b&&b<u&&(o[f]=g+1)}o[s.previousIndex]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!_g(e))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function GG(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new hJ(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new v2),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new v2),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class hJ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class v2{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new fJ,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function b2(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class C2{constructor(){}supports(e){return e instanceof Map||Kb(e)}create(){return new pJ}}class pJ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Kb(e)))throw new oe(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new gJ(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class gJ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function w2(){return new Bg([new y2])}let Bg=(()=>{class n{static{this.\u0275prov=Ee({token:n,providedIn:"root",factory:w2})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||w2()),deps:[[n,new Up,new vr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new oe(901,!1)}}return n})();function E2(){return new Jd([new C2])}let Jd=(()=>{class n{static{this.\u0275prov=Ee({token:n,providedIn:"root",factory:E2})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||E2()),deps:[[n,new Up,new vr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new oe(901,!1)}}return n})(),x2=!1;function MJ(){return Td([{provide:lg,useFactory:()=>{let n=!0;return ou()&&(n=!!pe(Zc,{optional:!0})?.get(Pb,null)),n&&pe(_D).add("hydration"),n}},{provide:Jc,useValue:()=>{ou()&&pe(lg)&&(function AJ(){const n=Kc();let e;for(const t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&"nghm"===t.textContent?.trim()){e=t;break}if(!e)throw new oe(-507,!1)}(),function TJ(){x2||(x2=!0,function fq(){yD=hq}(),function m7(){Lk=g7}(),function W7(){fR=G7}(),function v7(){jk=y7}(),function h7(){Fk=d7}(),function JK(){MN=QK}(),function qK(){wN=zK}(),function Zq(){ZD=Xq}())}())},multi:!0},{provide:$D,useFactory:()=>ou()&&pe(lg)},{provide:Qd,useFactory:()=>{if(ou()&&pe(lg)){const n=pe(Ia);return pe(Zn),()=>{(function PJ(n,e){return n.isStable.pipe(wo(r=>r)).toPromise().then(()=>{})})(n).then(()=>{ct.assertInAngularZone(),function BK(n){const e=n._views;for(const t of e){const r=vD(t);null!==r&&null!==r[Xt]&&(Rr(r)?Dg(r):(Dg(r[Xt]),CN(r)))}}(n)})}}return()=>{}},multi:!0}])}function wu(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let GC=null;function Ts(){return GC}class DJ{}const Zr=new _e("DocumentToken");let WC=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:function(){return pe(RJ)},providedIn:"platform"})}}return n})();const kJ=new _e("Location Initialized");let RJ=(()=>{class n extends WC{constructor(){super(),this._doc=pe(Zr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ts().getBaseHref(this._doc)}onPopState(t){const r=Ts().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ts().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function KC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function D2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Vo(n){return n&&"?"!==n[0]?"?"+n:n}let Pa=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:function(){return pe(R2)},providedIn:"root"})}}return n})();const k2=new _e("appBaseHref");let R2=(()=>{class n extends Pa{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??pe(Zr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return KC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Vo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Vo(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Vo(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(WC),ve(k2,8))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),NJ=(()=>{class n extends Pa{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=KC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Vo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Vo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(WC),ve(k2,8))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})(),QC=(()=>{class n{constructor(t){this._subject=new Wt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function LJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(D2(N2(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Vo(r))}normalize(t){return n.stripTrailingSlash(function VJ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,N2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Vo}static{this.joinWithSlash=KC}static{this.stripTrailingSlash=D2}static{this.\u0275fac=function(r){return new(r||n)(ve(Pa))}}static{this.\u0275prov=Ee({token:n,factory:function(){return function FJ(){return new QC(ve(Pa))}()},providedIn:"root"})}}return n})();function N2(n){return n.replace(/\/index.html$/,"")}function z2(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}const s0=/\s+/,q2=[];let G2=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=q2,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(s0):q2}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(s0):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(s0).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(X(Bg),X(Jd),X(Lr),X(Oo))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class EY{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ro=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new EY(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),K2(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{K2(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(X(Ri),X(No),X(Bg))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function K2(n,e){n.context.$implicit=e.item}let ti=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new IY,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Q2("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Q2("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(X(Ri),X(No))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class IY{constructor(){this.$implicit=null,this.ngIf=null}}function Q2(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Cn(e)}'.`)}let Y2=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,o]=t.split("."),s=-1===i.indexOf("-")?void 0:vs.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(X(Lr),X(Jd),X(Oo))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();class AY{createSubscription(e,t){return PO(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){PO(()=>e.unsubscribe())}}class SY{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const OY=new SY,xY=new AY;let X2=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Vd(t))return OY;if($k(t))return xY;throw function Fi(n,e){return new oe(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(X(Cu,16))}}static{this.\u0275pipe=kr({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),ni=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Si({type:n})}static{this.\u0275inj=fi({})}}return n})();function tF(n){return"server"===n}let XY=(()=>{class n{static{this.\u0275prov=Ee({token:n,providedIn:"root",factory:()=>new ZY(ve(Zr),window)})}}return n})();class ZY{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function eX(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class nF{}function Iu(n,e){return Se(e)?Rn(n,e,1):Rn(n,1)}function eh(n){return z((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mt(n,e,t){const r=Se(n)||e||t?{next:n,error:e,complete:t}:n;return r?z((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(ee(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Pi}class nm{}class rm{}class bi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof bi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new bi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof bi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class EX{encodeKey(e){return aF(e)}encodeValue(e){return aF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const TX=/%(\d[a-f0-9])/gi,PX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function aF(n){return encodeURIComponent(n).replace(TX,(e,t)=>PX[t]??e)}function im(n){return`${n}`}class jo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new EX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function IX(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(im):[im(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new jo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(im(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(im(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class MX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function cF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uF(n){return typeof Blob<"u"&&n instanceof Blob}function lF(n){return typeof FormData<"u"&&n instanceof FormData}class th{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function AX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new bi),this.context||(this.context=new MX),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new jo,this.urlWithParams=t}serializeBody(){return null===this.body?null:cF(this.body)||uF(this.body)||lF(this.body)||function SX(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof jo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lF(this.body)?null:uF(this.body)?this.body.type||null:cF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof jo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,u=e.params||this.params;const l=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new th(t,r,o,{params:u,headers:c,context:l,reportProgress:a,responseType:i,withCredentials:s})}}var Tu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Tu||{});class f0{constructor(e,t=200,r="OK"){this.headers=e.headers||new bi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class p0 extends f0{constructor(e={}){super(e),this.type=Tu.ResponseHeader}clone(e={}){return new p0({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Pu extends f0{constructor(e={}){super(e),this.type=Tu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Pu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class dF extends f0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function g0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Vi=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof th)o=t;else{let c,u;c=i.headers instanceof bi?i.headers:new bi(i.headers),i.params&&(u=i.params instanceof jo?i.params:new jo({fromObject:i.params})),o=new th(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Me(o).pipe(Iu(c=>this.handler.handle(c)));if(t instanceof th||"events"===i.observe)return s;const a=s.pipe(Co(c=>c instanceof Pu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ue(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ue(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ue(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(ue(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new jo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,g0(i,r))}post(t,r,i={}){return this.request("POST",t,g0(i,r))}put(t,r,i={}){return this.request("PUT",t,g0(i,r))}static{this.\u0275fac=function(r){return new(r||n)(ve(nm))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();function pF(n,e){return e(n)}function xX(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const kX=new _e(""),nh=new _e(""),gF=new _e("");function RX(){let n=null;return(e,t)=>{null===n&&(n=(pe(kX,{optional:!0})??[]).reduceRight(xX,pF));const r=pe(Fg),i=r.add();return n(e,t).pipe(eh(()=>r.remove(i)))}}let mF=(()=>{class n extends nm{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=pe(Fg)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(nh),...this.injector.get(gF,[])]));this.chain=i.reduceRight((o,s)=>function DX(n,e,t){return(r,i)=>t.runInContext(()=>e(r,o=>n(o,i)))}(o,s,this.injector),pF)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(eh(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(ve(rm),ve(Yr))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();const LX=/^\)\]\}',?\n/;let yF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new oe(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?bn(r.\u0275loadImpl()):Me(null)).pipe(hr(()=>new Ct(o=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((C,I)=>s.setRequestHeader(C,I.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const C=t.detectContentTypeHeader();null!==C&&s.setRequestHeader("Content-Type",C)}if(t.responseType){const C=t.responseType.toLowerCase();s.responseType="json"!==C?C:"text"}const a=t.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const C=s.statusText||"OK",I=new bi(s.getAllResponseHeaders()),A=function UX(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new p0({headers:I,status:s.status,statusText:C,url:A}),c},l=()=>{let{headers:C,status:I,statusText:A,url:M}=u(),N=null;204!==I&&(N=typeof s.response>"u"?s.responseText:s.response),0===I&&(I=N?200:0);let j=I>=200&&I<300;if("json"===t.responseType&&"string"==typeof N){const Q=N;N=N.replace(LX,"");try{N=""!==N?JSON.parse(N):null}catch(le){N=Q,j&&(j=!1,N={error:le,text:N})}}j?(o.next(new Pu({body:N,headers:C,status:I,statusText:A,url:M||void 0})),o.complete()):o.error(new dF({error:N,headers:C,status:I,statusText:A,url:M||void 0}))},h=C=>{const{url:I}=u(),A=new dF({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:I||void 0});o.error(A)};let f=!1;const g=C=>{f||(o.next(u()),f=!0);let I={type:Tu.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(I.total=C.total),"text"===t.responseType&&s.responseText&&(I.partialText=s.responseText),o.next(I)},b=C=>{let I={type:Tu.UploadProgress,loaded:C.loaded};C.lengthComputable&&(I.total=C.total),o.next(I)};return s.addEventListener("load",l),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),null!==a&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:Tu.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",l),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),null!==a&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(ve(nF))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();const m0=new _e("XSRF_ENABLED"),vF=new _e("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),bF=new _e("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class CF{}let BX=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=z2(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(ve(Zr),ve(So),ve(vF))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();function HX(n,e){const t=n.url.toLowerCase();if(!pe(m0)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=pe(CF).getToken(),i=pe(bF);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ps=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ps||{});function Ma(n,e){return{\u0275kind:n,\u0275providers:e}}function wF(...n){const e=[Vi,yF,mF,{provide:nm,useExisting:mF},{provide:rm,useExisting:yF},{provide:nh,useValue:HX,multi:!0},{provide:m0,useValue:!0},{provide:CF,useClass:BX}];for(const t of n)e.push(...t.\u0275providers);return Td(e)}const EF=new _e("LEGACY_INTERCEPTOR_FN");let qX=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Si({type:n})}static{this.\u0275inj=fi({providers:[wF(Ma(Ps.LegacyInterceptors,[{provide:EF,useFactory:RX},{provide:nh,useExisting:EF,multi:!0}]))]})}}return n})();const om=new _e(""),GX=["GET","HEAD"];function WX(n,e){const{isCacheActive:t}=pe(om);if(!t||!GX.includes(n.method))return e(n);const r=pe(Zc),i=function QX(n){const{params:e,method:t,responseType:r,url:i}=n;return function JX(n){let e=0;for(const t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}(t+"."+r+"."+i+"?"+e.keys().sort().map(c=>`${c}=${e.getAll(c)}`).join("&"))}(n),o=r.get(i,null);if(o){let s=o.body;switch(o.responseType){case"arraybuffer":s=(new TextEncoder).encode(o.body).buffer;break;case"blob":s=new Blob([o.body])}return Me(new Pu({body:s,headers:new bi(o.headers),status:o.status,statusText:o.statusText,url:o.url}))}return e(n).pipe(mt(s=>{s instanceof Pu&&r.set(i,{body:s.body,headers:KX(s.headers),status:s.status,statusText:s.statusText,url:s.url||"",responseType:n.responseType})}))}function KX(n){const e={};for(const t of n.keys()){const r=n.getAll(t);null!==r&&(e[t]=r)}return e}class XX extends DJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class _0 extends XX{static makeCurrent(){!function xJ(n){GC||(GC=n)}(new _0)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ZX(){return rh=rh||document.querySelector("base"),rh?rh.getAttribute("href"):null}();return null==t?null:function eZ(n){sm=sm||document.createElement("a"),sm.setAttribute("href",n);const e=sm.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return z2(document.cookie,e)}}let sm,rh=null,nZ=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();const y0=new _e("EventManagerPlugins");let IF=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ve(y0),ve(ct))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();class TF{constructor(e){this._doc=e}}const v0="ng-app-id";let PF=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=tF(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${v0}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(v0),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(v0,this.appId),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ve(Zr),ve(vb),ve(mD,8),ve(So))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();const b0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},C0=/%COMP%/g,sZ=new _e("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function AF(n,e){return e.map(t=>t.replace(C0,n))}let SF=(()=>{class n{constructor(t,r,i,o,s,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=tF(a),this.defaultRenderer=new w0(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Mi.ShadowDom&&(r={...r,encapsulation:Mi.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof xF?i.applyToHost(t):i instanceof E0&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Mi.Emulated:o=new xF(c,u,r,this.appId,l,s,a,h);break;case Mi.ShadowDom:return new lZ(c,u,t,r,s,a,this.nonce,h);default:o=new E0(c,u,r,l,s,a,h)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ve(IF),ve(PF),ve(vb),ve(sZ),ve(Zr),ve(So),ve(ct),ve(mD))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();class w0{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(b0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(OF(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(OF(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new oe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=b0[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=b0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(vs.DashCase|vs.Important)?e.style.setProperty(t,r,i&vs.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&vs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Ts().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function OF(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class lZ extends w0{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=AF(i.id,i.styles);for(const l of u){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class E0 extends w0{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?AF(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class xF extends E0{constructor(e,t,r,i,o,s,a,c){const u=i+"-"+r.id;super(e,t,r,o,s,a,c,u),this.contentAttr=function aZ(n){return"_ngcontent-%COMP%".replace(C0,n)}(u),this.hostAttr=function cZ(n){return"_nghost-%COMP%".replace(C0,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}const DF=["alt","control","meta","shift"],hZ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fZ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function kF(n){return{appProviders:[...CZ,...n?.providers??[]],platformProviders:vZ}}const vZ=[{provide:So,useValue:"browser"},{provide:gD,useValue:function mZ(){_0.makeCurrent()},multi:!0},{provide:Zr,useFactory:function yZ(){return function x9(n){sb=n}(document),document},deps:[]}],CZ=[{provide:gb,useValue:"root"},{provide:xo,useFactory:function _Z(){return new xo},deps:[]},{provide:y0,useClass:(()=>{class n extends TF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ve(Zr))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})(),multi:!0,deps:[Zr,ct,So]},{provide:y0,useClass:(()=>{class n extends TF{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ts().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),DF.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=hZ[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),DF.forEach(s=>{s!==i&&(0,fZ[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ve(Zr))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})(),multi:!0,deps:[Zr]},SF,PF,IF,{provide:ED,useExisting:SF},{provide:nF,useClass:nZ,deps:[]},[]];let RF=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ve(Zr))}}static{this.\u0275prov=Ee({token:n,factory:function(r){let i=null;return i=r?new r:function EZ(){return new RF(ve(Zr))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:OZ}=Array,{getPrototypeOf:xZ,prototype:DZ,keys:kZ}=Object;function LF(n){if(1===n.length){const e=n[0];if(OZ(e))return{args:e,keys:null};if(function RZ(n){return n&&"object"==typeof n&&xZ(n)===DZ}(e)){const t=kZ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:NZ}=Array;function UF(n){return ue(e=>function FZ(n,e){return NZ(e)?n(...e):n(e)}(n,e))}function jF(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function T0(...n){const e=Jl(n),t=LS(n),{args:r,keys:i}=LF(n);if(0===r.length)return bn([],e);const o=new Ct(function VZ(n,e,t=Pi){return r=>{$F(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)$F(e,()=>{const u=bn(n[c],e);let l=!1;u.subscribe(ee(r,h=>{o[c]=h,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>jF(i,s):Pi));return t?o.pipe(UF(t)):o}function $F(n,e,t){n?bo(t,n,e):e()}function P0(...n){return function LZ(){return Ic(1)}()(bn(n,Jl(n)))}function BF(n){return new Ct(e=>{Gr(n()).subscribe(e)})}function As(n,e){const t=Se(n)?n:()=>n,r=i=>i.error(t());return new Ct(e?i=>e.schedule(r,0,i):r)}function M0(){return z((n,e)=>{let t=null;n._refCount++;const r=ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class HF extends Ct{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,J(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new we;const t=this.getSubject();e.add(this.source.subscribe(ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=we.EMPTY)}return e}refCount(){return M0()(this)}}function am(...n){const e=Jl(n);return z((t,r)=>{(e?P0(n,t,e):P0(n,t)).subscribe(r)})}function jn(n){return z((e,t)=>{let o,r=null,i=!1;r=e.subscribe(ee(t,void 0,void 0,s=>{o=Gr(n(s,jn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function A0(n){return n<=0?()=>zi:z((e,t)=>{let r=[];e.subscribe(ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const qe="primary",ih=Symbol("RouteTitle");class zZ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mu(n){return new zZ(n)}function qZ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function io(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!zF(n[i],e[i]))return!1;return!0}function zF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function qF(n){return n.length>0?n[n.length-1]:null}function Ss(n){return function SZ(n){return!!n&&(n instanceof Ct||Se(n.lift)&&Se(n.subscribe))}(n)?n:Vd(n)?bn(Promise.resolve(n)):Me(n)}const WZ={exact:function KF(n,e,t){if(!Aa(n.segments,e.segments)||!cm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!KF(n.children[r],e.children[r],t))return!1;return!0},subset:QF},GF={exact:function KZ(n,e){return io(n,e)},subset:function QZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zF(n[t],e[t]))},ignored:()=>!0};function WF(n,e,t){return WZ[t.paths](n.root,e.root,t.matrixParams)&&GF[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function QF(n,e,t){return JF(n,e,e.segments,t)}function JF(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Aa(i,t)||e.hasChildren()||!cm(i,t,r))}if(n.segments.length===t.length){if(!Aa(n.segments,t)||!cm(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!QF(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Aa(n.segments,i)&&cm(n.segments,i,r)&&n.children[qe])&&JF(n.children[qe],e,o,r)}}function cm(n,e,t){return e.every((r,i)=>GF[t](n[i].parameters,r.parameters))}class Au{constructor(e=new _t([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mu(this.queryParams)),this._queryParamMap}toString(){return XZ.serialize(this)}}class _t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return um(this)}}class oh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mu(this.parameters)),this._parameterMap}toString(){return ZF(this)}}function Aa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let sh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:function(){return new S0},providedIn:"root"})}}return n})();class S0{parse(e){const t=new uee(e);return new Au(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ah(e.root,!0)}`,r=function tee(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${lm(t)}=${lm(i)}`).join("&"):`${lm(t)}=${lm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ZZ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const XZ=new S0;function um(n){return n.segments.map(e=>ZF(e)).join("/")}function ah(n,e){if(!n.hasChildren())return um(n);if(e){const t=n.children[qe]?ah(n.children[qe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==qe&&r.push(`${i}:${ah(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function YZ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===qe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==qe&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===qe?[ah(n.children[qe],!1)]:[`${i}:${ah(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qe]?`${um(n)}/${t[0]}`:`${um(n)}/(${t.join("//")})`}}function YF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lm(n){return YF(n).replace(/%3B/gi,";")}function O0(n){return YF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dm(n){return decodeURIComponent(n)}function XF(n){return dm(n.replace(/\+/g,"%20"))}function ZF(n){return`${O0(n.path)}${function eee(n){return Object.keys(n).map(e=>`;${O0(e)}=${O0(n[e])}`).join("")}(n.parameters)}`}const nee=/^[^\/()?;#]+/;function x0(n){const e=n.match(nee);return e?e[0]:""}const ree=/^[^\/()?;=#]+/,oee=/^[^=?&#]+/,aee=/^[^&#]+/;class uee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _t([],{}):new _t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qe]=new _t(e,t)),r}parseSegment(){const e=x0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new oh(dm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function iee(n){const e=n.match(ree);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=x0(this.remaining);i&&(r=i,this.capture(r))}e[dm(t)]=dm(r)}parseQueryParam(e){const t=function see(n){const e=n.match(oee);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function cee(n){const e=n.match(aee);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=XF(t),o=XF(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=x0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new oe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qe);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[qe]:new _t([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}}function eV(n){return n.segments.length>0?new _t([],{[qe]:n}):n}function tV(n){const e={};for(const r of Object.keys(n.children)){const o=tV(n.children[r]);if(r===qe&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function lee(n){if(1===n.numberOfChildren&&n.children[qe]){const e=n.children[qe];return new _t(n.segments.concat(e.segments),e.children)}return n}(new _t(n.segments,e))}function Sa(n){return n instanceof Au}function nV(n){let e;const i=eV(function t(o){const s={};for(const c of o.children){const u=t(c);s[c.outlet]=u}const a=new _t(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function rV(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return D0(i,i,i,t,r);const o=function hee(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oV(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new oV(t,e,r)}(e);if(o.toRoot())return D0(i,i,new _t([],{}),t,r);const s=function fee(n,e,t){if(n.isAbsolute)return new fm(e,!0,0);if(!t)return new fm(e,!1,NaN);if(null===t.parent)return new fm(t,!0,0);const r=hm(n.commands[0])?0:1;return function pee(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new fm(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?uh(s.segmentGroup,s.index,o.commands):sV(s.segmentGroup,s.index,o.commands);return D0(i,s.segmentGroup,a,t,r)}function hm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ch(n){return"object"==typeof n&&null!=n&&n.outlets}function D0(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),s=n===e?t:iV(n,e,t);const a=eV(tV(s));return new Au(a,o,i)}function iV(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:iV(o,e,t)}),new _t(n.segments,r)}class oV{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hm(r[0]))throw new oe(4003,!1);const i=r.find(ch);if(i&&i!==qF(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fm{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function sV(n,e,t){if(n||(n=new _t([],{})),0===n.segments.length&&n.hasChildren())return uh(n,e,t);const r=function mee(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(ch(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!cV(c,u,s))return o;r+=2}else{if(!cV(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new _t(n.segments.slice(0,r.pathIndex),{});return o.children[qe]=new _t(n.segments.slice(r.pathIndex),n.children),uh(o,0,i)}return r.match&&0===i.length?new _t(n.segments,{}):r.match&&!n.hasChildren()?k0(n,e,t):r.match?uh(n,0,i):k0(n,e,t)}function uh(n,e,t){if(0===t.length)return new _t(n.segments,{});{const r=function gee(n){return ch(n[0])?n[0].outlets:{[qe]:n}}(t),i={};if(Object.keys(r).some(o=>o!==qe)&&n.children[qe]&&1===n.numberOfChildren&&0===n.children[qe].segments.length){const o=uh(n.children[qe],e,t);return new _t(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=sV(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new _t(n.segments,i)}}function k0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(ch(o)){const c=_ee(o.outlets);return new _t(r,c)}if(0===i&&hm(t[0])){r.push(new oh(n.segments[e].path,aV(t[0]))),i++;continue}const s=ch(o)?o.outlets[qe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&hm(a)?(r.push(new oh(s,aV(a))),i+=2):(r.push(new oh(s,{})),i++)}return new _t(r,{})}function _ee(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=k0(new _t([],{}),0,r))}),e}function aV(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function cV(n,e,t){return n==t.path&&io(e,t.parameters)}const lh="imperative";class oo{constructor(e,t){this.id=e,this.url=t}}class pm extends oo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Os extends oo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dh extends oo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Su extends oo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class gm extends oo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uV extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yee extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vee extends oo{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bee extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cee extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wee{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Eee{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Iee{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tee{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pee{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mee{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lV{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class R0{}class N0{constructor(e){this.url=e}}class Aee{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new hh,this.attachRef=null}}let hh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Aee,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class dV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=F0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=F0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=V0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return V0(e,this._root).map(t=>t.value)}}function F0(n,e){if(n===e.value)return e;for(const t of e.children){const r=F0(n,t);if(r)return r}return null}function V0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=V0(n,t);if(r.length)return r.unshift(e),r}return[]}class $o{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ou(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hV extends dV{constructor(e,t){super(e),this.snapshot=t,L0(this,e)}toString(){return this.snapshot.toString()}}function fV(n,e){const t=function See(n,e){const s=new mm([],{},{},"",{},qe,e,null,{});return new gV("",new $o(s,[]))}(0,e),r=new Pn([new oh("",{})]),i=new Pn({}),o=new Pn({}),s=new Pn({}),a=new Pn(""),c=new Oa(r,i,s,a,o,qe,e,t.root);return c.snapshot=t.root,new hV(new $o(c,[]),t)}class Oa{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ue(u=>u[ih]))??Me(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ue(e=>Mu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ue(e=>Mu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pV(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Oee(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mm{get title(){return this.data?.[ih]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gV extends dV{constructor(e,t){super(t),this.url=e,L0(this,t)}toString(){return mV(this._root)}}function L0(n,e){e.value._routerState=n,e.children.forEach(t=>L0(n,t))}function mV(n){const e=n.children.length>0?` { ${n.children.map(mV).join(", ")} } `:"";return`${n.value}${e}`}function U0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,io(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),io(e.params,t.params)||n.paramsSubject.next(t.params),function GZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!io(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),io(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function j0(n,e){const t=io(n.params,e.params)&&function JZ(n,e){return Aa(n,e)&&n.every((t,r)=>io(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||j0(n.parent,e.parent))}let $0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=qe,this.activateEvents=new Wt,this.deactivateEvents=new Wt,this.attachEvents=new Wt,this.detachEvents=new Wt,this.parentContexts=pe(hh),this.location=pe(Ri),this.changeDetector=pe(Cu),this.environmentInjector=pe(Yr),this.inputBinder=pe(_m,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new xee(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[gi]})}}return n})();class xee{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oa?this.route:e===hh?this.childContexts:this.parent.get(e,t)}}const _m=new _e("");let _V=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=T0([r.queryParams,r.params,r.data]).pipe(hr(([o,s,a],c)=>(a={...o,...s,...a},0===c?Me(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function OJ(n){const e=it(n);if(!e)return null;const t=new Dd(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();function fh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function kee(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fh(n,r,i);return fh(n,r)})}(n,e,t);return new $o(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>fh(n,a)),s}}const r=function Ree(n){return new Oa(new Pn(n.url),new Pn(n.params),new Pn(n.queryParams),new Pn(n.fragment),new Pn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>fh(n,o));return new $o(r,i)}}const B0="ngNavigationCancelingError";function yV(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Sa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=vV(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function vV(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[B0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function bV(n){return n&&n[B0]}let CV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=fr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Cr],decls:1,vars:0,template:function(r,i){1&r&&D(0,"router-outlet")},dependencies:[$0],encapsulation:2})}}return n})();function H0(n){const e=n.children&&n.children.map(H0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qe&&(t.component=CV),t}function Li(n){return n.outlet||qe}function ph(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Bee{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),U0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ou(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ou(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ou(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ou(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Mee(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Tee(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(U0(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),U0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ph(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class wV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ym{constructor(e,t){this.component=e,this.route=t}}function Hee(n,e,t){const r=n._root;return gh(r,e?e._root:null,t,[r.value])}function xu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function W8(n){return null!==gp(n)}(n)?e.get(n):n:r}function gh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ou(e);return n.children.forEach(s=>{(function qee(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function Gee(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Aa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Aa(n.url,e.url)||!io(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!j0(n,e)||!io(n.queryParams,e.queryParams);default:return!j0(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new wV(r)):(o.data=s.data,o._resolvedData=s._resolvedData),gh(n,e,o.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ym(a.outlet.component,s))}else s&&mh(e,a,i),i.canActivateChecks.push(new wV(r)),gh(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>mh(a,t.getContext(s),i)),i}function mh(n,e,t){const r=Ou(n),i=n.value;Object.entries(r).forEach(([o,s])=>{mh(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new ym(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function _h(n){return"function"==typeof n}function EV(n){return n instanceof hp||"EmptyError"===n?.name}const vm=Symbol("INITIAL_VALUE");function Du(){return hr(n=>T0(n.map(e=>e.pipe(hs(1),am(vm)))).pipe(ue(e=>{for(const t of e)if(!0!==t){if(t===vm)return vm;if(!1===t||t instanceof Au)return t}return!0}),Co(e=>e!==vm),hs(1)))}function IV(n){return function sp(...n){return Ql(n)}(mt(e=>{if(Sa(e))throw yV(0,e)}),ue(e=>!0===e))}class bm{constructor(e){this.segmentGroup=e||null}}class TV{constructor(e){this.urlTree=e}}function ku(n){return As(new bm(n))}function PV(n){return As(new TV(n))}class hte{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new oe(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Me(r);if(i.numberOfChildren>1||!i.children[qe])return As(new oe(4e3,!1));i=i.children[qe]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Au(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new _t(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new oe(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const z0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fte(n,e,t,r,i){const o=q0(n,e,t);return o.matched?(r=function Fee(n,e){return n.providers&&!n._injector&&(n._injector=gC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function ute(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Me(i.map(s=>{const a=xu(s,n);return Ss(function Xee(n){return n&&_h(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Du(),IV()):Me(!0)}(r,e,t).pipe(ue(s=>!0===s?o:{...z0}))):Me(o)}function q0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...z0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||qZ)(t,n,e);if(!i)return{...z0};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function MV(n,e,t,r){return t.length>0&&function mte(n,e,t){return t.some(r=>Cm(n,e,r)&&Li(r)!==qe)}(n,t,r)?{segmentGroup:new _t(e,gte(r,new _t(t,n.children))),slicedSegments:[]}:0===t.length&&function _te(n,e,t){return t.some(r=>Cm(n,e,r))}(n,t,r)?{segmentGroup:new _t(n.segments,pte(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new _t(n.segments,n.children),slicedSegments:t}}function pte(n,e,t,r,i){const o={};for(const s of r)if(Cm(n,t,s)&&!i[Li(s)]){const a=new _t([],{});o[Li(s)]=a}return{...i,...o}}function gte(n,e){const t={};t[qe]=e;for(const r of n)if(""===r.path&&Li(r)!==qe){const i=new _t([],{});t[Li(r)]=i}return t}function Cm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Cte{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new hte(this.urlSerializer,this.urlTree)}noMatchError(e){return new oe(4002,!1)}recognize(){const e=MV(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qe).pipe(jn(t=>{if(t instanceof TV)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof bm?this.noMatchError(t):t}),ue(t=>{const r=new mm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qe,this.rootComponentType,null,{}),i=new $o(r,t),o=new gV("",i),s=function dee(n,e,t=null,r=null){return rV(nV(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,qe).pipe(jn(r=>{throw r instanceof bm?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=pV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return bn(i).pipe(Iu(o=>{const s=r.children[o],a=function jee(n,e){const t=n.filter(r=>Li(r)===e);return t.push(...n.filter(r=>Li(r)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),function jZ(n,e){return z(function UZ(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(ee(s,l=>{const h=u++;c=a?n(c,l,h):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),fp(null),function $Z(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Co((i,o)=>n(i,o,r)):Pi,A0(1),t?fp(e):$S(()=>new hp))}(),Rn(o=>{if(null===o)return ku(r);const s=AV(o);return function wte(n){n.sort((e,t)=>e.value.outlet===qe?-1:t.value.outlet===qe?1:e.value.outlet.localeCompare(t.value.outlet))}(s),Me(s)}))}processSegment(e,t,r,i,o,s){return bn(t).pipe(Iu(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(jn(c=>{if(c instanceof bm)return Me(null);throw c}))),wo(a=>!!a),jn(a=>{if(EV(a))return function vte(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?Me([]):ku(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return function yte(n,e,t,r){return!!(Li(n)===r||r!==qe&&Cm(e,t,n))&&("**"===n.path||q0(e,n,t).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):ku(i):ku(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?PV(o):this.applyRedirects.lineralizeSegments(r,o).pipe(Rn(s=>{const a=new _t(s,{});return this.processSegment(e,t,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:l}=q0(t,i,o);if(!a)return ku(t);const h=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return i.redirectTo.startsWith("/")?PV(h):this.applyRedirects.lineralizeSegments(i,h).pipe(Rn(f=>this.processSegment(e,r,t,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a;if("**"===r.path){const c=i.length>0?qF(i).parameters:{};a=Me({snapshot:new mm(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SV(r),Li(r),r.component??r._loadedComponent??null,r,OV(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=fte(t,r,i,e).pipe(ue(({matched:c,consumedSegments:u,remainingSegments:l,parameters:h})=>c?{snapshot:new mm(u,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SV(r),Li(r),r.component??r._loadedComponent??null,r,OV(r)),consumedSegments:u,remainingSegments:l}:null));return a.pipe(hr(c=>null===c?ku(t):this.getChildConfig(e=r._injector??e,r,i).pipe(hr(({routes:u})=>{const l=r._loadedInjector??e,{snapshot:h,consumedSegments:f,remainingSegments:g}=c,{segmentGroup:b,slicedSegments:C}=MV(t,f,g,u);if(0===C.length&&b.hasChildren())return this.processChildren(l,u,b).pipe(ue(A=>null===A?null:[new $o(h,A)]));if(0===u.length&&0===C.length)return Me([new $o(h,[])]);const I=Li(r)===o;return this.processSegment(l,u,b,C,I?qe:o,!0).pipe(ue(A=>[new $o(h,A)]))}))))}getChildConfig(e,t,r){return t.children?Me({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Me({routes:t._loadedRoutes,injector:t._loadedInjector}):function cte(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Me(!0):Me(i.map(s=>{const a=xu(s,n);return Ss(function Kee(n){return n&&_h(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Du(),IV())}(e,t,r).pipe(Rn(i=>i?this.configLoader.loadChildren(e,t).pipe(mt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function dte(n){return As(vV(!1,3))}())):Me({routes:[],injector:e})}}function Ete(n){const e=n.value.routeConfig;return e&&""===e.path}function AV(n){const e=[],t=new Set;for(const r of n){if(!Ete(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=AV(r.children);e.push(new $o(r.value,i))}return e.filter(r=>!t.has(r))}function SV(n){return n.data||{}}function OV(n){return n.resolve||{}}function xV(n){return"string"==typeof n.title||null===n.title}function G0(n){return hr(e=>{const t=n(e);return t?bn(t).pipe(ue(()=>e)):Me(e)})}const Ru=new _e("ROUTES");let W0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=pe(YN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Me(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ss(t.loadComponent()).pipe(ue(DV),mt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),eh(()=>{this.componentLoaders.delete(t)})),i=new HF(r,()=>new $).pipe(M0());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Ote(n,e,t,r){return Ss(n.loadChildren()).pipe(ue(DV),Rn(i=>i instanceof sN||Array.isArray(i)?Me(i):bn(e.compileModuleAsync(i))),ue(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(Ru,[],{optional:!0,self:!0}).flat()),{routes:s.map(H0),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(eh(()=>{this.childrenLoaders.delete(r)})),s=new HF(o,()=>new $).pipe(M0());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DV(n){return function xte(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let wm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $,this.transitionAbortSubject=new $,this.configLoader=pe(W0),this.environmentInjector=pe(Yr),this.urlSerializer=pe(sh),this.rootContexts=pe(hh),this.inputBindingEnabled=null!==pe(_m,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Me(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Eee(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new wee(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new Pn({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:lh,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Co(o=>0!==o.id),ue(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),hr(o=>{this.currentTransition=o;let s=!1,a=!1;return Me(o).pipe(mt(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),hr(c=>{const u=c.currentBrowserUrl.toString(),l=!t.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const f="";return this.events.next(new Su(c.id,this.urlSerializer.serialize(c.rawUrl),f,0)),c.resolve(null),zi}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Me(c).pipe(hr(f=>{const g=this.transitions?.getValue();return this.events.next(new pm(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?zi:Promise.resolve(f)}),function Ite(n,e,t,r,i,o){return Rn(s=>function bte(n,e,t,r,i,o,s="emptyOnly"){return new Cte(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),mt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects};const g=new uV(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:f,extractedUrl:g,source:b,restoredState:C,extras:I}=c,A=new pm(f,this.urlSerializer.serialize(g),b,C);this.events.next(A);const M=fV(0,this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:M,urlAfterRedirects:g,extras:{...I,skipLocationChange:!1,replaceUrl:!1}},Me(o)}{const f="";return this.events.next(new Su(c.id,this.urlSerializer.serialize(c.extractedUrl),f,1)),c.resolve(null),zi}}),mt(c=>{const u=new yee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ue(c=>(this.currentTransition=o={...c,guards:Hee(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function ete(n,e){return Rn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Me({...t,guardsResult:!0}):function tte(n,e,t,r){return bn(n).pipe(Rn(i=>function ate(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Me(o.map(a=>{const c=ph(e)??i,u=xu(a,c);return Ss(function Yee(n){return n&&_h(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):c.runInContext(()=>u(n,e,t,r))).pipe(wo())})).pipe(Du()):Me(!0)}(i.component,i.route,t,e,r)),wo(i=>!0!==i,!0))}(s,r,i,n).pipe(Rn(a=>a&&function Wee(n){return"boolean"==typeof n}(a)?function nte(n,e,t,r){return bn(e).pipe(Iu(i=>P0(function ite(n,e){return null!==n&&e&&e(new Iee(n)),Me(!0)}(i.route.parent,r),function rte(n,e){return null!==n&&e&&e(new Pee(n)),Me(!0)}(i.route,r),function ste(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function zee(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>BF(()=>Me(s.guards.map(c=>{const u=ph(s.node)??t,l=xu(c,u);return Ss(function Jee(n){return n&&_h(n.canActivateChild)}(l)?l.canActivateChild(r,n):u.runInContext(()=>l(r,n))).pipe(wo())})).pipe(Du())));return Me(o).pipe(Du())}(n,i.path,t),function ote(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Me(!0);const i=r.map(o=>BF(()=>{const s=ph(e)??t,a=xu(o,s);return Ss(function Qee(n){return n&&_h(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(wo())}));return Me(i).pipe(Du())}(n,i.route,t))),wo(i=>!0!==i,!0))}(r,o,n,e):Me(a)),ue(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),mt(c=>{if(o.guardsResult=c.guardsResult,Sa(c.guardsResult))throw yV(0,c.guardsResult);const u=new vee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Co(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),G0(c=>{if(c.guards.canActivateChecks.length)return Me(c).pipe(mt(u=>{const l=new bee(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),hr(u=>{let l=!1;return Me(u).pipe(function Tte(n,e){return Rn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Me(t);let o=0;return bn(i).pipe(Iu(s=>function Pte(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!xV(i)&&(o[ih]=i.title),function Mte(n,e,t,r){const i=function Ate(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Me({});const o={};return bn(i).pipe(Rn(s=>function Ste(n,e,t,r){const i=ph(e)??r,o=xu(n,i);return Ss(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(wo(),mt(a=>{o[s]=a}))),A0(1),function BZ(n){return ue(()=>n)}(o),jn(s=>EV(s)?zi:As(s)))}(o,n,e,r).pipe(ue(s=>(n._resolvedData=s,n.data=pV(n,t).resolve,i&&xV(i)&&(n.data[ih]=i.title),null)))}(s.route,r,n,e)),mt(()=>o++),A0(1),Rn(s=>o===i.length?Me(t):zi))})}(t.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(u,"",2)}}))}),mt(u=>{const l=new Cee(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}))}),G0(c=>{const u=l=>{const h=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(l.routeConfig).pipe(mt(f=>{l.component=f}),ue(()=>{})));for(const f of l.children)h.push(...u(f));return h};return T0(u(c.targetSnapshot.root)).pipe(fp(),hs(1))}),G0(()=>this.afterPreactivation()),ue(c=>{const u=function Dee(n,e,t){const r=fh(n,e._root,t?t._root:void 0);return new hV(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:u},o}),mt(()=>{this.events.next(new R0)}),((n,e,t,r)=>ue(i=>(new Bee(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),hs(1),mt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Os(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function HZ(n){return z((e,t)=>{Gr(n).subscribe(ee(t,()=>t.complete(),Qe)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(mt(c=>{throw c}))),eh(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),jn(c=>{if(a=!0,bV(c))this.events.next(new dh(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function Nee(n){return bV(n)&&Sa(n.url)}(c)?this.events.next(new N0(c.url)):o.resolve(!1);else{this.events.next(new gm(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(c))}catch(u){o.reject(u)}}return zi}))}))}cancelNavigationTransition(t,r,i){const o=new dh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kV(n){return n!==lh}let RV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===qe);return r}getResolvedTitleForRoute(t){return t.data[ih]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:function(){return pe(Dte)},providedIn:"root"})}}return n})(),Dte=(()=>{class n extends RV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ve(RF))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kte=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:function(){return pe(Nte)},providedIn:"root"})}}return n})();class Rte{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Nte=(()=>{class n extends Rte{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Em=new _e("",{providedIn:"root",factory:()=>({})});let Fte=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:function(){return pe(Vte)},providedIn:"root"})}}return n})(),Vte=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var yh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(yh||{});function NV(n,e){n.events.pipe(Co(t=>t instanceof Os||t instanceof dh||t instanceof gm||t instanceof Su),ue(t=>t instanceof Os||t instanceof Su?yh.COMPLETE:t instanceof dh&&(0===t.code||1===t.code)?yh.REDIRECTING:yh.FAILED),Co(t=>t!==yh.REDIRECTING),hs(1)).subscribe(()=>{e()})}function Lte(n){throw n}function Ute(n,e,t){return e.parse("/")}const jte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$te={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ir=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=pe(kC),this.isNgZoneEnabled=!1,this._events=new $,this.options=pe(Em,{optional:!0})||{},this.pendingTasks=pe(Fg),this.errorHandler=this.options.errorHandler||Lte,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ute,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=pe(Fte),this.routeReuseStrategy=pe(kte),this.titleStrategy=pe(RV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=pe(Ru,{optional:!0})?.flat()??[],this.navigationTransitions=pe(wm),this.urlSerializer=pe(sh),this.location=pe(QC),this.componentInputBindingEnabled=!!pe(_m,{optional:!0}),this.eventsSubscription=new we,this.isNgZoneEnabled=pe(ct)instanceof ct&&ct.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Au,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fV(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(FV(r)&&this._events.next(r));if(r instanceof pm)kV(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Su)this.rawUrlTree=i.rawUrl;else if(r instanceof uV){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof R0)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof dh)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof N0){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kV(i.source)};this.scheduleNavigation(o,lh,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof gm&&this.restoreHistory(i,!0),r instanceof Os&&(this.navigated=!0),FV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),lh,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(H0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let h,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...o};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}null!==l&&(l=this.removeEmptyProps(l));try{h=nV(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),h=this.currentUrlTree.root}return rV(h,t,l,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Sa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,lh,null,r)}navigate(t,r={skipLocationChange:!1}){return function Bte(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new oe(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...jte}:!1===r?{...$te}:r,Sa(t))return WF(this.currentUrlTree,t,i);const o=this.parseUrl(t);return WF(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,f)=>{a=h,c=f});const l=this.pendingTasks.add();return NV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FV(n){return!(n instanceof R0||n instanceof N0)}let xa=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new $,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Os&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function sD(n,e,t){return function Z9(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?oD:Vr}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(X(Ir),X(Oa),function Fp(n){return function vz(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(ZS(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(Ln(),n)}("tabindex"),X(Oo),X(Lr),X(Pa))}}static{this.\u0275dir=Ve({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&K("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Zi("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",wu],skipLocationChange:["skipLocationChange","skipLocationChange",wu],replaceUrl:["replaceUrl","replaceUrl",wu],routerLink:"routerLink"},standalone:!0,features:[Ek,gi]})}}return n})(),VV=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Wt,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Os&&this.update()})}ngAfterContentInit(){Me(this.links.changes,Me(null)).pipe(Ic()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=bn(t).pipe(Ic()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Hte(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Ir),X(Lr),X(Oo),X(Cu),X(xa,8))}}static{this.\u0275dir=Ve({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function xN(n,e,t,r){const i=ot();if(i.firstCreatePass){const o=Ln();kN(i,new SN(e,t,r),o.index),function nQ(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}DN(i,te(),t)}(o,xa,5),2&r){let s;kg(s=Rg())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[gi]})}}return n})();class LV{}let zte=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Co(t=>t instanceof Os),Iu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=gC(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return bn(i).pipe(Ic())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Me(null);const o=i.pipe(Rn(s=>null===s?Me(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?bn([o,this.loader.loadComponent(r)]).pipe(Ic()):o})}static{this.\u0275fac=function(r){return new(r||n)(ve(Ir),ve(YN),ve(Yr),ve(LV),ve(W0))}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const K0=new _e("");let UV=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Os?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Su&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lV&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lV(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function JD(){throw new Error("invalid")}()}}static{this.\u0275prov=Ee({token:n,factory:n.\u0275fac})}}return n})();function jV(n){return n.routerState.root}function Bo(n,e){return{\u0275kind:n,\u0275providers:e}}function $V(){const n=pe(Zn);return e=>{const t=n.get(Ia);if(e!==t.components[0])return;const r=n.get(Ir),i=n.get(BV);1===n.get(Q0)&&r.initialNavigation(),n.get(HV,null,Ye.Optional)?.setUpPreloading(),n.get(K0,null,Ye.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const BV=new _e("",{factory:()=>new $}),Q0=new _e("",{providedIn:"root",factory:()=>1}),HV=new _e("");function Qte(n){return Bo(0,[{provide:HV,useExisting:zte},{provide:LV,useExisting:n}])}const zV=new _e("ROUTER_FORROOT_GUARD"),Yte=[QC,{provide:sh,useClass:S0},Ir,hh,{provide:Oa,useFactory:jV,deps:[Ir]},W0,[]];function Xte(){return new i2("Router",Ir)}let vh=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Yte,[],{provide:Ru,multi:!0,useValue:t},{provide:zV,useFactory:nne,deps:[[Ir,new vr,new Up]]},{provide:Em,useValue:r||{}},r?.useHash?{provide:Pa,useClass:NJ}:{provide:Pa,useClass:R2},{provide:K0,useFactory:()=>{const n=pe(XY),e=pe(ct),t=pe(Em),r=pe(wm),i=pe(sh);return t.scrollOffset&&n.setOffset(t.scrollOffset),new UV(i,r,n,e,t)}},r?.preloadingStrategy?Qte(r.preloadingStrategy).\u0275providers:[],{provide:i2,multi:!0,useFactory:Xte},r?.initialNavigation?rne(r):[],r?.bindToComponentInputs?Bo(8,[_V,{provide:_m,useExisting:_V}]).\u0275providers:[],[{provide:qV,useFactory:$V},{provide:Qd,multi:!0,useExisting:qV}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ru,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ve(zV,8))}}static{this.\u0275mod=Si({type:n})}static{this.\u0275inj=fi({})}}return n})();function nne(n){return"guarded"}function rne(n){return["disabled"===n.initialNavigation?Bo(3,[{provide:xC,multi:!0,useFactory:()=>{const e=pe(Ir);return()=>{e.setUpLocationChangeListener()}}},{provide:Q0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Bo(2,[{provide:Q0,useValue:0},{provide:xC,multi:!0,deps:[Zn],useFactory:e=>{const t=e.get(kJ,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ir),o=e.get(BV);NV(i,()=>{r(!0)}),e.get(wm).afterPreactivation=()=>(r(!0),o.closed?Me(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const qV=new _e("");function GV(n,e,t,r,i,o,s){try{var a=n[o](s),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function _(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(c){GV(o,r,i,s,a,"next",c)}function a(c){GV(o,r,i,s,a,"throw",c)}s(void 0)})}}const WV=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0;let f=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(f=64)),r.push(t[o>>2],t[(3&o)<<4|a>>4],t[f],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WV(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new cne;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class cne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Im=function(n){return function(n){const e=WV(n);return Y0.encodeByteArray(e,!0)}(n).replace(/\./g,"")},Tm=function(n){try{return Y0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Pm=()=>{try{return function dne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Tm(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},QV=n=>{var e,t;return null===(t=null===(e=Pm())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},JV=()=>{var n;return null===(n=Pm())||void 0===n?void 0:n.config},YV=n=>{var e;return null===(e=Pm())||void 0===e?void 0:e[`_${n}`]};class Mm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function ln(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function X0(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function xs(){try{return"object"==typeof indexedDB}catch{return!1}}function bh(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}function Z0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ci extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,so.prototype.create)}}class so{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function Ine(n,e){return n.replace(Tne,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Ci(i,`${this.serviceName}: ${s} (${i}).`,r)}}const Tne=/\{\$([^}]+)}/g;function Nu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(eL(o)&&eL(s)){if(!Nu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function eL(n){return null!==n&&"object"==typeof n}function Ch(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class Ane{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function Sne(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=ew),void 0===i.error&&(i.error=ew),void 0===i.complete&&(i.complete=ew);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ew(){}const One=1e3,xne=2,Dne=144e5,kne=.5;function nw(n,e=One,t=xne){const r=e*Math.pow(t,n),i=Math.round(kne*r*(Math.random()-.5)*2);return Math.min(Dne,r+i)}function $n(n){return n&&n._delegate?n._delegate:n}class tr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Da="[DEFAULT]";class Nne{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Mm;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Vne(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Da})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Da){return this.instances.has(e)}getOptions(e=Da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Da?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Da){return this.component?this.component.multipleInstances?e:Da:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Lne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Nne(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const rw=[];var Ze=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ze||{});const tL={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},Une=Ze.INFO,jne={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},$ne=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=jne[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Fu{constructor(e){this.name=e,this._logLevel=Une,this._logHandler=$ne,this._userLogHandler=null,rw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?tL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const Bne=(n,e)=>e.some(t=>n instanceof t);let nL,rL;const iL=new WeakMap,iw=new WeakMap,oL=new WeakMap,ow=new WeakMap,sw=new WeakMap;let aw={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return iw.get(n);if("objectStoreNames"===e)return n.objectStoreNames||oL.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ho(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Qne(n){return"function"==typeof n?function Kne(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function zne(){return rL||(rL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(cw(this),e),Ho(iL.get(this))}:function(...e){return Ho(n.apply(cw(this),e))}:function(e,...t){const r=n.call(cw(this),e,...t);return oL.set(r,e.sort?e.sort():[e]),Ho(r)}}(n):(n instanceof IDBTransaction&&function Gne(n){if(iw.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});iw.set(n,e)}(n),Bne(n,function Hne(){return nL||(nL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,aw):n)}function Ho(n){if(n instanceof IDBRequest)return function qne(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Ho(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&iL.set(t,n)}).catch(()=>{}),sw.set(e,n),e}(n);if(ow.has(n))return ow.get(n);const e=Qne(n);return e!==n&&(ow.set(n,e),sw.set(e,n)),e}const cw=n=>sw.get(n);function Sm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=Ho(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ho(s.result),c.oldVersion,c.newVersion,Ho(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function uw(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Ho(t).then(()=>{})}const Jne=["get","getKey","getAll","getAllKeys","count"],Yne=["put","add","delete","clear"],lw=new Map;function sL(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(lw.get(e))return lw.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Yne.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Jne.includes(t))return;const o=function(){var s=_(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return lw.set(e,o),o}!function Wne(n){aw=n(aw)}(n=>({...n,get:(e,t,r)=>sL(e,t)||n.get(e,t,r),has:(e,t)=>!!sL(e,t)||n.has(e,t)}));class Xne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Zne(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Om="@firebase/app",dw="0.10.13",zo=new Fu("@firebase/app"),xm="[DEFAULT]",Mre={[Om]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ka=new Map,wh=new Map,Eh=new Map;function aL(n,e){try{n.container.addComponent(e)}catch(t){zo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tr(n){const e=n.name;if(Eh.has(e))return zo.debug(`There were multiple attempts to register component ${e}.`),!1;Eh.set(e,n);for(const t of ka.values())aL(t,n);for(const t of wh.values())aL(t,n);return!0}function Vu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ds(n){return void 0!==n.settings}const wi=new so("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class cL{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}const Ra="10.14.1";function uL(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:xm,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw wi.create("bad-app-name",{appName:String(i)});if(t||(t=JV()),!t)throw wi.create("no-options");const o=ka.get(i);if(o){if(Nu(t,o.options)&&Nu(r,o.config))return o;throw wi.create("duplicate-app",{appName:i})}const s=new Lne(i);for(const c of Eh.values())s.addComponent(c);const a=new cL(t,r,s);return ka.set(i,a),a}function hw(n=xm){const e=ka.get(n);if(!e&&n===xm&&JV())return uL();if(!e)throw wi.create("no-app",{appName:n});return e}function lL(){return Array.from(ka.values())}function Kt(n,e,t){var r;let i=null!==(r=Mre[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void zo.warn(a.join(" "))}Tr(new tr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Dre="firebase-heartbeat-database",kre=1,Ih="firebase-heartbeat-store";let pw=null;function dL(){return pw||(pw=Sm(Dre,kre,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(Ih)}catch(t){console.warn(t)}}}).catch(n=>{throw wi.create("idb-open",{originalErrorMessage:n.message})})),pw}function gw(){return(gw=_(function*(n){try{const t=(yield dL()).transaction(Ih),r=yield t.objectStore(Ih).get(fL(n));return yield t.done,r}catch(e){if(e instanceof Ci)zo.warn(e.message);else{const t=wi.create("idb-get",{originalErrorMessage:e?.message});zo.warn(t.message)}}})).apply(this,arguments)}function hL(n,e){return mw.apply(this,arguments)}function mw(){return(mw=_(function*(n,e){try{const r=(yield dL()).transaction(Ih,"readwrite");yield r.objectStore(Ih).put(e,fL(n)),yield r.done}catch(t){if(t instanceof Ci)zo.warn(t.message);else{const r=wi.create("idb-set",{originalErrorMessage:t?.message});zo.warn(r.message)}}})).apply(this,arguments)}function fL(n){return`${n.name}!${n.options.appId}`}class Vre{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ure(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){var t,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pL();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){zo.warn(i)}})()}getHeartbeatsHeader(){var e=this;return _(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=pL(),{heartbeatsToSend:i,unsentEntries:o}=function Lre(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),gL(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Im(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return zo.warn(r),""}})()}}function pL(){return(new Date).toISOString().substring(0,10)}class Ure{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!xs()&&bh().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Rre(n){return gw.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return _(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return hL(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return _(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return hL(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function gL(n){return Im(JSON.stringify({version:2,heartbeats:n})).length}!function jre(n){Tr(new tr("platform-logger",e=>new Xne(e),"PRIVATE")),Tr(new tr("heartbeat",e=>new Vre(e),"PRIVATE")),Kt(Om,dw,n),Kt(Om,dw,"esm2017"),Kt("fire-js","")}(""),Kt("firebase","10.14.1","app");const mL="@firebase/installations",_w="0.6.9",_L=1e4,yL=`w:${_w}`,vL="FIS_v2",Hre="https://firebaseinstallations.googleapis.com/v1",zre=36e5,qo=new so("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bL(n){return n instanceof Ci&&n.code.includes("request-failed")}function yw({projectId:n}){return`${Hre}/projects/${n}/installations`}function CL(n){return{token:n.token,requestStatus:2,expiresIn:Kre(n.expiresIn),creationTime:Date.now()}}function vw(n,e){return bw.apply(this,arguments)}function bw(){return(bw=_(function*(n,e){const r=(yield e.json()).error;return qo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function wL({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Cw(n){return ww.apply(this,arguments)}function ww(){return(ww=_(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Kre(n){return Number(n.replace("s","000"))}function Ew(){return(Ew=_(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=yw(n),i=wL(n),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:vL,appId:n.appId,sdkVersion:yL})},c=yield Cw(()=>fetch(r,a));if(c.ok){const u=yield c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:CL(u.authToken)}}throw yield vw("Create Installation",c)})).apply(this,arguments)}function IL(n){return new Promise(e=>{setTimeout(e,n)})}const Xre=/^[cdef][\w-]{21}$/,Iw="";function Zre(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function eie(n){return function Yre(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Xre.test(t)?t:Iw}catch{return Iw}}function Lu(n){return`${n.appName}!${n.appId}`}const Uu=new Map;function TL(n,e){const t=Lu(n);PL(t,e),function rie(n,e){const t=function ML(){return!Na&&"BroadcastChannel"in self&&(Na=new BroadcastChannel("[Firebase] FID Change"),Na.onmessage=n=>{PL(n.data.key,n.data.fid)}),Na}();t&&t.postMessage({key:n,fid:e}),function AL(){0===Uu.size&&Na&&(Na.close(),Na=null)}()}(t,e)}function PL(n,e){const t=Uu.get(n);if(t)for(const r of t)r(e)}let Na=null;const iie="firebase-installations-database",oie=1,Fa="firebase-installations-store";let Tw=null;function Pw(){return Tw||(Tw=Sm(iie,oie,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Fa)}})),Tw}function Dm(n,e){return Mw.apply(this,arguments)}function Mw(){return(Mw=_(function*(n,e){const t=Lu(n),i=(yield Pw()).transaction(Fa,"readwrite"),o=i.objectStore(Fa),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&TL(n,e.fid),e})).apply(this,arguments)}function Aw(n){return Sw.apply(this,arguments)}function Sw(){return(Sw=_(function*(n){const e=Lu(n),r=(yield Pw()).transaction(Fa,"readwrite");yield r.objectStore(Fa).delete(e),yield r.done})).apply(this,arguments)}function Th(n,e){return Ow.apply(this,arguments)}function Ow(){return(Ow=_(function*(n,e){const t=Lu(n),i=(yield Pw()).transaction(Fa,"readwrite"),o=i.objectStore(Fa),s=yield o.get(t),a=e(s);return void 0===a?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&TL(n,a.fid),a})).apply(this,arguments)}function xw(n){return Dw.apply(this,arguments)}function Dw(){return Dw=_(function*(n){let e;const t=yield Th(n.appConfig,r=>{const i=function sie(n){return OL(n||{fid:Zre(),registrationStatus:0})}(r),o=function aie(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(qo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function cie(n,e){return kw.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:uie(n)}:{installationEntry:e}}(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===Iw?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Dw.apply(this,arguments)}function kw(){return kw=_(function*(n,e){try{const t=yield function Jre(n,e){return Ew.apply(this,arguments)}(n,e);return Dm(n.appConfig,t)}catch(t){throw bL(t)&&409===t.customData.serverCode?yield Aw(n.appConfig):yield Dm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),kw.apply(this,arguments)}function uie(n){return Rw.apply(this,arguments)}function Rw(){return(Rw=_(function*(n){let e=yield SL(n.appConfig);for(;1===e.registrationStatus;)yield IL(100),e=yield SL(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield xw(n);return r||t}return e})).apply(this,arguments)}function SL(n){return Th(n,e=>{if(!e)throw qo.create("installation-not-found");return OL(e)})}function OL(n){return function lie(n){return 1===n.registrationStatus&&n.registrationTime+_L<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Nw(){return(Nw=_(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function hie(n,{fid:e}){return`${yw(n)}/${e}/authTokens:generate`}(n,t),i=function EL(n,{refreshToken:e}){const t=wL(n);return t.append("Authorization",function Qre(n){return`${vL} ${n}`}(e)),t}(n,t),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:yL,appId:n.appId}})},c=yield Cw(()=>fetch(r,a));if(c.ok)return CL(yield c.json());throw yield vw("Generate Auth Token",c)})).apply(this,arguments)}function Fw(n){return Vw.apply(this,arguments)}function Vw(){return Vw=_(function*(n,e=!1){let t;const r=yield Th(n.appConfig,o=>{if(!DL(o))throw qo.create("not-registered");const s=o.authToken;if(!e&&function gie(n){return 2===n.requestStatus&&!function mie(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+zre}(n)}(s))return o;if(1===s.requestStatus)return t=function fie(n,e){return Lw.apply(this,arguments)}(n,e),o;{if(!navigator.onLine)throw qo.create("app-offline");const a=function _ie(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(o);return t=function pie(n,e){return Uw.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),Vw.apply(this,arguments)}function Lw(){return(Lw=_(function*(n,e){let t=yield xL(n.appConfig);for(;1===t.authToken.requestStatus;)yield IL(100),t=yield xL(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Fw(n,e):r})).apply(this,arguments)}function xL(n){return Th(n,e=>{if(!DL(e))throw qo.create("not-registered");return function yie(n){return 1===n.requestStatus&&n.requestTime+_L<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Uw(){return Uw=_(function*(n,e){try{const t=yield function die(n,e){return Nw.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Dm(n.appConfig,r),t}catch(t){if(!bL(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Dm(n.appConfig,r)}else yield Aw(n.appConfig);throw t}}),Uw.apply(this,arguments)}function DL(n){return void 0!==n&&2===n.registrationStatus}function jw(){return(jw=_(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield xw(e);return r?r.catch(console.error):Fw(e).catch(console.error),t.fid})).apply(this,arguments)}function $w(){return $w=_(function*(n,e=!1){const t=n;return yield function Cie(n){return Bw.apply(this,arguments)}(t),(yield Fw(t,e)).token}),$w.apply(this,arguments)}function Bw(){return(Bw=_(function*(n){const{registrationPromise:e}=yield xw(n);e&&(yield e)})).apply(this,arguments)}function qw(n){return qo.create("missing-app-config-values",{valueName:n})}const kL="installations",Pie=n=>{const e=n.getProvider("app").getImmediate(),t=function Iie(n){if(!n||!n.options)throw qw("App Configuration");if(!n.name)throw qw("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw qw(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Vu(e,"heartbeat"),_delete:()=>Promise.resolve()}},Mie=n=>{const t=Vu(n.getProvider("app").getImmediate(),kL).getImmediate();return{getId:()=>function vie(n){return jw.apply(this,arguments)}(t),getToken:i=>function bie(n){return $w.apply(this,arguments)}(t,i)}};(function Aie(){Tr(new tr(kL,Pie,"PUBLIC")),Tr(new tr("installations-internal",Mie,"PRIVATE"))})(),Kt(mL,_w),Kt(mL,_w,"esm2017");const Gw="@firebase/remote-config",$r=new so("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Uie{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return _(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const o=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&s.push(t.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(s),o})()}}function jie(n=navigator){return n.languages&&n.languages[0]||n.language}class $ie{constructor(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){var t=this;return _(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:jie()},u={method:"POST",headers:a,body:JSON.stringify(c)},l=fetch(s,u),h=new Promise((A,M)=>{e.signal.addEventListener(()=>{const N=new Error("The operation was aborted.");N.name="AbortError",M(N)})});let f;try{yield Promise.race([l,h]),f=yield l}catch(A){let M="fetch-client-network";throw"AbortError"===A?.name&&(M="fetch-timeout"),$r.create(M,{originalErrorMessage:A?.message})}let g=f.status;const b=f.headers.get("ETag")||void 0;let C,I;if(200===f.status){let A;try{A=yield f.json()}catch(M){throw $r.create("fetch-client-parse",{originalErrorMessage:M?.message})}C=A.entries,I=A.state}if("INSTANCE_STATE_UNSPECIFIED"===I?g=500:"NO_CHANGE"===I?g=304:("NO_TEMPLATE"===I||"EMPTY_CONFIG"===I)&&(C={}),304!==g&&200!==g)throw $r.create("fetch-status",{httpStatus:g});return{status:g,eTag:b,config:C}})()}}class zie{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return _(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,t){var r=this;return _(function*(i,{throttleEndTimeMillis:o,backoffCount:s}){yield function Bie(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r($r.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(i.signal,o);try{const a=yield r.client.fetch(i);return yield r.storage.deleteThrottleMetadata(),a}catch(a){if(!function Hie(n){if(!(n instanceof Ci&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const c={throttleEndTimeMillis:Date.now()+nw(s),backoffCount:s+1};return yield r.storage.setThrottleMetadata(c),r.attemptFetch(i,c)}}).apply(this,arguments)}}class Wie{constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Rm(n,e){const t=n.target.error||void 0;return $r.create(e,{originalErrorMessage:t&&t?.message})}const Va="app_namespace_store";class Yie{constructor(e,t,r,i=function Jie(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Rm(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Va,{keyPath:"compositeKey"})}}catch(t){e($r.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return _(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Va],"readonly").objectStore(Va),c=t.createCompositeKey(e);try{const u=a.get(c);u.onerror=l=>{o(Rm(l,"storage-get"))},u.onsuccess=l=>{const h=l.target.result;i(h?h.value:void 0)}}catch(u){o($r.create("storage-get",{originalErrorMessage:u?.message}))}})})()}set(e,t){var r=this;return _(function*(){const i=yield r.openDbPromise;return new Promise((o,s)=>{const c=i.transaction([Va],"readwrite").objectStore(Va),u=r.createCompositeKey(e);try{const l=c.put({compositeKey:u,value:t});l.onerror=h=>{s(Rm(h,"storage-set"))},l.onsuccess=()=>{o()}}catch(l){s($r.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var t=this;return _(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Va],"readwrite").objectStore(Va),c=t.createCompositeKey(e);try{const u=a.delete(c);u.onerror=l=>{o(Rm(l,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){o($r.create("storage-delete",{originalErrorMessage:u?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Xie{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return _(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),o=yield t;o&&(e.lastFetchStatus=o);const s=yield r;s&&(e.lastSuccessfulFetchTimestampMillis=s);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function eoe(){return Yw.apply(this,arguments)}function Yw(){return(Yw=_(function*(){if(!xs())return!1;try{return yield bh()}catch{return!1}})).apply(this,arguments)}!function Zie(){Tr(new tr("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $r.create("registration-window");if(!xs())throw $r.create("indexed-db-unavailable");const{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw $r.create("registration-project-id");if(!s)throw $r.create("registration-api-key");if(!a)throw $r.create("registration-app-id");const c=new Yie(a,r.name,t=t||"firebase"),u=new Xie(c),l=new Fu(Gw);l.logLevel=Ze.ERROR;const h=new $ie(i,Ra,t,o,s,a),f=new zie(h,c),g=new Uie(f,c,u,l),b=new Wie(r,g,u,c,l);return function Fie(n){const e=$n(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(b),b},"PUBLIC").setMultipleInstances(!0)),Kt(Gw,"0.4.9"),Kt(Gw,"0.4.9","esm2017")}();const toe="/firebase-messaging-sw.js",noe="/firebase-cloud-messaging-push-scope",VL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",roe="https://fcmregistrations.googleapis.com/v1",LL="google.c.a.c_id",ioe="google.c.a.c_l",ooe="google.c.a.ts";var Nm=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Nm||{});function Go(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function coe(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const Xw="fcm_token_details_db",uoe=5,UL="fcm_token_object_Store";function Zw(){return Zw=_(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(Xw))return null;let e=null;return(yield Sm(Xw,uoe,{upgrade:(r=_(function*(i,o,s,a){var c;if(o<2||!i.objectStoreNames.contains(UL))return;const u=a.objectStore(UL),l=yield u.index("fcmSenderId").get(n);if(yield u.clear(),l)if(2===o){const h=l;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:null!==(c=h.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:"string"==typeof h.vapidKey?h.vapidKey:Go(h.vapidKey)}}}else if(3===o){const h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Go(h.auth),p256dh:Go(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Go(h.vapidKey)}}}else if(4===o){const h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Go(h.auth),p256dh:Go(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Go(h.vapidKey)}}}}),function(o,s,a,c){return r.apply(this,arguments)})})).close(),yield uw(Xw),yield uw("fcm_vapid_details_db"),yield uw("undefined"),function doe(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),Zw.apply(this,arguments)}const hoe="firebase-messaging-database",foe=1,La="firebase-messaging-store";let eE=null;function tE(){return eE||(eE=Sm(hoe,foe,{upgrade:(n,e)=>{0===e&&n.createObjectStore(La)}})),eE}function nE(){return nE=_(function*(n){const e=sE(n),r=yield(yield tE()).transaction(La).objectStore(La).get(e);if(r)return r;{const i=yield function loe(n){return Zw.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield rE(n,i),i}}),nE.apply(this,arguments)}function rE(n,e){return iE.apply(this,arguments)}function iE(){return(iE=_(function*(n,e){const t=sE(n),i=(yield tE()).transaction(La,"readwrite");return yield i.objectStore(La).put(e,t),yield i.done,e})).apply(this,arguments)}function sE({appConfig:n}){return n.appId}const Bn=new so("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function moe(n,e){return aE.apply(this,arguments)}function aE(){return(aE=_(function*(n,e){const t=yield dE(n),r=BL(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(lE(n.appConfig),i)).json()}catch(s){throw Bn.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error)throw Bn.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Bn.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function cE(){return(cE=_(function*(n,e){const t=yield dE(n),r=BL(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${lE(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw Bn.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error)throw Bn.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Bn.create("token-update-no-token");return o.token})).apply(this,arguments)}function uE(){return(uE=_(function*(n,e){const r={method:"DELETE",headers:yield dE(n)};try{const o=yield(yield fetch(`${lE(n.appConfig)}/${e}`,r)).json();if(o.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw Bn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function lE({projectId:n}){return`${roe}/projects/${n}/registrations`}function dE(n){return hE.apply(this,arguments)}function hE(){return(hE=_(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function BL({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==VL&&(i.web.applicationPubKey=r),i}const yoe=6048e5;function fE(){return fE=_(function*(n){const e=yield function woe(n,e){return _E.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Go(e.getKey("auth")),p256dh:Go(e.getKey("p256dh"))},r=yield function jL(n){return nE.apply(this,arguments)}(n.firebaseDependencies);if(r){if(function Eoe(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+yoe?function Coe(n,e){return gE.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield function $L(n,e){return uE.apply(this,arguments)}(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return HL(n.firebaseDependencies,t)}return HL(n.firebaseDependencies,t)}),fE.apply(this,arguments)}function gE(){return gE=_(function*(n,e){try{const t=yield function _oe(n,e){return cE.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield rE(n.firebaseDependencies,r),t}catch(t){throw t}}),gE.apply(this,arguments)}function HL(n,e){return mE.apply(this,arguments)}function mE(){return(mE=_(function*(n,e){const r={token:yield moe(n,e),createTime:Date.now(),subscriptionOptions:e};return yield rE(n,r),r.token})).apply(this,arguments)}function _E(){return(_E=_(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:coe(e)})})).apply(this,arguments)}function zL(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function Ioe(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}(e,n),function Toe(n,e){e.data&&(n.data=e.data)}(e,n),function Poe(n,e){var t,r,i,o,s;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=e.notification)||void 0===o?void 0:o.click_action;a&&(n.fcmOptions.link=a);const c=null===(s=e.fcmOptions)||void 0===s?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}(e,n),e}function yE(n){return Bn.create("missing-app-config-values",{valueName:n})}!function Aoe(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));t.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ooe{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function Soe(n){if(!n||!n.options)throw yE("App Configuration Object");if(!n.name)throw yE("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw yE(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function vE(){return(vE=_(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(toe,{scope:noe}),n.swRegistration.update().catch(()=>{})}catch(e){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function bE(){return(bE=_(function*(n,e){if(!e&&!n.swRegistration&&(yield function qL(n){return vE.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function CE(){return(CE=_(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=VL)})).apply(this,arguments)}function wE(){return wE=_(function*(n,e){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield function Doe(n,e){return CE.apply(this,arguments)}(n,e?.vapidKey),yield function xoe(n,e){return bE.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function voe(n){return fE.apply(this,arguments)}(n)}),wE.apply(this,arguments)}function EE(){return(EE=_(function*(n,e,t){const r=function Roe(n){switch(n){case Nm.NOTIFICATION_CLICKED:return"notification_open";case Nm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[LL],message_name:t[ioe],message_time:t[ooe],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function IE(){return IE=_(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Nm.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(zL(t)):n.onMessageHandler.next(zL(t)));const r=t.data;(function Moe(n){return"object"==typeof n&&!!n&&LL in n})(r)&&"1"===r["google.c.a.e"]&&(yield function koe(n,e,t){return EE.apply(this,arguments)}(n,t.messageType,r))}),IE.apply(this,arguments)}const WL="@firebase/messaging",KL="0.12.12",Foe=n=>{const e=new Ooe(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function Noe(n,e){return IE.apply(this,arguments)}(e,t)),e},Voe=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function GL(n,e){return wE.apply(this,arguments)}(e,r)}};function QL(){return TE.apply(this,arguments)}function TE(){return(TE=_(function*(){try{yield bh()}catch{return!1}return typeof window<"u"&&xs()&&Z0()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Loe(){Tr(new tr("messaging",Foe,"PUBLIC")),Tr(new tr("messaging-internal",Voe,"PRIVATE")),Kt(WL,KL),Kt(WL,KL,"esm2017")}();const Fm="analytics",$oe="firebase_id",Boe="origin",Hoe=6e4,zoe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",AE="https://www.googletagmanager.com/gtag/js",Mn=new Fu("@firebase/analytics"),Pr=new so("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Goe(n){if(!n.startsWith(AE)){const e=Pr.create("invalid-gtag-resource",{gtagURL:n});return Mn.warn(e.message),""}return n}function JL(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function SE(){return(SE=_(function*(n,e,t,r,i,o){const s=r[i];try{if(s)yield e[s];else{const c=(yield JL(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){Mn.error(a)}n("config",i,o)})).apply(this,arguments)}function OE(){return(OE=_(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield JL(t);for(const c of s){const u=a.find(h=>h.measurementId===c),l=u&&e[u.appId];if(!l){o=[];break}o.push(l)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Mn.error(o)}})).apply(this,arguments)}const tse=30,YL=new class rse{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ise(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function xE(){return(xE=_(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:ise(r)},o=zoe.replace("{app-id}",t),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const c=yield s.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw Pr.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function DE(){return(DE=_(function*(n,e=YL,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Pr.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Pr.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new use;return setTimeout(_(function*(){a.abort()}),void 0!==t?t:Hoe),XL({appId:r,apiKey:i,measurementId:o},s,a,e)})).apply(this,arguments)}function XL(n,e,t){return kE.apply(this,arguments)}function kE(){return kE=_(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=YL){var o;const{appId:s,measurementId:a}=n;try{yield function ase(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Pr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(c){if(a)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw c}try{const c=yield function ose(n){return xE.apply(this,arguments)}(n);return i.deleteThrottleMetadata(s),c}catch(c){const u=c;if(!function cse(n){if(!(n instanceof Ci&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(i.deleteThrottleMetadata(s),a)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:s,measurementId:a};throw c}const l=503===Number(null===(o=u?.customData)||void 0===o?void 0:o.httpStatus)?nw(t,i.intervalMillis,tse):nw(t,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:t+1};return i.setThrottleMetadata(s,h),Mn.debug(`Calling attemptFetch again in ${l} millis`),XL(n,h,r,i)}}),kE.apply(this,arguments)}class use{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let RE,$E;function NE(){return(NE=_(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function BE(){return(BE=_(function*(){if(!xs())return Mn.warn(Pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield bh()}catch(n){return Mn.warn(Pr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function HE(){return HE=_(function*(n,e,t,r,i,o,s){var a;const c=function sse(n){return DE.apply(this,arguments)}(n);c.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Mn.error(g)),e.push(c);const u=function mse(){return BE.apply(this,arguments)}().then(g=>{if(g)return r.getId()}),[l,h]=yield Promise.all([c,u]);(function ese(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(AE)&&t.src.includes(n))return t;return null})(o)||function Koe(n,e){const t=function Woe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Goe}),r=document.createElement("script"),i=`${AE}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,l.measurementId),$E&&(i("consent","default",$E),function ZL(n){$E=n}(void 0)),i("js",new Date);const f=null!==(a=s?.config)&&void 0!==a?a:{};return f[Boe]="firebase",f.update=!0,null!=h&&(f[$oe]=h),i("config",l.measurementId,f),RE&&(i("set",RE),function e5(n){RE=n}(void 0)),l.measurementId}),HE.apply(this,arguments)}class yse{constructor(e){this.app=e}_delete(){return delete ao[this.app.options.appId],Promise.resolve()}}let ao={},t5=[];const n5={};let i5,co,Vm="dataLayer",zE=!1;function bse(n,e,t){!function vse(){const n=[];if(X0()&&n.push("This is a browser extension environment."),Z0()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Pr.create("invalid-analytics-context",{errorInfo:e});Mn.warn(t.message)}}();const r=n.options.appId;if(!r)throw Pr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Pr.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ao[r])throw Pr.create("already-exists",{id:r});if(!zE){!function Qoe(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Vm);const{wrappedGtag:o,gtagCore:s}=function Zoe(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function Xoe(n,e,t,r){function o(){return o=_(function*(s,...a){try{if("event"===s){const[c,u]=a;yield function Yoe(n,e,t,r,i){return OE.apply(this,arguments)}(n,e,t,c,u)}else if("config"===s){const[c,u]=a;yield function Joe(n,e,t,r,i,o){return SE.apply(this,arguments)}(n,e,t,r,c,u)}else if("consent"===s){const[c,u]=a;n("consent",c,u)}else if("get"===s){const[c,u,l]=a;n("get",c,u,l)}else if("set"===s){const[c]=a;n("set",c)}else n(s,...a)}catch(c){Mn.error(c)}}),o.apply(this,arguments)}return function i(s){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(ao,t5,n5,Vm,"gtag");co=o,i5=s,zE=!0}return ao[r]=function _se(n,e,t,r,i,o,s){return HE.apply(this,arguments)}(n,t5,n5,e,i5,Vm,t),new yse(n)}function wse(){return qE.apply(this,arguments)}function qE(){return(qE=_(function*(){if(X0()||!Z0()||!xs())return!1;try{return yield bh()}catch{return!1}})).apply(this,arguments)}const o5="@firebase/analytics";!function Ise(){Tr(new tr(Fm,(e,{options:t})=>bse(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Tr(new tr("analytics-internal",function n(e){try{const t=e.getProvider(Fm).getImmediate();return{logEvent:(r,i,o)=>function Ese(n,e,t,r){n=$n(n),function lse(n,e,t,r,i){return NE.apply(this,arguments)}(co,ao[n.app.options.appId],e,t,r).catch(i=>Mn.error(i))}(t,r,i,o)}}catch(t){throw Pr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Kt(o5,"0.10.8"),Kt(o5,"0.10.8","esm2017")}();class Tse extends we{constructor(e,t){super()}schedule(e,t=0){return this}}const Lm={setInterval(n,e,...t){const{delegate:r}=Lm;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Lm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class a5 extends Tse{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Lm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Lm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,kt(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const c5={now:()=>(c5.delegate||Date).now(),delegate:void 0};class Ph{constructor(e,t=Ph.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Ph.now=c5.now;class u5 extends Ph{constructor(e,t=Ph.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Ase=new class Mse extends u5{}(class Pse extends a5{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),WE=new u5(a5),Sse=WE,Um=new ru("7.6.1"),KE="__angularfire_symbol__analyticsIsSupportedValue",QE="__angularfire_symbol__analyticsIsSupported",JE="__angularfire_symbol__remoteConfigIsSupportedValue",YE="__angularfire_symbol__remoteConfigIsSupported",XE="__angularfire_symbol__messagingIsSupportedValue",ZE="__angularfire_symbol__messagingIsSupported";function tI(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[QE]||(globalThis[QE]=wse().then(n=>globalThis[KE]=n).catch(()=>globalThis[KE]=!1)),globalThis[ZE]||(globalThis[ZE]=QL().then(n=>globalThis[XE]=n).catch(()=>globalThis[XE]=!1)),globalThis[YE]||(globalThis[YE]=eoe().then(n=>globalThis[JE]=n).catch(()=>globalThis[JE]=!1));const nI=(n,e)=>{const t=e?[e]:lL(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};function ju(){}class l5{constructor(e,t=Ase){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class Ose{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ju,{},ju,ju)),t.pipe(mt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let rI=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new l5(Zone.current)),this.insideAngular=t.run(()=>new l5(Zone.current,WE)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(ve(ct))},n.\u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ua(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ja(n){return Ua().ngZone.run(()=>n())}function Dse(n){return Ua(),function kse(n){return function(t){return(t=t.lift(new Ose(n.ngZone))).pipe(dp(n.outsideAngular),lp(n.insideAngular))}}(Ua())(n)}const Rse=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ja(()=>n.apply(void 0,r))},iI=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||(t=ja(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ju,{},ju,ju)))),r[o]=Rse(r[o],t));const i=function xse(n){return Ua().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Ct){const o=Ua();return i.pipe(dp(o.outsideAngular),lp(o.insideAngular))}return ja(()=>i)}return i instanceof Ct?i.pipe(Dse):i instanceof Promise?ja(()=>new Promise((o,s)=>i.then(a=>ja(()=>o(a)),a=>ja(()=>s(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:ja(()=>i)};class $u{constructor(e){return e}}class oI{constructor(){return lL()}}const sI=new _e("angularfire2._apps"),Fse={provide:$u,useFactory:function Nse(n){return n&&1===n.length?n[0]:new $u(hw())},deps:[[new vr,sI]]},Vse={provide:oI,deps:[[new vr,sI]]};function Lse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $u(r)}}let Use=(()=>{class n{constructor(t){Kt("angularfire",Um.full,"core"),Kt("angularfire",Um.full,"app"),Kt("angular",ID.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(ve(So))},n.\u0275mod=Si({type:n}),n.\u0275inj=fi({providers:[Fse,Vse]}),n})();const $se=iI(uL,!0),aI=new Map,d5={activated:!1,tokenObservers:[]},Bse={initialized:!1,enabled:!1};function en(n){return aI.get(n)||Object.assign({},d5)}function jm(){return Bse}const cI="https://content-firebaseappcheck.googleapis.com/v1",Gse="exchangeDebugToken",h5={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Kse{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return _(function*(){t.stop();try{t.pending=new Mm,t.pending.promise.catch(r=>{}),yield function Qse(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Mm,t.pending.promise.catch(r=>{}),yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Hn=new so("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function uI(n){if(!en(n).activated)throw Hn.create("use-before-activation",{appName:n.name})}function Hm(n,e){return dI.apply(this,arguments)}function dI(){return(dI=_(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const h=yield i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const o={method:"POST",body:JSON.stringify(e),headers:r};let s,a;try{s=yield fetch(n,o)}catch(h){throw Hn.create("fetch-network-error",{originalErrorMessage:h?.message})}if(200!==s.status)throw Hn.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(h){throw Hn.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Hn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}function f5(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${cI}/projects/${t}/apps/${r}:${Gse}?key=${i}`,body:{debug_token:e}}}const Zse="firebase-app-check-database",eae=1,Mh="firebase-app-check-store";let zm=null;function hI(){return(hI=_(function*(n,e){const r=(yield function g5(){return zm||(zm=new Promise((n,e)=>{try{const t=indexedDB.open(Zse,eae);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Hn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Mh,{keyPath:"compositeKey"})}}catch(t){e(Hn.create("storage-open",{originalErrorMessage:t?.message}))}}),zm)}()).transaction(Mh,"readwrite"),o=r.objectStore(Mh).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Hn.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}const Ah=new Fu("@firebase/app-check");function gI(n,e){return xs()?function nae(n,e){return function m5(n,e){return hI.apply(this,arguments)}(function y5(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ah.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _I(){return jm().enabled}function yI(){return vI.apply(this,arguments)}function vI(){return(vI=_(function*(){const n=jm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cae={error:"UNKNOWN_ERROR"};function uae(n){return Y0.encodeString(JSON.stringify(n),!1)}function qm(n){return bI.apply(this,arguments)}function bI(){return(bI=_(function*(n,e=!1){const t=n.app;uI(t);const r=en(t);let o,i=r.token;if(i&&!Bu(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(Bu(c)?i=c:yield gI(t,void 0))}if(!e&&i&&Bu(i))return{token:i.token};let a,s=!1;if(_I()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Hm(f5(t,yield yI()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const c=yield r.exchangeTokenPromise;return yield gI(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield en(t).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?Ah.warn(c.message):Ah.error(c),o=c}return i?o?a=Bu(i)?{token:i.token,internalError:o}:w5(o):(a={token:i.token},r.token=i,yield gI(t,i)):a=w5(o),s&&function C5(n,e){const t=en(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,a),a})).apply(this,arguments)}function v5(n){return CI.apply(this,arguments)}function CI(){return(CI=_(function*(n){const e=n.app;uI(e);const{provider:t}=en(e);if(_I()){const r=yield yI(),{token:i}=yield Hm(f5(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function EI(n,e){const t=en(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function b5(n){const{app:e}=n,t=en(e);let r=t.tokenRefresher;r||(r=function lae(n){const{app:e}=n;return new Kse(_(function*(){let r;if(r=en(e).token?yield qm(n,!0):yield qm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=en(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},h5.RETRIAL_MIN_WAIT,h5.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Bu(n){return n.expireTimeMillis-Date.now()>0}function w5(n){return{token:uae(cae),error:n}}class dae{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=en(this.app);for(const t of e)EI(this.app,t.next);return Promise.resolve()}}const O5="app-check-internal";!function Tae(){Tr(new tr("app-check",n=>function hae(n,e){return new dae(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(O5).initialize()})),Tr(new tr(O5,n=>function fae(n){return{getToken:e=>qm(n,e),getLimitedUseToken:()=>v5(n),addTokenListener:e=>function wI(n,e,t,r){const{app:i}=n,o=en(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Bu(o.token)){const a=o.token;Promise.resolve().then(()=>{t({token:a.token}),b5(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>b5(n))}(n,"INTERNAL",e),removeTokenListener:e=>EI(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Kt("@firebase/app-check","0.8.8")}();class MI{constructor(){return nI("app-check")}}typeof window<"u"&&window;const Oae=function D5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},k5=new so("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wm=new Fu("@firebase/auth");function Km(n,...e){Wm.logLevel<=Ze.ERROR&&Wm.error(`Auth (${Ra}): ${n}`,...e)}function Br(n,...e){throw OI(n,...e)}function Ei(n,...e){return OI(n,...e)}function SI(n,e,t){const r=Object.assign(Object.assign({},Oae()),{[e]:t});return new so("auth","Firebase",r).create(e,{appName:n.name})}function An(n){return SI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OI(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return k5.create(n,...e)}function de(n,e,...t){if(!n)throw OI(e,...t)}function uo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Km(e),new Error(e)}function ks(n,e){n||uo(e)}function Sh(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function R5(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Oh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ks(t>e,"Short delay should be less than long delay!"),this.isMobile=function _ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}()||function Cne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function Dae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function xI(){return"http:"===R5()||"https:"===R5()}()||X0()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function DI(n,e){ks(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class N5{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void uo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void uo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void uo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Rae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Nae=new Oh(3e4,6e4);function Rt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Nt(n,e,t,r){return kI.apply(this,arguments)}function kI(){return(kI=_(function*(n,e,t,r,i={}){return F5(n,i,_(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Ch(Object.assign({key:n.config.apiKey},s)).slice(1),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},o);return function bne(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),N5.fetch()(V5(n,n.config.apiHost,t,a),u)}))})).apply(this,arguments)}function F5(n,e,t){return RI.apply(this,arguments)}function RI(){return(RI=_(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Rae),e);try{const i=new Vae(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw xh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw xh(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw xh(n,"email-already-in-use",s);if("USER_DISABLED"===c)throw xh(n,"user-disabled",s);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw SI(n,l,u);Br(n,l)}}catch(i){if(i instanceof Ci)throw i;Br(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function NI(){return(NI=_(function*(n,e,t,r,i={}){const o=yield Nt(n,e,t,r,i);return"mfaPendingCredential"in o&&Br(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function V5(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?DI(n.config,i):`${n.config.apiScheme}://${i}`}class Vae{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ei(this.auth,"network-request-failed")),Nae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ei(n,e,r);return i.customData._tokenResponse=t,i}function LI(){return(LI=_(function*(n,e){return Nt(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function B5(n,e){return jI.apply(this,arguments)}function jI(){return(jI=_(function*(n,e){return Nt(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Dh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $I(){return($I=_(function*(n,e=!1){const t=$n(n),r=yield t.getIdToken(e),i=Qm(r);de(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Dh(BI(i.auth_time)),issuedAtTime:Dh(BI(i.iat)),expirationTime:Dh(BI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function BI(n){return 1e3*Number(n)}function Qm(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Km("JWT malformed, contained fewer than 3 sections"),null;try{const i=Tm(t);return i?JSON.parse(i):(Km("Failed to decode base64 JWT payload"),null)}catch(i){return Km("Caught error parsing JWT payload as JSON",i?.toString()),null}}function H5(n){const e=Qm(n);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ko(n,e){return HI.apply(this,arguments)}function HI(){return(HI=_(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Ci&&function Bae({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class Hae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield t.iteration()}),r)}iteration(){var e=this;return _(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class zI{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dh(this.lastLoginAt),this.creationTime=Dh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kh(n){return qI.apply(this,arguments)}function qI(){return(qI=_(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Ko(n,B5(t,{idToken:r}));de(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?z5(o.providerUserInfo):[],a=function qae(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,s),l=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new zI(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,h)})).apply(this,arguments)}function GI(){return(GI=_(function*(n){const e=$n(n);yield kh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function z5(n){return n.map(e=>{var{providerId:t}=e,r=(0,re.__rest)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function WI(){return(WI=_(function*(n,e){const t=yield F5(n,{},_(function*(){const r=Ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=V5(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",N5.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function KI(){return(KI=_(function*(n,e){return Nt(n,"POST","/v2/accounts:revokeToken",Rt(n,e))})).apply(this,arguments)}class zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(0!==e.length,"internal-error");const t=H5(e);this.updateTokensAndExpiration(e,null,t)}getToken(e){var t=this;return _(function*(r,i=!1){return i||!t.accessToken||t.isExpired?(de(t.refreshToken,r,"user-token-expired"),t.refreshToken?(yield t.refresh(r,t.refreshToken),t.accessToken):null):t.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return _(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Gae(n,e){return WI.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new zu;return r&&(de("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(de("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(de("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zu,this.toJSON())}_performRefresh(){return uo("not implemented")}}function Rs(n,e){de("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Qo{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=(0,re.__rest)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zI(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return _(function*(){const r=yield Ko(t,t.stsTokenManager.getToken(t.auth,e));return de(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function $ae(n){return $I.apply(this,arguments)}(this,e)}reload(){return function zae(n){return GI.apply(this,arguments)}(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e){var t=this;return _(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==t.stsTokenManager.accessToken&&(t.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield kh(t)),yield t.auth._persistUserIfCurrent(t),o&&t.auth._notifyListenersIfCurrent(t)}).apply(this,arguments)}delete(){var e=this;return _(function*(){if(Ds(e.auth.app))return Promise.reject(An(e.auth));const t=yield e.getIdToken();return yield Ko(e,function Uae(n,e){return LI.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,l;const h=null!==(r=t.displayName)&&void 0!==r?r:void 0,f=null!==(i=t.email)&&void 0!==i?i:void 0,g=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,b=null!==(s=t.photoURL)&&void 0!==s?s:void 0,C=null!==(a=t.tenantId)&&void 0!==a?a:void 0,I=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,A=null!==(u=t.createdAt)&&void 0!==u?u:void 0,M=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:N,emailVerified:j,isAnonymous:Q,providerData:le,stsTokenManager:x}=t;de(N&&x,e,"internal-error");const P=zu.fromJSON(this.name,x);de("string"==typeof N,e,"internal-error"),Rs(h,e.name),Rs(f,e.name),de("boolean"==typeof j,e,"internal-error"),de("boolean"==typeof Q,e,"internal-error"),Rs(g,e.name),Rs(b,e.name),Rs(C,e.name),Rs(I,e.name),Rs(A,e.name),Rs(M,e.name);const S=new Qo({uid:N,auth:e,email:f,emailVerified:j,displayName:h,isAnonymous:Q,photoURL:b,phoneNumber:g,tenantId:C,stsTokenManager:P,createdAt:A,lastLoginAt:M});return le&&Array.isArray(le)&&(S.providerData=le.map(k=>Object.assign({},k))),I&&(S._redirectEventId=I),S}static _fromIdTokenResponse(e,t){return _(function*(r,i,o=!1){const s=new zu;s.updateFromServerResponse(i);const a=new Qo({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield kh(a),a}).apply(this,arguments)}static _fromGetAccountInfoResponse(e,t,r){return _(function*(){const i=t.users[0];de(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?z5(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new zu;a.updateFromIdToken(r);const c=new Qo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new zI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const q5=new Map;function Jo(n){ks(n instanceof Function,"Expected a class definition");let e=q5.get(n);return e?(ks(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,q5.set(n,e),e)}const G5=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(t,r){var i=this;return _(function*(){i.storage[t]=r})()}_get(t){var r=this;return _(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return _(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Jm(n,e,t){return`firebase:${n}:${e}:${t}`}class qu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Jm(this.userKey,i.apiKey,o),this.fullPersistenceKey=Jm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Qo._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return _(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t){return _(function*(r,i,o="authUser"){if(!i.length)return new qu(Jo(G5),r,o);const s=(yield Promise.all(i.map(function(){var h=_(function*(f){if(yield f._isAvailable())return f});return function(f){return h.apply(this,arguments)}}()))).filter(h=>h);let a=s[0]||Jo(G5);const c=Jm(o,r.config.apiKey,r.name);let u=null;for(const h of i)try{const f=yield h._get(c);if(f){const g=Qo._fromJSON(r,f);h!==a&&(u=g),a=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return a._shouldAllowMigration&&l.length?(a=l[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var h=_(function*(f){if(f!==a)try{yield f._remove(c)}catch{}});return function(f){return h.apply(this,arguments)}}())),new qu(a,r,o)):new qu(a,r,o)}).apply(this,arguments)}}function W5(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z5(e))return"Blackberry";if(eU(e))return"Webos";if(Q5(e))return"Safari";if((e.includes("chrome/")||J5(e))&&!e.includes("edge/"))return"Chrome";if(X5(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function K5(n=ln()){return/firefox\//i.test(n)}function Q5(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J5(n=ln()){return/crios\//i.test(n)}function Y5(n=ln()){return/iemobile/i.test(n)}function X5(n=ln()){return/android/i.test(n)}function Z5(n=ln()){return/blackberry/i.test(n)}function eU(n=ln()){return/webos/i.test(n)}function QI(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tU(n=ln()){return QI(n)||X5(n)||eU(n)||Z5(n)||/windows phone/i.test(n)||Y5(n)}function nU(n,e=[]){let t;switch(n){case"Browser":t=W5(ln());break;case"Worker":t=`${W5(ln())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ra}/${r}`}class Jae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return _(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function JI(){return(JI=_(function*(n,e={}){return Nt(n,"GET","/v2/passwordPolicy",Rt(n,e))})).apply(this,arguments)}class Zae{constructor(e){var t,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(t=c.meetsMinPasswordLength)||void 0===t||t),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class ece{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rU(this),this.idTokenSubscription=new rU(this),this.beforeStateQueue=new Jae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Jo(t)),this._initializationPromise=this.queue(_(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield qu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUserFromIdToken(e){var t=this;return _(function*(){try{const r=yield B5(t,{idToken:e}),i=yield Qo._fromGetAccountInfoResponse(t,r,e);yield t.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield t.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var t=this;return _(function*(){var r;if(Ds(t.app)){const a=t.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>t.initializeCurrentUserFromIdToken(a).then(c,c))}):t.directlySetCurrentUser(null)}const i=yield t.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield t.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return de(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return _(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return _(function*(){try{yield kh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function kae(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return _(function*(){if(Ds(t.app))return Promise.reject(An(t));const r=e?$n(e):null;return r&&de(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e){var t=this;return _(function*(r,i=!1){if(!t._deleted)return r&&de(t.tenantId===r.tenantId,t,"tenant-id-mismatch"),i||(yield t.beforeStateQueue.runMiddleware(r)),t.queue(_(function*(){yield t.directlySetCurrentUser(r),t.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var e=this;return _(function*(){return Ds(e.app)?Promise.reject(An(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var t=this;return Ds(this.app)?Promise.reject(An(this)):this.queue(_(function*(){yield t.assertedPersistence.setPersistence(Jo(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return _(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return _(function*(){const t=yield function Yae(n){return JI.apply(this,arguments)}(e),r=new Zae(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new so("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return _(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function Wae(n,e){return KI.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return _(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return _(function*(){if(!t.redirectPersistenceManager){const r=e&&Jo(e)||t._popupRedirectResolver;de(r,t,"argument-error"),t.redirectPersistenceManager=yield qu.create(t,[Jo(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return _(function*(){var r,i;return t._isInitialized&&(yield t.queue(_(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return _(function*(){if(e===t.currentUser)return t.queue(_(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof t){const c=e.addObserver(t,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var t=this;return _(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return _(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function xae(n,...e){Wm.logLevel<=Ze.WARN&&Wm.warn(`Auth (${Ra}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function dn(n){return $n(n)}class rU{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Mne(n,e){const t=new Ane(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rh={loadJS:()=>_(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iU(n){return`__${n}${Math.floor(1e6*Math.random())}`}function aU(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cU(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class Fh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return uo("not implemented")}_getIdTokenResponse(e){return uo("not implemented")}_linkToIdToken(e,t){return uo("not implemented")}_getReauthenticationResolver(e){return uo("not implemented")}}function Yo(n,e){return pT.apply(this,arguments)}function pT(){return(pT=_(function*(n,e){return function Wo(n,e,t,r){return NI.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",Rt(n,e))})).apply(this,arguments)}class Xo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class xce extends Xo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r){return _(function*(i,o,s,a=!1){const c=yield Qo._fromIdTokenResponse(i,s,a),u=hU(s);return new Ii({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(e,t,r){return _(function*(){yield e._updateTokensIfNecessary(r,!0);const i=hU(r);return new Ii({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function hU(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class e_ extends Ci{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e_.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new e_(e,t,r,i)}}function fU(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?e_._fromErrorAndOperation(n,o,e,r):o})}function IT(){return(IT=_(function*(n,e,t=!1){const r=yield Ko(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ii._forOperation(n,"link",r)})).apply(this,arguments)}function PT(){return(PT=_(function*(n,e,t=!1){const{auth:r}=n;if(Ds(r.app))return Promise.reject(An(r));const i="reauthenticate";try{const o=yield Ko(n,fU(r,i,e,n),t);de(o.idToken,r,"internal-error");const s=Qm(o.idToken);de(s,r,"internal-error");const{sub:a}=s;return de(n.uid===a,r,"user-mismatch"),Ii._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Br(r,"user-mismatch"),o}})).apply(this,arguments)}function MT(){return(MT=_(function*(n,e,t=!1){if(Ds(n.app))return Promise.reject(An(n));const r="signIn",i=yield fU(n,r,e),o=yield Ii._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}const r_="__sak";class vU{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(r_,"1"),this.storage.removeItem(r_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zce=(()=>{class n extends vU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tU(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=t.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Qae(){return function wne(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return _(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return _(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return _(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),bU=(()=>{class n extends vU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let tue=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return _(function*(){const i=t,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=_(function*(f){return f(i.origin,a)});return function(f){return h.apply(this,arguments)}}()),l=yield function eue(n){return Promise.all(n.map(function(){var e=_(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:l})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function iP(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class nue{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t){var r=this;return _(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((l,h)=>{const f=iP("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(b){const C=b;if(C.data.eventId===f)switch(C.data.status){case"ack":clearTimeout(g),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),l(C.data.response);break;default:clearTimeout(g),clearTimeout(c),h(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:f,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function mn(){return window}function oP(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function sP(){return(sP=_(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const CU="firebaseLocalStorageDb",i_="firebaseLocalStorage",wU="fbase_key";class $h{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function o_(n,e){return n.transaction([i_],e?"readwrite":"readonly").objectStore(i_)}function aP(){const n=indexedDB.open(CU,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(i_,{keyPath:wU})}catch(i){t(i)}}),n.addEventListener("success",_(function*(){const r=n.result;r.objectStoreNames.contains(i_)?e(r):(r.close(),yield function cue(){const n=indexedDB.deleteDatabase(CU);return new $h(n).toPromise()}(),e(yield aP()))}))})}function EU(n,e,t){return cP.apply(this,arguments)}function cP(){return(cP=_(function*(n,e,t){const r=o_(n,!0).put({[wU]:e,value:t});return new $h(r).toPromise()})).apply(this,arguments)}function uP(){return(uP=_(function*(n,e){const t=o_(n,!1).get(e),r=yield new $h(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function IU(n,e){const t=o_(n,!0).delete(e);return new $h(t).toPromise()}const hue=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return _(function*(){return t.db||(t.db=yield aP()),t.db})()}_withRetries(t){var r=this;return _(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return _(function*(){return oP()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return _(function*(){t.receiver=tue._getInstance(function sue(){return oP()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=_(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=_(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return _(function*(){var r,i;if(t.activeServiceWorker=yield function iue(){return sP.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new nue(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return _(function*(){if(r.sender&&r.activeServiceWorker&&function oue(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return _(function*(){try{if(!indexedDB)return!1;const t=yield aP();return yield EU(t,r_,"1"),yield IU(t,r_),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return _(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return _(function*(){return i._withPendingWrite(_(function*(){return yield i._withRetries(o=>EU(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return _(function*(){const i=yield r._withRetries(o=>function uue(n,e){return uP.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return _(function*(){return r._withPendingWrite(_(function*(){return yield r._withRetries(i=>IU(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return _(function*(){const r=yield t._withRetries(s=>{const a=o_(s,!1).getAll();return new $h(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),i.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(_(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();iU("rcb"),new Oh(3e4,6e4);class yP extends Fh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Mue(n){return function mU(n,e){return MT.apply(this,arguments)}(n.auth,new yP(n),n.bypassAuthState)}function Aue(n){const{auth:e,user:t}=n;return de(t,e,"internal-error"),function gU(n,e){return PT.apply(this,arguments)}(t,new yP(n),n.bypassAuthState)}function Sue(n){return vP.apply(this,arguments)}function vP(){return(vP=_(function*(n){const{auth:e,user:t}=n;return de(t,e,"internal-error"),function ET(n,e){return IT.apply(this,arguments)}(t,new yP(n),n.bypassAuthState)})).apply(this,arguments)}class Oue{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=_(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return _(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void t.reject(a);const u={auth:t.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(c)(u))}catch(l){t.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mue;case"linkViaPopup":case"linkViaRedirect":return Sue;case"reauthViaPopup":case"reauthViaRedirect":return Aue;default:Br(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Oh(2e3,1e4);const xue="pendingRedirect",Bh=new Map;class Due extends Oue{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return _(function*(){let r=Bh.get(t.auth._key());if(!r){try{const o=(yield function kue(n,e){return IP.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Bh.set(t.auth._key(),r)}return t.bypassAuthState||Bh.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return _(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return _(function*(){})()}cleanUp(){}}function IP(){return(IP=_(function*(n,e){const t=function MU(n){return Jm(xue,n.config.apiKey,n.name)}(e),r=function PU(n){return Jo(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function Rue(n,e){Bh.set(n._key(),e)}function AU(n,e){return xP.apply(this,arguments)}function xP(){return(xP=_(function*(n,e,t=!1){if(Ds(n.app))return Promise.reject(An(n));const r=dn(n),i=function Ba(n,e){return e?Jo(e):(de(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),s=yield new Due(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Uue{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function jue(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xU(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!xU(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ei(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(OU(e))}saveEventToCache(e){this.cachedEventUids.add(OU(e)),this.lastProcessedEventTime=Date.now()}}function OU(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xU({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function kP(){return(kP=_(function*(n,e={}){return Nt(n,"GET","/v1/projects",e)})).apply(this,arguments)}const Bue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hue=/^https?/;function RP(){return RP=_(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function $ue(n){return kP.apply(this,arguments)}(n);for(const t of e)try{if(que(t))return}catch{}Br(n,"unauthorized-domain")}),RP.apply(this,arguments)}function que(n){const e=Sh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===r}if(!Hue.test(t))return!1;if(Bue.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Gue=new Oh(3e4,6e4);function DU(){const n=mn().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function Wue(n){return new Promise((e,t)=>{var r,i,o;function s(){DU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DU(),t(Ei(n,"network-request-failed"))},timeout:Gue.get()})}if(null!==(i=null===(r=mn().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=mn().gapi)||void 0===o||!o.load){const a=iU("iframefcb");return mn()[a]=()=>{gapi.load?s():t(Ei(n,"network-request-failed"))},function YI(n){return Rh.loadJS(n)}(`${function ice(){return Rh.gapiScript}()}?onload=${a}`).catch(c=>t(c))}s()}}).catch(e=>{throw a_=null,e})}let a_=null;const Que=new Oh(5e3,15e3),Jue="__/auth/iframe",Yue="emulator/auth/iframe",Xue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ele(n){const e=n.config;de(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?DI(e,Yue):`https://${n.config.authDomain}/${Jue}`,r={apiKey:e.apiKey,appName:n.name,v:Ra},i=Zue.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ch(r).slice(1)}`}function NP(){return NP=_(function*(n){const e=yield function Kue(n){return a_=a_||Wue(n),a_}(n),t=mn().gapi;return de(t,n,"internal-error"),e.open({where:document.body,url:ele(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xue,dontclear:!0},r=>new Promise(function(){var i=_(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Ei(n,"network-request-failed"),c=mn().setTimeout(()=>{s(a)},Que.get());function u(){mn().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),NP.apply(this,arguments)}const nle={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ule="__/auth/handler",lle="emulator/auth/handler",dle=encodeURIComponent("fac");function RU(n,e,t,r,i,o){return FP.apply(this,arguments)}function FP(){return(FP=_(function*(n,e,t,r,i,o){de(n.config.authDomain,n,"auth-domain-config-required"),de(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ra,eventId:i};if(e instanceof Xo){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",function Pne(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,h]of Object.entries(o||{}))s[l]=h}if(e instanceof xce){const l=e.getScopes().filter(h=>""!==h);l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=yield n._getAppCheckToken(),u=c?`#${dle}=${encodeURIComponent(c)}`:"";return`${function hle({config:n}){return n.emulator?DI(n,lle):`https://${n.authDomain}/${ule}`}(n)}?${Ch(a).slice(1)}${u}`})).apply(this,arguments)}const VP="webStorageSupport",ple=class fle{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bU,this._completeRedirectFn=AU,this._overrideRedirectResult=Rue}_openPopup(e,t,r,i){var o=this;return _(function*(){var s;ks(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield RU(e,t,r,Sh(),i);return function ale(n,e,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},nle),{width:r.toString(),height:i.toString(),top:o,left:s}),u=ln().toLowerCase();t&&(a=J5(u)?"_blank":t),K5(u)&&(e=e||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((f,[g,b])=>`${f}${g}=${b},`,"");if(function Kae(n=ln()){var e;return QI(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function cle(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new kU(null);const h=window.open(e||"",a,l);de(h,n,"popup-blocked");try{h.focus()}catch{}return new kU(h)}(e,a,iP())})()}_openRedirect(e,t,r,i){var o=this;return _(function*(){return yield o._originValidation(e),function rue(n){mn().location.href=n}(yield RU(e,t,r,Sh(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ks(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return _(function*(){const r=yield function tle(n){return NP.apply(this,arguments)}(e),i=new Uue(e);return r.register("authEvent",o=>(de(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(VP,{type:VP},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[VP];void 0!==s&&t(!!s),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function zue(n){return RP.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tU()||Q5()||QI()}};var LU="@firebase/auth";class gle{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return _(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vle=YV("authIdTokenMaxAge")||300;let jU=null;const ble=n=>function(){var e=_(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>vle)return;const o=r?.token;jU!==o&&(jU=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Cle(n=hw()){const e=Vu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function cce(n,e){const t=Vu(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Nu(t.getOptions(),e??{}))return i;Br(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:ple,persistence:[hue,Zce,bU]}),r=YV("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=ble(o.toString());(function Gce(n,e,t){$n(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function qce(n,e,t,r){$n(n).onIdTokenChanged(e,t,r)}(t,a=>s(a))}}const i=QV("auth");return i&&function lce(n,e,t){const r=dn(n);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=aU(e),{host:s,port:a}=function dce(n){const e=aU(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:cU(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:cU(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function hce(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function tce(n){Rh=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Ei("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function wle(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function _le(n){Tr(new tr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;de(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nU(n)},u=new ece(r,i,o,c);return function uce(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Jo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Tr(new tr("auth-internal",e=>{const t=dn(e.getProvider("auth").getImmediate());return new gle(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kt(LU,"1.7.9",function mle(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),Kt(LU,"1.7.9","esm2017")}("Browser");class UP{constructor(e){return e}}class BU{constructor(){return nI("auth")}}const jP=new _e("angularfire2.auth-instances");function Ile(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new UP(r)}}const Tle={provide:BU,deps:[[new vr,jP]]},Ple={provide:UP,useFactory:function Ele(n,e){const t=tI("auth",n,e);return t&&new UP(t)},deps:[[new vr,jP],$u]};let Mle=(()=>{class n{constructor(){Kt("angularfire",Um.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Si({type:n}),n.\u0275inj=fi({providers:[Ple,Tle]}),n})();const Sle=iI(Cle,!0);var Ha,HU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zU={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(x,P,S){S||(S=0);var k=Array(16);if("string"==typeof P)for(var R=0;16>R;++R)k[R]=P.charCodeAt(S++)|P.charCodeAt(S++)<<8|P.charCodeAt(S++)<<16|P.charCodeAt(S++)<<24;else for(R=0;16>R;++R)k[R]=P[S++]|P[S++]<<8|P[S++]<<16|P[S++]<<24;var B=x.g[3],O=(P=x.g[0])+(B^(S=x.g[1])&((R=x.g[2])^B))+k[0]+3614090360&4294967295;O=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=(S=(R=(B=(P=S+(O<<7&4294967295|O>>>25))+((O=B+(R^P&(S^R))+k[1]+3905402710&4294967295)<<12&4294967295|O>>>20))+((O=R+(S^B&(P^S))+k[2]+606105819&4294967295)<<17&4294967295|O>>>15))+((O=S+(P^R&(B^P))+k[3]+3250441966&4294967295)<<22&4294967295|O>>>10))+((O=P+(B^S&(R^B))+k[4]+4118548399&4294967295)<<7&4294967295|O>>>25))+((O=B+(R^P&(S^R))+k[5]+1200080426&4294967295)<<12&4294967295|O>>>20))+((O=R+(S^B&(P^S))+k[6]+2821735955&4294967295)<<17&4294967295|O>>>15))+((O=S+(P^R&(B^P))+k[7]+4249261313&4294967295)<<22&4294967295|O>>>10))+((O=P+(B^S&(R^B))+k[8]+1770035416&4294967295)<<7&4294967295|O>>>25))+((O=B+(R^P&(S^R))+k[9]+2336552879&4294967295)<<12&4294967295|O>>>20))+((O=R+(S^B&(P^S))+k[10]+4294925233&4294967295)<<17&4294967295|O>>>15))+((O=S+(P^R&(B^P))+k[11]+2304563134&4294967295)<<22&4294967295|O>>>10))+((O=P+(B^S&(R^B))+k[12]+1804603682&4294967295)<<7&4294967295|O>>>25))+((O=B+(R^P&(S^R))+k[13]+4254626195&4294967295)<<12&4294967295|O>>>20))+((O=R+(S^B&(P^S))+k[14]+2792965006&4294967295)<<17&4294967295|O>>>15))+((O=S+(P^R&(B^P))+k[15]+1236535329&4294967295)<<22&4294967295|O>>>10))+((O=P+(R^B&(S^R))+k[1]+4129170786&4294967295)<<5&4294967295|O>>>27))+((O=B+(S^R&(P^S))+k[6]+3225465664&4294967295)<<9&4294967295|O>>>23))+((O=R+(P^S&(B^P))+k[11]+643717713&4294967295)<<14&4294967295|O>>>18))+((O=S+(B^P&(R^B))+k[0]+3921069994&4294967295)<<20&4294967295|O>>>12))+((O=P+(R^B&(S^R))+k[5]+3593408605&4294967295)<<5&4294967295|O>>>27))+((O=B+(S^R&(P^S))+k[10]+38016083&4294967295)<<9&4294967295|O>>>23))+((O=R+(P^S&(B^P))+k[15]+3634488961&4294967295)<<14&4294967295|O>>>18))+((O=S+(B^P&(R^B))+k[4]+3889429448&4294967295)<<20&4294967295|O>>>12))+((O=P+(R^B&(S^R))+k[9]+568446438&4294967295)<<5&4294967295|O>>>27))+((O=B+(S^R&(P^S))+k[14]+3275163606&4294967295)<<9&4294967295|O>>>23))+((O=R+(P^S&(B^P))+k[3]+4107603335&4294967295)<<14&4294967295|O>>>18))+((O=S+(B^P&(R^B))+k[8]+1163531501&4294967295)<<20&4294967295|O>>>12))+((O=P+(R^B&(S^R))+k[13]+2850285829&4294967295)<<5&4294967295|O>>>27))+((O=B+(S^R&(P^S))+k[2]+4243563512&4294967295)<<9&4294967295|O>>>23))+((O=R+(P^S&(B^P))+k[7]+1735328473&4294967295)<<14&4294967295|O>>>18))+((O=S+(B^P&(R^B))+k[12]+2368359562&4294967295)<<20&4294967295|O>>>12))+((O=P+(S^R^B)+k[5]+4294588738&4294967295)<<4&4294967295|O>>>28))+((O=B+(P^S^R)+k[8]+2272392833&4294967295)<<11&4294967295|O>>>21))+((O=R+(B^P^S)+k[11]+1839030562&4294967295)<<16&4294967295|O>>>16))+((O=S+(R^B^P)+k[14]+4259657740&4294967295)<<23&4294967295|O>>>9))+((O=P+(S^R^B)+k[1]+2763975236&4294967295)<<4&4294967295|O>>>28))+((O=B+(P^S^R)+k[4]+1272893353&4294967295)<<11&4294967295|O>>>21))+((O=R+(B^P^S)+k[7]+4139469664&4294967295)<<16&4294967295|O>>>16))+((O=S+(R^B^P)+k[10]+3200236656&4294967295)<<23&4294967295|O>>>9))+((O=P+(S^R^B)+k[13]+681279174&4294967295)<<4&4294967295|O>>>28))+((O=B+(P^S^R)+k[0]+3936430074&4294967295)<<11&4294967295|O>>>21))+((O=R+(B^P^S)+k[3]+3572445317&4294967295)<<16&4294967295|O>>>16))+((O=S+(R^B^P)+k[6]+76029189&4294967295)<<23&4294967295|O>>>9))+((O=P+(S^R^B)+k[9]+3654602809&4294967295)<<4&4294967295|O>>>28))+((O=B+(P^S^R)+k[12]+3873151461&4294967295)<<11&4294967295|O>>>21))+((O=R+(B^P^S)+k[15]+530742520&4294967295)<<16&4294967295|O>>>16))+((O=S+(R^B^P)+k[2]+3299628645&4294967295)<<23&4294967295|O>>>9))+((O=P+(R^(S|~B))+k[0]+4096336452&4294967295)<<6&4294967295|O>>>26))+((O=B+(S^(P|~R))+k[7]+1126891415&4294967295)<<10&4294967295|O>>>22))+((O=R+(P^(B|~S))+k[14]+2878612391&4294967295)<<15&4294967295|O>>>17))+((O=S+(B^(R|~P))+k[5]+4237533241&4294967295)<<21&4294967295|O>>>11))+((O=P+(R^(S|~B))+k[12]+1700485571&4294967295)<<6&4294967295|O>>>26))+((O=B+(S^(P|~R))+k[3]+2399980690&4294967295)<<10&4294967295|O>>>22))+((O=R+(P^(B|~S))+k[10]+4293915773&4294967295)<<15&4294967295|O>>>17))+((O=S+(B^(R|~P))+k[1]+2240044497&4294967295)<<21&4294967295|O>>>11))+((O=P+(R^(S|~B))+k[8]+1873313359&4294967295)<<6&4294967295|O>>>26))+((O=B+(S^(P|~R))+k[15]+4264355552&4294967295)<<10&4294967295|O>>>22))+((O=R+(P^(B|~S))+k[6]+2734768916&4294967295)<<15&4294967295|O>>>17))+((O=S+(B^(R|~P))+k[13]+1309151649&4294967295)<<21&4294967295|O>>>11))+((B=(P=S+((O=P+(R^(S|~B))+k[4]+4149444226&4294967295)<<6&4294967295|O>>>26))+((O=B+(S^(P|~R))+k[11]+3174756917&4294967295)<<10&4294967295|O>>>22))^((R=B+((O=R+(P^(B|~S))+k[2]+718787259&4294967295)<<15&4294967295|O>>>17))|~P))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+P&4294967295,x.g[1]=x.g[1]+(R+(O<<21&4294967295|O>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+B&4294967295}function s(x,P){this.h=P;for(var S=[],k=!0,R=x.length-1;0<=R;R--){var B=0|x[R];k&&B==P||(S[R]=B,k=!1)}this.g=S}(function e(x,P){function S(){}S.prototype=P.prototype,x.D=P.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(k,R,B){for(var O=Array(arguments.length-2),cs=2;cs<arguments.length;cs++)O[cs-2]=arguments[cs];return P.prototype[R].apply(k,O)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(x,P){void 0===P&&(P=x.length);for(var S=P-this.blockSize,k=this.B,R=this.h,B=0;B<P;){if(0==R)for(;B<=S;)i(this,x,B),B+=this.blockSize;if("string"==typeof x){for(;B<P;)if(k[R++]=x.charCodeAt(B++),R==this.blockSize){i(this,k),R=0;break}}else for(;B<P;)if(k[R++]=x[B++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=P},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var P=1;P<x.length-8;++P)x[P]=0;var S=8*this.o;for(P=x.length-8;P<x.length;++P)x[P]=255&S,S/=256;for(this.u(x),x=Array(16),P=S=0;4>P;++P)for(var k=0;32>k;k+=8)x[S++]=this.g[P]>>>k&255;return x};var a={};function c(x){return-128<=x&&128>x?function o(x,P){var S=a;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=P(x)}(x,function(P){return new s([0|P],0>P?-1:0)}):new s([0|x],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return I(u(-x));for(var P=[],S=1,k=0;x>=S;k++)P[k]=x/S|0,S*=4294967296;return new s(P,0)}var h=c(0),f=c(1),g=c(16777216);function b(x){if(0!=x.h)return!1;for(var P=0;P<x.g.length;P++)if(0!=x.g[P])return!1;return!0}function C(x){return-1==x.h}function I(x){for(var P=x.g.length,S=[],k=0;k<P;k++)S[k]=~x.g[k];return new s(S,~x.h).add(f)}function A(x,P){return x.add(I(P))}function M(x,P){for(;(65535&x[P])!=x[P];)x[P+1]+=x[P]>>>16,x[P]&=65535,P++}function N(x,P){this.g=x,this.h=P}function j(x,P){if(b(P))throw Error("division by zero");if(b(x))return new N(h,h);if(C(x))return P=j(I(x),P),new N(I(P.g),I(P.h));if(C(P))return P=j(x,I(P)),new N(I(P.g),P.h);if(30<x.g.length){if(C(x)||C(P))throw Error("slowDivide_ only works with positive integers.");for(var S=f,k=P;0>=k.l(x);)S=Q(S),k=Q(k);var R=le(S,1),B=le(k,1);for(k=le(k,2),S=le(S,2);!b(k);){var O=B.add(k);0>=O.l(x)&&(R=R.add(S),B=O),k=le(k,1),S=le(S,1)}return P=A(x,R.j(P)),new N(R,P)}for(R=h;0<=x.l(P);){for(S=Math.max(1,Math.floor(x.m()/P.m())),k=48>=(k=Math.ceil(Math.log(S)/Math.LN2))?1:Math.pow(2,k-48),O=(B=u(S)).j(P);C(O)||0<O.l(x);)O=(B=u(S-=k)).j(P);b(B)&&(B=f),R=R.add(B),x=A(x,O)}return new N(R,x)}function Q(x){for(var P=x.g.length+1,S=[],k=0;k<P;k++)S[k]=x.i(k)<<1|x.i(k-1)>>>31;return new s(S,x.h)}function le(x,P){var S=P>>5;P%=32;for(var k=x.g.length-S,R=[],B=0;B<k;B++)R[B]=0<P?x.i(B+S)>>>P|x.i(B+S+1)<<32-P:x.i(B+S);return new s(R,x.h)}(n=s.prototype).m=function(){if(C(this))return-I(this).m();for(var x=0,P=1,S=0;S<this.g.length;S++){var k=this.i(S);x+=(0<=k?k:4294967296+k)*P,P*=4294967296}return x},n.toString=function(x){if(2>(x=x||10)||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(C(this))return"-"+I(this).toString(x);for(var P=u(Math.pow(x,6)),S=this,k="";;){var R=j(S,P).g,B=((0<(S=A(S,R.j(P))).g.length?S.g[0]:S.h)>>>0).toString(x);if(b(S=R))return B+k;for(;6>B.length;)B="0"+B;k=B+k}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h},n.l=function(x){return C(x=A(this,x))?-1:b(x)?0:1},n.abs=function(){return C(this)?I(this):this},n.add=function(x){for(var P=Math.max(this.g.length,x.g.length),S=[],k=0,R=0;R<=P;R++){var B=k+(65535&this.i(R))+(65535&x.i(R)),O=(B>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);k=O>>>16,S[R]=(O&=65535)<<16|(B&=65535)}return new s(S,-2147483648&S[S.length-1]?-1:0)},n.j=function(x){if(b(this)||b(x))return h;if(C(this))return C(x)?I(this).j(I(x)):I(I(this).j(x));if(C(x))return I(this.j(I(x)));if(0>this.l(g)&&0>x.l(g))return u(this.m()*x.m());for(var P=this.g.length+x.g.length,S=[],k=0;k<2*P;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<x.g.length;R++){var B=this.i(k)>>>16,O=65535&this.i(k),cs=x.i(R)>>>16,jf=65535&x.i(R);S[2*k+2*R]+=O*jf,M(S,2*k+2*R),S[2*k+2*R+1]+=B*jf,M(S,2*k+2*R+1),S[2*k+2*R+1]+=O*cs,M(S,2*k+2*R+1),S[2*k+2*R+2]+=B*cs,M(S,2*k+2*R+2)}for(k=0;k<P;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=P;k<2*P;k++)S[k]=0;return new s(S,0)},n.A=function(x){return j(this,x).h},n.and=function(x){for(var P=Math.max(this.g.length,x.g.length),S=[],k=0;k<P;k++)S[k]=this.i(k)&x.i(k);return new s(S,this.h&x.h)},n.or=function(x){for(var P=Math.max(this.g.length,x.g.length),S=[],k=0;k<P;k++)S[k]=this.i(k)|x.i(k);return new s(S,this.h|x.h)},n.xor=function(x){for(var P=Math.max(this.g.length,x.g.length),S=[],k=0;k<P;k++)S[k]=this.i(k)^x.i(k);return new s(S,this.h^x.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zU.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function l(x,P){if(0==x.length)throw Error("number format error: empty string");if(2>(P=P||10)||36<P)throw Error("radix out of range: "+P);if("-"==x.charAt(0))return I(l(x.substring(1),P));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(P,8)),k=h,R=0;R<x.length;R+=8){var B=Math.min(8,x.length-R),O=parseInt(x.substring(R,R+B),P);8>B?(B=u(Math.pow(P,B)),k=k.j(B).add(u(O))):k=(k=k.j(S)).add(u(O))}return k},Ha=zU.Integer=s}).apply(typeof HU<"u"?HU:typeof self<"u"?self:typeof window<"u"?window:{});var u_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zo={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(d,p,m){return d==Array.prototype||d==Object.prototype||(d[p]=m.value),d},r=function t(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof u_&&u_];for(var p=0;p<d.length;++p){var m=d[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(d,p){if(p)e:{var m=r;d=d.split(".");for(var E=0;E<d.length-1;E++){var F=d[E];if(!(F in m))break e;m=m[F]}(p=p(E=m[d=d[d.length-1]]))!=E&&null!=p&&e(m,d,{configurable:!0,writable:!0,value:p})}}("Array.prototype.values",function(d){return d||function(){return function o(d,p){d instanceof String&&(d+="");var m=0,E=!1,F={next:function(){if(!E&&m<d.length){var q=m++;return{value:p(q,d[q]),done:!1}}return E=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(d){var p=typeof d;return"array"==(p="object"!=p?p:d?Array.isArray(d)?"array":p:"null")||"object"==p&&"number"==typeof d.length}function u(d){var p=typeof d;return"object"==p&&null!=d||"function"==p}function l(d,p,m){return d.call.apply(d.bind,arguments)}function h(d,p,m){if(!d)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,E),d.apply(p,F)}}return function(){return d.apply(p,arguments)}}function f(d,p,m){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?l:h).apply(null,arguments)}function g(d,p){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),d.apply(this,E)}}function b(d,p){function m(){}m.prototype=p.prototype,d.aa=p.prototype,d.prototype=new m,d.prototype.constructor=d,d.Qb=function(E,F,q){for(var fe=Array(arguments.length-2),It=2;It<arguments.length;It++)fe[It-2]=arguments[It];return p.prototype[F].apply(E,fe)}}function C(d){const p=d.length;if(0<p){const m=Array(p);for(let E=0;E<p;E++)m[E]=d[E];return m}return[]}function I(d,p){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(c(E)){const F=d.length||0,q=E.length||0;d.length=F+q;for(let fe=0;fe<q;fe++)d[F+fe]=E[fe]}else d.push(E)}}function M(d){return/^[\s\xa0]*$/.test(d)}function N(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function j(d){return j[" "](d),d}j[" "]=function(){};var Q=!(-1==N().indexOf("Gecko")||-1!=N().toLowerCase().indexOf("webkit")&&-1==N().indexOf("Edge")||-1!=N().indexOf("Trident")||-1!=N().indexOf("MSIE")||-1!=N().indexOf("Edge"));function le(d,p,m){for(const E in d)p.call(m,d[E],E,d)}function P(d){const p={};for(const m in d)p[m]=d[m];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(d,p){let m,E;for(let F=1;F<arguments.length;F++){for(m in E=arguments[F],E)d[m]=E[m];for(let q=0;q<S.length;q++)m=S[q],Object.prototype.hasOwnProperty.call(E,m)&&(d[m]=E[m])}}function R(d){var p=1;d=d.split(":");const m=[];for(;0<p&&d.length;)m.push(d.shift()),p--;return d.length&&m.push(d.join(":")),m}function B(d){a.setTimeout(()=>{throw d},0)}function O(){var d=dS;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}var jf=new class A{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}(()=>new ebe,d=>d.reset());class ebe{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let $f,Bf=!1,dS=new class cs{constructor(){this.h=this.g=null}add(p,m){const E=jf.get();E.set(p,m),this.h?this.h.next=E:this.g=E,this.h=E}},C6=()=>{const d=a.Promise.resolve(void 0);$f=()=>{d.then(tbe)}};var tbe=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(m){B(m)}var p=jf;p.j(d),100>p.h&&(p.h++,d.next=p.g,p.g=d)}Bf=!1};function oa(){this.s=this.s,this.C=this.C}function ar(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}oa.prototype.s=!1,oa.prototype.ma=function(){this.s||(this.s=!0,this.N())},oa.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ar.prototype.h=function(){this.defaultPrevented=!0};var nbe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return d}();function Hf(d,p){if(ar.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var m=this.type=d.type,E=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget){if(Q){e:{try{j(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else"mouseover"==m?p=d.fromElement:"mouseout"==m&&(p=d.toElement);this.relatedTarget=p,E?(this.clientX=void 0!==E.clientX?E.clientX:E.pageX,this.clientY=void 0!==E.clientY?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType="string"==typeof d.pointerType?d.pointerType:rbe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Hf.aa.h.call(this)}}b(Hf,ar);var rbe={2:"touch",3:"pen",4:"mouse"};Hf.prototype.h=function(){Hf.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var zf="closure_listenable_"+(1e6*Math.random()|0),ibe=0;function obe(d,p,m,E,F){this.listener=d,this.proxy=null,this.src=p,this.type=m,this.capture=!!E,this.ha=F,this.key=++ibe,this.da=this.fa=!1}function Ny(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Fy(d){this.src=d,this.g={},this.h=0}function hS(d,p){var m=p.type;if(m in d.g){var q,E=d.g[m],F=Array.prototype.indexOf.call(E,p,void 0);(q=0<=F)&&Array.prototype.splice.call(E,F,1),q&&(Ny(p),0==d.g[m].length&&(delete d.g[m],d.h--))}}function fS(d,p,m,E){for(var F=0;F<d.length;++F){var q=d[F];if(!q.da&&q.listener==p&&q.capture==!!m&&q.ha==E)return F}return-1}Fy.prototype.add=function(d,p,m,E,F){var q=d.toString();(d=this.g[q])||(d=this.g[q]=[],this.h++);var fe=fS(d,p,E,F);return-1<fe?(p=d[fe],m||(p.fa=!1)):((p=new obe(p,this.src,q,!!E,F)).fa=m,d.push(p)),p};var pS="closure_lm_"+(1e6*Math.random()|0),gS={};function w6(d,p,m,E,F){if(E&&E.once)return I6(d,p,m,E,F);if(Array.isArray(p)){for(var q=0;q<p.length;q++)w6(d,p[q],m,E,F);return null}return m=vS(m),d&&d[zf]?d.K(p,m,u(E)?!!E.capture:!!E,F):E6(d,p,m,!1,E,F)}function E6(d,p,m,E,F,q){if(!p)throw Error("Invalid event type");var fe=u(F)?!!F.capture:!!F,It=_S(d);if(It||(d[pS]=It=new Fy(d)),(m=It.add(p,m,E,fe,q)).proxy)return m;if(E=function sbe(){const p=abe;return function d(m){return p.call(d.src,d.listener,m)}}(),m.proxy=E,E.src=d,E.listener=m,d.addEventListener)nbe||(F=fe),void 0===F&&(F=!1),d.addEventListener(p.toString(),E,F);else if(d.attachEvent)d.attachEvent(P6(p.toString()),E);else{if(!d.addListener||!d.removeListener)throw Error("addEventListener and attachEvent are unavailable.");d.addListener(E)}return m}function I6(d,p,m,E,F){if(Array.isArray(p)){for(var q=0;q<p.length;q++)I6(d,p[q],m,E,F);return null}return m=vS(m),d&&d[zf]?d.L(p,m,u(E)?!!E.capture:!!E,F):E6(d,p,m,!0,E,F)}function T6(d,p,m,E,F){if(Array.isArray(p))for(var q=0;q<p.length;q++)T6(d,p[q],m,E,F);else E=u(E)?!!E.capture:!!E,m=vS(m),d&&d[zf]?(d=d.i,(p=String(p).toString())in d.g&&-1<(m=fS(q=d.g[p],m,E,F))&&(Ny(q[m]),Array.prototype.splice.call(q,m,1),0==q.length&&(delete d.g[p],d.h--))):d&&(d=_S(d))&&(p=d.g[p.toString()],d=-1,p&&(d=fS(p,m,E,F)),(m=-1<d?p[d]:null)&&mS(m))}function mS(d){if("number"!=typeof d&&d&&!d.da){var p=d.src;if(p&&p[zf])hS(p.i,d);else{var m=d.type,E=d.proxy;p.removeEventListener?p.removeEventListener(m,E,d.capture):p.detachEvent?p.detachEvent(P6(m),E):p.addListener&&p.removeListener&&p.removeListener(E),(m=_S(p))?(hS(m,d),0==m.h&&(m.src=null,p[pS]=null)):Ny(d)}}}function P6(d){return d in gS?gS[d]:gS[d]="on"+d}function abe(d,p){if(d.da)d=!0;else{p=new Hf(p,this);var m=d.listener,E=d.ha||d.src;d.fa&&mS(d),d=m.call(E,p)}return d}function _S(d){return(d=d[pS])instanceof Fy?d:null}var yS="__closure_events_fn_"+(1e9*Math.random()>>>0);function vS(d){return"function"==typeof d?d:(d[yS]||(d[yS]=function(p){return d.handleEvent(p)}),d[yS])}function cr(){oa.call(this),this.i=new Fy(this),this.M=this,this.F=null}function Ar(d,p){var m,E=d.F;if(E)for(m=[];E;E=E.F)m.push(E);if(d=d.M,E=p.type||p,"string"==typeof p)p=new ar(p,d);else if(p instanceof ar)p.target=p.target||d;else{var F=p;k(p=new ar(E,d),F)}if(F=!0,m)for(var q=m.length-1;0<=q;q--){var fe=p.g=m[q];F=Vy(fe,E,!0,p)&&F}if(F=Vy(fe=p.g=d,E,!0,p)&&F,F=Vy(fe,E,!1,p)&&F,m)for(q=0;q<m.length;q++)F=Vy(fe=p.g=m[q],E,!1,p)&&F}function Vy(d,p,m,E){if(!(p=d.i.g[String(p)]))return!0;p=p.concat();for(var F=!0,q=0;q<p.length;++q){var fe=p[q];if(fe&&!fe.da&&fe.capture==m){var It=fe.listener,Kn=fe.ha||fe.src;fe.fa&&hS(d.i,fe),F=!1!==It.call(Kn,E)&&F}}return F&&!E.defaultPrevented}function M6(d,p,m){if("function"==typeof d)m&&(d=f(d,m));else{if(!d||"function"!=typeof d.handleEvent)throw Error("Invalid listener argument");d=f(d.handleEvent,d)}return 2147483647<Number(p)?-1:a.setTimeout(d,p||0)}function A6(d){d.g=M6(()=>{d.g=null,d.i&&(d.i=!1,A6(d))},d.l);const p=d.h;d.h=null,d.m.apply(null,p)}b(cr,oa),cr.prototype[zf]=!0,cr.prototype.removeEventListener=function(d,p,m,E){T6(this,d,p,m,E)},cr.prototype.N=function(){if(cr.aa.N.call(this),this.i){var p,d=this.i;for(p in d.g){for(var m=d.g[p],E=0;E<m.length;E++)Ny(m[E]);delete d.g[p],d.h--}}this.F=null},cr.prototype.K=function(d,p,m,E){return this.i.add(String(d),p,!1,m,E)},cr.prototype.L=function(d,p,m,E){return this.i.add(String(d),p,!0,m,E)};class cbe extends oa{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:A6(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qf(d){oa.call(this),this.h=d,this.g={}}b(qf,oa);var S6=[];function O6(d){le(d.g,function(p,m){this.g.hasOwnProperty(m)&&mS(p)},d),d.g={}}qf.prototype.N=function(){qf.aa.N.call(this),O6(this)},qf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bS=a.JSON.stringify,ube=a.JSON.parse,lbe=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function CS(){}function D6(){}CS.prototype.h=null;var Gf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wS(){ar.call(this,"d")}function ES(){ar.call(this,"c")}b(wS,ar),b(ES,ar);var vc={},k6=null;function Ly(){return k6=k6||new cr}function R6(d){ar.call(this,vc.La,d)}function Wf(d){const p=Ly();Ar(p,new R6(p))}function N6(d,p){ar.call(this,vc.STAT_EVENT,d),this.stat=p}function Sr(d){const p=Ly();Ar(p,new N6(p,d))}function F6(d,p){ar.call(this,vc.Ma,d),this.size=p}function Kf(d,p){if("function"!=typeof d)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},p)}function Qf(){this.g=!0}function ql(d,p,m,E){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+function pbe(d,p){if(!d.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m)for(d=0;d<m.length;d++)if(Array.isArray(m[d])){var E=m[d];if(!(2>E.length)){var F=E[1];if(Array.isArray(F)&&!(1>F.length)){var q=F[0];if("noop"!=q&&"stop"!=q&&"close"!=q)for(var fe=1;fe<F.length;fe++)F[fe]=""}}}return bS(m)}catch{return p}}(d,m)+(E?" "+E:"")})}vc.La="serverreachability",b(R6,ar),vc.STAT_EVENT="statevent",b(N6,ar),vc.Ma="timingevent",b(F6,ar),Qf.prototype.xa=function(){this.g=!1},Qf.prototype.info=function(){};var IS,Uy={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},V6={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function jy(){}function sa(d,p,m,E){this.j=d,this.i=p,this.l=m,this.R=E||1,this.U=new qf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new L6}function L6(){this.i=null,this.g="",this.h=!1}b(jy,CS),jy.prototype.g=function(){return new XMLHttpRequest},jy.prototype.i=function(){return{}},IS=new jy;var U6={},TS={};function PS(d,p,m){d.L=1,d.v=zy(us(p)),d.m=m,d.P=!0,j6(d,null)}function j6(d,p){d.F=Date.now(),$y(d),d.A=us(d.v);var m=d.A,E=d.R;Array.isArray(E)||(E=[String(E)]),e8(m.i,"t",E),d.C=0,m=d.j.J,d.h=new L6,d.g=y8(d.j,m?p:null,!d.m),0<d.O&&(d.M=new cbe(f(d.Y,d,d.g),d.O)),p=d.U,m=d.g,E=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(S6[0]=F.toString()),F=S6);for(var q=0;q<F.length;q++){var fe=w6(m,F[q],E||p.handleEvent,!1,p.h||p);if(!fe)break;p.g[fe.key]=fe}p=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,p)):(d.u="GET",d.g.ea(d.A,d.u,null,p)),Wf(),function dbe(d,p,m,E,F,q){d.info(function(){if(d.g)if(q)for(var fe="",It=q.split("&"),Kn=0;Kn<It.length;Kn++){var ut=It[Kn].split("=");if(1<ut.length){var ur=ut[0];ut=ut[1];var lr=ur.split("_");fe=2<=lr.length&&"type"==lr[1]?fe+(ur+"=")+ut+"&":fe+(ur+"=redacted&")}}else fe=null;else fe=q;return"XMLHTTP REQ ("+E+") [attempt "+F+"]: "+p+"\n"+m+"\n"+fe})}(d.i,d.u,d.A,d.l,d.R,d.m)}function $6(d){return!!d.g&&"GET"==d.u&&2!=d.L&&d.j.Ca}function gbe(d,p){var m=d.C,E=p.indexOf("\n",m);return-1==E?TS:(m=Number(p.substring(m,E)),isNaN(m)?U6:(E+=1)+m>p.length?TS:(p=p.slice(E,E+m),d.C=E+m,p))}function $y(d){d.S=Date.now()+d.I,B6(d,d.I)}function B6(d,p){if(null!=d.B)throw Error("WatchDog timer not null");d.B=Kf(f(d.ba,d),p)}function MS(d){d.B&&(a.clearTimeout(d.B),d.B=null)}function Jf(d){0==d.j.G||d.J||p8(d.j,d)}function bc(d){MS(d);var p=d.M;p&&"function"==typeof p.ma&&p.ma(),d.M=null,O6(d.U),d.g&&(p=d.g,d.g=null,p.abort(),p.ma())}function AS(d,p){try{var m=d.j;if(0!=m.G&&(m.g==d||SS(m.h,d)))if(!d.K&&SS(m.h,d)&&3==m.G){try{var E=m.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&3==E.length){var F=E;if(0==F[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<d.F))break e;Qy(m),Wy(m)}kS(m),Sr(18)}}else m.za=F[1],0<m.za-m.T&&37500>F[2]&&m.F&&0==m.v&&!m.C&&(m.C=Kf(f(m.Za,m),6e3));if(1>=q6(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else wc(m,11)}else if((d.K||m.g==d)&&Qy(m),!M(p))for(F=m.Da.g.parse(p),p=0;p<F.length;p++){let ut=F[p];if(m.T=ut[0],ut=ut[1],2==m.G)if("c"==ut[0]){m.K=ut[1],m.ia=ut[2];const ur=ut[3];null!=ur&&(m.la=ur,m.j.info("VER="+m.la));const lr=ut[4];null!=lr&&(m.Aa=lr,m.j.info("SVER="+m.Aa));const Kl=ut[5];null!=Kl&&"number"==typeof Kl&&0<Kl&&(m.L=E=1.5*Kl,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const $i=d.g;if($i){const Yy=$i.g?$i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yy){var q=E.h;q.g||-1==Yy.indexOf("spdy")&&-1==Yy.indexOf("quic")&&-1==Yy.indexOf("h2")||(q.j=q.l,q.g=new Set,q.h&&(OS(q,q.h),q.h=null))}if(E.D){const NS=$i.g?$i.g.getResponseHeader("X-HTTP-Session-Id"):null;NS&&(E.ya=NS,Lt(E.I,E.D,NS))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-d.F,m.j.info("Handshake RTT: "+m.R+"ms"));var fe=d;if((E=m).qa=_8(E,E.J?E.ia:null,E.W),fe.K){G6(E.h,fe);var It=fe,Kn=E.L;Kn&&(It.I=Kn),It.B&&(MS(It),$y(It)),E.g=fe}else h8(E);0<m.i.length&&Ky(m)}else"stop"!=ut[0]&&"close"!=ut[0]||wc(m,7);else 3==m.G&&("stop"==ut[0]||"close"==ut[0]?"stop"==ut[0]?wc(m,7):DS(m):"noop"!=ut[0]&&m.l&&m.l.ta(ut),m.v=0)}Wf()}catch{}}function H6(d){this.l=d||10,d=a.PerformanceNavigationTiming?0<(d=a.performance.getEntriesByType("navigation")).length&&("hq"==d[0].nextHopProtocol||"h2"==d[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function z6(d){return!!d.h||!!d.g&&d.g.size>=d.j}function q6(d){return d.h?1:d.g?d.g.size:0}function SS(d,p){return d.h?d.h==p:!!d.g&&d.g.has(p)}function OS(d,p){d.g?d.g.add(p):d.h=p}function G6(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}function W6(d){if(null!=d.h)return d.i.concat(d.h.D);if(null!=d.g&&0!==d.g.size){let p=d.i;for(const m of d.g.values())p=p.concat(m.D);return p}return C(d.i)}function K6(d,p){if(d.forEach&&"function"==typeof d.forEach)d.forEach(p,void 0);else if(c(d)||"string"==typeof d)Array.prototype.forEach.call(d,p,void 0);else for(var m=function ybe(d){if(d.na&&"function"==typeof d.na)return d.na();if(!d.V||"function"!=typeof d.V){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||"string"==typeof d){var p=[];d=d.length;for(var m=0;m<d;m++)p.push(m);return p}p=[],m=0;for(const E in d)p[m++]=E;return p}}}(d),E=function _be(d){if(d.V&&"function"==typeof d.V)return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if("string"==typeof d)return d.split("");if(c(d)){for(var p=[],m=d.length,E=0;E<m;E++)p.push(d[E]);return p}for(E in p=[],m=0,d)p[m++]=d[E];return p}(d),F=E.length,q=0;q<F;q++)p.call(void 0,E[q],m&&m[q],d)}sa.prototype.ca=function(d){d=d.target;const p=this.M;p&&3==ls(d)?p.j():this.Y(d)},sa.prototype.Y=function(d){try{if(d==this.g)e:{const lr=ls(this.g);var p=this.g.Ba();if(this.g.Z(),!(3>lr)&&(3!=lr||this.g&&(this.h.h||this.g.oa()||a8(this.g)))){this.J||4!=lr||7==p||Wf(),MS(this);var m=this.g.Z();this.X=m;t:if($6(this)){var E=a8(this.g);d="";var F=E.length,q=4==ls(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bc(this),Jf(this);var fe="";break t}this.h.i=new a.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,d+=this.h.i.decode(E[p],{stream:!(q&&p==F-1)});E.length=0,this.h.g+=d,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=200==m,function hbe(d,p,m,E,F,q,fe){d.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+F+"]: "+p+"\n"+m+"\n"+q+" "+fe})}(this.i,this.u,this.A,this.l,this.R,lr,m),this.o){if(this.T&&!this.K){t:{if(this.g){var It,Kn=this.g;if((It=Kn.g?Kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(It)){var ut=It;break t}}ut=null}if(!(m=ut)){this.o=!1,this.s=3,Sr(12),bc(this),Jf(this);break e}ql(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,AS(this,m)}if(this.P){let $i;for(m=!0;!this.J&&this.C<fe.length;){if($i=gbe(this,fe),$i==TS){4==lr&&(this.s=4,Sr(14),m=!1),ql(this.i,this.l,null,"[Incomplete Response]");break}if($i==U6){this.s=4,Sr(15),ql(this.i,this.l,fe,"[Invalid Chunk]"),m=!1;break}ql(this.i,this.l,$i,null),AS(this,$i)}if($6(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=lr||0!=fe.length||this.h.h||(this.s=1,Sr(16),m=!1),this.o=this.o&&m,m){if(0<fe.length&&!this.W){this.W=!0;var ur=this.j;ur.g==this&&ur.ba&&!ur.M&&(ur.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),RS(ur),ur.M=!0,Sr(11))}}else ql(this.i,this.l,fe,"[Invalid Chunked Response]"),bc(this),Jf(this)}else ql(this.i,this.l,fe,null),AS(this,fe);4==lr&&bc(this),this.o&&!this.J&&(4==lr?p8(this.j,this):(this.o=!1,$y(this)))}else(function Dbe(d){const p={};d=(d.g&&2<=ls(d)&&d.g.getAllResponseHeaders()||"").split("\r\n");for(let E=0;E<d.length;E++){if(M(d[E]))continue;var m=R(d[E]);const F=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const q=p[F]||[];p[F]=q,q.push(m)}!function x(d,p){for(const m in d)p.call(void 0,d[m],m,d)}(p,function(E){return E.join(", ")})})(this.g),400==m&&0<fe.indexOf("Unknown SID")?(this.s=3,Sr(12)):(this.s=0,Sr(13)),bc(this),Jf(this)}}}catch{}},sa.prototype.cancel=function(){this.J=!0,bc(this)},sa.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(function fbe(d,p){d.info(function(){return"TIMEOUT: "+p})}(this.i,this.A),2!=this.L&&(Wf(),Sr(17)),bc(this),this.s=2,Jf(this)):B6(this,this.S-d)},H6.prototype.cancel=function(){if(this.i=W6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const d of this.g.values())d.cancel();this.g.clear()}};var Q6=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cc(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Cc){this.h=d.h,By(this,d.j),this.o=d.o,this.g=d.g,Hy(this,d.s),this.l=d.l;var p=d.i,m=new Zf;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),J6(this,m),this.m=d.m}else d&&(p=String(d).match(Q6))?(this.h=!1,By(this,p[1]||"",!0),this.o=Yf(p[2]||""),this.g=Yf(p[3]||"",!0),Hy(this,p[4]),this.l=Yf(p[5]||"",!0),J6(this,p[6]||"",!0),this.m=Yf(p[7]||"")):(this.h=!1,this.i=new Zf(null,this.h))}function us(d){return new Cc(d)}function By(d,p,m){d.j=m?Yf(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function Hy(d,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);d.s=p}else d.s=null}function J6(d,p,m){p instanceof Zf?(d.i=p,function Tbe(d,p){p&&!d.j&&(aa(d),d.i=null,d.g.forEach(function(m,E){var F=E.toLowerCase();E!=F&&(X6(this,E),e8(this,F,m))},d)),d.j=p}(d.i,d.h)):(m||(p=Xf(p,Ebe)),d.i=new Zf(p,d.h))}function Lt(d,p,m){d.i.set(p,m)}function zy(d){return Lt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Yf(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Xf(d,p,m){return"string"==typeof d?(d=encodeURI(d).replace(p,bbe),m&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bbe(d){return"%"+((d=d.charCodeAt(0))>>4&15).toString(16)+(15&d).toString(16)}Cc.prototype.toString=function(){var d=[],p=this.j;p&&d.push(Xf(p,Y6,!0),":");var m=this.g;return(m||"file"==p)&&(d.push("//"),(p=this.o)&&d.push(Xf(p,Y6,!0),"@"),d.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&d.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&d.push("/"),d.push(Xf(m,"/"==m.charAt(0)?wbe:Cbe,!0))),(m=this.i.toString())&&d.push("?",m),(m=this.m)&&d.push("#",Xf(m,Ibe)),d.join("")};var d,Y6=/[#\/\?@]/g,Cbe=/[#\?:]/g,wbe=/[#\?]/g,Ebe=/[#\?@]/g,Ibe=/#/g;function Zf(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function aa(d){d.g||(d.g=new Map,d.h=0,d.i&&function vbe(d,p){if(d){d=d.split("&");for(var m=0;m<d.length;m++){var E=d[m].indexOf("="),F=null;if(0<=E){var q=d[m].substring(0,E);F=d[m].substring(E+1)}else q=d[m];p(q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}(d.i,function(p,m){d.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}function X6(d,p){aa(d),p=Gl(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function Z6(d,p){return aa(d),p=Gl(d,p),d.g.has(p)}function e8(d,p,m){X6(d,p),0<m.length&&(d.i=null,d.g.set(Gl(d,p),C(m)),d.h+=m.length)}function Gl(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function ca(d,p,m,E,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),E(m)}catch{}}function Abe(){this.g=new lbe}function Sbe(d,p,m){const E=m||"";try{K6(d,function(F,q){let fe=F;u(F)&&(fe=bS(F)),p.push(E+q+"="+encodeURIComponent(fe))})}catch(F){throw p.push(E+"type="+encodeURIComponent("_badmap")),F}}function ep(d){this.l=d.Ub||null,this.j=d.eb||!1}function qy(d,p){cr.call(this),this.D=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function t8(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}function tp(d){d.readyState=4,d.l=null,d.j=null,d.v=null,np(d)}function np(d){d.onreadystatechange&&d.onreadystatechange.call(d)}function n8(d){let p="";return le(d,function(m,E){p+=E,p+=":",p+=m,p+="\r\n"}),p}function xS(d,p,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=n8(m),"string"==typeof d?null!=m&&encodeURIComponent(String(m)):Lt(d,p,m))}function nn(d){cr.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Zf.prototype).add=function(d,p){aa(this),this.i=null,d=Gl(this,d);var m=this.g.get(d);return m||this.g.set(d,m=[]),m.push(p),this.h+=1,this},n.forEach=function(d,p){aa(this),this.g.forEach(function(m,E){m.forEach(function(F){d.call(p,F,E,this)},this)},this)},n.na=function(){aa(this);const d=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let E=0;E<p.length;E++){const F=d[E];for(let q=0;q<F.length;q++)m.push(p[E])}return m},n.V=function(d){aa(this);let p=[];if("string"==typeof d)Z6(this,d)&&(p=p.concat(this.g.get(Gl(this,d))));else{d=Array.from(this.g.values());for(let m=0;m<d.length;m++)p=p.concat(d[m])}return p},n.set=function(d,p){return aa(this),this.i=null,Z6(this,d=Gl(this,d))&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},n.get=function(d,p){return d&&0<(d=this.V(d)).length?String(d[0]):p},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var E=p[m];const q=encodeURIComponent(String(E)),fe=this.V(E);for(E=0;E<fe.length;E++){var F=q;""!==fe[E]&&(F+="="+encodeURIComponent(String(fe[E]))),d.push(F)}}return this.i=d.join("&")},b(ep,CS),ep.prototype.g=function(){return new qy(this.l,this.j)},ep.prototype.i=(d={},function(){return d}),b(qy,cr),(n=qy.prototype).open=function(d,p){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=p,this.readyState=1,np(this)},n.send=function(d){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(p.body=d),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tp(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,np(this)),this.g&&(this.readyState=3,np(this),this.g)))if("arraybuffer"===this.responseType)d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;t8(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?tp(this):np(this),3==this.readyState&&t8(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,tp(this))},n.Qa=function(d){this.g&&(this.response=d,tp(this))},n.ga=function(){this.g&&tp(this)},n.setRequestHeader=function(d,p){this.u.append(d,p)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],p=this.h.entries();for(var m=p.next();!m.done;)d.push((m=m.value)[0]+": "+m[1]),m=p.next();return d.join("\r\n")},Object.defineProperty(qy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(d){this.m=d?"include":"same-origin"}}),b(nn,cr);var Obe=/^https?$/i,xbe=["POST","PUT"];function r8(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.m=5,i8(d),Gy(d)}function i8(d){d.A||(d.A=!0,Ar(d,"complete"),Ar(d,"error"))}function o8(d){if(d.h&&typeof s<"u"&&(!d.v[1]||4!=ls(d)||2!=d.Z()))if(d.u&&4==ls(d))M6(d.Ea,0,d);else if(Ar(d,"readystatechange"),4==ls(d)){d.h=!1;try{const fe=d.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var E;if(E=0===fe){var F=String(d.D).match(Q6)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),E=!Obe.test(F?F.toLowerCase():"")}m=E}if(m)Ar(d,"complete"),Ar(d,"success");else{d.m=6;try{var q=2<ls(d)?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.Z()+"]",i8(d)}}finally{Gy(d)}}}function Gy(d,p){if(d.g){s8(d);const m=d.g,E=d.v[0]?()=>{}:null;d.g=null,d.v=null,p||Ar(d,"ready");try{m.onreadystatechange=E}catch{}}}function s8(d){d.I&&(a.clearTimeout(d.I),d.I=null)}function ls(d){return d.g?d.g.readyState:0}function a8(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function rp(d,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[d]||p}function c8(d){this.Aa=0,this.i=[],this.j=new Qf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rp("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rp("baseRetryDelayMs",5e3,d),this.cb=rp("retryDelaySeedMs",1e4,d),this.Wa=rp("forwardChannelMaxRetries",2,d),this.wa=rp("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new H6(d&&d.concurrentRequestLimit),this.Da=new Abe,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function DS(d){if(u8(d),3==d.G){var p=d.U++,m=us(d.I);if(Lt(m,"SID",d.K),Lt(m,"RID",p),Lt(m,"TYPE","terminate"),ip(d,m),(p=new sa(d,d.j,p)).L=2,p.v=zy(us(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=p.v,m=!0),m||(p.g=y8(p.j,null),p.g.ea(p.v)),p.F=Date.now(),$y(p)}m8(d)}function Wy(d){d.g&&(RS(d),d.g.cancel(),d.g=null)}function u8(d){Wy(d),d.u&&(a.clearTimeout(d.u),d.u=null),Qy(d),d.h.cancel(),d.s&&("number"==typeof d.s&&a.clearTimeout(d.s),d.s=null)}function Ky(d){if(!z6(d.h)&&!d.s){d.s=!0;var p=d.Ga;$f||C6(),Bf||($f(),Bf=!0),dS.add(p,d),d.B=0}}function l8(d,p){var m;m=p?p.l:d.U++;const E=us(d.I);Lt(E,"SID",d.K),Lt(E,"RID",m),Lt(E,"AID",d.T),ip(d,E),d.m&&d.o&&xS(E,d.m,d.o),m=new sa(d,d.j,m,d.B+1),null===d.m&&(m.H=d.o),p&&(d.i=p.D.concat(d.i)),p=d8(d,m,1e3),m.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),OS(d.h,m),PS(m,E,p)}function ip(d,p){d.H&&le(d.H,function(m,E){Lt(p,E,m)}),d.l&&K6({},function(m,E){Lt(p,E,m)})}function d8(d,p,m){m=Math.min(d.i.length,m);var E=d.l?f(d.l.Na,d.l,d):null;e:{var F=d.i;let q=-1;for(;;){const fe=["count="+m];-1==q?0<m?(q=F[0].g,fe.push("ofs="+q)):q=0:fe.push("ofs="+q);let It=!0;for(let Kn=0;Kn<m;Kn++){let ut=F[Kn].g;const ur=F[Kn].map;if(ut-=q,0>ut)q=Math.max(0,F[Kn].g-100),It=!1;else try{Sbe(ur,fe,"req"+ut+"_")}catch{E&&E(ur)}}if(It){E=fe.join("&");break e}}}return d=d.i.splice(0,m),p.D=d,E}function h8(d){if(!d.g&&!d.u){d.Y=1;var p=d.Fa;$f||C6(),Bf||($f(),Bf=!0),dS.add(p,d),d.v=0}}function kS(d){return!(d.g||d.u||3<=d.v||(d.Y++,d.u=Kf(f(d.Fa,d),g8(d,d.v)),d.v++,0))}function RS(d){null!=d.A&&(a.clearTimeout(d.A),d.A=null)}function f8(d){d.g=new sa(d,d.j,"rpc",d.Y),null===d.m&&(d.g.H=d.o),d.g.O=0;var p=us(d.qa);Lt(p,"RID","rpc"),Lt(p,"SID",d.K),Lt(p,"AID",d.T),Lt(p,"CI",d.F?"0":"1"),!d.F&&d.ja&&Lt(p,"TO",d.ja),Lt(p,"TYPE","xmlhttp"),ip(d,p),d.m&&d.o&&xS(p,d.m,d.o),d.L&&(d.g.I=d.L);var m=d.g;d=d.ia,m.L=1,m.v=zy(us(p)),m.m=null,m.P=!0,j6(m,d)}function Qy(d){null!=d.C&&(a.clearTimeout(d.C),d.C=null)}function p8(d,p){var m=null;if(d.g==p){Qy(d),RS(d),d.g=null;var E=2}else{if(!SS(d.h,p))return;m=p.D,G6(d.h,p),E=1}if(0!=d.G)if(p.o)if(1==E){m=p.m?p.m.length:0,p=Date.now()-p.F;var F=d.B;Ar(E=Ly(),new F6(E,m)),Ky(d)}else h8(d);else if(3==(F=p.s)||0==F&&0<p.X||!(1==E&&function kbe(d,p){return!(q6(d.h)>=d.h.j-(d.s?1:0)||(d.s?(d.i=p.D.concat(d.i),0):1==d.G||2==d.G||d.B>=(d.Va?0:d.Wa)||(d.s=Kf(f(d.Ga,d,p),g8(d,d.B)),d.B++,0)))}(d,p)||2==E&&kS(d)))switch(m&&0<m.length&&(p=d.h,p.i=p.i.concat(m)),F){case 1:wc(d,5);break;case 4:wc(d,10);break;case 3:wc(d,6);break;default:wc(d,2)}}function g8(d,p){let m=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(m*=2),m*p}function wc(d,p){if(d.j.info("Error code "+p),2==p){var m=f(d.fb,d),E=d.Xa;const F=!E;E=new Cc(E||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||By(E,"https"),zy(E),F?function Pbe(d,p){const m=new Qf;if(a.Image){const E=new Image;E.onload=g(ca,m,"TestLoadImage: loaded",!0,p,E),E.onerror=g(ca,m,"TestLoadImage: error",!1,p,E),E.onabort=g(ca,m,"TestLoadImage: abort",!1,p,E),E.ontimeout=g(ca,m,"TestLoadImage: timeout",!1,p,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=d}else p(!1)}(E.toString(),m):function Mbe(d,p){new Qf;const E=new AbortController,F=setTimeout(()=>{E.abort(),ca(0,0,!1,p)},1e4);fetch(d,{signal:E.signal}).then(q=>{clearTimeout(F),ca(0,0,!!q.ok,p)}).catch(()=>{clearTimeout(F),ca(0,0,!1,p)})}(E.toString(),m)}else Sr(2);d.G=0,d.l&&d.l.sa(p),m8(d),u8(d)}function m8(d){if(d.G=0,d.ka=[],d.l){const p=W6(d.h);(0!=p.length||0!=d.i.length)&&(I(d.ka,p),I(d.ka,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.ra()}}function _8(d,p,m){var E=m instanceof Cc?us(m):new Cc(m);if(""!=E.g)p&&(E.g=p+"."+E.g),Hy(E,E.s);else{var F=a.location;E=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var q=new Cc(null);E&&By(q,E),p&&(q.g=p),F&&Hy(q,F),m&&(q.l=m),E=q}return p=d.ya,(m=d.D)&&p&&Lt(E,m,p),Lt(E,"VER",d.la),ip(d,E),E}function y8(d,p,m){if(p&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return(p=new nn(d.Ca&&!d.pa?new ep({eb:m}):d.pa)).Ha(d.J),p}function v8(){}function Jy(){}function ui(d,p){cr.call(this),this.g=new c8(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(d?d["X-WebChannel-Client-Profile"]=p.va:d={"X-WebChannel-Client-Profile":p.va}),this.g.S=d,(d=p&&p.Sb)&&!M(d)&&(this.g.m=d),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!M(p)&&(this.g.D=p,null!==(d=this.h)&&p in d&&p in(d=this.h)&&delete d[p]),this.j=new Wl(this)}function b8(d){wS.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(const m in p){d=m;break e}d=void 0}(this.i=d)&&(d=this.i,p=null!==p&&d in p?p[d]:void 0),this.data=p}else this.data=d}function C8(){ES.call(this),this.status=1}function Wl(d){this.g=d}(n=nn.prototype).Ha=function(d){this.J=d},n.ea=function(d,p,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():IS.g(),this.v=function x6(d){return d.h||(d.h=d.i())}(this.o?this.o:IS),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(q){return void r8(this,q)}if(d=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var F in E)m.set(F,E[F]);else{if("function"!=typeof E.keys||"function"!=typeof E.get)throw Error("Unknown input type for opt_headers: "+String(E));for(const q of E.keys())m.set(q,E.get(q))}E=Array.from(m.keys()).find(q=>"content-type"==q.toLowerCase()),F=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xbe,p,void 0))||E||F||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,fe]of m)this.g.setRequestHeader(q,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{s8(this),this.u=!0,this.g.send(d),this.u=!1}catch(q){r8(this,q)}},n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ar(this,"complete"),Ar(this,"abort"),Gy(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gy(this,!0)),nn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?o8(this):this.bb())},n.bb=function(){o8(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var p=this.g.responseText;return d&&0==p.indexOf(d)&&(p=p.substring(d.length)),ube(p)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=c8.prototype).la=8,n.G=1,n.connect=function(d,p,m,E){Sr(0),this.W=d,this.H=p||{},m&&void 0!==E&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=_8(this,null,this.W),Ky(this)},n.Ga=function(d){if(this.s)if(this.s=null,1==this.G){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new sa(this,this.j,d);let q=this.o;if(this.S&&(q?(q=P(q),k(q,this.S)):q=this.S),null!==this.m||this.O||(F.H=q,q=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){var E=this.i[m];if(void 0===(E="__data__"in E.map&&"string"==typeof(E=E.map.__data__)?E.length:void 0))break;if(4096<(p+=E)){p=m;break e}if(4096===p||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=d8(this,F,p),Lt(m=us(this.I),"RID",d),Lt(m,"CVER",22),this.D&&Lt(m,"X-HTTP-Session-Id",this.D),ip(this,m),q&&(this.O?p="headers="+encodeURIComponent(String(n8(q)))+"&"+p:this.m&&xS(m,this.m,q)),OS(this.h,F),this.Ua&&Lt(m,"TYPE","init"),this.P?(Lt(m,"$req",p),Lt(m,"SID","null"),F.T=!0,PS(F,m,null)):PS(F,m,p),this.G=2}}else 3==this.G&&(d?l8(this,d):0==this.i.length||z6(this.h)||l8(this))},n.Fa=function(){if(this.u=null,f8(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Kf(f(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Sr(10),Wy(this),f8(this))},n.Za=function(){null!=this.C&&(this.C=null,Wy(this),kS(this),Sr(19))},n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Sr(2)):(this.j.info("Failed to ping google.com"),Sr(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=v8.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Jy.prototype.g=function(d,p){return new ui(d,p)},b(ui,cr),ui.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ui.prototype.close=function(){DS(this.g)},ui.prototype.o=function(d){var p=this.g;if("string"==typeof d){var m={};m.__data__=d,d=m}else this.u&&((m={}).__data__=bS(d),d=m);p.i.push(new class{constructor(d,p){this.g=d,this.map=p}}(p.Ya++,d)),3==p.G&&Ky(p)},ui.prototype.N=function(){this.g.l=null,delete this.j,DS(this.g),delete this.g,ui.aa.N.call(this)},b(b8,wS),b(C8,ES),b(Wl,v8),Wl.prototype.ua=function(){Ar(this.g,"a")},Wl.prototype.ta=function(d){Ar(this.g,new b8(d))},Wl.prototype.sa=function(d){Ar(this.g,new C8)},Wl.prototype.ra=function(){Ar(this.g,"b")},Jy.prototype.createWebChannel=Jy.prototype.g,ui.prototype.send=ui.prototype.o,ui.prototype.open=ui.prototype.m,ui.prototype.close=ui.prototype.close,Zo.createWebChannelTransport=function(){return new Jy},Zo.getStatEventTarget=function(){return Ly()},Zo.Event=vc,Zo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Uy.NO_ERROR=0,Uy.TIMEOUT=8,Uy.HTTP_ERROR=6,Zo.ErrorCode=Uy,V6.COMPLETE="complete",Zo.EventType=V6,D6.EventType=Gf,Gf.OPEN="a",Gf.CLOSE="b",Gf.ERROR="c",Gf.MESSAGE="d",cr.prototype.listen=cr.prototype.K,Zo.WebChannel=D6,Zo.FetchXmlHttpFactory=ep,nn.prototype.listenOnce=nn.prototype.L,nn.prototype.getLastError=nn.prototype.Ka,nn.prototype.getLastErrorCode=nn.prototype.Ba,nn.prototype.getStatus=nn.prototype.Z,nn.prototype.getResponseJson=nn.prototype.Oa,nn.prototype.getResponseText=nn.prototype.oa,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Ha,Zo.XhrIo=nn}).apply(typeof u_<"u"?u_:typeof self<"u"?self:typeof window<"u"?window:{});const YU="@firebase/firestore";class Sn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");let Wu="10.14.0";const Ns=new Fu("@firebase/firestore");function ie(n,...e){if(Ns.logLevel<=Ze.DEBUG){const t=e.map(BP);Ns.debug(`Firestore (${Wu}): ${n}`,...t)}}function hn(n,...e){if(Ns.logLevel<=Ze.ERROR){const t=e.map(BP);Ns.error(`Firestore (${Wu}): ${n}`,...t)}}function BP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ce(n="Unexpected state"){const e=`FIRESTORE (${Wu}) INTERNAL ASSERTION FAILED: `+n;throw hn(e),new Error(e)}function Ie(n,e){n||Ce()}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class On{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class XU{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sn.UNAUTHENTICATED))}shutdown(){}}class Dle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kle{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Ie(void 0===this.o);let i=this.i;const o=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let s=new On;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new On,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(_(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new On)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie("string"==typeof r.accessToken),new XU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(null===e||"string"==typeof e),new Sn(e)}}class Rle{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Nle{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Rle(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fle{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ie(void 0===this.o);const r=o=>{null!=o.error&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ie("string"==typeof t.token),this.R=t.token,new ZU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Le(n,e){return n<e?-1:n>e?1:0}class zh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ce(),void 0===r?r=e.length-t:r>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nt extends zh{construct(e,t,r){return new nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new nt(t)}static emptyPath(){return new nt([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(nt.fromString(e))}static fromName(e){return new ge(nt.fromString(e).popFirst(5))}static empty(){return new ge(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new nt(e.slice()))}}class xt{constructor(e,t){this.comparator=e,this.root=t||zn.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new f_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new f_(this.root,e,this.comparator,!1)}getReverseIterator(){return new f_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new f_(this.root,e,this.comparator,!0)}}class f_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??zn.RED,this.left=i??zn.EMPTY,this.right=o??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new zn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return zn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1,zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,r,i,o){return this}insert(e,t,r){return new zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new y4(this.data.getIterator())}getIteratorFrom(e){return new y4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class y4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class v4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new v4("Invalid base64 string: "+o):o}}(e);return new tn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const lde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ht(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}class Wa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}var _n,st,aM,Oj;new xt(ge.comparator),new xt(ge.comparator),new xt(ge.comparator),new bt(ge.comparator),new bt(Le),(st=_n||(_n={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS",new Ha([4294967295,4294967295],0),Error;class tc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ht(e.integerValue));else if("doubleValue"in e){const r=Ht(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),function Wh(n){return 0===n&&1/n==-1/0}(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=function es(n){if(Ie(!!n),"string"==typeof n){let e=0;const t=lde.exec(n);if(Ie(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(n.seconds),nanos:Ht(n.nanos)}}(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(function ts(n){return"string"==typeof n?tn.fromBase64String(n):tn.fromUint8Array(n)}(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?function I4(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.dt(t,Number.MAX_SAFE_INTEGER):function v_(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ce()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const o=e.fields||{};this.dt(t,53);const s="value",a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Ht(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ge.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}tc.vt=new tc,new Uint8Array(0);class ir{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ir(e,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function H_(){return typeof document<"u"?document:null}ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(41943040,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);class V1{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class tM{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new On,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new tM(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ne(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}(Oj=aM||(aM={})).ea="default",Oj.Cache="cache";const Jj=new Map;function et(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ne(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function J_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ce()}(n);throw new ne(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class e${constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ne(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ne(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function xfe(n,e,t,r){if(!0===e&&!0===r)throw new ne(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=function Qj(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e$({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ne(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e$(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new xle;switch(r.type){case"firstParty":return new Nle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return _(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Jj.get(t);r&&(ie("ComponentProvider","Removing Datastore"),Jj.delete(t),r.terminate())}(this),Promise.resolve()}}function Dfe(n,e,t,r={}){var i;const o=(n=et(n,wf))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&function Ti(n,...e){if(Ns.logLevel<=Ze.WARN){const t=e.map(BP);Ns.warn(`Firestore (${Wu}): ${n}`,...t)}}("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=Sn.MOCK_USER;else{a=function mne(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Im(JSON.stringify({alg:"none",type:"JWT"})),Im(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ne(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Sn(u)}n._authCredentials=new Dle(new XU(a,c))}}class n${constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new V1(this,"async_queue_retry"),this.Vu=()=>{const r=H_();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=H_();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=H_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new On;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return _(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!function Vs(n){return"IndexedDbTransactionError"===n.name}(t))throw t;ie("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,hn("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=tM.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Ce()}verifyOperationInProgress(){}wu(){var e=this;return _(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Et extends wf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new n$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return _(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new n$(t),e._firestoreClient=void 0,yield t}})()}}function Nfe(n,e){const r="string"==typeof n?n:e||"(default)",i=Vu("object"==typeof n?n:hw(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(n=>{const e=QV("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();o&&Dfe(i,...o)}return i}new RegExp("[~\\*/\\[\\]]"),function(e,t=!0){Wu=Ra,Tr(new tr("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Et(new kle(r.getProvider("auth-internal")),new Fle(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ne(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Kt(YU,"4.7.3",e),Kt(YU,"4.7.3","esm2017")}();class sA{constructor(e){return e}}const w$="firestore",aA=new _e("angularfire2.firestore-instances");function ope(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new sA(r)}}const spe={provide:class rpe{constructor(){return nI(w$)}},deps:[[new vr,aA]]},ape={provide:sA,useFactory:function ipe(n,e){const t=tI(w$,n,e);return t&&new sA(t)},deps:[[new vr,aA],$u]};let cpe=(()=>{class n{constructor(){Kt("angularfire",Um.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Si({type:n}),n.\u0275inj=fi({providers:[ape,spe]}),n})();const lpe=iI(Nfe,!0);let E$=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(X(Oo),X(Lr))}}static{this.\u0275dir=Ve({type:n})}}return n})(),lc=(()=>{class n extends E${static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275dir=Ve({type:n,features:[gt]})}}return n})();const _o=new _e("NgValueAccessor"),hpe={provide:_o,useExisting:Pt(()=>cA),multi:!0};let cA=(()=>{class n extends lc{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275dir=Ve({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){1&r&&K("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[$t([hpe]),gt]})}}return n})();const fpe={provide:_o,useExisting:Pt(()=>yo),multi:!0},gpe=new _e("CompositionEventMode");let yo=(()=>{class n extends E${constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ppe(){const n=Ts()?Ts().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Oo),X(Lr),X(gpe,8))}}static{this.\u0275dir=Ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&K("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[$t([fpe]),gt]})}}return n})();const sr=new _e("NgValidators"),Xs=new _e("NgAsyncValidators");function M$(n){return function Ys(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function uy(n){return null}function k$(n){return null!=n}function R$(n){return Vd(n)?bn(n):n}function N$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function F$(n,e){return e.map(t=>t(n))}function V$(n){return n.map(e=>function _pe(n){return!n.validate}(e)?e:t=>e.validate(t))}function uA(n){return null!=n?function L$(n){if(!n)return null;const e=n.filter(k$);return 0==e.length?null:function(t){return N$(F$(t,e))}}(V$(n)):null}function lA(n){return null!=n?function U$(n){if(!n)return null;const e=n.filter(k$);return 0==e.length?null:function(t){return function dpe(...n){const e=LS(n),{args:t,keys:r}=LF(n),i=new Ct(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let l=0;l<s;l++){let h=!1;Gr(t[l]).subscribe(ee(o,f=>{h||(h=!0,u--),a[l]=f},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?jF(r,a):a),o.complete())}))}});return e?i.pipe(UF(e)):i}(F$(t,e).map(R$)).pipe(ue(N$))}}(V$(n)):null}function j$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function dA(n){return n?Array.isArray(n)?n:[n]:[]}function ly(n,e){return Array.isArray(n)?n.includes(e):n===e}function H$(n,e){const t=dA(e);return dA(n).forEach(i=>{ly(t,i)||t.push(i)}),t}function z$(n,e){return dA(e).filter(t=>!ly(n,t))}class q${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Mr extends q${get formDirective(){return null}get path(){return null}}class Zs extends q${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class G${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ea=(()=>{class n extends G${constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Zs,2))}}static{this.\u0275dir=Ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Oe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[gt]})}}return n})(),W$=(()=>{class n extends G${constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Mr,10))}}static{this.\u0275dir=Ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Oe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[gt]})}}return n})();const Of="VALID",hy="INVALID",xl="PENDING",xf="DISABLED";function pA(n){return(fy(n)?n.validators:n)||null}function gA(n,e){return(fy(e)?e.asyncValidators:n)||null}function fy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class mA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Of}get invalid(){return this.status===hy}get pending(){return this.status==xl}get disabled(){return this.status===xf}get enabled(){return this.status!==xf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(H$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(H$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(z$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(z$(e,this._rawAsyncValidators))}hasValidator(e){return ly(this._rawValidators,e)}hasAsyncValidator(e){return ly(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=xl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Of,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Of||this.status===xl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xf:Of}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=xl,this._hasOwnPendingAsyncValidator=!0;const t=R$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Wt,this.statusChanges=new Wt}_calculateStatus(){return this._allControlsDisabled()?xf:this.errors?hy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xl)?xl:this._anyControlsHaveStatus(hy)?hy:Of}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Cpe(n){return Array.isArray(n)?uA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function wpe(n){return Array.isArray(n)?lA(n):n||null}(this._rawAsyncValidators)}}class _A extends mA{constructor(e,t,r){super(pA(t),gA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function J$(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new oe(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Q$(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new oe(1e3,"");if(!r[t])throw new oe(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Dl=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>py}),py="always";function Df(n,e,t=py){yA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Tpe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Y$(n,e)})}(n,e),function Mpe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ppe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Y$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ipe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _y(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function yA(n,e){const t=function $$(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(j$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function B$(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(j$(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();_y(e._rawValidators,i),_y(e._rawAsyncValidators,i)}function Y$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Dpe={provide:Mr,useExisting:Pt(()=>vy)},kf=(()=>Promise.resolve())();let vy=(()=>{class n extends Mr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Wt,this.form=new _A({},uA(t),lA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){kf.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Df(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){kf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){kf.then(()=>{const r=this._findContainer(t.path),i=new _A({});(function X$(n,e){yA(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){kf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){kf.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Z$(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(X(sr,10),X(Xs,10),X(Dl,8))}}static{this.\u0275dir=Ve({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&K("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[$t([Dpe]),gt]})}}return n})();function eB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nB=class extends mA{constructor(e=null,t,r){super(pA(t),gA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Npe={provide:Zs,useExisting:Pt(()=>as)},oB=(()=>Promise.resolve())();let as=(()=>{class n extends Zs{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new nB,this._registered=!1,this.name="",this.update=new Wt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function CA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===yo?t=o:function Ope(n){return Object.getPrototypeOf(n.constructor)===lc}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function bA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Df(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){oB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&wu(r);oB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function gy(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(X(Mr,9),X(sr,10),X(Xs,10),X(_o,10),X(Cu,8),X(Dl,8))}}static{this.\u0275dir=Ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[$t([Npe]),gt,gi]})}}return n})(),sB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),cB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Si({type:n})}static{this.\u0275inj=fi({})}}return n})();const qpe={provide:_o,useExisting:Pt(()=>by),multi:!0};function gB(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let by=(()=>{class n extends lc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=gB(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Gpe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275dir=Ve({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&K("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[$t([qpe]),gt]})}}return n})(),mB=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(gB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(X(Lr),X(Oo),X(by,9))}}static{this.\u0275dir=Ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const Wpe={provide:_o,useExisting:Pt(()=>TA),multi:!0};function _B(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let TA=(()=>{class n extends lc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const u=this._getOptionValue(s[a].value);i.push(u)}}else{const s=r.options;for(let a=0;a<s.length;a++){const c=s[a];if(c.selected){const u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Kpe(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275dir=Ve({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&K("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[$t([Wpe]),gt]})}}return n})(),yB=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(_B(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(_B(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(X(Lr),X(Oo),X(TA,9))}}static{this.\u0275dir=Ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();let dc=(()=>{class n{constructor(){this._validator=uy}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):uy,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ve({type:n,features:[gi]})}}return n})();const Ype={provide:sr,useExisting:Pt(()=>Cy),multi:!0};let Cy=(()=>{class n extends dc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=wu,this.createValidator=t=>M$}enabled(t){return t}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275dir=Ve({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Zi("required",i._enabled?"":null)},inputs:{required:"required"},features:[$t([Ype]),gt]})}}return n})();const tge={provide:sr,useExisting:Pt(()=>PA),multi:!0};let PA=(()=>{class n extends dc{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function vB(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function x$(n){return e=>function I$(n){return null!=n&&"number"==typeof n.length}(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275dir=Ve({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Zi("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[$t([tge]),gt]})}}return n})(),rge=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Si({type:n})}static{this.\u0275inj=fi({imports:[cB]})}}return n})(),hc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Dl,useValue:t.callSetDisabledState??py}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Si({type:n})}static{this.\u0275inj=fi({imports:[rge]})}}return n})();const oi_apiUrl="https://music-uptc-sogamoso-back.vercel.app",oi_firebaseConfig={apiKey:"AIzaSyAehdTsKYuyXdmBngoGthTpaMPrw4nsga4",authDomain:"musicuptcsogamoso.firebaseapp.com",projectId:"musicuptcsogamoso",storageBucket:"musicuptcsogamoso.firebasestorage.app",messagingSenderId:"1011403818121",appId:"1:1011403818121:web:eea45507f1bdcd3631b258",measurementId:"G-BFW1T6D1J1"};let MB=(()=>{class n{http;apiUrl=oi_apiUrl;constructor(t){this.http=t}searchTracks(t){return this.http.get(`${this.apiUrl}/api/search?q=${encodeURIComponent(t)}`).pipe(ue(r=>r.map(i=>({id:i.id,name:i.name,artists:i.artists,album:i.album,image:i.image,preview_url:i.preview_url,duration_ms:i.duration_ms}))))}getAuthUrl(){return this.http.get(`${this.apiUrl}/api/spotify/auth`)}getCurrentlyPlaying(){return this.http.get(`${this.apiUrl}/api/spotify/currently-playing`)}getStatus(){return this.http.get(`${this.apiUrl}/api/spotify/admin/status`)}static \u0275fac=function(r){return new(r||n)(ve(Vi))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AB(n=0,e,t=Sse){let r=-1;return null!=e&&(VS(e)?t=e:r=e),new Ct(i=>{let o=function oge(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function wy(n=0,e=WE){return n<0&&(n=0),AB(n,n,e)}let fc=(()=>{class n{http;apiUrl=oi_apiUrl;currentUserSubject=new Pn(null);currentUser=this.currentUserSubject.asObservable();constructor(t){this.http=t;const r=localStorage.getItem("adminToken"),i=localStorage.getItem("adminUser");r&&i&&this.currentUserSubject.next(JSON.parse(i))}login(t,r){return this.http.post(`${this.apiUrl}/api/auth/login`,{email:t,password:r}).pipe(mt(i=>{i.token&&(localStorage.setItem("adminToken",i.token),localStorage.setItem("adminUser",JSON.stringify(i.user)),localStorage.setItem("auth_token",i.token),this.currentUserSubject.next(i.user))}))}logout(){localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),this.currentUserSubject.next(null)}isLoggedIn(){return!!localStorage.getItem("adminToken")}getAuthToken(){return localStorage.getItem("adminToken")}getAuthHeaders(){const t=this.getToken();return new bi(t?{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"})}getToken(){return localStorage.getItem("adminToken")}static \u0275fac=function(r){return new(r||n)(ve(Vi))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kl=(()=>{class n{http;authService;apiUrl=oi_apiUrl;cachedSongs=[];lastFetchTime=0;CACHE_DURATION=2e3;cachedVotingStatus=null;lastVotingStatusFetch=0;constructor(t,r){this.http=t,this.authService=r}getCacheBustedUrl(t){const r=t.includes("?")?"&":"?";return`${t}${r}_=${(new Date).getTime()}`}invalidateCache(){this.cachedSongs=[],this.lastFetchTime=0}invalidateVotingStatusCache(){this.cachedVotingStatus=null,this.lastVotingStatusFetch=0}processSongs(t){return t&&0!==t.length?t.sort((r,i)=>r.votes>i.votes?-1:r.votes<i.votes?1:new Date(i.createdat).getTime()-new Date(r.createdat).getTime()):[]}voteForSong(t,r,i=!1){return this.http.post(`${this.apiUrl}/api/vote`,{trackid:t,trackInfo:r,is_dislike:i}).pipe(mt(()=>{this.invalidateCache()}))}changeVote(t,r,i){return this.voteForSong(t,r,i)}getRankedSongsPolling(){return wy(3e4).pipe(am(0),hr(()=>this.getRankedSongs()))}getRankedSongs(){const t=Date.now();if(this.cachedSongs.length>0&&t-this.lastFetchTime<this.CACHE_DURATION)return Me([...this.cachedSongs]);const r=this.getCacheBustedUrl(`${this.apiUrl}/api/votes`);return this.http.get(r).pipe(ue(i=>{const o=this.processSongs(i||[]);return this.cachedSongs=o,this.lastFetchTime=t,o}))}getRecentlyAddedSongs(){return this.getRankedSongs().pipe(ue(t=>[...t].sort((r,i)=>new Date(i.createdat).getTime()-new Date(r.createdat).getTime()).slice(0,10)))}getSongs(){return this.getRankedSongs()}addToHistory(t){return this.http.post(`${this.apiUrl}/spotify/history`,{trackId:t})}vote(t,r,i=!1){return this.http.post(`${this.apiUrl}/vote`,{song:t,isDislike:r,isAdmin:i})}deleteSong(t){const r=this.authService.getAuthHeaders(),o=this.getCacheBustedUrl(`${this.apiUrl}/api/votes?trackid=${t}`);return this.http.delete(o,{headers:r}).pipe(mt(()=>{this.invalidateCache()}))}deleteAllVotes(){const t=this.authService.getAuthHeaders(),r=this.getCacheBustedUrl(`${this.apiUrl}/api/votes/all`);return this.http.delete(r,{headers:t}).pipe(mt(()=>{this.invalidateCache()}))}forceRefresh(){this.invalidateCache();const t=this.getCacheBustedUrl(`${this.apiUrl}/api/votes`);return this.http.get(t).pipe(ue(r=>{const i=this.processSongs(r||[]);return this.cachedSongs=i,this.lastFetchTime=Date.now(),i}))}getRankedSongsImmediate(){const t=this.getCacheBustedUrl(`${this.apiUrl}/api/votes`);return this.http.get(t).pipe(ue(r=>this.processSongs(r||[])))}getVotingStatus(){const t=this.getCacheBustedUrl(`${this.apiUrl}/api/voting/status`);return this.http.get(t)}submitVote(t){return this.http.post(`${this.apiUrl}/api/voting/vote`,{vote_type:t}).pipe(mt(()=>{this.invalidateVotingStatusCache()}),jn(r=>{let i="Error al votar";return r.error?.error?i=r.error.error:400===r.status?i="Solicitud incorrecta":409===r.status?i=r.error?.error||"Ya has votado por esta opci\xf3n":500===r.status?i="Error del servidor":0===r.status&&(i="Error de conexi\xf3n"),this.invalidateVotingStatusCache(),As(()=>new Error(i))}))}getVotingStatusImmediate(){const t=this.getCacheBustedUrl(`${this.apiUrl}/api/voting/status`);return this.http.get(t)}static \u0275fac=function(r){return new(r||n)(ve(Vi),ve(fc))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sge(n,e){1&n&&D(0,"i",11)}function age(n,e){1&n&&D(0,"i",12)}function cge(n,e){1&n&&(y(0,"div",16),T(1," No se encontraron resultados. Intenta con otras palabras. "),v())}function uge(n,e){if(1&n){const t=He();y(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20),D(4,"img",21),v(),y(5,"div",22)(6,"h6",23),T(7),v(),y(8,"p",24),T(9),v(),y(10,"p",25),T(11),v()(),y(12,"div",26)(13,"button",27),K("click",function(){const o=se(t).$implicit;return ae(U(2).vote(o))}),D(14,"i",28),T(15,"Votar "),v()()()()()}if(2&n){const t=e.$implicit,r=U(2);w(4),L("src",t.image,Vr)("alt",t.name),w(3),me(t.name),w(2),me(t.artists.join(", ")),w(2),me(r.formatDuration(t.duration_ms))}}function lge(n,e){if(1&n&&(y(0,"div"),Z(1,cge,2,0,"div",13),y(2,"div",14),Z(3,uge,16,5,"div",15),v()()),2&n){const t=U();w(1),L("ngIf",0===t.results.length&&!t.isLoading),w(2),L("ngForOf",t.results)}}let dge=(()=>{class n{spotifyService;votingService;voteCasted=new Wt;query="";results=[];isLoading=!1;searchPerformed=!1;constructor(t,r){this.spotifyService=t,this.votingService=r}search(){this.query.trim()&&(this.isLoading=!0,this.searchPerformed=!0,this.spotifyService.searchTracks(this.query).subscribe({next:t=>{this.results=t,this.isLoading=!1},error:t=>{console.error("Error al buscar:",t),this.isLoading=!1,alert("Error al buscar canciones. Intenta nuevamente.")}}))}vote(t){this.votingService.voteForSong(t.id,{name:t.name,artists:t.artists,image:t.album?.images?.[0]?.url||t.image,preview_url:t.preview_url,album:t.album?.name||"Unknown Album"}).subscribe({next:()=>{alert("\xa1Tu voto ha sido registrado!"),this.query="",this.results=[],this.searchPerformed=!1,this.voteCasted.emit()},error:i=>{409===i.status?alert("Ya has votado por esta canci\xf3n."):alert("Error al registrar tu voto. Intenta nuevamente.")}})}formatDuration(t){const r=Math.floor(t/6e4),i=(t%6e4/1e3).toFixed(0);return`${r}:${parseInt(i)<10?"0":""}${i}`}static \u0275fac=function(r){return new(r||n)(X(MB),X(kl))};static \u0275cmp=fr({type:n,selectors:[["app-search"]],outputs:{voteCasted:"voteCasted"},standalone:!0,features:[Cr],decls:13,vars:5,consts:[[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"fas","fa-search","me-2"],[1,"card-body"],[1,"input-group","mb-3"],["type","text","placeholder","Nombre de canci\xf3n o artista...",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"btn","btn-primary",3,"disabled","click"],["class","fas fa-search me-1",4,"ngIf"],["class","fas fa-spinner fa-spin me-1",4,"ngIf"],[4,"ngIf"],[1,"fas","fa-search","me-1"],[1,"fas","fa-spinner","fa-spin","me-1"],["class","alert alert-info",4,"ngIf"],[1,"results-container"],["class","card mb-2 track-card",4,"ngFor","ngForOf"],[1,"alert","alert-info"],[1,"card","mb-2","track-card"],[1,"card-body","py-2"],[1,"row","align-items-center"],[1,"col-3","col-sm-2"],[1,"img-fluid","rounded",3,"src","alt"],[1,"col-5","col-sm-6"],[1,"mb-1","text-truncate"],[1,"text-muted","mb-1","small","text-truncate"],[1,"text-muted","mb-0","small"],[1,"col-4","col-sm-4","text-end"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fas","fa-thumbs-up","me-1"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1)(2,"h5",2),D(3,"i",3),T(4,"Buscar canciones en Spotify "),v()(),y(5,"div",4)(6,"div",5)(7,"input",6),K("ngModelChange",function(s){return i.query=s})("keyup.enter",function(){return i.search()}),v(),y(8,"button",7),K("click",function(){return i.search()}),Z(9,sge,1,0,"i",8),Z(10,age,1,0,"i",9),T(11," Buscar "),v()(),Z(12,lge,4,2,"div",10),v()()),2&r&&(w(7),L("ngModel",i.query),w(1),L("disabled",i.isLoading),w(1),L("ngIf",!i.isLoading),w(1),L("ngIf",i.isLoading),w(2),L("ngIf",i.searchPerformed))},dependencies:[ni,ro,ti,hc,yo,ea,as],styles:[".track-card[_ngcontent-%COMP%]{transition:transform .2s,background-color .2s}.track-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background-color:#282828}.results-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}@media (max-width: 576px){.track-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.75rem}.track-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.9rem}.track-card[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:.2rem .5rem;font-size:.8rem}}.text-truncate[_ngcontent-%COMP%]{color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]})}return n})();function hge(n,e){1&n&&(y(0,"span"),T(1,"Actualizar"),v())}function fge(n,e){1&n&&(y(0,"span"),T(1,"Actualizando..."),v())}function pge(n,e){if(1&n&&(y(0,"span"),T(1),v()),2&n){const t=U();w(1),Ae("Espera ",t.countdown,"s")}}function gge(n,e){1&n&&(y(0,"div",7),D(1,"div",8),y(2,"p"),T(3,"Cargando canciones..."),v()())}function mge(n,e){if(1&n){const t=He();y(0,"div",17)(1,"div",18),D(2,"img",19),v(),y(3,"div",20)(4,"div",21)(5,"h6",22),T(6),v(),y(7,"p",23),T(8),v()(),y(9,"div",24)(10,"span",25),D(11,"i",26),T(12),v()(),y(13,"div")(14,"button",27),K("click",function(){const o=se(t).$implicit;return ae(U(3).vote(o,!1))}),D(15,"i",28),T(16),v(),y(17,"button",29),K("click",function(){const o=se(t).$implicit;return ae(U(3).vote(o,!0))}),D(18,"i",30),T(19),v()()()()}if(2&n){const t=e.$implicit,r=U(3);w(2),L("src",t.image,Vr)("alt",t.name),w(4),me(t.name),w(2),me(t.artists.join(", ")),w(4),Ae("",r.formatTimeAgo(t.createdat)," "),w(2),Oe("active",r.hasUserLiked(t.id)),w(2),Ae("",t.votes||0," "),w(1),Oe("active",r.hasUserDisliked(t.id)),w(2),Ae("",t.dislikes||0," ")}}function _ge(n,e){if(1&n&&(y(0,"div",14)(1,"h2"),T(2,"Reci\xe9n Agregadas"),v(),y(3,"div",15),Z(4,mge,20,11,"div",16),v()()),2&n){const t=U(2);w(4),L("ngForOf",t.recentlyAddedSongs)}}function yge(n,e){if(1&n){const t=He();y(0,"tr")(1,"td"),T(2),v(),y(3,"td")(4,"div",31),D(5,"img",32),y(6,"span"),T(7),v()()(),y(8,"td"),T(9),v(),y(10,"td")(11,"span",33),D(12,"i",28),T(13),v(),y(14,"span",34),D(15,"i",30),T(16),v()(),y(17,"td")(18,"span",35),T(19),v()(),y(20,"td")(21,"div",36)(22,"button",27),K("click",function(){const o=se(t).$implicit;return ae(U(2).vote(o,!1))}),D(23,"i",28),v(),y(24,"button",29),K("click",function(){const o=se(t).$implicit;return ae(U(2).vote(o,!0))}),D(25,"i",30),v()()()()}if(2&n){const t=e.$implicit,r=e.index,i=U(2);w(2),me(r+1),w(3),L("src",t.image,Vr)("alt",t.name),w(2),me(t.name),w(2),me(t.artists.join(", ")),w(4),Ae(" ",t.votes||0," "),w(3),Ae(" ",t.dislikes||0," "),w(3),me(i.formatTimeAgo(t.createdat)),w(3),Oe("active",i.hasUserLiked(t.id)),w(2),Oe("active",i.hasUserDisliked(t.id))}}function vge(n,e){if(1&n&&(y(0,"div",9),Z(1,_ge,5,1,"div",10),y(2,"h2"),T(3,"Ranking General"),v(),y(4,"div",11)(5,"table",12)(6,"thead")(7,"tr")(8,"th"),T(9,"#"),v(),y(10,"th"),T(11,"T\xedtulo"),v(),y(12,"th"),T(13,"Artista"),v(),y(14,"th"),T(15,"Votos"),v(),y(16,"th"),T(17,"Agregada"),v(),y(18,"th"),T(19,"Acci\xf3n"),v()()(),y(20,"tbody"),Z(21,yge,26,12,"tr",13),v()()()()),2&n){const t=U();w(1),L("ngIf",t.recentlyAddedSongs.length>0),w(20),L("ngForOf",t.songs)}}let bge=(()=>{class n{votingService;songs=[];recentlyAddedSongs=[];isLoading=!0;isRefreshing=!1;userVotes=new Map;pollingSubscription=null;refreshCooldown=30;countdown=0;timerSubscription=null;constructor(t){this.votingService=t}ngOnInit(){this.startPolling()}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe(),this.timerSubscription&&this.timerSubscription.unsubscribe()}startPolling(){this.pollingSubscription=this.votingService.getRankedSongsPolling().subscribe({next:t=>{this.songs=t,this.votingService.getRecentlyAddedSongs().subscribe({next:r=>{this.recentlyAddedSongs=r}}),this.isLoading=!1},error:t=>{console.error("Error al cargar canciones:",t),this.isLoading=!1}})}forceRefresh(){this.isRefreshing||this.countdown>0||(this.isRefreshing=!0,this.votingService.forceRefresh().subscribe({next:t=>{this.songs=t,this.votingService.getRecentlyAddedSongs().subscribe({next:r=>{this.recentlyAddedSongs=r,this.isRefreshing=!1,this.startCooldown()}})},error:t=>{console.error("Error al forzar actualizaci\xf3n:",t),this.isRefreshing=!1,this.startCooldown()}}))}hasUserLiked(t){return this.userVotes.has(t)&&!1===this.userVotes.get(t)}hasUserDisliked(t){return this.userVotes.has(t)&&!0===this.userVotes.get(t)}formatTimeAgo(t){try{if(!t)return"reciente";let r;if("string"!=typeof t)return"Reciente";if(r=t.includes("Z")||t.includes("+")?new Date(t):new Date(t+"Z"),isNaN(r.getTime()))return console.warn("Fecha inv\xe1lida:",t),"Reciente";const o=Math.floor(((new Date).getTime()-r.getTime())/1e3),s=Math.floor(o/60),a=Math.floor(o/3600),c=Math.floor(o/86400);return o<60?`${o} s`:s<60?`Hace ${s} min ${o%60} s`:a<24?`Hace ${a} h ${s%60} min`:1===c?"Ayer":`Hace ${c} d`}catch(r){return console.error("Error formateando fecha:",r,"Fecha recibida:",t),"Reciente"}}startCooldown(){this.timerSubscription&&this.timerSubscription.unsubscribe(),this.countdown=this.refreshCooldown,this.timerSubscription=AB(0,1e3).subscribe(()=>{this.countdown>0?this.countdown--:this.timerSubscription&&(this.timerSubscription.unsubscribe(),this.timerSubscription=null)})}vote(t,r=!1){const i={name:t.name,artists:t.artists,image:t.image,album:t.album,preview_url:t.preview_url};this.votingService.voteForSong(t.id,i,r).subscribe({next:o=>{o.deleted?alert("La canci\xf3n ha sido eliminada por recibir muchos dislikes"):(alert(`\xa1Tu ${r?"dislike":"like"} ha sido registrado!`),this.userVotes.set(t.id,r)),this.forceRefresh()},error:o=>{409===o.status?confirm("Ya has votado por esta canci\xf3n. \xbfQuieres cambiar tu voto?")&&this.votingService.changeVote(t.id,i,r).subscribe({next:s=>{s.deleted?alert("La canci\xf3n ha sido eliminada por recibir muchos dislikes"):(alert("\xa1Tu voto ha sido cambiado!"),this.userVotes.set(t.id,r)),this.forceRefresh()},error:s=>{alert("Error al cambiar tu voto. Intenta nuevamente.")}}):alert("Error al registrar tu voto. Intenta nuevamente.")}})}static \u0275fac=function(r){return new(r||n)(X(kl))};static \u0275cmp=fr({type:n,selectors:[["app-voting-list"]],standalone:!0,features:[Cr],decls:11,vars:8,consts:[[1,"spotify-container"],[1,"header"],[1,"btn-refresh",3,"disabled","click"],[1,"fas","fa-sync-alt"],[4,"ngIf"],["class","loader",4,"ngIf"],["class","content",4,"ngIf"],[1,"loader"],[1,"spinner"],[1,"content"],["class","recently-added",4,"ngIf"],[1,"song-table-container"],[1,"song-table"],[4,"ngFor","ngForOf"],[1,"recently-added"],[1,"recent-songs-grid"],["class","recent-song-card",4,"ngFor","ngForOf"],[1,"recent-song-card"],[1,"recent-song-image-container"],[1,"recent-song-image",3,"src","alt"],[1,"recent-song-content"],[1,"recent-song-info"],[1,"recent-song-title"],[1,"recent-song-artist"],[1,"recent-song-meta"],[1,"badge","bg-secondary"],[1,"fas","fa-clock","me-1"],[1,"btn-vote","like-btn",3,"click"],[1,"fas","fa-thumbs-up"],[1,"btn-vote","dislike-btn",3,"click"],[1,"fas","fa-thumbs-down"],[1,"song-cell"],[3,"src","alt"],[1,"vote-count"],[1,"dislike-count"],[1,"time-ago"],[1,"vote-actions"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1)(2,"h1"),T(3,"Votaci\xf3n de Canciones"),v(),y(4,"button",2),K("click",function(){return i.forceRefresh()}),D(5,"i",3),Z(6,hge,2,0,"span",4),Z(7,fge,2,0,"span",4),Z(8,pge,2,1,"span",4),v()(),Z(9,gge,4,0,"div",5),Z(10,vge,22,2,"div",6),v()),2&r&&(w(4),L("disabled",i.isRefreshing||i.countdown>0),w(1),Oe("fa-spin",i.isRefreshing),w(1),L("ngIf",!i.isRefreshing&&0===i.countdown),w(1),L("ngIf",i.isRefreshing),w(1),L("ngIf",!i.isRefreshing&&i.countdown>0),w(1),L("ngIf",i.isLoading),w(1),L("ngIf",!i.isLoading))},dependencies:[ni,ro,ti],styles:['.spotify-container[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:2rem;color:var(--text-primary);box-shadow:0 10px 30px #0003;margin-bottom:2rem}.spotify-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}.spotify-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary-color) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;margin:0}.btn-refresh[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;font-weight:700;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;box-shadow:0 5px 15px #1db9544d}.btn-refresh[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #1db95466}.btn-refresh[_ngcontent-%COMP%]:disabled{opacity:.7;transform:none;box-shadow:none;cursor:not-allowed}.loader[_ngcontent-%COMP%]{text-align:center;padding:3rem}.loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.2);border-left-color:var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem;box-shadow:0 0 15px #1db9544d}.loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1.5rem;padding-bottom:.8rem;border-bottom:2px solid rgba(255,255,255,.1);color:var(--text-primary)}.recently-added[_ngcontent-%COMP%]{margin-bottom:3rem}.recently-added[_ngcontent-%COMP%]   .song-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]{display:flex;align-items:center;background:rgba(42,42,42,.5);padding:1rem;border-radius:12px;transition:all .3s ease;border:1px solid rgba(255,255,255,.05)}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]:hover{background:rgba(42,42,42,.7);transform:translateY(-3px);border-color:#1db95433;box-shadow:0 8px 25px #0003}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;margin-right:1rem;box-shadow:0 4px 15px #0000004d;transition:all .3s ease}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]{flex-grow:1;min-width:0}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin:0;color:var(--text-primary)}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin:.3rem 0 0}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   .song-actions[_ngcontent-%COMP%]{margin-left:1rem}.song-table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:12px;background:rgba(42,42,42,.3);padding:1rem}.song-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.song-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .song-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid rgba(255,255,255,.1)}.song-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;text-transform:uppercase;font-weight:600;letter-spacing:.5px}.song-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}.song-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.05)}.song-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.song-cell[_ngcontent-%COMP%]{display:flex;align-items:center}.song-cell[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;margin-right:1rem;box-shadow:0 4px 15px #0000004d}.vote-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;color:var(--text-primary)}.vote-count[_ngcontent-%COMP%]   .fa-thumbs-up[_ngcontent-%COMP%]{color:var(--primary-color);margin-right:.5rem;font-size:1.1rem}.btn-vote[_ngcontent-%COMP%]{background:transparent;color:var(--primary-color);border:2px solid var(--primary-color);padding:.5rem 1.2rem;border-radius:50px;cursor:pointer;transition:all .3s ease;font-weight:700}.btn-vote[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:var(--text-primary);transform:translateY(-2px);box-shadow:0 5px 15px #1db9544d}.btn-vote-small[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;padding:.6rem 1.2rem;border-radius:50px;cursor:pointer;font-weight:700;transition:all .3s ease;box-shadow:0 4px 12px #1db9544d}.btn-vote-small[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #1db95466}@media (max-width: 768px){.spotify-container[_ngcontent-%COMP%]{padding:1.5rem}.header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.song-table[_ngcontent-%COMP%]{font-size:.9rem}.song-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .song-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8rem}.song-cell[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.song-cell[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:0;margin-bottom:.5rem}}.recently-added[_ngcontent-%COMP%]{margin-bottom:2rem}.recently-added[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid rgba(255,255,255,.1);color:var(--text-primary)}.recent-songs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;margin-bottom:1.5rem}.recent-song-card[_ngcontent-%COMP%]{background:rgba(42,42,42,.5);border-radius:10px;padding:.8rem;display:flex;align-items:center;transition:all .3s ease;border:1px solid rgba(255,255,255,.05);position:relative;overflow:hidden;gap:.8rem;min-height:80px}.recent-song-card[_ngcontent-%COMP%]:hover{background:rgba(42,42,42,.7);transform:translateY(-3px);border-color:#1db95433;box-shadow:0 5px 15px #0003}.recent-song-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:linear-gradient(to bottom,var(--primary-color),var(--accent-purple))}.recent-song-image-container[_ngcontent-%COMP%]{flex-shrink:0;width:50px;height:50px;border-radius:6px;overflow:hidden;position:relative}.recent-song-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.recent-song-card[_ngcontent-%COMP%]:hover   .recent-song-image[_ngcontent-%COMP%]{transform:scale(1.1)}.recent-song-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:.4rem;min-width:0}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:.5rem;margin-top:.3rem}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   .btn-vote[_ngcontent-%COMP%]{padding:.25rem .6rem;font-size:.75rem;border-radius:4px;min-width:auto}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   .btn-vote[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;margin-right:.3rem}.recent-song-info[_ngcontent-%COMP%]{min-width:0}.recent-song-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary);margin:0;line-height:1.2;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.recent-song-artist[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);margin:0;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.recent-song-meta[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.recent-song-meta[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.3rem .6rem;border-radius:12px;font-size:.7rem;font-weight:600}.recent-song-meta[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.dislike-btn[_ngcontent-%COMP%]{background:transparent;color:#f44336;border:2px solid #f44336}.dislike-btn[_ngcontent-%COMP%]:hover, .dislike-btn.active[_ngcontent-%COMP%]{background:#f44336;color:#fff}.like-btn[_ngcontent-%COMP%]{background:transparent;color:var(--primary-color);border:2px solid var(--primary-color)}.like-btn[_ngcontent-%COMP%]:hover, .like-btn.active[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.vote-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.vote-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]{padding:.3rem .6rem;border-radius:4px;font-size:.8rem}.dislike-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;color:#f44336;margin-left:1rem}.dislike-count[_ngcontent-%COMP%]   .fa-thumbs-down[_ngcontent-%COMP%]{margin-right:.3rem;font-size:.9rem}.recent-song-actions[_ngcontent-%COMP%]{flex-shrink:0}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;width:32px;height:32px;border-radius:50%;cursor:pointer;font-weight:600;transition:all .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #1db9544d}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #1db95466}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}@media (max-width: 1024px){.recent-songs-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}}@media (max-width: 768px){.recent-songs-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.8rem}.recent-song-card[_ngcontent-%COMP%]{padding:.7rem;gap:.6rem}.recent-song-image-container[_ngcontent-%COMP%]{width:45px;height:45px}.recent-song-title[_ngcontent-%COMP%]{font-size:.85rem}.recent-song-artist[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 480px){.recent-songs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.recent-song-meta[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.3rem}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]{width:28px;height:28px}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}}']})}return n})(),MA=(()=>{class n{http;authService;apiUrl=oi_apiUrl;automaticCheckInterval=null;constructor(t,r){this.http=t,this.authService=r,this.startAutomaticPlayingSongCheck(5e3)}getCacheBustedUrl(t){return`${t}?_=${(new Date).getTime()}`}startAutomaticPlayingSongCheck(t=3e4){this.stopAutomaticPlayingSongCheck(),this.automaticCheckInterval=setInterval(()=>{this.checkAndRemovePlayingSongFromRanking().subscribe({next:r=>{r.deleted&&alert(`Canci\xf3n eliminada autom\xe1ticamente del ranking: ${r.song.name}`)},error:r=>{console.error("Error en verificaci\xf3n autom\xe1tica:",r)}})},t)}playTrack(t){const r=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/play`,{uri:t},{headers:r})}pausePlayback(){const t=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/api/spotify/admin/pause`,{},{headers:t})}resumePlayback(){const t=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/api/spotify/admin/resume`,{},{headers:t})}nextTrack(){const t=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/next`,{},{headers:t})}previousTrack(){const t=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/previous`,{},{headers:t})}stopAutomaticPlayingSongCheck(){this.automaticCheckInterval&&(clearInterval(this.automaticCheckInterval),this.automaticCheckInterval=null)}getAdminCurrentlyPlaying(){const t=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/admin/currently-playing`);return this.http.get(t).pipe(jn(r=>401===r.status?this.refreshAdminToken().pipe(hr(()=>{const i=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/admin/currently-playing`);return this.http.get(i)}),jn(i=>(console.error("Error al refrescar token:",i),As(()=>i)))):As(()=>r)))}refreshAdminToken(){const t=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/refresh-token`,{},{headers:t})}getAdminCurrentlyPlayingPolling(){return wy(3e3).pipe(am(0),hr(()=>this.getAdminCurrentlyPlaying()))}getAdminSpotifyStatus(){const t=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/admin/status`);return this.http.get(t)}startAdminSpotifyAuth(){const t=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/admin/auth`);return this.http.get(t)}disconnectAdminSpotify(){const t=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/disconnect`,{},{headers:t})}startSpotifyAuth(){const t=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/auth`);return this.http.get(t)}getCurrentlyPlaying(){const t=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/currently-playing`);return this.http.get(t)}getCurrentlyPlayingPolling(){return wy(3e3).pipe(am(0),hr(()=>this.getCurrentlyPlaying()))}addToQueue(t){const r=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/queue`,{uri:t},{headers:r})}checkAndRemovePlayingSongFromRanking(t=!1){const r=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/check-playing-song`,{force_add:t},{headers:r})}getQueue(){const t=this.authService.getAuthHeaders();return this.http.get(`${this.apiUrl}/api/spotify/admin/queue`,{headers:t})}addToHistory(){const t=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/add-to-history`,{},{headers:t})}addToHistoryConfirmed(){const t=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/add-to-history-confirmed`,{},{headers:t})}static \u0275fac=function(r){return new(r||n)(ve(Vi),ve(fc))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cge(n,e){1&n&&D(0,"div",21)}function wge(n,e){1&n&&D(0,"div",21)}function Ege(n,e){1&n&&D(0,"div",21)}function Ige(n,e){if(1&n&&(y(0,"div",22),D(1,"i",23),y(2,"span"),T(3),v()()),2&n){const t=U(2);w(3),Ae("Votaste por: ",t.getVoteTypeName(t.lastVoteType),"")}}function Tge(n,e){if(1&n){const t=He();y(0,"div",1)(1,"div",2),D(2,"div",3),v(),y(3,"div",4)(4,"div",5)(5,"div",6),D(6,"i",7),y(7,"span"),T(8),v()(),y(9,"button",8),K("click",function(){return se(t),ae(U().forceRefresh())}),D(10,"i",9),v()()(),y(11,"div",10)(12,"button",11),K("click",function(){return se(t),ae(U().vote("next"))}),y(13,"div",12),D(14,"i",13),y(15,"span"),T(16,"Siguiente"),v(),y(17,"div",14),T(18),v()(),Z(19,Cge,1,0,"div",15),v(),y(20,"button",16),K("click",function(){return se(t),ae(U().vote("genre_change"))}),y(21,"div",12),D(22,"i",17),y(23,"span"),T(24,"Cambiar g\xe9nero"),v(),y(25,"div",14),T(26),v()(),Z(27,wge,1,0,"div",15),v(),y(28,"button",18),K("click",function(){return se(t),ae(U().vote("repeat"))}),y(29,"div",12),D(30,"i",19),y(31,"span"),T(32,"Mismo g\xe9nero"),v(),y(33,"div",14),T(34),v()(),Z(35,Ege,1,0,"div",15),v()(),Z(36,Ige,4,1,"div",20),v()}if(2&n){const t=U();w(1),Oe("visible",t.isLoading),w(7),Ae("",t.votingStatus.total_votes," votos (beta) "),w(4),Oe("voted",t.hasVoted("next")),L("disabled",t.hasVoted("next")||t.isLoading),w(5),Oe("updating",t.isUpdatingNext),w(1),Ae(" ",t.votingStatus.votes.next," "),w(1),L("ngIf",t.hasVoted("next")),w(1),Oe("voted",t.hasVoted("genre_change")),L("disabled",t.hasVoted("genre_change")||t.isLoading),w(5),Oe("updating",t.isUpdatingGenre),w(1),Ae(" ",t.votingStatus.votes.genre_change," "),w(1),L("ngIf",t.hasVoted("genre_change")),w(1),Oe("voted",t.hasVoted("repeat")),L("disabled",t.hasVoted("repeat")||t.isLoading),w(5),Oe("updating",t.isUpdatingRepeat),w(1),Ae(" ",t.votingStatus.votes.repeat," "),w(1),L("ngIf",t.hasVoted("repeat")),w(1),L("ngIf",t.lastVoteType)}}let Pge=(()=>{class n{votingService;spotifyService;cdr;votingStatus=null;currentSong=null;userVotes=[];lastVoteType="";isLoading=!1;isUpdatingNext=!1;isUpdatingGenre=!1;isUpdatingRepeat=!1;votingSubscription;songSubscription;statusPollingSubscription;constructor(t,r,i){this.votingService=t,this.spotifyService=r,this.cdr=i}ngOnInit(){this.loadVotingStatus(),this.votingSubscription=wy(2e3).subscribe(()=>{this.currentSong&&this.currentSong.is_playing&&this.loadVotingStatus()}),this.songSubscription=this.spotifyService.getAdminCurrentlyPlayingPolling().subscribe(t=>{this.currentSong=t,t&&t.id!==this.votingStatus?.current_song_id&&(this.userVotes=[],this.lastVoteType="",this.loadVotingStatus())})}forceRefresh(){this.loadVotingStatus(),this.showNotification("Votaciones actualizadas","success")}ngOnDestroy(){this.votingSubscription&&this.votingSubscription.unsubscribe(),this.songSubscription&&this.songSubscription.unsubscribe(),this.statusPollingSubscription&&this.statusPollingSubscription.unsubscribe()}loadVotingStatus(){this.votingService.getVotingStatusImmediate().subscribe({next:t=>{t&&t.votes?this.votingStatus=t:console.warn("Datos de votaci\xf3n inv\xe1lidos recibidos:",t)},error:t=>{console.error("Error loading voting status:",t),setTimeout(()=>this.loadVotingStatus(),1e3)}})}vote(t){this.hasVoted(t)?this.showNotification("Ya has votado por esta opci\xf3n","warning"):this.votingService.submitVote(t).subscribe({next:r=>{this.userVotes.push(t),this.lastVoteType=t,this.votingStatus=r.status,this.showNotification(`Voto registrado: ${this.getVoteTypeName(t)}`,"success"),this.loadVotingStatus(),this.cdr.detectChanges(),setTimeout(()=>{this.lastVoteType="",this.cdr.detectChanges()},3e3)},error:r=>{console.error("Error submitting vote:",r);let i="Error al votar";r.message.includes("Ya has votado por")&&(this.userVotes.push(t),i=r.message,this.loadVotingStatus()),this.showNotification(i,"warning"),this.cdr.detectChanges()}})}showNotification(t,r){const i=document.createElement("div");i.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      padding: 12px 20px;\n      border-radius: 8px;\n      color: white;\n      font-weight: 600;\n      z-index: 1000;\n      animation: slideIn 0.3s ease;\n    ",i.style.background="success"===r?"linear-gradient(135deg, #1ed760, #19a34a)":"error"===r?"linear-gradient(135deg, #ff4d4d, #cc0000)":"linear-gradient(135deg, #ff9a00, #e67e00)",i.textContent=t,document.body.appendChild(i),setTimeout(()=>{i.style.animation="slideOut 0.3s ease",setTimeout(()=>{document.body.contains(i)&&document.body.removeChild(i)},300)},3e3)}hasVoted(t){return this.userVotes.includes(t)}getVoteTypeName(t){return{next:"siguiente canci\xf3n",genre_change:"cambiar de g\xe9nero",repeat:"mantener g\xe9nero"}[t]||t}static \u0275fac=function(r){return new(r||n)(X(kl),X(MA),X(Cu))};static \u0275cmp=fr({type:n,selectors:[["app-voting"]],standalone:!0,features:[Cr],decls:1,vars:1,consts:[["class","voting-container",4,"ngIf"],[1,"voting-container"],[1,"loading-overlay"],[1,"spinner"],[1,"voting-header"],[1,"header-controls"],[1,"total-votes"],[1,"fas","fa-users"],["title","Actualizar votos",1,"refresh-btn",3,"click"],[1,"fas","fa-sync-alt"],[1,"voting-options"],[1,"vote-btn","next",3,"disabled","click"],[1,"btn-content"],[1,"fas","fa-forward"],[1,"vote-count"],["class","pulse-ring",4,"ngIf"],[1,"vote-btn","genre",3,"disabled","click"],[1,"fas","fa-random"],[1,"vote-btn","repeat",3,"disabled","click"],[1,"fas","fa-redo"],["class","voting-feedback",4,"ngIf"],[1,"pulse-ring"],[1,"voting-feedback"],[1,"fas","fa-check-circle"]],template:function(r,i){1&r&&Z(0,Tge,37,25,"div",0),2&r&&L("ngIf",i.votingStatus&&(null==i.currentSong?null:i.currentSong.is_playing))},dependencies:[ni,ti],styles:['.voting-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,215,96,.15),rgba(29,185,84,.1));-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:16px;padding:1rem;margin:1rem 0;border:1px solid rgba(30,215,96,.3);width:100%;max-width:100%;box-shadow:0 0 20px #1ed76040,inset 0 1px #ffffff1a;position:relative;overflow:hidden}.voting-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,rgba(30,215,96,.8),transparent);animation:_ngcontent-%COMP%_neonGlow 3s ease-in-out infinite}.voting-header[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:center}.voting-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1ed760;margin:0 0 .5rem;font-weight:700;font-size:1.1rem;text-shadow:0 0 10px rgba(30,215,96,.5);letter-spacing:.5px}.total-votes[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;color:#ffffffb3;font-size:.85rem}.total-votes[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1ed760}.voting-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:.8rem;margin-bottom:1rem}.vote-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.8rem .5rem;border:2px solid rgba(30,215,96,.3);border-radius:12px;background:rgba(25,20,20,.6);color:#fff;transition:all .3s ease;cursor:pointer;flex:1;min-width:0;min-height:80px;position:relative}.vote-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:rgba(30,215,96,.2);border-color:#1ed760;transform:translateY(-2px);box-shadow:0 5px 15px #1ed7604d}.vote-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.vote-btn.voted[_ngcontent-%COMP%]{background:rgba(30,215,96,.25);border-color:#1ed760}.vote-btn.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .vote-btn.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .vote-btn.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{color:#1ed760;text-shadow:0 0 8px rgba(30,215,96,.6)}.vote-btn.next[_ngcontent-%COMP%]{border-color:#1ed76066}.vote-btn.next[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#1ed760}.vote-btn.genre[_ngcontent-%COMP%]{border-color:#569af766}.vote-btn.genre[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#569af7}.vote-btn.genre.voted[_ngcontent-%COMP%]{background:rgba(86,154,247,.25);border-color:#569af7}.vote-btn.genre.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .vote-btn.genre.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .vote-btn.genre.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{color:#569af7;text-shadow:0 0 8px rgba(86,154,247,.6)}.vote-btn.repeat[_ngcontent-%COMP%]{border-color:#ff9a0066}.vote-btn.repeat[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#ff9a00}.vote-btn.repeat.voted[_ngcontent-%COMP%]{background:rgba(255,154,0,.25);border-color:#ff9a00}.vote-btn.repeat.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .vote-btn.repeat.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .vote-btn.repeat.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{color:#ff9a00;text-shadow:0 0 8px rgba(255,154,0,.6)}.btn-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.4rem;z-index:2}.btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;transition:all .3s ease}.btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;text-align:center;transition:all .3s ease}.btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;color:#fff;transition:all .3s ease}.pulse-ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;border:2px solid #1ed760;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite;opacity:.6}.voting-feedback[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding-top:.8rem;border-top:1px solid rgba(255,255,255,.1);color:#1ed760;font-weight:600;font-size:.9rem}.voting-feedback[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce .5s ease-in-out}@keyframes _ngcontent-%COMP%_neonGlow{0%,to{opacity:.5}50%{opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:translate(-50%,-50%) scale(.8);opacity:.6}50%{transform:translate(-50%,-50%) scale(1.1);opacity:.3}to{transform:translate(-50%,-50%) scale(.8);opacity:.6}}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-5px)}60%{transform:translateY(-3px)}}@media (max-width: 768px){.voting-container[_ngcontent-%COMP%]{padding:.8rem;margin:.8rem 0}.voting-options[_ngcontent-%COMP%]{gap:.5rem}.vote-btn[_ngcontent-%COMP%]{padding:.6rem .4rem;min-height:70px}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{font-size:.9rem}.voting-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.voting-options[_ngcontent-%COMP%]{flex-direction:column;gap:.6rem}.vote-btn[_ngcontent-%COMP%]{min-height:60px;flex-direction:row;justify-content:flex-start;padding:.8rem}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{flex-direction:row;gap:.8rem;align-items:center}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:0}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;flex-grow:1;text-align:left}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{font-size:1rem}}.voting-container[_ngcontent-%COMP%]{position:relative}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;border-radius:16px;z-index:10;opacity:0;visibility:hidden;transition:all .3s ease}.loading-overlay.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}.loading-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid rgba(30,215,96,.3);border-top:3px solid #1ed760;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.vote-count[_ngcontent-%COMP%]{transition:all .3s ease}.vote-count.updating[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseUpdate .5s ease;color:#1ed760}@keyframes _ngcontent-%COMP%_pulseUpdate{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.header-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.refresh-btn[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.refresh-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);transform:rotate(180deg)}.refresh-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:14px}']})}return n})(),SB=(()=>{class n{http;authService;apiUrl=oi_apiUrl;constructor(t,r){this.http=t,this.authService=r}getQueue(){const t=this.authService.getAuthHeaders();return this.http.get(`${this.apiUrl}/api/spotify/admin/queue`,{headers:t})}getNextSong(){return this.http.get(`${this.apiUrl}/api/spotify/queue/next`)}addToQueue(t){const r=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/queue`,{uri:t},{headers:r}).pipe(jn(i=>{console.error("Error adding to queue:",i);let o="Error desconocido al agregar a la cola";throw i.error?.error?o=i.error.error:401===i.status?o="No autorizado - verifica la conexi\xf3n de Spotify":404===i.status&&(o="Dispositivo de Spotify no encontrado"),new Error(o)}))}static \u0275fac=function(r){return new(r||n)(ve(Vi),ve(fc))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mge(n,e){if(1&n){const t=He();y(0,"div",12)(1,"div",13),D(2,"img",14),v(),y(3,"div",15)(4,"div",16)(5,"h3",17),T(6),v(),y(7,"p",18),T(8),v()(),y(9,"div",19)(10,"span",20),T(11),v(),y(12,"div",21),D(13,"div",22),v(),y(14,"span",20),T(15),v()()(),y(16,"div",23)(17,"button",24),K("click",function(){return se(t),ae(U().forceUpdate())}),D(18,"i",25),v()()()}if(2&n){const t=U();w(2),Eg("alt","Car\xe1tula de ",t.adminCurrentlyPlaying.name,""),L("src",t.adminCurrentlyPlaying.image,Vr),w(4),me(t.adminCurrentlyPlaying.name),w(2),me(t.adminCurrentlyPlaying.artists),w(3),me(t.formatTime(t.progress*t.songDurationMs/100)),w(2),Ld("width",t.progress,"%"),w(2),me(t.formatTime(t.songDurationMs)),w(2),L("disabled",t.isUpdating),w(1),Oe("fa-spin",t.isUpdating)}}function Age(n,e){1&n&&D(0,"app-voting")}function Sge(n,e){if(1&n&&(y(0,"div",26)(1,"div",27),D(2,"img",28),v(),y(3,"div",29)(4,"h4",30),T(5),v(),y(6,"p",31),T(7),v()()()),2&n){const t=U();w(2),L("src",t.nextSong.image||"assets/default-song.png",Vr),w(3),me(t.nextSong.name),w(2),me(t.nextSong.artists.join(", "))}}function Oge(n,e){1&n&&(y(0,"div",32)(1,"p",33),T(2,"No hay canciones en la cola de Spotify"),v()())}function xge(n,e){1&n&&(y(0,"div",34)(1,"div",35),D(2,"i",36),y(3,"p",37),T(4,"No hay m\xfasica sonando."),v()()())}let OB=(()=>{class n{spotifyService;votingService;queueService;adminCurrentlyPlaying=null;progress=0;songDurationMs=0;isUpdating=!1;nextSong=null;pollingSubscription=null;progressInterval=null;songInitialProgressMs=0;lastSyncTime=0;constructor(t,r,i){this.spotifyService=t,this.votingService=r,this.queueService=i}ngOnInit(){this.startAdminSpotifyPolling(),this.loadNextSong(),setInterval(()=>{this.loadNextSong()},3e4)}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe(),this.stopProgressBar()}loadNextSong(){this.queueService.getNextSong().subscribe({next:t=>{this.nextSong=t&&t.next_song?t.next_song:null},error:t=>{console.error("Error loading next song:",t),this.nextSong=null}})}startAdminSpotifyPolling(){this.pollingSubscription=this.spotifyService.getAdminCurrentlyPlayingPolling().subscribe({next:t=>{t&&t.is_playing?this.adminCurrentlyPlaying&&this.adminCurrentlyPlaying.id===t.id?this.syncProgressBar(t.progress_ms,t.duration_ms):(this.adminCurrentlyPlaying=t,this.startProgressBar(t.progress_ms,t.duration_ms),this.checkAndRemovePlayingSong(),this.loadNextSong()):(this.adminCurrentlyPlaying=null,this.stopProgressBar())},error:t=>{console.error("Error al obtener reproducci\xf3n actual del admin:",t),this.adminCurrentlyPlaying=null,this.stopProgressBar()}})}forceUpdate(){this.isUpdating||(this.isUpdating=!0,this.spotifyService.getAdminCurrentlyPlaying().subscribe({next:t=>{t&&t.is_playing?this.adminCurrentlyPlaying&&this.adminCurrentlyPlaying.id===t.id?this.syncProgressBar(t.progress_ms,t.duration_ms):(this.adminCurrentlyPlaying=t,this.startProgressBar(t.progress_ms,t.duration_ms)):(this.adminCurrentlyPlaying=null,this.stopProgressBar()),this.isUpdating=!1},error:t=>{console.error("Error al forzar la actualizaci\xf3n:",t),this.adminCurrentlyPlaying=null,this.stopProgressBar(),this.isUpdating=!1}}))}startProgressBar(t,r){this.stopProgressBar(),this.syncProgressBar(t,r),this.progressInterval=setInterval(()=>{this.updateProgress()},500)}syncProgressBar(t,r){this.songInitialProgressMs=t,this.songDurationMs=r,this.lastSyncTime=Date.now(),this.updateProgress()}updateProgress(){if(!this.adminCurrentlyPlaying||this.songDurationMs<=0)return void(this.progress=0);const t=Date.now()-this.lastSyncTime;this.progress=Math.min((this.songInitialProgressMs+t)/this.songDurationMs*100,100),this.progress>=100&&this.stopProgressBar()}stopProgressBar(){this.progressInterval&&(clearInterval(this.progressInterval),this.progressInterval=null)}onVoteCasted(){const t=document.querySelector("app-voting-list");t&&t.forceRefresh&&t.forceRefresh()}checkAndRemovePlayingSong(){this.adminCurrentlyPlaying&&this.adminCurrentlyPlaying.id&&setTimeout(()=>{this.spotifyService.checkAndRemovePlayingSongFromRanking().subscribe({next:t=>{t.deleted&&(console.log("Canci\xf3n eliminada del ranking:",t.song.name),this.votingService.forceRefresh().subscribe())},error:t=>{console.error("Error al verificar canci\xf3n en reproducci\xf3n:",t)}})},3e3)}formatTime(t){if(!t)return"0:00";const r=Math.floor(t/1e3),o=r%60;return`${Math.floor(r/60)}:${o<10?"0":""}${o}`}static \u0275fac=function(r){return new(r||n)(X(MA),X(kl),X(SB))};static \u0275cmp=fr({type:n,selectors:[["app-home"]],standalone:!0,features:[Cr],decls:16,vars:5,consts:[[1,"home-container"],["class","now-playing-section compact-card fade-in",4,"ngIf","ngIfElse"],[1,"voting-section"],[4,"ngIf"],[1,"next-song-section","compact-card","fade-in"],[1,"card-header"],[1,"fas","fa-forward","text-primary"],[1,"header-title"],["class","next-song-content",4,"ngIf","ngIfElse"],["noNextSong",""],["noSongPlaying",""],[3,"voteCasted"],[1,"now-playing-section","compact-card","fade-in"],[1,"album-art-container"],[1,"album-art",3,"src","alt"],[1,"song-info-container"],[1,"song-details"],[1,"song-title"],[1,"song-artist"],[1,"progress-container"],[1,"time-display"],[1,"progress"],[1,"progress-bar"],[1,"update-button-container"],["title","Actualizar",1,"btn","btn-icon",3,"disabled","click"],[1,"fas","fa-sync-alt"],[1,"next-song-content"],[1,"album-art-mini"],["alt","Car\xe1tula",1,"album-art-img",3,"src"],[1,"song-info-mini"],[1,"song-title-mini"],[1,"song-artist-mini"],[1,"no-next-song-content"],[1,"text-muted","small","mb-0"],[1,"no-song-playing","compact-card","fade-in"],[1,"card-body"],[1,"fas","fa-music-slash","text-muted"],[1,"text-muted"]],template:function(r,i){if(1&r&&(y(0,"div",0),Z(1,Mge,19,11,"div",1),y(2,"div",2),Z(3,Age,1,0,"app-voting",3),v(),y(4,"div",4)(5,"div",5),D(6,"i",6),y(7,"span",7),T(8,"Siguiente en la cola"),v()(),Z(9,Sge,8,3,"div",8),Z(10,Oge,3,0,"ng-template",null,9,Ea),v(),Z(12,xge,5,0,"ng-template",null,10,Ea),y(14,"app-search",11),K("voteCasted",function(){return i.onVoteCasted()}),v(),D(15,"app-voting-list"),v()),2&r){const o=eo(11),s=eo(13);w(1),L("ngIf",i.adminCurrentlyPlaying)("ngIfElse",s),w(2),L("ngIf",i.adminCurrentlyPlaying),w(6),L("ngIf",i.nextSong)("ngIfElse",o)}},dependencies:[ni,ti,dge,bge,Pge],styles:['@charset "UTF-8";.home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.compact-card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--card-bg);border:1px solid var(--hover-bg);border-radius:12px;overflow:hidden;padding:.2rem;gap:1rem;transition:border-color .3s ease}.compact-card[_ngcontent-%COMP%]:hover{border-color:var(--primary-color)}.album-art-container[_ngcontent-%COMP%]{flex-shrink:0}.album-art[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:8px;box-shadow:0 4px 15px #00000080}.song-info-container[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:center;gap:.5rem;min-width:0}.song-details[_ngcontent-%COMP%]   .song-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--text-primary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.song-details[_ngcontent-%COMP%]   .song-artist[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.update-button-container[_ngcontent-%COMP%]{flex-shrink:0;margin-left:auto}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);font-size:1.2rem;cursor:pointer;padding:.5rem;border-radius:50%}.btn-icon[_ngcontent-%COMP%]:hover{color:var(--text-primary);background-color:var(--hover-bg)}.btn-icon[_ngcontent-%COMP%]:disabled{color:var(--text-tertiary);cursor:not-allowed}.progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;width:100%}.progress-container[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);min-width:40px;text-align:center}.progress-container[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{flex-grow:1;height:6px;background-color:#444;border-radius:3px;overflow:hidden}.progress-container[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background-color:var(--primary-color);height:100%;transition:width .25s linear}.no-song-playing[_ngcontent-%COMP%]{justify-content:center}.no-song-playing[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.no-song-playing[_ngcontent-%COMP%]   .fa-music-slash[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--text-tertiary)}.no-song-playing[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-weight:500}@media (max-width: 768px){.compact-card[_ngcontent-%COMP%]{padding:.75rem;gap:.75rem}.album-art[_ngcontent-%COMP%]{width:60px;height:60px}.song-details[_ngcontent-%COMP%]   .song-title[_ngcontent-%COMP%]{font-size:1rem}.song-details[_ngcontent-%COMP%]   .song-artist[_ngcontent-%COMP%]{font-size:.8rem}.progress-container[_ngcontent-%COMP%]{max-width:100%}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out;box-shadow:0 4px 15px #035f0b93}.fade-in[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #00000080}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.voting-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin:1.5rem 0}.next-song-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:1rem;gap:.5rem;background-color:#ffffff0d;border:1px solid rgba(255,255,255,.1)}.next-song-section[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;width:100%;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:.5rem}.next-song-section[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px}.next-song-section[_ngcontent-%COMP%]   .next-song-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;width:100%}.next-song-section[_ngcontent-%COMP%]   .album-art-mini[_ngcontent-%COMP%]{flex-shrink:0}.next-song-section[_ngcontent-%COMP%]   .album-art-mini[_ngcontent-%COMP%]   .album-art-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:6px;object-fit:cover}.next-song-section[_ngcontent-%COMP%]   .song-info-mini[_ngcontent-%COMP%]{flex-grow:1;min-width:0}.next-song-section[_ngcontent-%COMP%]   .song-info-mini[_ngcontent-%COMP%]   .song-title-mini[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.next-song-section[_ngcontent-%COMP%]   .song-info-mini[_ngcontent-%COMP%]   .song-artist-mini[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}']})}return n})();const Dge=function(n,e,t,r,i,o){return{width:n,height:e,left:t,top:r,"animation-duration":i,"animation-delay":o}};function kge(n,e){if(1&n&&D(0,"div",8),2&n){const t=e.$implicit;L("ngStyle",pN(1,Dge,t.width,t.height,t.left,t.top,t.animationDuration,t.animationDelay))}}function Rge(n,e){if(1&n&&(y(0,"div",19),T(1),v()),2&n){const t=U(2);w(1),Ae(" ",t.errorMessage," ")}}function Nge(n,e){1&n&&D(0,"i",20)}function Fge(n,e){if(1&n){const t=He();y(0,"form",9),K("ngSubmit",function(){return se(t),ae(U().login())}),y(1,"div",10)(2,"input",11),K("ngModelChange",function(i){return se(t),ae(U().email=i)}),v(),y(3,"label",12),T(4,"Email"),v()(),y(5,"div",10)(6,"input",13),K("ngModelChange",function(i){return se(t),ae(U().password=i)}),v(),y(7,"label",14),T(8,"Contrase\xf1a"),v()(),Z(9,Rge,2,1,"div",15),y(10,"button",16)(11,"span",17),T(12),v(),Z(13,Nge,1,0,"i",18),v()()}if(2&n){const t=U();w(2),L("ngModel",t.email),w(4),L("ngModel",t.password),w(3),L("ngIf",t.errorMessage),w(1),L("disabled",t.isLoading),w(2),me(t.isLoading?"Verificando...":"Ingresar"),w(1),L("ngIf",t.isLoading)}}function Vge(n,e){1&n&&(y(0,"div",21)(1,"p"),T(2,"Sesi\xf3n iniciada. Redirigiendo al panel de administrador..."),v(),y(3,"a",22),T(4,"Ir al Panel"),v()())}let Lge=(()=>{class n{authService;router;email="";password="";errorMessage="";isLoading=!1;particles=[];constructor(t,r){this.authService=t,this.router=r}ngOnInit(){document.body.classList.add("login-page-active"),this.createParticles()}ngOnDestroy(){document.body.classList.remove("login-page-active")}createParticles(){for(let r=0;r<15;r++)this.particles.push(this.generateParticle())}generateParticle(){const t=20*Math.random()+20,r=90*Math.random()+15,i=7*Math.random();return{width:`${t}px`,height:`${t}px`,left:100*Math.random()+"%",animationDuration:`${r}s`,animationDelay:`${i}s`}}login(){this.email&&this.password?(this.isLoading=!0,this.errorMessage="",this.authService.login(this.email,this.password).subscribe({next:()=>{this.isLoading=!1,setTimeout(()=>{this.router.navigate(["/admin-panel"])},1500)},error:t=>{this.isLoading=!1,this.errorMessage=this.getFirebaseErrorMessage(t)}})):this.errorMessage="Por favor, completa ambos campos."}getFirebaseErrorMessage(t){switch(t.code){case"auth/invalid-email":return"El formato del correo electr\xf3nico no es v\xe1lido.";case"auth/user-disabled":return"Este usuario ha sido deshabilitado.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electr\xf3nico o contrase\xf1a incorrectos.";case"auth/too-many-requests":return"Acceso bloqueado por demasiados intentos. Intenta de nuevo m\xe1s tarde.";default:return console.error("Error de login no manejado:",t),"Error al iniciar sesi\xf3n. Verifica tus credenciales e intenta de nuevo."}}static \u0275fac=function(r){return new(r||n)(X(fc),X(Ir))};static \u0275cmp=fr({type:n,selectors:[["app-admin-login"]],standalone:!0,features:[Cr],decls:9,vars:3,consts:[[1,"admin-login-wrapper"],[1,"particles"],["class","particle",3,"ngStyle",4,"ngFor","ngForOf"],[1,"login-container"],[1,"glassmorphism-form"],[1,"form-title"],[3,"ngSubmit",4,"ngIf"],["class","logged-in-message",4,"ngIf"],[1,"particle",3,"ngStyle"],[3,"ngSubmit"],[1,"input-group"],["type","email","id","email","name","email","required","","placeholder"," ",1,"form-input",3,"ngModel","ngModelChange"],["for","email",1,"form-label"],["type","password","id","password","name","password","required","","placeholder"," ",1,"form-input",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"button-text"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"error-message"],[1,"fas","fa-spinner","fa-spin"],[1,"logged-in-message"],["routerLink","/admin-panel",1,"admin-link"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1),Z(2,kge,1,8,"div",2),v(),y(3,"div",3)(4,"div",4)(5,"h2",5),T(6,"Acceso Administrador"),v(),Z(7,Fge,14,6,"form",6),Z(8,Vge,5,0,"div",7),v()()()),2&r&&(w(2),L("ngForOf",i.particles),w(5),L("ngIf",!i.authService.isLoggedIn()),w(1),L("ngIf",i.authService.isLoggedIn()))},dependencies:[ni,ro,ti,Y2,hc,sB,yo,ea,W$,Cy,as,vy,vh,xa],styles:['@charset "UTF-8";[_nghost-%COMP%]{--login-bg: #0a0a0a;--glass-bg: rgba(18, 18, 18, .85);--primary-color: #1DB954;--text-primary: #FFFFFF;--text-secondary: #B3B3B3;--hover-bg: rgba(255, 255, 255, .05)}.admin-login-wrapper[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--login-bg);position:relative;overflow:hidden;padding:2rem}.admin-login-wrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 10% 20%,rgba(29,185,84,.15) 0%,transparent 25%),radial-gradient(circle at 90% 80%,rgba(141,103,171,.15) 0%,transparent 25%),radial-gradient(circle at 50% 50%,rgba(29,185,84,.1) 0%,transparent 40%);z-index:0;pointer-events:none}.particles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}.particle[_ngcontent-%COMP%]{position:absolute;background:rgba(29,185,84,.3);border-radius:50%;animation:_ngcontent-%COMP%_float 6s infinite ease-in-out}.particle[_ngcontent-%COMP%]:nth-child(odd){background:rgba(141,103,171,.3);animation-duration:8s;animation-delay:1s}.particle[_ngcontent-%COMP%]:nth-child(3n){background:rgba(45,70,185,.2);animation-duration:10s;animation-delay:2s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) translate(0);opacity:.7}25%{transform:translateY(-20px) translate(10px);opacity:.4}50%{transform:translateY(-35px) translate(-15px);opacity:.6}75%{transform:translateY(-15px) translate(-20px);opacity:.5}}.login-container[_ngcontent-%COMP%]{position:relative;z-index:2;width:100%;max-width:450px}.glassmorphism-form[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2.5rem;box-shadow:0 15px 35px #00000080,0 0 0 1px #ffffff0d;transition:all .4s ease}.glassmorphism-form[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 45px #1db95433,0 0 0 1px #1db9541a}.form-title[_ngcontent-%COMP%]{color:var(--text-primary);text-align:center;margin-bottom:2rem;font-weight:800;font-size:1.8rem;letter-spacing:-.5px;position:relative}.form-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:50px;height:3px;background:var(--primary-color);border-radius:2px}.input-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1.8rem}.form-input[_ngcontent-%COMP%]{width:100%;background:rgba(42,42,42,.7);border:1px solid rgba(62,62,62,.5);color:var(--text-primary);border-radius:12px;padding:1rem 1.2rem;font-size:1rem;transition:all .3s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;background:rgba(42,42,42,.9);border-color:var(--primary-color);box-shadow:0 0 0 3px #1db95433}.form-input[_ngcontent-%COMP%]:focus + .form-label[_ngcontent-%COMP%], .form-input[_ngcontent-%COMP%]:not(:placeholder-shown) + .form-label[_ngcontent-%COMP%]{top:-12px;left:10px;font-size:.8rem;background:var(--glass-bg);padding:0 8px;color:var(--primary-color)}.form-label[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1.2rem;color:var(--text-secondary);font-size:1rem;pointer-events:none;transition:all .3s ease}.error-message[_ngcontent-%COMP%]{background:rgba(226,33,52,.15);color:#e22134;border:1px solid rgba(226,33,52,.2);border-radius:8px;padding:.8rem;margin-bottom:1.5rem;font-size:.9rem;text-align:center}.login-button[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;border-radius:50px;padding:1rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;box-shadow:0 5px 15px #1db9544d}.login-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:all .5s ease}.login-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #1db95466}.login-button[_ngcontent-%COMP%]:hover:before{left:100%}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;transform:none;box-shadow:none;cursor:not-allowed}.button-text[_ngcontent-%COMP%]{position:relative;z-index:1}.logged-in-message[_ngcontent-%COMP%]{text-align:center;color:var(--text-primary)}.logged-in-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.1rem}.admin-link[_ngcontent-%COMP%]{display:inline-block;background:var(--primary-color);color:var(--text-primary);text-decoration:none;padding:.8rem 1.8rem;border-radius:50px;font-weight:700;transition:all .3s ease;box-shadow:0 4px 15px #1db9544d}.admin-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1db95466}@media (max-width: 576px){.admin-login-wrapper[_ngcontent-%COMP%]{padding:1rem}.glassmorphism-form[_ngcontent-%COMP%]{padding:2rem 1.5rem}.form-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})}return n})(),xB=(()=>{class n{http;authService;apiUrl=oi_apiUrl;constructor(t,r){this.http=t,this.authService=r}getSchedules(){return this.http.get(`${this.apiUrl}/api/schedules`)}updateSchedules(t){const r=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/api/schedules`,t,{headers:r})}static \u0275fac=function(r){return new(r||n)(ve(Vi),ve(fc))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uge(n,e){if(1&n&&(y(0,"div",33),D(1,"i",34),T(2),v()),2&n){const t=U();w(2),Ae(" ",t.successMessage," ")}}function jge(n,e){if(1&n&&(y(0,"div",35),D(1,"i",36),T(2),v()),2&n){const t=U();w(2),Ae(" ",t.errorMessage," ")}}function $ge(n,e){if(1&n&&(y(0,"div",37),D(1,"i",38),T(2),v()),2&n){const t=U();w(2),Ae(" ",t.actionInProgress," ")}}function Bge(n,e){if(1&n){const t=He();y(0,"div",39),D(1,"div",40),y(2,"span",41),T(3),v(),y(4,"button",42),K("click",function(){se(t);const i=U();return ae(i.spotifyStatus.authenticated?i.disconnectSpotify():i.connectSpotify())}),T(5),v()()}if(2&n){const t=U();w(1),Oe("connected",t.spotifyStatus.authenticated&&t.spotifyStatus.token_valid)("disconnected",!t.spotifyStatus.authenticated||!t.spotifyStatus.token_valid),w(2),Ae(" ",t.spotifyStatus.authenticated&&t.spotifyStatus.token_valid?"Spotify Conectado":"Spotify Desconectado"," "),w(2),Ae(" ",t.spotifyStatus.authenticated?"Desconectar":"Conectar"," ")}}function Hge(n,e){if(1&n){const t=He();y(0,"div",43)(1,"div",44)(2,"div",45)(3,"div",46),D(4,"i",47),v(),y(5,"div",48)(6,"h3"),T(7),v(),y(8,"p"),T(9,"Canciones en ranking"),v()()(),y(10,"div",45)(11,"div",46),D(12,"i",49),v(),y(13,"div",48)(14,"h3"),T(15),v(),y(16,"p"),T(17,"Total de votos"),v()()(),y(18,"div",45)(19,"div",46),D(20,"i",50),v(),y(21,"div",48)(22,"h3"),T(23),v(),y(24,"p"),T(25,"Votantes \xfanicos"),v()()(),y(26,"div",45)(27,"div",46),D(28,"i",51),v(),y(29,"div",48)(30,"h3"),T(31),v(),y(32,"p"),T(33,"En cola"),v()()()(),y(34,"div",52)(35,"button",53),K("click",function(){return se(t),ae(U().loadSongs())}),D(36,"i",54),T(37,"Actualizar Ranking "),v(),y(38,"button",55),K("click",function(){return se(t),ae(U().toggleQueue())}),D(39,"i",56),T(40,"Ver Cola "),v(),y(41,"button",57),K("click",function(){return se(t),ae(U().getAdminCurrentlyPlaying())}),D(42,"i",58),T(43,"Actualizar Reproducci\xf3n "),v()()()}if(2&n){const t=U();w(7),me(t.songs.length),w(8),me(t.totalVotes),w(8),me(t.uniqueVoters),w(8),me(t.queue.length)}}function zge(n,e){if(1&n){const t=He();y(0,"div",64)(1,"div",65)(2,"label",66),T(3,"Auto-hist\xf3rico"),v(),y(4,"label",67)(5,"input",68),K("ngModelChange",function(i){return se(t),ae(U(2).autoAddToHistory=i)})("change",function(){return se(t),ae(U(2).toggleAutoAdd())}),v(),D(6,"span",69),v()(),y(7,"div",70),D(8,"img",71),y(9,"div",72)(10,"h3"),T(11),v(),y(12,"p",73),T(13),v(),y(14,"div",74)(15,"div",75),D(16,"div",76),v(),y(17,"div",77)(18,"span"),T(19),v(),y(20,"span"),T(21),v()()()(),y(22,"div",78)(23,"button",79),K("click",function(){return se(t),ae(U(2).checkPlayingSong())}),D(24,"i",80),v(),y(25,"button",81),K("click",function(){return se(t),ae(U(2).checkAddToHistory())}),D(26,"i",51),v()()(),y(27,"div",82)(28,"button",83),K("click",function(){return se(t),ae(U(2).previousTrack())}),D(29,"i",84),v(),y(30,"button",85),K("click",function(){return se(t),ae(U(2).togglePlayback())}),D(31,"i",31),v(),y(32,"button",83),K("click",function(){return se(t),ae(U(2).nextTrack())}),D(33,"i",86),v()()()}if(2&n){const t=U(2);w(5),L("ngModel",t.autoAddToHistory),w(3),L("src",t.adminCurrentlyPlaying.image,Vr),w(3),me(t.adminCurrentlyPlaying.name),w(2),me(t.adminCurrentlyPlaying.artists.join(", ")),w(3),Ld("width",t.adminCurrentlyPlaying.progress_ms/t.adminCurrentlyPlaying.duration_ms*100,"%"),w(3),me(t.formatTime(t.adminCurrentlyPlaying.progress_ms)),w(2),me(t.formatTime(t.adminCurrentlyPlaying.duration_ms)),w(4),L("disabled",!t.adminCurrentlyPlaying||t.actionInProgress),w(6),Oe("fa-play",!t.isPlaying)("fa-pause",t.isPlaying)}}function qge(n,e){if(1&n){const t=He();y(0,"button",90),K("click",function(){return se(t),ae(U(3).connectSpotify())}),T(1," Conectar Spotify "),v()}}function Gge(n,e){if(1&n&&(y(0,"div",87),D(1,"i",88),y(2,"p"),T(3,"No se est\xe1 reproduciendo ninguna canci\xf3n"),v(),Z(4,qge,2,0,"button",89),v()),2&n){const t=U(2);w(4),L("ngIf",!(null!=t.spotifyStatus&&t.spotifyStatus.authenticated))}}function Wge(n,e){if(1&n){const t=He();y(0,"div",43)(1,"div",59)(2,"h2"),T(3,"Reproduciendo Ahora"),v(),y(4,"button",60),K("click",function(){return se(t),ae(U().getAdminCurrentlyPlaying())}),D(5,"i",61),v()(),Z(6,zge,34,13,"div",62),Z(7,Gge,5,1,"ng-template",null,63,Ea),v()}if(2&n){const t=eo(8),r=U();w(5),Oe("fa-spin",r.isLoadingCurrent),w(1),L("ngIf",r.adminCurrentlyPlaying)("ngIfElse",t)}}function Kge(n,e){if(1&n){const t=He();y(0,"div",96)(1,"span",97),T(2),v(),D(3,"img",98),y(4,"div",99)(5,"h4"),T(6),v(),y(7,"p"),T(8),v()(),y(9,"div",100)(10,"button",101),K("click",function(){const o=se(t).$implicit;return ae(U(3).playTrack(o.uri))}),D(11,"i",102),v()()()}if(2&n){const t=e.$implicit,r=e.index;w(2),me(r+1),w(1),L("src",(null==t.album||null==t.album.images[0]?null:t.album.images[0].url)||"assets/default-song.png",Vr),w(3),me(t.name),w(2),me(null==t.artists[0]?null:t.artists[0].name)}}function Qge(n,e){if(1&n&&(y(0,"div",94),Z(1,Kge,12,4,"div",95),v()),2&n){const t=U(2);w(1),L("ngForOf",t.queue)}}function Jge(n,e){1&n&&(y(0,"div",87),D(1,"i",103),y(2,"p"),T(3,"No hay canciones en la cola de reproducci\xf3n"),v()())}function Yge(n,e){if(1&n){const t=He();y(0,"div",43)(1,"div",59)(2,"h2"),T(3,"Cola de Reproducci\xf3n"),v(),y(4,"button",91),K("click",function(){return se(t),ae(U().loadQueue())}),D(5,"i",61),v()(),Z(6,Qge,2,1,"div",92),Z(7,Jge,4,0,"ng-template",null,93,Ea),v()}if(2&n){const t=eo(8),r=U();w(4),L("disabled",r.isLoadingQueue),w(1),Oe("fa-spin",r.isLoadingQueue),w(1),L("ngIf",r.queue.length>0)("ngIfElse",t)}}function Xge(n,e){if(1&n){const t=He();y(0,"div",111)(1,"div",112),T(2),v(),D(3,"img",113),y(4,"div",114)(5,"h4"),T(6),v(),y(7,"p"),T(8),v(),y(9,"div",115)(10,"span",116),D(11,"i",49),T(12),v(),y(13,"span",117),D(14,"i",118),T(15),v(),y(16,"span",119),T(17),v()()(),y(18,"div",120)(19,"button",121),K("click",function(){const o=se(t).$implicit;return ae(U(3).adminVote(o,!1))}),D(20,"i",49),v(),y(21,"button",122),K("click",function(){const o=se(t).$implicit;return ae(U(3).adminVote(o,!0))}),D(22,"i",118),v(),y(23,"button",123),K("click",function(){const o=se(t).$implicit;return ae(U(3).addToQueueFromRanking(o.id))}),D(24,"i",124),v(),y(25,"button",125),K("click",function(){const o=se(t).$implicit;return ae(U(3).deleteSong(o.id))}),D(26,"i",126),v()()()}if(2&n){const t=e.$implicit,r=e.index,i=U(3);w(2),me(r+1),w(1),L("src",t.image,Vr),w(3),me(t.name),w(2),me(t.artists.join(", ")),w(4),Ae(" ",t.votes||0,""),w(3),Ae(" ",t.dislikes||0,""),w(2),me(i.formatTimeAgo(t.createdat)),w(2),Oe("active",i.hasAdminLiked(t.id)),w(2),Oe("active",i.hasAdminDisliked(t.id))}}function Zge(n,e){if(1&n&&(y(0,"div",109),Z(1,Xge,27,11,"div",110),v()),2&n){const t=U(2);w(1),L("ngForOf",t.songs)}}function eme(n,e){1&n&&(y(0,"div",87),D(1,"i",127),y(2,"p"),T(3,"No hay canciones en el ranking"),v()())}function tme(n,e){if(1&n){const t=He();y(0,"div",43)(1,"div",59)(2,"h2"),T(3,"Ranking de Canciones"),v(),y(4,"div",104)(5,"button",91),K("click",function(){return se(t),ae(U().loadSongs())}),D(6,"i",61),v(),y(7,"button",105),K("click",function(){return se(t),ae(U().deleteAllVotes())}),D(8,"i",106),T(9,"Eliminar Todos "),v()()(),Z(10,Zge,2,1,"div",107),Z(11,eme,4,0,"ng-template",null,108,Ea),v()}if(2&n){const t=eo(12),r=U();w(5),L("disabled",r.isLoading),w(1),Oe("fa-spin",r.isLoading),w(4),L("ngIf",r.songs.length>0)("ngIfElse",t)}}const DB=function(){return["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes"]};function nme(n,e){if(1&n&&(y(0,"div",131)(1,"h4"),T(2),v(),y(3,"div",132)(4,"div",133)(5,"span",134),T(6,"Almuerzo:"),v(),y(7,"span",135),T(8),v()(),y(9,"div",133)(10,"span",134),T(11,"Cena:"),v(),y(12,"span",135),T(13),v()()(),y(14,"div",136)(15,"span",137),T(16),v()()()),2&n){const t=e.$implicit,r=U(3);w(2),me(wa(10,DB)[t.day_of_week]),w(6),Ro("",r.convertToAmPm(t.lunch_start)||"-"," - ",r.convertToAmPm(t.lunch_end)||"-",""),w(5),Ro("",r.convertToAmPm(t.dinner_start)||"-"," - ",r.convertToAmPm(t.dinner_end)||"-",""),w(2),Oe("active",t.is_active)("inactive",!t.is_active),w(1),Ae(" ",t.is_active?"Activo":"Inactivo"," ")}}function rme(n,e){if(1&n&&(y(0,"div"),Z(1,nme,17,11,"div",130),v()),2&n){const t=U(2);w(1),L("ngForOf",t.schedules)}}function ime(n,e){if(1&n){const t=He();y(0,"div",141)(1,"h4"),T(2),v(),y(3,"div",142)(4,"div",143)(5,"label"),T(6,"Almuerzo Inicio"),v(),y(7,"input",144),K("ngModelChange",function(i){return ae(se(t).$implicit.lunch_start=i)}),v()(),y(8,"div",143)(9,"label"),T(10,"Almuerzo Fin"),v(),y(11,"input",144),K("ngModelChange",function(i){return ae(se(t).$implicit.lunch_end=i)}),v()(),y(12,"div",143)(13,"label"),T(14,"Cena Inicio"),v(),y(15,"input",144),K("ngModelChange",function(i){return ae(se(t).$implicit.dinner_start=i)}),v()(),y(16,"div",143)(17,"label"),T(18,"Cena Fin"),v(),y(19,"input",144),K("ngModelChange",function(i){return ae(se(t).$implicit.dinner_end=i)}),v()(),y(20,"div",145)(21,"label"),T(22,"Activo"),v(),y(23,"label",67)(24,"input",146),K("ngModelChange",function(i){return ae(se(t).$implicit.is_active=i)}),v(),D(25,"span",147),v()()()()}if(2&n){const t=e.$implicit;w(2),me(wa(6,DB)[t.day_of_week]),w(5),L("ngModel",t.lunch_start),w(4),L("ngModel",t.lunch_end),w(4),L("ngModel",t.dinner_start),w(4),L("ngModel",t.dinner_end),w(5),L("ngModel",t.is_active)}}function ome(n,e){if(1&n){const t=He();y(0,"div"),Z(1,ime,26,7,"div",138),y(2,"button",139),K("click",function(){return se(t),ae(U(2).saveSchedules())}),D(3,"i",140),T(4,"Guardar Horarios "),v()()}if(2&n){const t=U(2);w(1),L("ngForOf",t.schedules)}}function sme(n,e){if(1&n){const t=He();y(0,"div",43)(1,"div",59)(2,"h2"),T(3,"Horarios de M\xfasica"),v(),y(4,"button",27),K("click",function(){se(t);const i=U();return ae(i.isEditingSchedules=!i.isEditingSchedules)}),T(5),v()(),y(6,"div",128),Z(7,rme,2,1,"div",129),Z(8,ome,5,1,"div",129),v()()}if(2&n){const t=U();w(5),Ae(" ",t.isEditingSchedules?"Cancelar":"Editar"," "),w(2),L("ngIf",!t.isEditingSchedules),w(1),L("ngIf",t.isEditingSchedules)}}function ame(n,e){if(1&n){const t=He();y(0,"div",155),D(1,"img",156),y(2,"div",157)(3,"h4"),T(4),v(),y(5,"p"),T(6),v(),y(7,"span",158),T(8),v()(),y(9,"div",159)(10,"button",160),K("click",function(){const o=se(t).$implicit;return ae(U(3).voteFromSearch(o,!1))}),D(11,"i",49),v(),y(12,"button",161),K("click",function(){const o=se(t).$implicit;return ae(U(3).voteFromSearch(o,!0))}),D(13,"i",118),v(),y(14,"button",123),K("click",function(){const o=se(t).$implicit;return ae(U(3).addToQueueFromSearch(o.uri))}),D(15,"i",124),v(),y(16,"button",162),K("click",function(){const o=se(t).$implicit;return ae(U(3).playNowFromSearch(o.uri))}),D(17,"i",102),v()()()}if(2&n){const t=e.$implicit;w(1),L("src",t.image,Vr),w(3),me(t.name),w(2),me(null==t.artists[0]?null:t.artists[0].name),w(2),me(t.album.name)}}function cme(n,e){if(1&n&&(y(0,"div",153),Z(1,ame,18,4,"div",154),v()),2&n){const t=U(2);w(1),L("ngForOf",t.searchResults)}}function ume(n,e){if(1&n){const t=He();y(0,"div",148)(1,"div",149)(2,"input",150),K("ngModelChange",function(i){return se(t),ae(U().searchQuery=i)})("keyup.enter",function(){return se(t),ae(U().searchSpotify())}),v(),y(3,"button",151),K("click",function(){return se(t),ae(U().searchSpotify())}),D(4,"i",80),v()(),Z(5,cme,2,1,"div",152),v()}if(2&n){const t=U();w(2),L("ngModel",t.searchQuery),w(3),L("ngIf",t.searchResults.length>0)}}function lme(n,e){if(1&n){const t=He();y(0,"div",168),D(1,"img",169),y(2,"div",170)(3,"h5"),T(4),v(),y(5,"p"),T(6),v(),y(7,"div",171)(8,"span",116),D(9,"i",49),T(10),v(),y(11,"span",117),D(12,"i",118),T(13),v()()(),y(14,"div",172)(15,"button",121),K("click",function(){const o=se(t).$implicit;return ae(U(3).adminVote(o,!1))}),D(16,"i",49),v(),y(17,"button",122),K("click",function(){const o=se(t).$implicit;return ae(U(3).adminVote(o,!0))}),D(18,"i",118),v(),y(19,"button",123),K("click",function(){const o=se(t).$implicit;return ae(U(3).addToQueueFromRecent(o))}),D(20,"i",124),v()()()}if(2&n){const t=e.$implicit,r=U(3);w(1),L("src",t.image,Vr),w(3),me(t.name),w(2),me(t.artists.join(", ")),w(4),Ae(" ",t.votes||0,""),w(3),Ae(" ",t.dislikes||0,""),w(2),Oe("active",r.hasAdminLiked(t.id)),w(2),Oe("active",r.hasAdminDisliked(t.id))}}function dme(n,e){if(1&n&&(y(0,"div",166),Z(1,lme,21,9,"div",167),v()),2&n){const t=U(2);w(1),L("ngForOf",t.recentlyAddedSongs)}}function hme(n,e){1&n&&(y(0,"div",87),D(1,"i",173),y(2,"p"),T(3,"No hay canciones recientes"),v()())}function fme(n,e){if(1&n&&(y(0,"div",163),Z(1,dme,2,1,"div",164),Z(2,hme,4,0,"ng-template",null,165,Ea),v()),2&n){const t=eo(3),r=U();w(1),L("ngIf",r.recentlyAddedSongs.length>0)("ngIfElse",t)}}let pme=(()=>{class n{http;spotifyNowPlaying;votingService;spotifyService;scheduleService;authService;router;queueService;activeSection="dashboard";showSearch=!1;showRecentlyAdded=!0;isEditingSchedules=!1;songs=[];queue=[];recentlyAddedSongs=[];searchResults=[];schedules=[];spotifyStatus=null;adminCurrentlyPlaying=null;autoAddToHistory=!1;lastAddedSongId=null;isLoading=!1;isLoadingQueue=!1;isLoadingCurrent=!1;isPlaying=!1;searchQuery="";adminVotes={};totalVotes=0;uniqueVoters=0;successMessage="";errorMessage="";actionInProgress="";refreshTimer;currentSongTimer;recentlyAddedTimer;apiUrl=oi_apiUrl;constructor(t,r,i,o,s,a,c,u){this.http=t,this.spotifyNowPlaying=r,this.votingService=i,this.spotifyService=o,this.scheduleService=s,this.authService=a,this.router=c,this.queueService=u}ngOnInit(){this.loadInitialData(),this.setupAutoRefresh(),this.calculateStats()}calculateStats(){this.totalVotes=this.songs.reduce((t,r)=>t+(r.votes||0),0),this.uniqueVoters=Math.floor(.7*this.totalVotes)}showMessage(t,r=!0,i=3e3){r?this.successMessage=t:this.errorMessage=t,setTimeout(()=>{r?this.successMessage="":this.errorMessage=""},i)}ngOnDestroy(){this.refreshTimer&&clearInterval(this.refreshTimer),this.currentSongTimer&&clearInterval(this.currentSongTimer),this.recentlyAddedTimer&&clearInterval(this.recentlyAddedTimer)}loadInitialData(){this.loadSongs(),this.loadQueue(),this.getSpotifyStatus(),this.getAdminCurrentlyPlaying(),this.loadSchedules()}setupAutoRefresh(){this.refreshTimer=setInterval(()=>{this.loadSongs(),this.loadQueue(),this.getSpotifyStatus()},3e4),this.currentSongTimer=setInterval(()=>{this.getAdminCurrentlyPlaying()},5e3),this.recentlyAddedTimer=setInterval(()=>{this.filterRecentlyAdded()},15e3)}setActiveSection(t){this.activeSection=t,"queue"===t?this.loadQueue():"playing"===t?this.getAdminCurrentlyPlaying():"ranking"===t?this.loadSongs():"schedules"===t&&this.loadSchedules()}toggleSearch(){this.showSearch=!this.showSearch,this.showSearch&&(this.activeSection="dashboard")}toggleRecentlyAdded(){this.showRecentlyAdded=!this.showRecentlyAdded}loadSongs(){this.isLoading=!0,this.votingService.forceRefresh().subscribe({next:t=>{this.songs=t,this.filterRecentlyAdded(),this.calculateVotingStats(),this.isLoading=!1,this.showMessage("Ranking actualizado correctamente")},error:t=>{console.error("Error loading songs:",t),this.isLoading=!1,this.showMessage("Error al cargar las canciones",!1)}})}calculateVotingStats(){this.totalVotes=this.songs.reduce((t,r)=>t+(r.votes||0),0),this.uniqueVoters=Math.floor(.7*this.totalVotes)}filterRecentlyAdded(){const t=new Date;t.setHours(t.getHours()-6),this.recentlyAddedSongs=this.songs.filter(r=>new Date(r.createdat)>t).sort((r,i)=>new Date(i.createdat).getTime()-new Date(r.createdat).getTime()).slice(0,15)}addToQueueFromRecent(t){this.addToQueueFromSearch(`spotify:track:${t.id}`)}loadQueue(){this.isLoadingQueue=!0,this.queueService.getQueue().subscribe({next:t=>{this.queue=t.queue||[],this.isLoadingQueue=!1},error:t=>{console.error("Error loading queue:",t),this.isLoadingQueue=!1,this.showMessage("Error al cargar la cola de reproducci\xf3n",!1)}})}getSpotifyStatus(){this.spotifyNowPlaying.getAdminSpotifyStatus().subscribe({next:t=>{this.spotifyStatus=t},error:t=>{console.error("Error getting Spotify status:",t)}})}getAdminCurrentlyPlaying(){this.isLoadingCurrent=!0,this.spotifyNowPlaying.getAdminCurrentlyPlaying().subscribe({next:t=>{t&&t.is_playing?(this.adminCurrentlyPlaying=t,this.isPlaying=t.is_playing):(this.adminCurrentlyPlaying=null,this.isPlaying=!1),this.isLoadingCurrent=!1,this.checkAutoAdd()},error:t=>{console.error("Error getting currently playing:",t),this.adminCurrentlyPlaying=null,this.isLoadingCurrent=!1}})}loadSchedules(){this.scheduleService.getSchedules().subscribe({next:t=>{this.schedules=t},error:t=>{console.error("Error loading schedules:",t)}})}saveSchedules(){this.scheduleService.updateSchedules(this.schedules).subscribe({next:()=>{this.isEditingSchedules=!1},error:t=>{console.error("Error saving schedules:",t)}})}connectSpotify(){this.spotifyNowPlaying.startAdminSpotifyAuth().subscribe({next:t=>{t.authUrl&&(window.location.href=t.authUrl)},error:t=>{console.error("Error connecting to Spotify:",t)}})}disconnectSpotify(){this.spotifyNowPlaying.disconnectAdminSpotify().subscribe({next:()=>{this.getSpotifyStatus()},error:t=>{console.error("Error disconnecting from Spotify:",t)}})}searchSpotify(){this.searchQuery.trim()&&(this.isLoading=!0,this.spotifyService.searchTracks(this.searchQuery).subscribe({next:t=>{this.searchResults=t.map(r=>({...r,image:r.image||r.album?.images?.[0]?.url||"assets/default-song.png",artists:Array.isArray(r.artists)?r.artists:"string"==typeof r.artists||r.artists?[r.artists]:["Artista desconocido"]})),this.isLoading=!1},error:t=>{console.error("Error searching Spotify:",t),this.showMessage("Error al buscar en Spotify",!1),this.isLoading=!1}}))}voteFromSearch(t,r){this.votingService.voteForSong(t.id,{id:t.id,name:t.name,artists:t.artists,image:t.image,preview_url:t.preview_url},r).subscribe({next:o=>{this.loadSongs(),alert(r?"Dislike registrado":"Like registrado")},error:o=>{console.error("Error voting from search:",o),alert("Error al votar. Intenta nuevamente.")}})}adminVote(t,r){this.adminVotes[t.id]=r,this.votingService.voteForSong(t.id,t,r).subscribe({next:i=>{this.loadSongs()},error:i=>{console.error("Error with admin vote:",i),delete this.adminVotes[t.id],alert("Error al votar. Intenta nuevamente.")}})}hasAdminLiked(t){return!1===this.adminVotes[t]}hasAdminDisliked(t){return!0===this.adminVotes[t]}addToQueue(t){this.queueService.addToQueue(t).subscribe({next:()=>{this.loadQueue(),this.showMessage("Canci\xf3n agregada a la cola correctamente")},error:r=>{console.error("Error adding to queue:",r),this.showMessage("Error al agregar a la cola",!1)}})}addToQueueFromSearch(t){this.actionInProgress="Agregando a la cola...",this.queueService.addToQueue(t).subscribe({next:r=>{this.loadQueue(),this.showMessage("Canci\xf3n agregada a la cola correctamente"),this.actionInProgress=""},error:r=>{console.error("Error adding to queue:",r),this.showMessage("Error al agregar a la cola: "+r.message,!1),this.actionInProgress=""}})}addToQueueFromRanking(t){confirm("\xbfAgregar esta canci\xf3n a la cola de reproducci\xf3n?")&&this.addToQueueFromSearch(`spotify:track:${t}`)}confirmAddToHistory(){var t=this;return _(function*(){try{const r=yield t.spotifyNowPlaying.addToHistory().toPromise();r.can_add?confirm(`\xbfEst\xe1s seguro de que quieres agregar "${r.song.name}" al hist\xf3rico?`)&&t.http.post(`${t.apiUrl}/api/spotify/admin/add-to-history-confirmed`,{}).subscribe({next:o=>{t.showMessage(o.message||"Canci\xf3n agregada al hist\xf3rico"),t.loadSongs()},error:o=>{t.showMessage("Error al agregar al hist\xf3rico: "+o.error?.error,!1)}}):t.showMessage(r.message,!1)}catch{t.showMessage("Error al verificar hist\xf3rico",!1)}})()}playNowFromSearch(t){this.actionInProgress="Reproduciendo...",this.spotifyNowPlaying.playTrack(t).subscribe({next:()=>{setTimeout(()=>{this.getAdminCurrentlyPlaying()},1e3),this.showMessage("Reproduciendo canci\xf3n"),this.actionInProgress=""},error:r=>{console.error("Error playing track:",r),this.showMessage("Error al reproducir: "+(r.error?.message||"Error desconocido"),!1),this.actionInProgress=""}})}playTrack(t){this.spotifyNowPlaying.playTrack(t).subscribe({next:()=>{setTimeout(()=>{this.getAdminCurrentlyPlaying()},1e3)},error:r=>{console.error("Error playing track:",r),alert("Error al reproducir la canci\xf3n: "+r.message)}})}nextTrack(){this.spotifyNowPlaying.nextTrack().subscribe({next:()=>{setTimeout(()=>{this.getAdminCurrentlyPlaying()},1e3)},error:t=>{console.error("Error skipping to next track:",t)}})}previousTrack(){this.spotifyNowPlaying.previousTrack().subscribe({next:()=>{setTimeout(()=>{this.getAdminCurrentlyPlaying()},1e3)},error:t=>{console.error("Error going to previous track:",t)}})}togglePlayback(){this.isPlaying?this.spotifyNowPlaying.pausePlayback().subscribe({next:()=>{this.isPlaying=!1},error:t=>{console.error("Error pausing playback:",t)}}):this.spotifyNowPlaying.resumePlayback().subscribe({next:()=>{this.isPlaying=!0},error:t=>{console.error("Error resuming playback:",t)}})}deleteSong(t){confirm("\xbfEst\xe1s seguro de que quieres eliminar esta canci\xf3n del ranking?")&&this.votingService.deleteSong(t).subscribe({next:()=>{this.loadSongs(),this.showMessage("Canci\xf3n eliminada correctamente")},error:r=>{console.error("Error deleting song:",r),this.showMessage("Error al eliminar la canci\xf3n",!1)}})}deleteAllVotes(){confirm("\xbfEst\xe1s seguro de que quieres eliminar TODOS los votos? Esta acci\xf3n no se puede deshacer.")&&this.votingService.deleteAllVotes().subscribe({next:()=>{this.loadSongs(),this.showMessage("Todos los votos han sido eliminados")},error:t=>{console.error("Error deleting all votes:",t),this.showMessage("Error al eliminar todos los votos",!1)}})}forceRefresh(){this.showMessage("Actualizando todos los datos..."),Promise.all([new Promise(t=>this.loadSongs()),new Promise(t=>this.loadQueue()),new Promise(t=>this.getSpotifyStatus()),new Promise(t=>this.getAdminCurrentlyPlaying())]).then(()=>{this.showMessage("Todos los datos han sido actualizados")}).catch(t=>{this.showMessage("Error al actualizar los datos",!1)})}toggleQueue(){this.activeSection="queue"}addToHistory(){var t=this;return _(function*(){if(t.adminCurrentlyPlaying&&t.adminCurrentlyPlaying.id){t.actionInProgress="Verificando canci\xf3n...";try{const r=yield t.spotifyNowPlaying.addToHistory().toPromise();if(r.can_add){if(confirm(`\xbfEst\xe1s seguro de que quieres agregar "${t.adminCurrentlyPlaying.name}" al hist\xf3rico?\n\nEsta acci\xf3n eliminar\xe1 la canci\xf3n del ranking si est\xe1 presente.`)){t.actionInProgress="Agregando al hist\xf3rico...";const o=t.authService.getAuthHeaders(),s=yield t.http.post(`${t.apiUrl}/api/spotify/admin/add-to-history-confirmed`,{},{headers:o}).toPromise();t.showMessage(s.message||"Canci\xf3n agregada al hist\xf3rico correctamente"),t.loadSongs(),setTimeout(()=>{t.getAdminCurrentlyPlaying()},2e3)}}else t.showMessage(r.message,!1)}catch(r){console.error("Error al agregar al hist\xf3rico:",r),t.showMessage(r.error?.error||r.message||"Error al agregar al hist\xf3rico",!1)}finally{t.actionInProgress=""}}else t.showMessage("No hay canci\xf3n reproduci\xe9ndose actualmente",!1)})()}checkAddToHistory(){this.adminCurrentlyPlaying?this.spotifyNowPlaying.addToHistory().subscribe({next:t=>{t.can_add?this.addToHistory():this.showMessage(t.message,!1)},error:t=>{this.showMessage("Error al verificar: "+(t.error?.message||t.message),!1)}}):this.showMessage("No hay canci\xf3n reproduci\xe9ndose",!1)}checkPlayingSong(){this.adminCurrentlyPlaying&&(this.songs.find(r=>r.id===this.adminCurrentlyPlaying.id)?this.activeSection="ranking":alert("Esta canci\xf3n no est\xe1 en el ranking."))}forceRankSong(){this.adminCurrentlyPlaying&&this.votingService.vote({id:this.adminCurrentlyPlaying.id,name:this.adminCurrentlyPlaying.name,artists:this.adminCurrentlyPlaying.artists,image:this.adminCurrentlyPlaying.image},!1,!0).subscribe({next:()=>{this.loadSongs(),this.activeSection="ranking"},error:r=>{console.error("Error forcing song to rank:",r)}})}formatTime(t){const r=Math.floor(t/1e3),o=r%60;return`${Math.floor(r/60)}:${o<10?"0":""}${o}`}formatTimeAgo(t){const r=new Date(t),o=(new Date).getTime()-r.getTime(),s=Math.floor(o/6e4),a=Math.floor(s/60),c=Math.floor(a/24);return s<1?"Ahora mismo":s<60?`Hace ${s} min`:a<24?`Hace ${a} h`:1===c?"Ayer":`Hace ${c} d\xedas`}convertToAmPm(t){if(!t)return"";const[r,i]=t.split(":"),o=parseInt(r,10);return`${o%12||12}:${i} ${o>=12?"PM":"AM"}`}logout(){this.authService.logout(),this.router.navigate(["/login"])}checkAutoAdd(){if(this.autoAddToHistory&&this.adminCurrentlyPlaying&&this.adminCurrentlyPlaying.id){if(this.lastAddedSongId===this.adminCurrentlyPlaying.id)return;this.spotifyNowPlaying.addToHistory().subscribe({next:t=>{t.can_add&&this.performAutoAdd()},error:t=>{console.error("Error checking auto-add:",t)}})}}performAutoAdd(){const t=this.authService.getAuthHeaders();this.http.post(`${this.apiUrl}/api/spotify/admin/add-to-history-confirmed`,{},{headers:t}).subscribe({next:r=>{this.showMessage("Auto-agregado al hist\xf3rico: "+this.adminCurrentlyPlaying.name),this.lastAddedSongId=this.adminCurrentlyPlaying.id,this.loadSongs()},error:r=>{console.error("Error auto-adding to history:",r)}})}toggleAutoAdd(){this.autoAddToHistory=!this.autoAddToHistory,this.autoAddToHistory&&this.checkAutoAdd()}static \u0275fac=function(r){return new(r||n)(X(Vi),X(MA),X(kl),X(MB),X(xB),X(fc),X(Ir),X(SB))};static \u0275cmp=fr({type:n,selectors:[["app-admin-panel"]],standalone:!0,features:[Cr],decls:64,vars:26,consts:[[1,"admin-panel-container"],[1,"message-container"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","progress-message",4,"ngIf"],[1,"admin-header"],[1,"header-content"],[1,"fab","fa-spotify","me-2"],[1,"header-subtitle"],[1,"btn-logout",3,"click"],[1,"fas","fa-sign-out-alt","me-1"],[1,"admin-content"],[1,"admin-sidebar"],[1,"sidebar-section"],[1,"sidebar-btn",3,"click"],[1,"fas","fa-tachometer-alt","me-2"],[1,"fas","fa-play-circle","me-2"],[1,"fas","fa-list-ol","me-2"],[1,"fas","fa-trophy","me-2"],[1,"fas","fa-clock","me-2"],[1,"fas","fa-sync-alt","me-2"],[1,"fas","fa-search","me-2"],["class","spotify-status",4,"ngIf"],[1,"admin-main"],["class","section",4,"ngIf"],[1,"search-section"],[1,"search-header"],[1,"btn-toggle",3,"click"],["class","search-content",4,"ngIf"],[1,"section","recently-added-section"],[1,"section-header","collapsible",3,"click"],[1,"fas"],["class","recently-added-content",4,"ngIf"],[1,"success-message"],[1,"fas","fa-check-circle"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"progress-message"],[1,"fas","fa-spinner","fa-spin"],[1,"spotify-status"],[1,"status-indicator"],[1,"status-text"],[1,"status-action",3,"click"],[1,"section"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"fas","fa-music"],[1,"stat-content"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-users"],[1,"fas","fa-history"],[1,"dashboard-actions"],[1,"action-btn","primary",3,"click"],[1,"fas","fa-sync-alt","me-1"],[1,"action-btn","secondary",3,"click"],[1,"fas","fa-list-ol","me-1"],[1,"action-btn","warning",3,"click"],[1,"fas","fa-play-circle","me-1"],[1,"section-header"],[1,"btn-refresh",3,"click"],[1,"fas","fa-sync-alt"],["class","currently-playing-card",4,"ngIf","ngIfElse"],["noSongPlaying",""],[1,"currently-playing-card"],[1,"auto-add-wrapper"],[1,"switch-label"],[1,"switch"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"slider","round"],[1,"playing-content"],["alt","Album cover",1,"album-art-large",3,"src"],[1,"track-info"],[1,"artists"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"time-display"],[1,"playing-actions"],["title","Verificar en ranking",1,"control-btn",3,"click"],[1,"fas","fa-search"],["title","Agregar al hist\xf3rico",1,"control-btn",3,"disabled","click"],[1,"player-controls"],[1,"player-btn",3,"click"],[1,"fas","fa-step-backward"],[1,"player-btn","play-pause",3,"click"],[1,"fas","fa-step-forward"],[1,"empty-state"],[1,"fas","fa-music-slash"],["class","btn-spotify",3,"click",4,"ngIf"],[1,"btn-spotify",3,"click"],[1,"btn-refresh",3,"disabled","click"],["class","queue-container",4,"ngIf","ngIfElse"],["emptyQueue",""],[1,"queue-container"],["class","queue-item",4,"ngFor","ngForOf"],[1,"queue-item"],[1,"queue-position"],["alt","Album cover",1,"queue-image",3,"src"],[1,"queue-info"],[1,"queue-actions"],["title","Reproducir ahora",1,"queue-btn",3,"click"],[1,"fas","fa-play"],[1,"fas","fa-list-ol"],[1,"header-actions"],[1,"btn-danger",3,"click"],[1,"fas","fa-trash","me-1"],["class","ranking-container",4,"ngIf","ngIfElse"],["emptyRanking",""],[1,"ranking-container"],["class","ranking-item",4,"ngFor","ngForOf"],[1,"ranking-item"],[1,"rank-number"],["alt","Album cover",1,"rank-image",3,"src"],[1,"rank-info"],[1,"rank-stats"],[1,"votes"],[1,"dislikes"],[1,"fas","fa-thumbs-down"],[1,"time"],[1,"rank-actions"],["title","Me gusta",1,"vote-btn","like",3,"click"],["title","No me gusta",1,"vote-btn","dislike",3,"click"],["title","Agregar a cola",1,"action-btn",3,"click"],[1,"fas","fa-plus"],["title","Eliminar",1,"action-btn","danger",3,"click"],[1,"fas","fa-trash"],[1,"fas","fa-trophy"],[1,"schedules-container"],[4,"ngIf"],["class","schedule-card",4,"ngFor","ngForOf"],[1,"schedule-card"],[1,"schedule-times"],[1,"time-block"],[1,"time-label"],[1,"time-value"],[1,"schedule-status"],[1,"status-badge"],["class","schedule-edit-card",4,"ngFor","ngForOf"],[1,"btn-save",3,"click"],[1,"fas","fa-save","me-1"],[1,"schedule-edit-card"],[1,"edit-fields"],[1,"field-group"],["type","time",3,"ngModel","ngModelChange"],[1,"field-group","toggle"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider"],[1,"search-content"],[1,"search-bar"],["type","text","placeholder","Buscar canciones en Spotify...",3,"ngModel","ngModelChange","keyup.enter"],[1,"search-btn",3,"click"],["class","search-results",4,"ngIf"],[1,"search-results"],["class","result-item",4,"ngFor","ngForOf"],[1,"result-item"],["alt","Album cover","onerror","this.src='assets/default-song.png'",1,"result-image",3,"src"],[1,"result-info"],[1,"album-name"],[1,"result-actions"],["title","Votar positivo",1,"vote-btn","like",3,"click"],["title","Votar negativo",1,"vote-btn","dislike",3,"click"],["title","Reproducir ahora",1,"action-btn",3,"click"],[1,"recently-added-content"],["class","recent-grid",4,"ngIf","ngIfElse"],["emptyRecent",""],[1,"recent-grid"],["class","recent-card",4,"ngFor","ngForOf"],[1,"recent-card"],["alt","Album cover",1,"recent-image",3,"src"],[1,"recent-info"],[1,"recent-stats"],[1,"recent-actions"],[1,"fas","fa-clock"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1),Z(2,Uge,3,1,"div",2),Z(3,jge,3,1,"div",3),Z(4,$ge,3,1,"div",4),v(),y(5,"div",5)(6,"div",6)(7,"h1"),D(8,"i",7),T(9,"Panel de Administraci\xf3n "),v(),y(10,"p",8),T(11,"Gestiona la m\xfasica y votaciones del restaurante"),v()(),y(12,"button",9),K("click",function(){return i.logout()}),D(13,"i",10),T(14,"Cerrar Sesi\xf3n "),v()(),y(15,"div",11)(16,"div",12)(17,"div",13)(18,"h3"),T(19,"Navegaci\xf3n"),v(),y(20,"button",14),K("click",function(){return i.setActiveSection("dashboard")}),D(21,"i",15),T(22,"Dashboard "),v(),y(23,"button",14),K("click",function(){return i.setActiveSection("playing")}),D(24,"i",16),T(25,"Reproduciendo "),v(),y(26,"button",14),K("click",function(){return i.setActiveSection("queue")}),D(27,"i",17),T(28,"Cola de Reproducci\xf3n "),v(),y(29,"button",14),K("click",function(){return i.setActiveSection("ranking")}),D(30,"i",18),T(31,"Ranking "),v(),y(32,"button",14),K("click",function(){return i.setActiveSection("schedules")}),D(33,"i",19),T(34,"Horarios "),v()(),y(35,"div",13)(36,"h3"),T(37,"Acciones R\xe1pidas"),v(),y(38,"button",14),K("click",function(){return i.forceRefresh()}),D(39,"i",20),T(40,"Actualizar Todo "),v(),y(41,"button",14),K("click",function(){return i.toggleSearch()}),D(42,"i",21),T(43,"Buscar Canciones "),v()(),Z(44,Bge,6,6,"div",22),v(),y(45,"div",23),Z(46,Hge,44,4,"div",24),Z(47,Wge,9,4,"div",24),Z(48,Yge,9,5,"div",24),Z(49,tme,13,5,"div",24),Z(50,sme,9,3,"div",24),y(51,"div",25)(52,"div",26)(53,"h3"),T(54,"Buscar en Spotify"),v(),y(55,"button",27),K("click",function(){return i.showSearch=!i.showSearch}),T(56),v()(),Z(57,ume,6,2,"div",28),v(),y(58,"div",29)(59,"div",30),K("click",function(){return i.toggleRecentlyAdded()}),y(60,"h2"),T(61,"Reci\xe9n Agregadas"),v(),D(62,"i",31),v(),Z(63,fme,4,2,"div",32),v()()()()),2&r&&(w(2),L("ngIf",i.successMessage),w(1),L("ngIf",i.errorMessage),w(1),L("ngIf",i.actionInProgress),w(16),Oe("active","dashboard"===i.activeSection),w(3),Oe("active","playing"===i.activeSection),w(3),Oe("active","queue"===i.activeSection),w(3),Oe("active","ranking"===i.activeSection),w(3),Oe("active","schedules"===i.activeSection),w(12),L("ngIf",i.spotifyStatus),w(2),L("ngIf","dashboard"===i.activeSection),w(1),L("ngIf","playing"===i.activeSection),w(1),L("ngIf","queue"===i.activeSection),w(1),L("ngIf","ranking"===i.activeSection),w(1),L("ngIf","schedules"===i.activeSection),w(6),Ae(" ",i.showSearch?"Ocultar":"Mostrar"," "),w(1),L("ngIf",i.showSearch),w(5),Oe("fa-chevron-down",!i.showRecentlyAdded)("fa-chevron-up",i.showRecentlyAdded),w(1),L("ngIf",i.showRecentlyAdded))},dependencies:[hc,yo,cA,ea,as,ni,ro,ti,qX],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap";@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";.admin-panel-container[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;background-color:#121212;color:#fff;min-height:100vh;padding:0;margin:0}.admin-header[_ngcontent-%COMP%]{background-color:#000;padding:16px 24px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #282828}.admin-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#fff}.admin-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1db954}.admin-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#b3b3b3;font-size:14px}.admin-header[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:transparent;color:#fff;padding:8px 16px;border-radius:20px;border:1px solid #B3B3B3;font-weight:500;transition:all .2s ease}.admin-header[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:scale(1.05)}.admin-content[_ngcontent-%COMP%]{display:flex;min-height:calc(100vh - 80px)}.admin-sidebar[_ngcontent-%COMP%]{width:240px;background-color:#000;padding:24px 16px;border-right:1px solid #282828}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]{margin-bottom:32px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;letter-spacing:1.5px;color:#b3b3b3;margin:0 0 16px;padding:0 8px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:100%;text-align:left;padding:10px 16px;border-radius:4px;margin-bottom:4px;color:#b3b3b3;font-weight:500;transition:all .2s ease}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ffffff1a}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn.active[_ngcontent-%COMP%]{color:#fff;background-color:#fff3}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn.refresh-btn[_ngcontent-%COMP%]{margin-top:12px;background-color:#1db9541a;border:1px solid #1DB954;color:#1db954;text-align:center;justify-content:center;display:flex;align-items:center;font-weight:600}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn.refresh-btn[_ngcontent-%COMP%]:hover{background-color:#1db954;color:#000;transform:scale(1.02);box-shadow:0 4px 12px #1db9544d}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn.refresh-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]{margin-top:32px;padding:12px;background-color:#181818;border-radius:8px;display:flex;align-items:center}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;margin-right:8px}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-indicator.connected[_ngcontent-%COMP%]{background-color:#1db954}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-indicator.disconnected[_ngcontent-%COMP%]{background-color:#e74c3c}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-size:12px;flex-grow:1}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-action[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;color:#1db954;font-size:12px;font-weight:600}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-action[_ngcontent-%COMP%]:hover{text-decoration:underline}.admin-main[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:24px}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header.collapsible[_ngcontent-%COMP%]{cursor:pointer;padding:12px 0;border-bottom:1px solid #282828}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;color:#1db954;font-size:14px;font-weight:600;padding:6px 12px;border-radius:4px;transition:all .2s ease;border:1px solid transparent}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover{background-color:#1db9541a;text-decoration:none;border-color:#1db954}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;margin-bottom:24px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;display:flex;align-items:center}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;background-color:#1db9541a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:16px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#1db954}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;color:#b3b3b3;font-size:14px}.dashboard-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:24px}.dashboard-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;padding:10px 16px;border-radius:4px;font-weight:500;transition:all .2s ease}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]{background-color:#1db954;color:#000}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]:hover{background-color:#2bde6a;transform:translateY(-2px)}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.secondary[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:1px solid #B3B3B3}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.secondary[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;border-color:#fff}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.warning[_ngcontent-%COMP%]{background-color:#f39c12;color:#000}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.warning[_ngcontent-%COMP%]:hover{background-color:#f5b043}.currently-playing-card[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;position:relative}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;display:flex;align-items:center;gap:8px;background-color:#ffffff0d;padding:4px 12px;border-radius:20px;z-index:10}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch-label[_ngcontent-%COMP%]{font-size:12px;color:#b3b3b3;font-weight:500}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:36px;height:20px}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#1db954}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(16px)}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#555;transition:.4s;border-radius:34px}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:#fff;transition:.4s;border-radius:50%}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .album-art-large[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:8px;margin-right:20px;object-fit:cover}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]{flex:1}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:700}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .artists[_ngcontent-%COMP%]{margin:0 0 16px;color:#b3b3b3}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background-color:#5a5a5a;border-radius:2px;overflow:hidden;margin-bottom:8px}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background-color:#1db954;border-radius:2px;transition:width .3s ease}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:#b3b3b3}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:40px;height:40px;border-radius:50%;background-color:#ffffff1a;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]:hover{background-color:#fff3;transform:scale(1.1)}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]   .player-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:48px;height:48px;border-radius:50%;background-color:#ffffff1a;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]   .player-btn[_ngcontent-%COMP%]:hover{background-color:#fff3;transform:scale(1.05)}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]   .player-btn.play-pause[_ngcontent-%COMP%]{width:64px;height:64px;background-color:#1db954;color:#000}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]   .player-btn.play-pause[_ngcontent-%COMP%]:hover{background-color:#2bde6a;transform:scale(1.1)}.queue-container[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;padding:0;overflow:hidden}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid #282828}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-position[_ngcontent-%COMP%]{width:24px;text-align:center;font-weight:600;color:#b3b3b3;margin-right:16px}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-image[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:4px;margin-right:16px;object-fit:cover}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-info[_ngcontent-%COMP%]{flex:1}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:500}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#b3b3b3}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]   .queue-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:32px;height:32px;border-radius:50%;background-color:transparent;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]   .queue-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]   .queue-btn.remove[_ngcontent-%COMP%]{color:#e74c3c}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]   .queue-btn.remove[_ngcontent-%COMP%]:hover{background-color:#e74c3c1a}.ranking-container[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;padding:0;overflow:hidden}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid #282828}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-number[_ngcontent-%COMP%]{width:24px;text-align:center;font-weight:700;font-size:16px;margin-right:16px;color:#b3b3b3}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-image[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:4px;margin-right:16px;object-fit:cover}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]{flex:1}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:500}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#b3b3b3}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]{display:flex;gap:16px}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;color:#b3b3b3}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]{color:#b3b3b3;background-color:transparent}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]:hover, .ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.like.active[_ngcontent-%COMP%]{color:#1db954;background-color:#1db9541a}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]{color:#b3b3b3;background-color:transparent}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]:hover, .ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.dislike.active[_ngcontent-%COMP%]{color:#e74c3c;background-color:#e74c3c1a}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:36px;height:36px;border-radius:50%;background-color:transparent;color:#b3b3b3;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#fff}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .action-btn.danger[_ngcontent-%COMP%]:hover{color:#e74c3c;background-color:#e74c3c1a}.schedules-container[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%], .schedules-container[_ngcontent-%COMP%]   .schedule-edit-card[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;margin-bottom:16px}.schedules-container[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .schedules-container[_ngcontent-%COMP%]   .schedule-edit-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600}.schedules-container[_ngcontent-%COMP%]   .schedule-times[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.schedules-container[_ngcontent-%COMP%]   .schedule-times[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]{display:flex;flex-direction:column}.schedules-container[_ngcontent-%COMP%]   .schedule-times[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:12px;color:#b3b3b3;margin-bottom:4px}.schedules-container[_ngcontent-%COMP%]   .schedule-times[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.schedules-container[_ngcontent-%COMP%]   .schedule-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600}.schedules-container[_ngcontent-%COMP%]   .schedule-status[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#1db95433;color:#1db954}.schedules-container[_ngcontent-%COMP%]   .schedule-status[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#e74c3c33;color:#e74c3c}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#b3b3b3;margin-bottom:4px}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]{background-color:#2a2a2a;border:1px solid #404040;border-radius:4px;color:#fff;padding:8px;font-family:inherit}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]:focus{outline:none;border-color:#1db954}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:20px}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#1db954}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:#fff;transition:.4s;border-radius:50%}.schedules-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:#1db954;color:#000;padding:10px 20px;border-radius:4px;font-weight:600;margin-top:16px;transition:all .2s ease}.schedules-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#2bde6a;transform:translateY(-2px)}.recently-added-section[_ngcontent-%COMP%]   .recently-added-content[_ngcontent-%COMP%]{margin-top:16px}.recently-added-section[_ngcontent-%COMP%]   .recent-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;box-shadow:0 4px 12px #0000004d;padding:12px;transition:all .3s ease}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]:hover{background-color:#282828;transform:translateY(-4px)}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:4px;object-fit:cover;margin-bottom:12px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:12px;color:#b3b3b3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   .recent-stats[_ngcontent-%COMP%]{display:flex;gap:12px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   .recent-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:11px;color:#b3b3b3}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   .recent-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px;margin-top:12px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]{color:#b3b3b3}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]:hover, .recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.like.active[_ngcontent-%COMP%]{color:#1db954;background-color:#1db9541a}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]{color:#b3b3b3}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]:hover, .recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.dislike.active[_ngcontent-%COMP%]{color:#e74c3c;background-color:#e74c3c1a}.search-section[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease}.search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px}.search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;color:#1db954;font-weight:500}.search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover{text-decoration:underline}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;background-color:#2a2a2a;border:1px solid #404040;border-right:none;border-radius:4px 0 0 4px;color:#fff;padding:10px 16px;font-family:inherit}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1db954}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:#1db954;color:#000;padding:0 16px;border-radius:0 4px 4px 0;font-weight:600;transition:all .2s ease}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:hover{background-color:#2bde6a}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border-radius:4px;margin-bottom:8px;background-color:#ffffff0d;transition:all .2s ease}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-image[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:4px;margin-right:16px;object-fit:cover}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]{flex:1}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:500}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:12px;color:#b3b3b3}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .album-name[_ngcontent-%COMP%]{font-size:11px;color:#b3b3b3}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%], .search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]{color:#b3b3b3;background-color:transparent}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]:hover{color:#1db954;background-color:#1db9541a}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]{color:#b3b3b3;background-color:transparent}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]:hover{color:#e74c3c;background-color:#e74c3c1a}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{background-color:transparent;color:#b3b3b3}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#fff}.empty-state[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;text-align:center;padding:40px 20px}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#b3b3b3;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#b3b3b3}.empty-state[_ngcontent-%COMP%]   .btn-spotify[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:#1db954;color:#000;padding:10px 20px;border-radius:20px;font-weight:600;transition:all .2s ease}.empty-state[_ngcontent-%COMP%]   .btn-spotify[_ngcontent-%COMP%]:hover{background-color:#2bde6a;transform:scale(1.05)}.btn-refresh[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:36px;height:36px;border-radius:50%;background-color:#ffffff1a;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.btn-refresh[_ngcontent-%COMP%]:hover{background-color:#fff3;transform:rotate(180deg)}.btn-refresh[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-danger[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:#e74c3c;color:#fff;padding:8px 16px;border-radius:4px;font-weight:500;transition:all .2s ease}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#ed7669}@media (max-width: 1024px){.admin-sidebar[_ngcontent-%COMP%]{width:200px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.admin-content[_ngcontent-%COMP%]{flex-direction:column}.admin-sidebar[_ngcontent-%COMP%]{width:100%;border-right:none;border-bottom:1px solid #282828;padding:16px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn[_ngcontent-%COMP%]{width:auto;margin-bottom:0}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]{margin-top:16px}.admin-main[_ngcontent-%COMP%]{padding:16px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dashboard-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .album-art-large[_ngcontent-%COMP%]{margin-right:0;margin-bottom:16px}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%]{margin-top:16px}.recent-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important}}@media (max-width: 480px){.admin-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.admin-header[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{align-self:stretch;text-align:center}.playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%], .rank-actions[_ngcontent-%COMP%], .result-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.recent-grid[_ngcontent-%COMP%], .edit-fields[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}.message-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1000;max-width:400px}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .progress-message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;margin-bottom:10px;box-shadow:0 4px 12px #0000004d;display:flex;align-items:center;animation:_ngcontent-%COMP%_slideIn .3s ease}.success-message[_ngcontent-%COMP%]{background-color:#1db954e6;color:#000;border-left:4px solid #1DB954}.error-message[_ngcontent-%COMP%]{background-color:#e74c3ce6;color:#fff;border-left:4px solid #e74c3c}.progress-message[_ngcontent-%COMP%]{background-color:#3498dbe6;color:#fff;border-left:4px solid #3498db}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.action-btn[_ngcontent-%COMP%]{transition:all .2s ease}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-btn[_ngcontent-%COMP%]:disabled:hover{transform:none!important}.btn-loading[_ngcontent-%COMP%]{position:relative}.btn-loading[_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:16px;top:50%;left:50%;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})}return n})(),gme=(()=>{class n{http;apiUrl=oi_apiUrl;constructor(t){this.http=t}getSongHistory(t="times_played",r="desc"){let i=(new jo).set("sort_by",t).set("order",r);return this.http.get(`${this.apiUrl}/api/ranking/history`,{params:i})}voteFromHistory(t){return this.http.post(`${this.apiUrl}/api/ranking/vote-from-history`,{track_id:t})}getRankingStats(){return this.http.get(`${this.apiUrl}/api/ranking/stats`)}forceRankCurrentSong(){return this.http.post(`${this.apiUrl}/api/ranking/force-rank-current`,{})}static \u0275fac=function(r){return new(r||n)(ve(Vi))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mme(n,e){if(1&n&&(y(0,"div",42),T(1),v()),2&n){const t=U();w(1),Ae(" ",t.voteMessage," ")}}function _me(n,e){if(1&n){const t=He();y(0,"button",43),K("click",function(){return se(t),ae(U().filterText="")}),D(1,"i",44),v()}}function yme(n,e){if(1&n&&(y(0,"div",45),D(1,"i",46),T(2),v()),2&n){const t=U();w(2),Ae(" ",t.error," ")}}function vme(n,e){1&n&&(y(0,"div",47),D(1,"div",48),y(2,"p",6),T(3,"Cargando ranking hist\xf3rico..."),v()())}function bme(n,e){1&n&&D(0,"i",72)}function Cme(n,e){1&n&&D(0,"i",73)}function wme(n,e){if(1&n){const t=He();y(0,"div",51)(1,"div",52)(2,"div",53),K("click",function(){const o=se(t).$implicit;return ae(U(2).onShowDetails(o))}),y(3,"span",54),T(4),v(),y(5,"img",55),K("click",function(){const o=se(t).$implicit;return ae(U(2).onShowDetails(o))}),v()(),y(6,"div",56)(7,"h3",57),K("click",function(){const o=se(t).$implicit;return ae(U(2).onShowDetails(o))}),T(8),v(),y(9,"p",58),K("click",function(){const o=se(t).$implicit;return ae(U(2).onShowDetails(o))}),T(10),v(),y(11,"div",59),K("click",function(){const o=se(t).$implicit;return ae(U(2).onShowDetails(o))}),y(12,"span",60),D(13,"i",61),T(14),v(),y(15,"span",60),D(16,"i",62),T(17),v(),y(18,"span",60),D(19,"i",63),T(20),v()(),y(21,"div",64),K("click",function(){const o=se(t).$implicit;return ae(U(2).onShowDetails(o))}),y(22,"div",65),D(23,"div",66),v(),y(24,"span",67),T(25),v()(),y(26,"p",68),T(27),v(),y(28,"button",69),K("click",function(){const o=se(t).$implicit;return ae(U(2).onVote(o))}),Z(29,bme,1,0,"i",70),Z(30,Cme,1,0,"i",71),T(31," Votar "),v()()()()}if(2&n){const t=e.$implicit,r=e.index,i=U(2);w(4),me(r+1),w(1),L("src",t.image||"assets/default-song.png",Vr)("alt",t.name),w(3),me(t.name),w(2),me(t.artists.join(", ")),w(4),Ae(" ",t.times_played," "),w(3),Ae(" ",t.total_votes," "),w(3),Ae(" ",t.total_dislikes," "),w(3),Ld("width",i.getVotePercentage(t),"%"),w(2),Ae("",i.getVotePercentage(t),"% aprobaci\xf3n"),w(2),me(i.formatDate(t.last_played_at)),w(1),L("disabled",i.isVoting),w(1),L("ngIf",!i.isVoting),w(1),L("ngIf",i.isVoting)}}function Eme(n,e){if(1&n&&(y(0,"div",49),Z(1,wme,32,15,"div",50),v()),2&n){const t=U();w(1),L("ngForOf",t.getTabSongs())}}function Ime(n,e){1&n&&(y(0,"div",47),D(1,"i",74),y(2,"h4",6),T(3,"No se encontraron canciones"),v(),y(4,"p",6),T(5,"Intenta con otros t\xe9rminos de b\xfasqueda"),v()())}function Tme(n,e){if(1&n){const t=He();y(0,"div",75),K("click",function(){return se(t),ae(U().onCloseDetails())}),v()}}function Pme(n,e){1&n&&D(0,"i",72)}function Mme(n,e){1&n&&D(0,"i",73)}function Ame(n,e){if(1&n){const t=He();y(0,"div",76)(1,"div",77)(2,"div",78)(3,"div",79)(4,"h5",80),D(5,"i",81),T(6,"Detalles de la Canci\xf3n "),v(),y(7,"button",82),K("click",function(){return se(t),ae(U().onCloseDetails())}),T(8," Cerrar "),v()(),y(9,"div",83)(10,"div",84)(11,"div",85),D(12,"img",86),y(13,"button",69),K("click",function(){se(t);const i=U();return ae(i.onVote(i.selectedSong))}),Z(14,Pme,1,0,"i",70),Z(15,Mme,1,0,"i",71),T(16," Votar por esta canci\xf3n "),v()(),y(17,"div",87)(18,"h4",6),T(19),v(),y(20,"p",6),T(21),v(),y(22,"div",88)(23,"div",89)(24,"div",90)(25,"h3",91),T(26),v(),y(27,"p",92),T(28,"Reproducciones"),v()()(),y(29,"div",89)(30,"div",90)(31,"h3",93),T(32),v(),y(33,"p",92),T(34,"Votos positivos"),v()()(),y(35,"div",94)(36,"div",90)(37,"h3",95),T(38),v(),y(39,"p",92),T(40,"Votos negativos"),v()()(),y(41,"div",94)(42,"div",90)(43,"h3",96),T(44),v(),y(45,"p",92),T(46,"Porcentaje de aprobaci\xf3n"),v()()()(),y(47,"div",97)(48,"h6",6),T(49,"\xdaltima reproducci\xf3n"),v(),y(50,"p",6),T(51),v(),y(52,"h6",6),T(53,"D\xedas desde la \xfaltima reproducci\xf3n"),v(),y(54,"p",6),T(55),v()()()()()()()()}if(2&n){const t=U();w(12),L("src",t.selectedSong.image||"assets/default-song.png",Vr)("alt",t.selectedSong.name),w(1),L("disabled",t.isVoting),w(1),L("ngIf",!t.isVoting),w(1),L("ngIf",t.isVoting),w(4),me(t.selectedSong.name),w(2),me(t.selectedSong.artists.join(", ")),w(5),me(t.selectedSong.times_played),w(6),me(t.selectedSong.total_votes),w(6),me(t.selectedSong.total_dislikes),w(6),Ae("",t.getVotePercentage(t.selectedSong),"%"),w(7),me(t.formatDate(t.selectedSong.last_played_at)),w(4),Ae("",t.getDaysSinceLastPlayed(t.selectedSong)," d\xedas")}}let Sme=(()=>{class n{rankingService;votingService;songs=[];isLoading=!0;error="";sortBy="times_played";sortOrder="desc";filterText="";selectedSong=null;isVoting=!1;voteMessage="";activeTab="all";stats={};pollingSubscription=null;constructor(t,r){this.rankingService=t,this.votingService=r}ngOnInit(){this.loadRanking(),this.startPolling()}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe()}startPolling(){this.pollingSubscription=this.votingService.getRankedSongsPolling().subscribe({next:()=>{this.loadRanking()}})}loadRanking(){this.isLoading=!0,this.error="",this.rankingService.getSongHistory(this.sortBy,this.sortOrder).subscribe({next:t=>{this.songs=t,this.calculateStats(),this.isLoading=!1},error:t=>{console.error("Error loading ranking:",t),this.error="Error al cargar el ranking. Intenta nuevamente.",this.isLoading=!1}})}calculateStats(){0!==this.songs.length?(this.stats.totalSongs=this.songs.length,this.stats.totalPlays=this.songs.reduce((t,r)=>t+r.times_played,0),this.stats.totalVotes=this.songs.reduce((t,r)=>t+r.total_votes,0),this.stats.totalDislikes=this.songs.reduce((t,r)=>t+r.total_dislikes,0),this.stats.mostPlayed=this.songs.reduce((t,r)=>r.times_played>t.times_played?r:t,this.songs[0]),this.stats.mostVoted=this.songs.reduce((t,r)=>r.total_votes>t.total_votes?r:t,this.songs[0]),this.stats.bestRated=this.songs.reduce((t,r)=>this.getVotePercentage(r)>this.getVotePercentage(t)?r:t,this.songs[0])):this.stats={}}onSortChange(t){this.sortBy===t?this.sortOrder="desc"===this.sortOrder?"asc":"desc":(this.sortBy=t,this.sortOrder="desc"),this.loadRanking()}getSortIcon(t){return this.sortBy!==t?"fa-sort":"desc"===this.sortOrder?"fa-sort-down":"fa-sort-up"}onVote(t){this.isVoting=!0,this.voteMessage="",this.rankingService.voteFromHistory(t.track_id).subscribe({next:r=>{this.voteMessage="Agregada a Ranking de Votacion",this.isVoting=!1;const i=this.songs.findIndex(o=>o.track_id===t.track_id);-1!==i&&(this.songs[i].total_votes+=1,this.calculateStats()),setTimeout(()=>{this.voteMessage=""},5e3)},error:r=>{console.error("Error voting:",r),this.voteMessage=r.error?.error||"Error al votar",this.isVoting=!1,setTimeout(()=>{this.voteMessage=""},5e3)}})}onShowDetails(t){this.selectedSong=t}onCloseDetails(){this.selectedSong=null}get filteredSongs(){if(!this.filterText)return this.songs;const t=this.filterText.toLowerCase();return this.songs.filter(r=>r.name.toLowerCase().includes(t)||r.artists.some(i=>i.toLowerCase().includes(t)))}getVotePercentage(t){return t.total_votes||t.total_dislikes?Math.round(t.total_votes/(t.total_votes+t.total_dislikes)*100):0}formatDate(t){const r=new Date(t);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(r)}getDaysSinceLastPlayed(t){const r=new Date(t.last_played_at),o=Math.abs((new Date).getTime()-r.getTime());return Math.floor(o/864e5)}setActiveTab(t){this.activeTab=t}getTabSongs(){switch(this.activeTab){case"mostPlayed":return[...this.filteredSongs].sort((t,r)=>r.times_played-t.times_played);case"mostVoted":return[...this.filteredSongs].sort((t,r)=>r.total_votes-t.total_votes);case"bestRated":return[...this.filteredSongs].sort((t,r)=>{const i=this.getVotePercentage(t);return this.getVotePercentage(r)-i});default:return this.filteredSongs}}static \u0275fac=function(r){return new(r||n)(X(gme),X(kl))};static \u0275cmp=fr({type:n,selectors:[["app-ranking"]],standalone:!0,features:[Cr],decls:88,vars:30,consts:[[1,"ranking-container","fade-in"],[1,"message-container"],["class","success-message",4,"ngIf"],[1,"header-section"],[1,"gradient-text"],[1,"fas","fa-trophy","me-2"],[1,"text-muted"],[1,"stats-grid","mb-4"],[1,"stat-card","card"],[1,"card-body","text-center"],[1,"fas","fa-music","stat-icon"],[1,"stat-value"],[1,"stat-label"],[1,"fas","fa-play-circle","stat-icon"],[1,"fas","fa-thumbs-up","stat-icon"],[1,"fas","fa-thumbs-down","stat-icon"],[1,"tabs-container","mb-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-list","me-1"],[1,"fas","fa-play-circle","me-1"],[1,"fas","fa-thumbs-up","me-1"],[1,"fas","fa-star","me-1"],[1,"filters-card","card","mb-4"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-md-6","mb-3","mb-md-0"],[1,"search-container"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","Buscar canci\xf3n o artista...",1,"search-input",3,"ngModel","ngModelChange"],["class","search-clear",3,"click",4,"ngIf"],[1,"col-md-6"],[1,"d-flex","flex-wrap","gap-2","justify-content-md-end"],[1,"text-muted","me-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fas","fa-calendar","me-1"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","songs-grid",4,"ngIf"],["class","modal-backdrop show",3,"click",4,"ngIf"],["class","modal show d-block","tabindex","-1",4,"ngIf"],[1,"success-message"],[1,"search-clear",3,"click"],[1,"fas","fa-times"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"text-center","py-5"],[1,"loading-spinner","mb-3"],[1,"songs-grid"],["class","song-card spotify-card",4,"ngFor","ngForOf"],[1,"song-card","spotify-card"],[1,"card-content"],[1,"song-image-container",3,"click"],[1,"position-number"],[1,"song-image",3,"src","alt","click"],[1,"song-info"],[1,"song-title",3,"click"],[1,"song-artist",3,"click"],[1,"song-stats",3,"click"],[1,"stat-item"],[1,"fas","fa-play"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-thumbs-down"],[1,"approval-container",3,"click"],[1,"approval-bar"],[1,"approval-progress"],[1,"approval-text"],[1,"last-played"],[1,"btn","btn-primary","w-100","mb-2",3,"disabled","click"],["class","fas fa-vote-yea me-1",4,"ngIf"],["class","fas fa-spinner fa-spin me-1",4,"ngIf"],[1,"fas","fa-vote-yea","me-1"],[1,"fas","fa-spinner","fa-spin","me-1"],[1,"fas","fa-music","fa-3x","text-muted","mb-3"],[1,"modal-backdrop","show",3,"click"],["tabindex","-1",1,"modal","show","d-block"],[1,"modal-dialog","modal-lg"],[1,"modal-content","card"],[1,"modal-header","card-header"],[1,"modal-title"],[1,"fas","fa-info-circle","me-2"],["type","button",1,"btn","btn-primary","w-100","mb-2",3,"click"],[1,"modal-body","card-body"],[1,"row"],[1,"col-md-4","text-center"],[1,"img-fluid","rounded","mb-3",3,"src","alt"],[1,"col-md-8"],[1,"row","mt-4"],[1,"col-6"],[1,"stat-box","text-center","p-3","rounded"],[1,"text-primary"],[1,"mb-0","text-muted"],[1,"text-success"],[1,"col-6","mt-3"],[1,"text-danger"],[1,"text-info"],[1,"mt-4"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1),Z(2,mme,2,1,"div",2),v(),y(3,"div",3)(4,"h1",4),D(5,"i",5),T(6,"Ranking Hist\xf3rico "),v(),y(7,"p",6),T(8," Descubre las canciones m\xe1s populares que han sonado en nuestro restaurante "),v()(),y(9,"div",7)(10,"div",8)(11,"div",9),D(12,"i",10),y(13,"h3",11),T(14),v(),y(15,"p",12),T(16,"Canciones totales"),v()()(),y(17,"div",8)(18,"div",9),D(19,"i",13),y(20,"h3",11),T(21),v(),y(22,"p",12),T(23,"Reproducciones"),v()()(),y(24,"div",8)(25,"div",9),D(26,"i",14),y(27,"h3",11),T(28),v(),y(29,"p",12),T(30,"Votos positivos"),v()()(),y(31,"div",8)(32,"div",9),D(33,"i",15),y(34,"h3",11),T(35),v(),y(36,"p",12),T(37,"Votos negativos"),v()()()(),y(38,"div",16)(39,"ul",17)(40,"li",18)(41,"a",19),K("click",function(){return i.setActiveTab("all")}),D(42,"i",20),T(43,"Todas "),v()(),y(44,"li",18)(45,"a",19),K("click",function(){return i.setActiveTab("mostPlayed")}),D(46,"i",21),T(47,"M\xe1s reproducidas "),v()(),y(48,"li",18)(49,"a",19),K("click",function(){return i.setActiveTab("mostVoted")}),D(50,"i",22),T(51,"M\xe1s votadas "),v()(),y(52,"li",18)(53,"a",19),K("click",function(){return i.setActiveTab("bestRated")}),D(54,"i",23),T(55,"Mejor valoradas "),v()()()(),y(56,"div",24)(57,"div",25)(58,"div",26)(59,"div",27)(60,"div",28),D(61,"i",29),y(62,"input",30),K("ngModelChange",function(s){return i.filterText=s}),v(),Z(63,_me,2,0,"button",31),v(),y(64,"p",6),T(65,"Preciona la cacion para ver los detallas "),v()(),y(66,"div",32)(67,"div",33)(68,"span",34),T(69,"Ordenar por:"),v(),y(70,"button",35),K("click",function(){return i.onSortChange("times_played")}),D(71,"i",21),T(72," Reproducciones "),D(73,"i"),v(),y(74,"button",35),K("click",function(){return i.onSortChange("total_votes")}),D(75,"i",22),T(76," Votos "),D(77,"i"),v(),y(78,"button",35),K("click",function(){return i.onSortChange("last_played_at")}),D(79,"i",36),T(80," Fecha "),D(81,"i"),v()()()()()(),Z(82,yme,3,1,"div",37),Z(83,vme,4,0,"div",38),Z(84,Eme,2,1,"div",39),Z(85,Ime,6,0,"div",38),Z(86,Tme,1,0,"div",40),Z(87,Ame,56,13,"div",41),v()),2&r&&(w(2),L("ngIf",i.voteMessage),w(12),me(i.stats.totalSongs||0),w(7),me(i.stats.totalPlays||0),w(7),me(i.stats.totalVotes||0),w(7),me(i.stats.totalDislikes||0),w(6),Oe("active","all"===i.activeTab),w(4),Oe("active","mostPlayed"===i.activeTab),w(4),Oe("active","mostVoted"===i.activeTab),w(4),Oe("active","bestRated"===i.activeTab),w(9),L("ngModel",i.filterText),w(1),L("ngIf",i.filterText),w(10),Pg("fas ",i.getSortIcon("times_played")," ms-1"),w(4),Pg("fas ",i.getSortIcon("total_votes")," ms-1"),w(4),Pg("fas ",i.getSortIcon("last_played_at")," ms-1"),w(1),L("ngIf",i.error),w(1),L("ngIf",i.isLoading),w(1),L("ngIf",!i.isLoading&&i.getTabSongs().length>0),w(1),L("ngIf",!i.isLoading&&0===i.getTabSongs().length),w(1),L("ngIf",i.selectedSong),w(1),L("ngIf",i.selectedSong))},dependencies:[ni,ro,ti,hc,yo,ea,as,vh],styles:['.ranking-container[_ngcontent-%COMP%]{padding:1rem;max-width:1200px;margin:0 auto}@media (max-width: 768px){.ranking-container[_ngcontent-%COMP%]{padding:.5rem}}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding:1.5rem;background:linear-gradient(135deg,rgba(29,185,84,.1) 0%,rgba(25,20,20,.1) 100%);border-radius:16px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;margin-bottom:.5rem}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem}.search-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:rgba(42,42,42,.6);border-radius:50px;padding:.5rem 1rem;transition:all .3s ease;border:1px solid rgba(62,62,62,.5)}.search-container[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 2px #1db95440}.search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:var(--text-secondary);margin-right:.5rem}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-primary);flex-grow:1;padding:.5rem 0}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.search-container[_ngcontent-%COMP%]   .search-clear[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);cursor:pointer;padding:.25rem;border-radius:50%}.search-container[_ngcontent-%COMP%]   .search-clear[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:rgba(255,255,255,.1)}.songs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}@media (max-width: 768px){.songs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}}.spotify-card[_ngcontent-%COMP%]{background:rgba(42,42,42,.6);border-radius:8px;overflow:hidden;transition:all .3s ease;border:1px solid rgba(255,255,255,.05)}.spotify-card[_ngcontent-%COMP%]:hover{background:rgba(42,42,42,.8);transform:translateY(-2px);box-shadow:0 8px 24px #0003}.spotify-card[_ngcontent-%COMP%]:hover   .play-button[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.spotify-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1rem;display:flex;gap:1rem}@media (max-width: 480px){.spotify-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:.75rem}}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .position-number[_ngcontent-%COMP%]{position:absolute;top:-8px;left:-8px;background:var(--primary-color);color:#000;font-weight:800;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.8rem;z-index:2;box-shadow:0 2px 8px #1db95466}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .song-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:6px;object-fit:cover;box-shadow:0 4px 12px #0000004d}@media (max-width: 480px){.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .song-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:160px}}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:var(--primary-color);color:#000;border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:0;transform:translateY(8px);transition:all .3s ease;box-shadow:0 4px 12px #0000004d}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (max-width: 480px){.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{opacity:1;transform:none;bottom:16px;right:16px;width:40px;height:40px}}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]{flex-grow:1;min-width:0}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin:0 0 .25rem;color:var(--text-primary);cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-title[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-artist[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin:0 0 .75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-stats[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-bottom:.75rem;flex-wrap:wrap}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.8rem;color:var(--text-secondary)}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .approval-container[_ngcontent-%COMP%]{margin-bottom:.75rem}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .approval-container[_ngcontent-%COMP%]   .approval-bar[_ngcontent-%COMP%]{height:4px;background-color:#ffffff1a;border-radius:2px;overflow:hidden;margin-bottom:.25rem}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .approval-container[_ngcontent-%COMP%]   .approval-bar[_ngcontent-%COMP%]   .approval-progress[_ngcontent-%COMP%]{height:100%;background:var(--primary-color);border-radius:2px;transition:width .5s ease}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .approval-container[_ngcontent-%COMP%]   .approval-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .last-played[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);margin:0}.tabs-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1);display:flex;overflow-x:auto;scrollbar-width:none}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{flex-shrink:0}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--text-secondary);border:none;padding:.75rem 1rem;border-radius:0;position:relative;font-weight:600;white-space:nowrap}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:2px;background:var(--primary-color);transition:width .3s ease}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:transparent}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:after{width:100%}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:var(--text-primary);background:transparent}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after{width:100%}.alert[_ngcontent-%COMP%]{border-radius:12px;border:none;box-shadow:0 4px 12px #00000026}.alert.alert-info[_ngcontent-%COMP%]{background:rgba(23,162,184,.9);color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.alert.alert-danger[_ngcontent-%COMP%]{background:rgba(220,53,69,.9);color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:invert(1)}.btn-closeee[_ngcontent-%COMP%]{background:rgba(3,59,17,.9);color:#030000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}@keyframes _ngcontent-%COMP%_slideInDown{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.alert-dismissible[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInDown .3s ease-out}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:2rem}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:rgba(42,42,42,.6);border-radius:8px;padding:1rem;text-align:center;border:1px solid rgba(255,255,255,.05);transition:all .3s ease}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 16px #0003;border-color:#1db95433}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--primary-color);margin-bottom:.5rem}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;margin-bottom:.25rem;color:var(--text-primary)}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);margin:0}.text-center[_ngcontent-%COMP%]{padding:3rem 1rem}.text-center[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{border:3px solid rgba(29,185,84,.3);border-top-color:var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.text-center[_ngcontent-%COMP%]   .fa-music[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-tertiary);margin-bottom:1rem}.text-center[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:.5rem}.text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-tertiary)}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.btn-outline-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--text-secondary);border:1px solid var(--text-secondary);border-radius:50px;padding:.4rem .8rem;font-size:.85rem;display:inline-flex;align-items:center;transition:all .3s ease}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.05);color:var(--text-primary);border-color:var(--text-primary)}.btn-outline-secondary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.25rem}.message-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1000;max-width:400px}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .progress-message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;margin-bottom:10px;box-shadow:0 4px 12px #0000004d;display:flex;align-items:center;animation:slideIn .3s ease}.success-message[_ngcontent-%COMP%]{background-color:#1db954e6;color:#000;border-left:4px solid #1DB954}']})}return n})(),Ome=(()=>{class n{authService;router;constructor(t,r){this.authService=t,this.router=r}canActivate(){return!!this.authService.isLoggedIn()||(this.router.navigate(["/admin-login"]),!1)}static \u0275fac=function(r){return new(r||n)(ve(fc),ve(Ir))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xme(n,e){if(1&n){const t=He();y(0,"button",6),K("click",function(){return se(t),ae(U().hideAnnouncement())}),y(1,"i"),T(2,"Cerrar"),v()()}}function Dme(n,e){if(1&n){const t=He();y(0,"button",7),K("click",function(){return se(t),ae(U().nohideAnnouncement())}),y(1,"i"),T(2,"Abrir"),v()()}}function kme(n,e){1&n&&(y(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12),D(5,"i",13),v(),y(6,"div")(7,"p",14),T(8,"Desarrollado por "),y(9,"b",15),T(10,"Sebastian Vega"),v(),T(11,": "),v(),y(12,"div",16)(13,"a",17),D(14,"i",18),T(15,"GitHub "),v(),y(16,"a",19),D(17,"i",20),T(18,"LinkedIn "),v(),y(19,"a",21),D(20,"i",22),T(21,"Instagram "),v()()()()(),D(22,"div",10),T(23," UptcMusic.com 2025 - V3.0 "),y(24,"div",23)(25,"h4"),D(26,"i",24),T(27,"A nuestros queridos usuarios:"),v(),y(28,"p"),T(29,"-Una cancion es eliminada automaticamente al completar "),y(30,"strong"),T(31,"10 Dislikes "),v()(),y(32,"p"),T(33,"-Cancion que entre en reproducion se eliminara automaticamente del Ranking"),v(),y(34,"p"),T(35,"-Solo se puede votar una vez por cancion "),v(),y(36,"p"),T(37,"-Toda Cacion Reproducida va para Ranking Historico"),v(),y(38,"p"),T(39,"-Cancion con menos de 5 votos no se tiene en cuenta para ser reproducidas"),v(),y(40,"p"),T(41,"-Cada semana se eliminaran todas las canciones del Ranking "),v(),y(42,"p"),T(43,"No se puede usar Admin como nombre de usuario"),v(),y(44,"p"),T(45,"Cualquier hilo que sea ofensivo, se eliminara "),v(),y(46,"p"),T(47,"-El administrador tiene la potestad de evaluar cada sugerencia y decidir si es apropiada para el momento o ambiente."),v(),y(48,"p")(49,"strong"),T(50,"Agradecemos enormemente su entusiasmo y participaci\xf3n. \xa1Sigan votando por su m\xfasica favorita!"),v()()()()())}let Rme=(()=>{class n{isHidden=!1;hideAnnouncement(){this.isHidden=!0,localStorage.setItem("announcementHidden","true")}nohideAnnouncement(){this.isHidden=!1,localStorage.setItem("announcementHidden","true")}ngOnInit(){"true"===localStorage.getItem("announcementHidden")&&(this.isHidden=!0)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=fr({type:n,selectors:[["app-announcement"]],standalone:!0,features:[Cr],decls:8,vars:3,consts:[[1,"announcement-container","card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"fas","fa-info-circle","me-2"],["class","btn-close","title","Abrir",3,"click",4,"ngIf"],["class","btn-close","title","Cerrar",3,"click",4,"ngIf"],["class","card-body",4,"ngIf"],["title","Abrir",1,"btn-close",3,"click"],["title","Cerrar",1,"btn-close",3,"click"],[1,"card-body"],[1,"announcement-content"],[1,"developer-info"],[1,"d-flex","align-items-start"],[1,"me-3","mt-1"],[1,"fas","fa-laptop-code","text-primary"],[1,"mb-1"],["href","https://www.instagram.com/sebastian.vegar/"],[1,"social-links"],["href","https://github.com/SebastianVega4","target","_blank"],[1,"fab","fa-github","me-1"],["href","https://www.linkedin.com/in/johan-sebastian-vega-ruiz-b1292011b/","target","_blank"],[1,"fab","fa-linkedin","me-1"],["href","https://www.instagram.com/sebastian.vegar/","target","_blank"],[1,"fab","fa-instagram","me-1"],[1,"alert","alert-info"],[1,"fas","fa-exclamation-triangle","me-2"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1)(2,"div"),D(3,"i",2),T(4,"Informaci\xf3n Importante "),v(),Z(5,xme,3,0,"button",3),Z(6,Dme,3,0,"button",4),v(),Z(7,kme,51,0,"div",5),v()),2&r&&(w(5),L("ngIf",!i.isHidden),w(1),L("ngIf",i.isHidden),w(1),L("ngIf",!i.isHidden))},dependencies:[ni,ti],styles:['@charset "UTF-8";.announcement-container[_ngcontent-%COMP%]{margin-bottom:.5rem;border:1px solid rgba(255,255,255,.1);border-radius:16px;overflow:hidden;background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);box-shadow:0 10px 30px #0003;transition:all .3s ease}.announcement-container[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #1db95426;border-color:#1db95433}.announcement-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(29,185,84,.15) 0%,rgba(141,103,171,.15) 100%);color:var(--text-primary);font-weight:700;font-size:1.1rem;padding:1rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:space-between}.announcement-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.announcement-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:.25rem;border-radius:50%;transition:all .2s ease;width:28px;height:28px;display:flex;align-items:center;justify-content:center}.announcement-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:rgba(255,255,255,.1);transform:rotate(90deg)}.announcement-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.announcement-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:1.5rem;background:rgba(83,143,221,.1);border-left:4px solid rgba(83,143,221,.5)}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:1rem;color:var(--text-primary);display:flex;align-items:center}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#538fdd;margin-right:.5rem;font-size:1.2rem}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.6;color:var(--text-secondary);margin-bottom:1rem}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{align-items:flex-start}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin-bottom:.5rem}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-primary);margin-bottom:1rem;font-weight:600}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;transition:all .3s ease;font-size:.9rem;color:var(--text-secondary);display:flex;align-items:center}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color);transform:translateY(-2px)}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.4rem;font-size:1rem}.announcement-container[_ngcontent-%COMP%]:hover{border-color:var(--primary-color)}']})}return n})();function Nme(n,e){if(1&n){const t=He();y(0,"button",7),K("click",function(){return se(t),ae(U().hideAnnouncement())}),y(1,"i"),T(2,"Cerrar"),v()()}}function Fme(n,e){if(1&n){const t=He();y(0,"button",8),K("click",function(){return se(t),ae(U().nohideAnnouncement())}),y(1,"i"),T(2,"Abrir"),v()()}}function Vme(n,e){1&n&&(y(0,"div",12),D(1,"div",13),y(2,"p"),T(3,"Cargando horarios..."),v()())}const Lme=function(){return["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes"]};function Ume(n,e){if(1&n&&(y(0,"tr")(1,"td",17)(2,"strong"),T(3),v()(),y(4,"td",18)(5,"span",19),T(6),v()(),y(7,"td",20)(8,"span",19),T(9),v()(),y(10,"td",21)(11,"span",22),T(12),v()()()),2&n){const t=e.$implicit,r=U(3);w(3),me(wa(14,Lme)[t.day_of_week]),w(2),Oe("empty",!t.lunch_start&&!t.lunch_end),w(1),Ro(" ",r.convertToAmPm(t.lunch_start)||"-"," - ",r.convertToAmPm(t.lunch_end)||"-"," "),w(2),Oe("empty",!t.dinner_start&&!t.dinner_end),w(1),Ro(" ",r.convertToAmPm(t.dinner_start)||"-"," - ",r.convertToAmPm(t.dinner_end)||"-"," "),w(2),Oe("active",t.is_active)("inactive",!t.is_active),w(1),Ae(" ",t.is_active?"Activo":"Inactivo"," ")}}function jme(n,e){if(1&n&&(y(0,"div",14)(1,"table",15)(2,"thead")(3,"tr")(4,"th"),T(5,"D\xeda"),v(),y(6,"th"),T(7,"Almuerzo"),v(),y(8,"th"),T(9,"Cena"),v(),y(10,"th"),T(11,"Estado"),v()()(),y(12,"tbody"),Z(13,Ume,13,15,"tr",16),v()()()),2&n){const t=U(2);w(13),L("ngForOf",t.schedules)}}function $me(n,e){if(1&n&&(y(0,"div",9),Z(1,Vme,4,0,"div",10),Z(2,jme,14,1,"div",11),v()),2&n){const t=U();w(1),L("ngIf",t.isLoading),w(1),L("ngIf",!t.isLoading)}}let Bme=(()=>{class n{scheduleService;schedules=[];isLoading=!0;isHidden=!1;constructor(t){this.scheduleService=t}hideAnnouncement(){this.isHidden=!0,localStorage.setItem("announcementHidden","true")}nohideAnnouncement(){this.isHidden=!1,localStorage.setItem("announcementHidden","true")}ngOnInit(){this.loadSchedules(),"true"===localStorage.getItem("announcementHidden")&&(this.isHidden=!0)}loadSchedules(){this.scheduleService.getSchedules().subscribe({next:t=>{this.schedules=t,this.isLoading=!1},error:t=>{console.error("Error al cargar horarios:",t),this.isLoading=!1}})}convertToAmPm(t){if(!t)return"";const[r,i]=t.split(":"),o=parseInt(r,10);return`${o%12||12}:${i} ${o>=12?"PM":"AM"}`}static \u0275fac=function(r){return new(r||n)(X(xB))};static \u0275cmp=fr({type:n,selectors:[["app-schedule"]],standalone:!0,features:[Cr],decls:8,vars:3,consts:[[1,"card","schedule-card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"fas","fa-clock","me-2"],["class","btn-close","title","Abrir",3,"click",4,"ngIf"],["class","btn-close","title","Cerrar",3,"click",4,"ngIf"],["class","card-body",4,"ngIf"],["title","Abrir",1,"btn-close",3,"click"],["title","Cerrar",1,"btn-close",3,"click"],[1,"card-body"],["class","loading-container",4,"ngIf"],["class","schedule-table-container",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"schedule-table-container"],[1,"schedule-table"],[4,"ngFor","ngForOf"],["data-label","D\xeda"],["data-label","Almuerzo"],[1,"time-slot"],["data-label","Cena"],["data-label","Estado"],[1,"status-badge"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1)(2,"h5",2),D(3,"i",3),T(4,"Horarios de M\xfasica"),v(),Z(5,Nme,3,0,"button",4),Z(6,Fme,3,0,"button",5),v(),Z(7,$me,3,2,"div",6),v()),2&r&&(w(5),L("ngIf",!i.isHidden),w(1),L("ngIf",i.isHidden),w(1),L("ngIf",!i.isHidden))},dependencies:[ni,ro,ti],styles:[".schedule-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:16px;overflow:hidden;margin-bottom:.5rem;box-shadow:0 8px 32px #0003}.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(29,185,84,.15) 0%,rgba(141,103,171,.15) 100%);border-bottom:1px solid rgba(255,255,255,.1);padding:1.2rem 1.5rem}.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-weight:700;color:var(--text-primary);display:flex;align-items:center;font-size:1.2rem}.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);margin-right:.8rem;font-size:1.1rem}.schedule-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.schedule-table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:12px}.schedule-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;color:var(--text-primary)}.schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:rgba(29,185,84,.1);padding:.9rem 1rem;text-align:left;font-weight:600;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);border-bottom:2px solid rgba(255,255,255,.1)}.schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px}.schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;border-bottom:1px solid rgba(255,255,255,.05)}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.03)}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:8px}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:8px}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;font-size:.95rem}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:600;color:var(--text-primary)}.time-slot[_ngcontent-%COMP%]{display:inline-block;padding:.4rem .8rem;border-radius:6px;background:rgba(42,42,42,.4);font-size:.9rem}.time-slot.empty[_ngcontent-%COMP%]{color:var(--text-tertiary);font-style:italic}.status-badge[_ngcontent-%COMP%]{padding:.5rem .9rem;border-radius:50px;font-size:.8rem;font-weight:600;display:inline-flex;align-items:center;justify-content:center;min-width:80px}.status-badge.active[_ngcontent-%COMP%]{background:rgba(29,185,84,.2);color:var(--primary-color);border:1px solid rgba(29,185,84,.3)}.status-badge.inactive[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:var(--text-secondary);border:1px solid rgba(255,255,255,.1)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid rgba(29,185,84,.2);border-radius:50%;border-top-color:var(--primary-color);animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite;margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1rem}.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.schedule-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem}.schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;padding:1rem;border-radius:12px;background:rgba(42,42,42,.3);border:1px solid rgba(255,255,255,.1)}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{margin-bottom:0}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;padding:.6rem 0;text-align:left;border:none;font-size:.9rem}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:700;display:block;margin-bottom:.3rem;color:var(--text-secondary);font-size:.8rem;text-transform:uppercase}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-top:0;font-size:1rem;margin-bottom:.5rem;padding-bottom:.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child:before{display:none}.time-slot[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.85rem}.status-badge[_ngcontent-%COMP%]{padding:.4rem .7rem;font-size:.75rem;min-width:70px}}@media (max-width: 480px){.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:.8rem}}.btn-close[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:.25rem;border-radius:50%;transition:all .2s ease;width:28px;height:28px;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:rgba(255,255,255,.1);transform:rotate(90deg)}.btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}"]})}return n})(),kB=(()=>{class n{http;apiUrl=oi_apiUrl;likedItems=new Set;constructor(t){this.http=t,this.loadLikedItemsFromStorage()}loadLikedItemsFromStorage(){const t=localStorage.getItem("discussion_likes");t&&(this.likedItems=new Set(JSON.parse(t)))}saveLikedItemsToStorage(){localStorage.setItem("discussion_likes",JSON.stringify([...this.likedItems]))}getItemKey(t,r){return`${t}:${r}`}hasUserLiked(t,r){return this.likedItems.has(this.getItemKey(t,r))}updateLikeStatus(t,r,i){const o=this.getItemKey(t,r);i?this.likedItems.add(o):this.likedItems.delete(o),this.saveLikedItemsToStorage()}getThreads(t="updated_at",r="desc"){return this.http.get(`${this.apiUrl}/api/discussion/threads?sort=${t}&order=${r}`)}getThread(t){return this.http.get(`${this.apiUrl}/api/discussion/threads/${t}`)}createThread(t,r){return this.http.post(`${this.apiUrl}/api/discussion/threads`,{title:t,content:r})}addComment(t,r,i){return this.http.post(`${this.apiUrl}/api/discussion/threads/${t}/comments`,{content:r,parent_comment_id:i})}likeThread(t){return this.http.post(`${this.apiUrl}/api/discussion/like`,{thread_id:t}).pipe(mt(r=>{this.updateLikeStatus("thread",t,"liked"===r.action)}))}likeComment(t){return this.http.post(`${this.apiUrl}/api/discussion/like`,{comment_id:t}).pipe(mt(r=>{this.updateLikeStatus("comment",t,"liked"===r.action)}))}static \u0275fac=function(r){return new(r||n)(ve(Vi))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hme(n,e){if(1&n){const t=He();y(0,"div",22),D(1,"i",23),T(2),y(3,"button",24),K("click",function(){return se(t),ae(U().error=null)}),D(4,"i",25),v()()}if(2&n){const t=U();w(2),Ae(" ",t.error," ")}}function zme(n,e){if(1&n){const t=He();y(0,"div",26)(1,"div",27)(2,"h3"),T(3,"Crear Nuevo Hilo"),v(),y(4,"div",28)(5,"label",29),T(6,"T\xedtulo"),v(),y(7,"input",30),K("ngModelChange",function(i){return se(t),ae(U().newThread.title=i)}),v(),y(8,"small"),T(9),v()(),y(10,"div",28)(11,"label",31),T(12,"Contenido"),v(),y(13,"textarea",32),K("ngModelChange",function(i){return se(t),ae(U().newThread.content=i)}),v()(),y(14,"div",33)(15,"button",34),K("click",function(){se(t);const i=U();return i.showCreateForm=!1,ae(i.newThread={title:"",content:""})}),T(16," Cancelar "),v(),y(17,"button",35),K("click",function(){return se(t),ae(U().createThread())}),D(18,"i",36),T(19,"Publicar Hilo "),v()()()()}if(2&n){const t=U();w(7),L("ngModel",t.newThread.title),w(2),Ae("",t.newThread.title.length,"/200 caracteres"),w(4),L("ngModel",t.newThread.content),w(4),L("disabled",!t.newThread.title.trim()||!t.newThread.content.trim())}}function qme(n,e){1&n&&(y(0,"div",37),D(1,"div",38),y(2,"p"),T(3,"Cargando hilos..."),v()())}function Gme(n,e){if(1&n){const t=He();y(0,"div",39),D(1,"i",40),y(2,"h3"),T(3,"\xa1S\xe9 el primero en empezar una conversaci\xf3n!"),v(),y(4,"p"),T(5,"A\xfan no hay hilos de discusi\xf3n. Crea el primero para hablar sobre m\xfasica."),v(),y(6,"button",5),K("click",function(){return se(t),ae(U().showCreateForm=!0)}),D(7,"i",6),T(8,"Crear Primer Hilo "),v()()}}const RB=function(n){return["/discussion/thread",n]};function Wme(n,e){if(1&n){const t=He();y(0,"div",41)(1,"div",42)(2,"h3",43)(3,"a",44),T(4),v()(),y(5,"span",45),T(6),v()(),y(7,"div",46)(8,"p"),T(9),v()(),y(10,"div",47)(11,"div",48)(12,"button",49),K("click",function(){const o=se(t).$implicit;return ae(U().likeThread(o))}),D(13,"i",50),y(14,"span"),T(15),v()()(),y(16,"div",48),D(17,"i",51),y(18,"span"),T(19),v()(),y(20,"div",48),D(21,"i",52),y(22,"span"),T(23),v()()(),y(24,"div",53)(25,"a",54),D(26,"i",55),T(27,"Ver discusi\xf3n "),v()()()}if(2&n){const t=e.$implicit,r=U();w(3),L("routerLink",_C(10,RB,t.id)),w(1),me(t.title),w(2),me(r.formatTimeAgo(t.updated_at)),w(3),me(t.content.length>300?t.content.substring(0,300)+"...":t.content),w(3),Oe("liked",t.user_has_liked),w(3),me(t.likes_count),w(4),me(t.comments_count),w(4),Ae("Usuario ",t.author_fingerprint.substring(0,8),""),w(2),L("routerLink",_C(12,RB,t.id))}}function Kme(n,e){1&n&&(y(0,"div",56)(1,"button",57),D(2,"i",58),T(3," Anterior "),v(),y(4,"span",59),T(5,"P\xe1gina 1 de 1"),v(),y(6,"button",57),T(7," Siguiente "),D(8,"i",60),v()())}function Jme(n,e){if(1&n){const t=He();y(0,"div",8),D(1,"i",9),T(2),y(3,"button",10),K("click",function(){return se(t),ae(U().error=null)}),D(4,"i",11),v()()}if(2&n){const t=U();w(2),Ae(" ",t.error," ")}}function Yme(n,e){1&n&&(y(0,"div",12)(1,"div",13),D(2,"div",14),y(3,"p"),T(4,"Cargando hilo..."),v()()())}function Xme(n,e){if(1&n){const t=He();y(0,"div",42)(1,"button",43),K("click",function(){return se(t),ae(U(2).cancelReply())}),D(2,"i",44),T(3,"Cancelar "),v(),y(4,"button",45),K("click",function(){return se(t),ae(U(2).addReply())}),D(5,"i",46),T(6,"Responder "),v()()}if(2&n){const t=U(2);w(4),L("disabled",!t.replyContent.trim())}}function Zme(n,e){if(1&n){const t=He();y(0,"div",42)(1,"button",45),K("click",function(){return se(t),ae(U(2).addComment())}),D(2,"i",47),T(3,"Publicar comentario "),v()()}if(2&n){const t=U(2);w(1),L("disabled",!t.newComment.trim())}}function e_e(n,e){1&n&&(y(0,"div",48)(1,"div",49),D(2,"i",50),y(3,"h4"),T(4,"\xa1S\xe9 el primero en comentar!"),v(),y(5,"p"),T(6,"A\xfan no hay comentarios en este hilo. Comparte tu opini\xf3n."),v()()())}function t_e(n,e){if(1&n){const t=He();y(0,"div",68)(1,"div",69),D(2,"i",56),v(),y(3,"div",57)(4,"div",58)(5,"span",59),D(6,"i",23),T(7),v(),y(8,"span",60),D(9,"i",21),T(10),v()(),y(11,"div",61)(12,"p"),T(13),v()(),y(14,"div",42)(15,"button",62),K("click",function(){const o=se(t).$implicit;return ae(U(5).likeComment(o))}),D(16,"i",27),y(17,"span"),T(18),v()(),y(19,"button",63),K("click",function(){const o=se(t).$implicit,s=U(2).$implicit,a=U(3);return a.replyingTo=s.id,ae(a.replyContent="@"+(o.author_fingerprint.substring(0,8)||"")+" ")}),D(20,"i",64),y(21,"span"),T(22,"Responder"),v()()()()()}if(2&n){const t=e.$implicit,r=U(5);w(7),Ae(" Usuario ",t.author_fingerprint.substring(0,8)," "),w(3),Ae("",r.formatTimeAgo(t.created_at)," "),w(3),me(t.content),w(2),Oe("liked",t.user_has_liked),w(3),me(t.likes_count)}}function n_e(n,e){if(1&n&&(y(0,"div",66),Z(1,t_e,23,6,"div",67),v()),2&n){const t=U().$implicit;w(1),L("ngForOf",t.replies)}}function r_e(n,e){if(1&n){const t=He();y(0,"div",53)(1,"div",54)(2,"div",55),D(3,"i",56),v(),y(4,"div",57)(5,"div",58)(6,"span",59),D(7,"i",23),T(8),v(),y(9,"span",60),D(10,"i",21),T(11),v()(),y(12,"div",61)(13,"p"),T(14),v()(),y(15,"div",42)(16,"button",62),K("click",function(){const o=se(t).$implicit;return ae(U(3).likeComment(o))}),D(17,"i",27),y(18,"span"),T(19),v()(),y(20,"button",63),K("click",function(){const o=se(t).$implicit,s=U(3);return s.replyingTo=o.id,ae(s.replyContent="")}),D(21,"i",64),y(22,"span"),T(23,"Responder"),v()()()()(),Z(24,n_e,2,1,"div",65),v()}if(2&n){const t=e.$implicit,r=U(3);Oe("has-replies",t.replies&&t.replies.length>0),w(8),Ae(" Usuario ",t.author_fingerprint.substring(0,8)," "),w(3),Ae("",r.formatTimeAgo(t.created_at)," "),w(3),me(t.content),w(2),Oe("liked",t.user_has_liked),w(3),me(t.likes_count),w(5),L("ngIf",t.replies&&t.replies.length>0)}}function i_e(n,e){if(1&n&&(y(0,"div",51),Z(1,r_e,25,9,"div",52),v()),2&n){const t=U(2);w(1),L("ngForOf",t.comments)}}function o_e(n,e){if(1&n){const t=He();y(0,"div",15)(1,"div",16)(2,"div",17)(3,"h1",18),T(4),v(),y(5,"div",19)(6,"span",20),D(7,"i",21),T(8),v(),y(9,"span",22),D(10,"i",23),T(11),v()()(),y(12,"div",24)(13,"p"),T(14),v()(),y(15,"div",25)(16,"button",26),K("click",function(){se(t);const i=U();return ae(i.likeThread(i.thread))}),D(17,"i",27),y(18,"span"),T(19),v(),y(20,"span",28),T(21,"Me gusta"),v()(),y(22,"div",29),D(23,"i",30),y(24,"span"),T(25),v(),y(26,"span",28),T(27),v()()()(),y(28,"div",31)(29,"div",32)(30,"h3"),D(31,"i",33),T(32),v(),y(33,"div",34)(34,"textarea",35),K("ngModelChange",function(i){se(t);const o=U();return ae(o.replyingTo?o.replyContent=i:o.newComment=i)}),v(),Z(35,Xme,7,1,"div",36),Z(36,Zme,4,1,"div",36),v()()(),y(37,"div",37)(38,"div",38)(39,"h3"),D(40,"i",39),T(41),v()(),Z(42,e_e,7,0,"div",40),Z(43,i_e,2,1,"div",41),v()()}if(2&n){const t=U();w(4),me(t.thread.title),w(4),Ae("Publicado ",t.formatTimeAgo(t.thread.created_at)," "),w(3),Ae("Usuario ",t.thread.author_fingerprint.substring(0,8)," "),w(3),me(t.thread.content),w(2),Oe("liked",t.thread.user_has_liked),w(3),me(t.thread.likes_count),w(6),me(t.thread.comments_count),w(2),Ae("Comentario",1!==t.thread.comments_count?"s":"",""),w(5),Ae(" ",t.replyingTo?"Respondiendo a comentario...":"Agregar comentario"," "),w(2),wg("placeholder",t.replyingTo?"Escribe tu respuesta...":"Comparte tu opini\xf3n sobre este tema..."),L("ngModel",t.replyingTo?t.replyContent:t.newComment),w(1),L("ngIf",t.replyingTo),w(1),L("ngIf",!t.replyingTo),w(5),Ro(" ",t.thread.comments_count," Comentario",1!==t.thread.comments_count?"s":""," "),w(1),L("ngIf",0===t.comments.length),w(1),L("ngIf",t.comments.length>0)}}const NB=function(){return["/discussion"]};function s_e(n,e){if(1&n&&(y(0,"div",70)(1,"div",71),D(2,"i",72),y(3,"h3"),T(4,"Error al cargar el hilo"),v(),y(5,"p"),T(6),v(),y(7,"a",73),D(8,"i",3),T(9,"Volver al foro "),v()()()),2&n){const t=U();w(6),me(t.error),w(1),L("routerLink",wa(2,NB))}}const a_e={providers:[function qte(n,...e){return Td([{provide:Ru,multi:!0,useValue:n},[],{provide:Oa,useFactory:jV,deps:[Ir]},{provide:Qd,multi:!0,useFactory:$V},e.map(t=>t.\u0275providers)])}([{path:"",component:OB},{path:"home",component:OB},{path:"ranking",component:Sme},{path:"discussion",component:(()=>{class n{discussionService;threads=[];showCreateForm=!1;newThread={title:"",content:""};isLoading=!1;sortBy="updated_at";error=null;constructor(t){this.discussionService=t}ngOnInit(){this.loadThreads()}loadThreads(){this.isLoading=!0,this.error=null,this.discussionService.getThreads(this.sortBy).subscribe({next:t=>{this.threads=t.map(r=>({...r,user_has_liked:this.discussionService.hasUserLiked("thread",r.id)})),this.isLoading=!1},error:t=>{console.error("Error loading threads:",t),this.error="Error al cargar los hilos. Por favor, intenta nuevamente.",this.isLoading=!1}})}createThread(){!this.newThread.title.trim()||!this.newThread.content.trim()||this.discussionService.createThread(this.newThread.title,this.newThread.content).subscribe({next:t=>{this.threads.unshift({...t,user_has_liked:!1}),this.showCreateForm=!1,this.newThread={title:"",content:""},this.error=null},error:t=>{console.error("Error creating thread:",t),this.error="Error al crear el hilo. Por favor, intenta nuevamente."}})}likeThread(t){this.discussionService.likeThread(t.id).subscribe({next:r=>{t.likes_count=r.new_count,t.user_has_liked="liked"===r.action},error:r=>{console.error("Error liking thread:",r),this.error="Error al dar like. Por favor, intenta nuevamente."}})}formatTimeAgo(t){const r=new Date(t),o=(new Date).getTime()-r.getTime(),s=Math.floor(o/6e4),a=Math.floor(s/60),c=Math.floor(a/24);return s<1?"Ahora mismo":s<60?`Hace ${s} min`:a<24?`Hace ${a} h`:1===c?"Ayer":c<7?`Hace ${c} d\xedas`:c<30?`Hace ${Math.floor(c/7)} sem`:`Hace ${Math.floor(c/30)} mes`}static \u0275fac=function(r){return new(r||n)(X(kB))};static \u0275cmp=fr({type:n,selectors:[["app-discussion"]],standalone:!0,features:[Cr],decls:36,vars:10,consts:[[1,"discussion-container"],[1,"discussion-header"],[1,"header-content"],[1,"fas","fa-comments","me-2"],[1,"header-subtitle"],[1,"btn-create-thread",3,"click"],[1,"fas","fa-plus","me-1"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","create-thread-form",4,"ngIf"],[1,"sort-controls"],[1,"sort-options"],[3,"ngModel","ngModelChange","change"],["value","updated_at"],["value","likes_count"],["value","comments_count"],["value","created_at"],[1,"threads-count"],[1,"threads-list"],["class","loader",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","thread-card",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"create-thread-form"],[1,"form-card"],[1,"form-group"],["for","threadTitle"],["type","text","id","threadTitle","placeholder","Escribe un t\xedtulo interesante...","maxlength","200",3,"ngModel","ngModelChange"],["for","threadContent"],["id","threadContent","placeholder","Comparte tus pensamientos, preguntas o temas musicales...","rows","6",3,"ngModel","ngModelChange"],[1,"form-actions"],[1,"btn-cancel",3,"click"],[1,"btn-submit",3,"disabled","click"],[1,"fas","fa-paper-plane","me-1"],[1,"loader"],[1,"spinner"],[1,"empty-state"],[1,"fas","fa-comments-slash"],[1,"thread-card"],[1,"thread-header"],[1,"thread-title"],[3,"routerLink"],[1,"thread-date"],[1,"thread-content"],[1,"thread-stats"],[1,"stat"],[1,"like-btn",3,"click"],[1,"fas","fa-heart"],[1,"fas","fa-comment"],[1,"fas","fa-user"],[1,"thread-actions"],[1,"btn-read-more",3,"routerLink"],[1,"fas","fa-arrow-right","me-1"],[1,"pagination"],["disabled","",1,"page-btn"],[1,"fas","fa-chevron-left","me-1"],[1,"page-info"],[1,"fas","fa-chevron-right","ms-1"]],template:function(r,i){1&r&&(y(0,"div",0),D(1,"app-announcement")(2,"app-schedule"),y(3,"div",1)(4,"div",2)(5,"h1"),D(6,"i",3),T(7,"Foro Musical "),v(),y(8,"p",4),T(9,"Comparte, discute y conecta con otros amantes de la m\xfasica"),v()(),y(10,"button",5),K("click",function(){return i.showCreateForm=!i.showCreateForm}),D(11,"i",6),T(12),v()(),Z(13,Hme,5,1,"div",7),Z(14,zme,20,4,"div",8),y(15,"div",9)(16,"div",10)(17,"span"),T(18,"Ordenar por:"),v(),y(19,"select",11),K("ngModelChange",function(s){return i.sortBy=s})("change",function(){return i.loadThreads()}),y(20,"option",12),T(21,"M\xe1s reciente"),v(),y(22,"option",13),T(23,"M\xe1s populares"),v(),y(24,"option",14),T(25,"M\xe1s comentados"),v(),y(26,"option",15),T(27,"M\xe1s antiguos"),v()()(),y(28,"div",16)(29,"span"),T(30),v()()(),y(31,"div",17),Z(32,qme,4,0,"div",18),Z(33,Gme,9,0,"div",19),Z(34,Wme,28,14,"div",20),v(),Z(35,Kme,9,0,"div",21),v()),2&r&&(w(12),Ae(" ",i.showCreateForm?"Cancelar":"Nuevo Hilo"," "),w(1),L("ngIf",i.error),w(1),L("ngIf",i.showCreateForm),w(5),L("ngModel",i.sortBy),w(11),Ro("",i.threads.length," hilo",1!==i.threads.length?"s":"",""),w(2),L("ngIf",i.isLoading),w(1),L("ngIf",!i.isLoading&&0===i.threads.length),w(1),L("ngForOf",i.threads),w(1),L("ngIf",i.threads.length>0))},dependencies:[ni,ro,ti,hc,mB,yB,yo,by,ea,PA,as,Rme,Bme,vh,xa],styles:[".discussion-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.discussion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.discussion-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;background:linear-gradient(135deg,var(--primary-color) 0%,var(--accent-purple) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;margin-bottom:.5rem}.discussion-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem;margin:0}.discussion-header[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:1rem 2rem;border-radius:50px;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #1db9544d}.discussion-header[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]:hover{background:#1ed760;transform:translateY(-2px);box-shadow:0 6px 20px #1db95466}.discussion-header[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.create-thread-form[_ngcontent-%COMP%]{margin-bottom:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:2rem;box-shadow:0 8px 32px #0003}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1.5rem;font-weight:700}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-primary);font-weight:600;margin-bottom:.5rem}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background:rgba(42,42,42,.6);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:1rem;color:var(--text-primary);font-size:1rem;transition:all .3s ease}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #1db95433}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.8rem}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:var(--text-secondary);border:1px solid rgba(255,255,255,.2);padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;transition:all .3s ease}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);color:var(--text-primary)}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;font-weight:700;cursor:pointer;transition:all .3s ease}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:#1ed760;transform:translateY(-2px)}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background:var(--text-tertiary);cursor:not-allowed;transform:none}.sort-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding:1rem 1.5rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.1)}.sort-controls[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.sort-controls[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600}.sort-controls[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:rgba(42,42,42,.6);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:.5rem 1rem;color:var(--text-primary);cursor:pointer}.sort-controls[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.sort-controls[_ngcontent-%COMP%]   .threads-count[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:700;background:var(--primary-color);padding:.5rem 1rem;border-radius:20px;font-size:.9rem}.threads-list[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{text-align:center;padding:3rem}.threads-list[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:3px solid rgba(255,255,255,.1);border-top:3px solid var(--primary-color);border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.threads-list[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ffffff1a;margin-bottom:1.5rem}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.5rem}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:1.1rem}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:1rem 2rem;border-radius:50px;font-weight:700;cursor:pointer;transition:all .3s ease}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]:hover{background:#1ed760;transform:translateY(-2px)}.thread-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:2rem;margin-bottom:1.5rem;transition:all .3s ease;box-shadow:0 4px 20px #0000001a}.thread-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 30px #1db95426;border-color:#1db95433}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:700}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-primary);text-decoration:none;transition:color .3s ease}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-date[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;white-space:nowrap}.thread-card[_ngcontent-%COMP%]   .thread-content[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.6;margin-bottom:1.5rem;font-size:1.1rem}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]{display:flex;gap:2rem;margin-bottom:1.5rem}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);font-size:.9rem}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);transition:all .3s ease;padding:.5rem;border-radius:8px}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.1);color:#e74c3c}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]{color:#e74c3c}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.thread-card[_ngcontent-%COMP%]   .thread-actions[_ngcontent-%COMP%]   .btn-read-more[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:700;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;padding:.5rem 1rem;border-radius:8px}.thread-card[_ngcontent-%COMP%]   .thread-actions[_ngcontent-%COMP%]   .btn-read-more[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.1);transform:translate(5px)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;margin-top:2rem;padding:1.5rem}.pagination[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]{background:var(--glass-bg);border:1px solid rgba(255,255,255,.1);color:var(--text-primary);padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;transition:all .3s ease;font-weight:600}.pagination[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-color);transform:translateY(-2px)}.pagination[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_heartBeat{0%{transform:scale(1)}25%{transform:scale(1.3)}50%{transform:scale(1)}75%{transform:scale(1.2)}to{transform:scale(1)}}@media (max-width: 768px){.discussion-container[_ngcontent-%COMP%]{padding:1rem}.discussion-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.sort-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.thread-stats[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]})}return n})()},{path:"discussion/thread/:id",component:(()=>{class n{route;discussionService;thread;comments=[];newComment="";replyingTo=null;replyContent="";error=null;isLoading=!0;constructor(t,r){this.route=t,this.discussionService=r}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&this.loadThread(t)}loadThread(t){this.isLoading=!0,this.error=null,this.discussionService.getThread(t).subscribe({next:r=>{this.thread={...r.thread,user_has_liked:this.discussionService.hasUserLiked("thread",r.thread.id)},this.comments=this.buildCommentTree(r.comments).map(i=>({...i,user_has_liked:this.discussionService.hasUserLiked("comment",i.id),replies:i.replies?.map(o=>({...o,user_has_liked:this.discussionService.hasUserLiked("comment",o.id)}))})),this.isLoading=!1,this.error=null},error:r=>{console.error("Error loading thread:",r),this.error="No se pudo cargar el hilo. Por favor, intenta nuevamente.",this.isLoading=!1}})}buildCommentTree(t){const r=new Map,i=[];return t.forEach(o=>{o.replies=[],r.set(o.id,o)}),t.forEach(o=>{if(o.parent_comment_id){const s=r.get(o.parent_comment_id);s&&s.replies.push(o)}else i.push(o)}),i}addComment(){this.newComment.trim()&&this.discussionService.addComment(this.thread.id,this.newComment).subscribe({next:t=>{const r={...t,user_has_liked:!1,replies:[]};this.comments.push(r),this.newComment="",this.thread.comments_count++,this.error=null},error:t=>{console.error("Error adding comment:",t),this.error="Error al agregar el comentario. Por favor, intenta nuevamente."}})}addReply(){!this.replyContent.trim()||!this.replyingTo||this.discussionService.addComment(this.thread.id,this.replyContent,this.replyingTo).subscribe({next:t=>{const r=this.findCommentById(this.replyingTo);if(r){r.replies||(r.replies=[]);const i={...t,user_has_liked:!1};r.replies.push(i)}this.replyContent="",this.replyingTo=null,this.thread.comments_count++,this.error=null},error:t=>{console.error("Error adding reply:",t),this.error="Error al agregar la respuesta. Por favor, intenta nuevamente."}})}findCommentById(t){for(const r of this.comments){if(r.id===t)return r;if(r.replies)for(const i of r.replies)if(i.id===t)return i}return null}likeThread(t){this.discussionService.likeThread(t.id).subscribe({next:r=>{t.likes_count=r.new_count,t.user_has_liked="liked"===r.action},error:r=>{console.error("Error liking thread:",r),this.error="Error al dar like. Por favor, intenta nuevamente."}})}likeComment(t){this.discussionService.likeComment(t.id).subscribe({next:r=>{t.likes_count=r.new_count,t.user_has_liked="liked"===r.action},error:r=>{console.error("Error liking comment:",r),this.error="Error al dar like. Por favor, intenta nuevamente."}})}formatTimeAgo(t){const r=new Date(t),o=(new Date).getTime()-r.getTime(),s=Math.floor(o/6e4),a=Math.floor(s/60),c=Math.floor(a/24);return s<1?"Ahora mismo":s<60?`Hace ${s} min`:a<24?`Hace ${a} h`:1===c?"Ayer":c<7?`Hace ${c} d\xedas`:c<30?`Hace ${Math.floor(c/7)} sem`:`Hace ${Math.floor(c/30)} mes`}cancelReply(){this.replyingTo=null,this.replyContent=""}static \u0275fac=function(r){return new(r||n)(X(Oa),X(kB))};static \u0275cmp=fr({type:n,selectors:[["app-thread-detail"]],standalone:!0,features:[Cr],decls:9,vars:6,consts:[[1,"thread-detail-container"],[1,"back-nav"],[1,"back-link",3,"routerLink"],[1,"fas","fa-arrow-left","me-2"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","thread-main",4,"ngIf"],["class","error-state",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"loading-state"],[1,"loader"],[1,"spinner"],[1,"thread-main"],[1,"thread-card","detailed"],[1,"thread-header"],[1,"thread-title"],[1,"thread-meta"],[1,"thread-date"],[1,"fas","fa-clock","me-1"],[1,"thread-author"],[1,"fas","fa-user","me-1"],[1,"thread-content","detailed"],[1,"thread-stats","detailed"],[1,"like-btn",3,"click"],[1,"fas","fa-heart"],[1,"label"],[1,"stat"],[1,"fas","fa-comment"],[1,"comment-form-section"],[1,"form-card"],[1,"fas","fa-reply","me-2"],[1,"comment-form"],["rows","4",3,"ngModel","placeholder","ngModelChange"],["class","comment-actions",4,"ngIf"],[1,"comments-section"],[1,"comments-header"],[1,"fas","fa-comments","me-2"],["class","empty-comments",4,"ngIf"],["class","comments-list",4,"ngIf"],[1,"comment-actions"],[1,"btn-cancel",3,"click"],[1,"fas","fa-times","me-1"],[1,"btn-submit",3,"disabled","click"],[1,"fas","fa-reply","me-1"],[1,"fas","fa-paper-plane","me-1"],[1,"empty-comments"],[1,"empty-state"],[1,"fas","fa-comment-slash"],[1,"comments-list"],["class","comment-item",3,"has-replies",4,"ngFor","ngForOf"],[1,"comment-item"],[1,"comment-main"],[1,"comment-avatar"],[1,"fas","fa-user"],[1,"comment-content"],[1,"comment-header"],[1,"comment-author"],[1,"comment-date"],[1,"comment-text"],[1,"comment-like-btn",3,"click"],[1,"comment-reply-btn",3,"click"],[1,"fas","fa-reply"],["class","comment-replies",4,"ngIf"],[1,"comment-replies"],["class","reply-item",4,"ngFor","ngForOf"],[1,"reply-item"],[1,"comment-avatar","small"],[1,"error-state"],[1,"error-message"],[1,"fas","fa-exclamation-triangle"],[1,"btn-retry",3,"routerLink"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"div",1)(2,"a",2),D(3,"i",3),T(4,"Volver al foro "),v()(),Z(5,Jme,5,1,"div",4),Z(6,Yme,5,0,"div",5),Z(7,o_e,44,18,"div",6),Z(8,s_e,10,3,"div",7),v()),2&r&&(w(2),L("routerLink",wa(5,NB)),w(3),L("ngIf",i.error),w(1),L("ngIf",i.isLoading),w(1),L("ngIf",i.thread&&!i.isLoading),w(1),L("ngIf",i.error&&!i.isLoading))},dependencies:[ni,ro,ti,hc,yo,ea,as,vh,xa],styles:[".thread-detail-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.back-nav[_ngcontent-%COMP%]{margin-bottom:2rem}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:700;display:inline-flex;align-items:center;padding:.8rem 1.5rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:50px;transition:all .3s ease;box-shadow:0 4px 15px #0000001a}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.1);transform:translate(-5px);box-shadow:0 6px 20px #1db95433}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(-3px)}.alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:1.2rem 1.5rem;margin-bottom:2rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:space-between}.alert.alert-danger[_ngcontent-%COMP%]{background:rgba(226,33,52,.15);color:#e22134;border:1px solid rgba(226,33,52,.2)}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:inherit;cursor:pointer;padding:.5rem;border-radius:50%;transition:background .3s ease}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2.5rem;margin-bottom:2rem;box-shadow:0 8px 32px #0003;transition:all .3s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #1db95426;border-color:#1db95433}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:2.2rem;font-weight:800;color:var(--text-primary);line-height:1.3;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary-color) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]{display:flex;gap:2rem;color:var(--text-secondary);font-size:.95rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-content.detailed[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.7;color:var(--text-secondary);margin-bottom:2rem;padding:1.5rem;background:rgba(255,255,255,.05);border-radius:12px;border-left:4px solid var(--primary-color)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]{display:flex;gap:2rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%], .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.8rem 1.5rem;background:rgba(255,255,255,.05);border-radius:50px;cursor:pointer;transition:all .3s ease;border:1px solid rgba(255,255,255,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover, .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1);transform:translateY(-2px)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);font-weight:600}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]{border:none;background:rgba(29,185,84,.1);color:var(--text-secondary)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]{color:#e74c3c;background:rgba(231,76,60,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover.liked{background:rgba(231,76,60,.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{color:var(--text-secondary)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.comment-form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2rem;box-shadow:0 8px 32px #0003}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-primary);font-weight:700;display:flex;align-items:center;font-size:1.3rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:rgba(42,42,42,.6);border:1px solid rgba(255,255,255,.1);border-radius:12px;resize:vertical;font-size:1rem;color:var(--text-primary);margin-bottom:1.5rem;transition:all .3s ease;font-family:inherit}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #1db95433;background:rgba(42,42,42,.8)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:var(--text-secondary);border:1px solid rgba(255,255,255,.2);padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;transition:all .3s ease;font-weight:600}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);color:var(--text-primary);transform:translateY(-2px)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;cursor:pointer;font-weight:700;transition:all .3s ease;box-shadow:0 4px 15px #1db9544d}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:#1ed760;transform:translateY(-2px);box-shadow:0 6px 20px #1db95466}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background:var(--text-tertiary);cursor:not-allowed;transform:none;box-shadow:none}.comments-section[_ngcontent-%COMP%]   .comments-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}.comments-section[_ngcontent-%COMP%]   .comments-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);display:flex;align-items:center;font-size:1.5rem;font-weight:700}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ffffff1a;margin-bottom:1.5rem}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.5rem}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]{margin-bottom:2rem;animation:_ngcontent-%COMP%_slideUp .4s ease-out}.comments-list[_ngcontent-%COMP%]   .comment-item.has-replies[_ngcontent-%COMP%]{border-left:3px solid var(--primary-color);padding-left:1.5rem;margin-left:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]{display:flex;gap:1.2rem;margin-bottom:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,var(--primary-color) 0%,var(--accent-purple) 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;flex-shrink:0;font-size:1.2rem;box-shadow:0 4px 15px #0003}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{flex:1;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1.5rem;transition:all .3s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]:hover{border-color:#1db95433;box-shadow:0 4px 20px #00000026}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary);display:flex;align-items:center;gap:.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem;display:flex;align-items:center;gap:.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-text[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.6;margin-bottom:1.2rem;font-size:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);font-size:.9rem;transition:all .3s ease;padding:.5rem 1rem;border-radius:8px}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.05);color:var(--text-primary)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn.liked[_ngcontent-%COMP%]{color:#e74c3c}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn[_ngcontent-%COMP%]:hover{color:#e74c3c}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-reply-btn[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]{margin-left:3.5rem;border-left:2px solid rgba(255,255,255,.1);padding-left:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.2rem;animation:_ngcontent-%COMP%_slideUp .4s ease-out .1s both}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]   .comment-avatar.small[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{background:rgba(255,255,255,.03);border-color:#ffffff0d}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.loading-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:3px solid rgba(255,255,255,.1);border-top:3px solid var(--primary-color);border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem}.loading-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--text-secondary)}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#e74c3c;margin-bottom:1.5rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.5rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{display:inline-flex;align-items:center;margin-top:1.5rem;color:var(--primary-color);text-decoration:none;font-weight:700;padding:.8rem 1.5rem;background:rgba(29,185,84,.1);border-radius:50px;transition:all .3s ease}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover, .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.2);transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_heartBeat{0%{transform:scale(1)}25%{transform:scale(1.3)}50%{transform:scale(1)}75%{transform:scale(1.2)}to{transform:scale(1)}}@media (max-width: 768px){.thread-detail-container[_ngcontent-%COMP%]{padding:1rem}.thread-card.detailed[_ngcontent-%COMP%]{padding:1.5rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]{font-size:1.6rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]{flex-direction:column;gap:1rem!important}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:1.5rem}.comments-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start!important}.comment-main[_ngcontent-%COMP%]{gap:1rem!important;flex-direction:column}.comment-replies[_ngcontent-%COMP%]{margin-left:1rem!important;padding-left:1rem!important}.comment-avatar[_ngcontent-%COMP%]{align-self:flex-start}}"]})}return n})()},{path:"admin-login",component:Lge},{path:"admin-panel",component:pme,canActivate:[Ome]},{path:"**",redirectTo:""}]),wF(),function AZ(...n){const e=[],t=new Set;for(const{\u0275providers:r,\u0275kind:i}of n)t.add(i),r.length&&e.push(r);return Td([[],t.has(0)?[]:MJ(),t.has(1)?[]:[{provide:om,useFactory:()=>(pe(_D).add("httpcache"),{isCacheActive:!0})},{provide:gF,useValue:WX,multi:!0,deps:[Zc,om]},{provide:Qd,multi:!0,useFactory:()=>{const n=pe(Ia),e=pe(om);return()=>{n.isStable.pipe(wo(t=>t)).toPromise().then(()=>{e.isCacheActive=!1})}}}],e])}(),uD(function jse(n,...e){return{ngModule:Use,providers:[{provide:sI,useFactory:Lse(n),multi:!0,deps:[ct,Zn,rI,...e]}]}}(()=>$se(oi_firebaseConfig)),function Ale(n,...e){return{ngModule:Mle,providers:[{provide:jP,useFactory:Ile(n),multi:!0,deps:[ct,Zn,rI,oI,[new vr,MI],...e]}]}}(()=>Sle()),function upe(n,...e){return{ngModule:cpe,providers:[{provide:aA,useFactory:ope(n),multi:!0,deps:[ct,Zn,rI,oI,[new vr,BU],[new vr,MI],...e]}]}}(()=>lpe()))]};class AA extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class u_e extends AA{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FB extends AA{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class VB extends AA{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var LB=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(LB||{});class l_e{constructor(e,{headers:t={},customFetch:r,region:i=LB.Any}={}){var n;this.url=e,this.headers=t,this.region=i,this.fetch=(n=r)?(...e)=>n(...e):(...e)=>fetch(...e)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,re.__awaiter)(this,arguments,void 0,function*(t,r={}){var i;let o,s;try{const{headers:a,method:c,body:u,signal:l,timeout:h}=r;let f={},{region:g}=r;g||(g=this.region);const b=new URL(`${this.url}/${t}`);let C;g&&"any"!==g&&(f["x-region"]=g,b.searchParams.set("forceFunctionRegion",g)),u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",C=u):"string"==typeof u?(f["Content-Type"]="text/plain",C=u):typeof FormData<"u"&&u instanceof FormData?C=u:(f["Content-Type"]="application/json",C=JSON.stringify(u)):C=u;let I=l;h&&(s=new AbortController,o=setTimeout(()=>s.abort(),h),l?(I=s.signal,l.addEventListener("abort",()=>s.abort())):I=s.signal);const A=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:C,signal:I}).catch(Q=>{throw new u_e(Q)}),M=A.headers.get("x-relay-error");if(M&&"true"===M)throw new FB(A);if(!A.ok)throw new VB(A);let j,N=(null!==(i=A.headers.get("Content-Type"))&&void 0!==i?i:"text/plain").split(";")[0].trim();return j="application/json"===N?yield A.json():"application/octet-stream"===N||"application/pdf"===N?yield A.blob():"text/event-stream"===N?A:"multipart/form-data"===N?yield A.formData():yield A.text(),{data:j,error:null,response:A}}catch(a){return{data:null,error:a,response:a instanceof VB||a instanceof FB?a.context:void 0}}finally{o&&clearTimeout(o)}})}}var UB=tt(60),d_e=tt.t(UB,2);const{PostgrestClient:jB}=UB||d_e,y_e=class __e{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(e=navigator.userAgent)&&void 0!==e&&e.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=parseInt(t.node.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch{return!1}}};var Rl=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(Rl||{}),Dn=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(Dn||{}),vo=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(vo||{}),HB=function(n){return n.websocket="websocket",n}(HB||{}),Nl=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Nl||{});class E_e{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){return e.event!==this.BROADCAST_EVENT||e.payload instanceof ArrayBuffer||"string"!=typeof e.payload.event?t(JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload])):t(this._binaryEncodeUserBroadcastPush(e))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const i=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,r;const i=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:{},s=(new TextEncoder).encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,t,r){var i,o;const s=e.topic,a=null!==(i=e.ref)&&void 0!==i?i:"",c=null!==(o=e.join_ref)&&void 0!==o?o:"",u=e.payload.event,l=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=0===Object.keys(l).length?"":JSON.stringify(l);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const g=new ArrayBuffer(this.HEADER_LENGTH+(this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+u.length+h.length));let b=new DataView(g),C=0;b.setUint8(C++,this.KINDS.userBroadcastPush),b.setUint8(C++,c.length),b.setUint8(C++,a.length),b.setUint8(C++,s.length),b.setUint8(C++,u.length),b.setUint8(C++,h.length),b.setUint8(C++,t),Array.from(c,A=>b.setUint8(C++,A.charCodeAt(0))),Array.from(a,A=>b.setUint8(C++,A.charCodeAt(0))),Array.from(s,A=>b.setUint8(C++,A.charCodeAt(0))),Array.from(u,A=>b.setUint8(C++,A.charCodeAt(0))),Array.from(h,A=>b.setUint8(C++,A.charCodeAt(0)));var I=new Uint8Array(g.byteLength+r.byteLength);return I.set(new Uint8Array(g),0),I.set(new Uint8Array(r),g.byteLength),I.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if("string"==typeof e){const r=JSON.parse(e),[i,o,s,a,c]=r;return t({join_ref:i,ref:o,topic:s,event:a,payload:c})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,i)}_decodeUserBroadcast(e,t,r){const i=t.getUint8(1),o=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(e.slice(c,c+i));c+=i;const l=r.decode(e.slice(c,c+o));c+=o;const h=r.decode(e.slice(c,c+s));c+=s;const f=e.slice(c,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,b={type:this.BROADCAST_EVENT,event:l,payload:g};return s>0&&(b.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=e?.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r))):{}}}class zB{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vt=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(Vt||{});const qB=(n,e,t={})=>{var r;const i=null!==(r=t.skipTypes)&&void 0!==r?r:[];return e?Object.keys(e).reduce((o,s)=>(o[s]=I_e(s,n,e,i),o),{}):{}},I_e=(n,e,t,r)=>{const i=e.find(a=>a.name===n),o=i?.type,s=t[n];return o&&!r.includes(o)?GB(o,s):OA(s)},GB=(n,e)=>{if("_"===n.charAt(0)){const t=n.slice(1,n.length);return A_e(e,t)}switch(n){case Vt.bool:return T_e(e);case Vt.float4:case Vt.float8:case Vt.int2:case Vt.int4:case Vt.int8:case Vt.numeric:case Vt.oid:return P_e(e);case Vt.json:case Vt.jsonb:return M_e(e);case Vt.timestamp:return S_e(e);default:return OA(e)}},OA=n=>n,T_e=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},P_e=n=>{if("string"==typeof n){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},M_e=n=>{if("string"==typeof n)try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},A_e=(n,e)=>{if("string"!=typeof n)return n;const t=n.length-1;if("{"===n[0]&&"}"===n[t]){let o;const s=n.slice(1,t);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>GB(e,a))}return n},S_e=n=>"string"==typeof n?n.replace(" ","T"):n,WB=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname=""===e.pathname||"/"===e.pathname?"/api/broadcast":e.pathname+"/api/broadcast",e.href};class xA{constructor(e,t,r={},i=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class Rf{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rf.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=Rf.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Rf.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const o=this.cloneDeep(e),s=this.transformState(t),a={},c={};return this.map(o,(u,l)=>{s[u]||(c[u]=l)}),this.map(s,(u,l)=>{const h=o[u];if(h){const f=l.map(I=>I.presence_ref),g=h.map(I=>I.presence_ref),b=l.filter(I=>g.indexOf(I.presence_ref)<0),C=h.filter(I=>f.indexOf(I.presence_ref)<0);b.length>0&&(a[u]=b),C.length>0&&(c[u]=C)}else a[u]=l}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:o,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var u;const l=null!==(u=e[a])&&void 0!==u?u:[];if(e[a]=this.cloneDeep(c),l.length>0){const h=e[a].map(g=>g.presence_ref),f=l.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...f)}r(a,l,c)}),this.map(s,(a,c)=>{let u=e[a];if(!u)return;const l=c.map(h=>h.presence_ref);u=u.filter(h=>l.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,c),0===u.length&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return t[r]="metas"in i?i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ey=function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n}(Ey||{}),ta=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(ta||{});class DA{constructor(e,t={config:{}},r){var i,o;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new xA(this,vo.join,this.params,this.timeout),this.rejoinTimer=new zB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vo.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Rf(this),this.broadcastEndpointURL=WB(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(o=null===(i=this.params.config)||void 0===i?void 0:i.broadcast)&&void 0!==o&&o.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,o,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==Dn.closed){const{config:{broadcast:a,presence:c,private:u}}=this.params,l=null!==(o=null===(i=this.bindings.postgres_changes)||void 0===i?void 0:i.map(b=>b.filter))&&void 0!==o?o:[],h=!!this.bindings[Ey.PRESENCE]&&this.bindings[Ey.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),f={},g={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:h}),postgres_changes:l,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(ta.CHANNEL_ERROR,b)),this._onClose(()=>e?.(ta.CLOSED)),this.updateJoinPayload(Object.assign({config:g},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",function(){var b=_(function*({postgres_changes:C}){var I;if(r.socket.setAuth(),void 0!==C){const A=r.bindings.postgres_changes,M=null!==(I=A?.length)&&void 0!==I?I:0,N=[];for(let j=0;j<M;j++){const Q=A[j],{filter:{event:le,schema:x,table:P,filter:S}}=Q,k=C&&C[j];if(!k||k.event!==le||k.schema!==x||k.table!==P||k.filter!==S)return r.unsubscribe(),r.state=Dn.errored,void e?.(ta.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));N.push(Object.assign(Object.assign({},Q),{id:k.id}))}return r.bindings.postgres_changes=N,void(e&&e(ta.SUBSCRIBED))}e?.(ta.SUBSCRIBED)});return function(C){return b.apply(this,arguments)}}()).receive("error",b=>{this.state=Dn.errored,e?.(ta.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(ta.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){var t=this;return _(function*(r,i={}){return yield t.send({type:"presence",event:"track",payload:r},i.timeout||t.timeout)}).apply(this,arguments)}untrack(){var e=this;return _(function*(t={}){return yield e.send({type:"presence",event:"untrack"},t)}).apply(this,arguments)}on(e,t,r){return this.state===Dn.joined&&e===Ey.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}httpSend(e,t){var r=this;return _(function*(i,o,s={}){var a;const c=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==o)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:c,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:i,payload:o,private:r.private}]})},l=yield r._fetchWithTimeout(r.broadcastEndpointURL,u,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===l.status)return{success:!0};let h=l.statusText;try{const f=yield l.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}).apply(this,arguments)}send(e){var t=this;return _(function*(r,i={}){var o,s;if(t._canPush()||"broadcast"!==r.type)return new Promise(a=>{var c,u,l;const h=t._push(r.type,r,i.timeout||t.timeout);"broadcast"===r.type&&!(null!==(l=null===(u=null===(c=t.params)||void 0===c?void 0:c.config)||void 0===u?void 0:u.broadcast)&&void 0!==l&&l.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:c}=r,l={method:"POST",headers:{Authorization:t.socket.accessTokenValue?`Bearer ${t.socket.accessTokenValue}`:"",apikey:t.socket.apiKey?t.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:t.subTopic,event:a,payload:c,private:t.private}]})};try{const h=yield t._fetchWithTimeout(t.broadcastEndpointURL,l,null!==(o=i.timeout)&&void 0!==o?o:t.timeout);return yield null===(s=h.body)||void 0===s?void 0:s.cancel(),h.ok?"ok":"error"}catch(h){return"AbortError"===h.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Dn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new xA(this,vo.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dn.closed,this.bindings={}}_fetchWithTimeout(e,t,r){var i=this;return _(function*(){const o=new AbortController,s=setTimeout(()=>o.abort(),r),a=yield i.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(s),a})()}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new xA(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,o;const s=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=vo;if(r&&[a,c,u,l].indexOf(s)>=0&&r!==this._joinRef())return;let f=this._onMessage(s,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(i=this.bindings.postgres_changes)||void 0===i||i.filter(g=>{var b,C,I;return"*"===(null===(b=g.filter)||void 0===b?void 0:b.event)||(null===(I=null===(C=g.filter)||void 0===C?void 0:C.event)||void 0===I?void 0:I.toLocaleLowerCase())===s}).map(g=>g.callback(f,r)):null===(o=this.bindings[s])||void 0===o||o.filter(g=>{var b,C,I,A,M,N;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in g){const j=g.id,Q=null===(b=g.filter)||void 0===b?void 0:b.event;return j&&(null===(C=t.ids)||void 0===C?void 0:C.includes(j))&&("*"===Q||Q?.toLocaleLowerCase()===(null===(I=t.data)||void 0===I?void 0:I.type.toLocaleLowerCase()))}{const j=null===(M=null===(A=g?.filter)||void 0===A?void 0:A.event)||void 0===M?void 0:M.toLocaleLowerCase();return"*"===j||j===(null===(N=t?.event)||void 0===N?void 0:N.toLocaleLowerCase())}}return g.type.toLocaleLowerCase()===s}).map(g=>{if("object"==typeof f&&"ids"in f){const b=f.data,{schema:C,table:I,commit_timestamp:A,type:M,errors:N}=b;f=Object.assign(Object.assign({},{schema:C,table:I,commit_timestamp:A,eventType:M,new:{},old:{},errors:N}),this._getPayloadRecords(b))}g.callback(f,r)})}_isClosed(){return this.state===Dn.closed}_isJoined(){return this.state===Dn.joined}_isJoining(){return this.state===Dn.joining}_isLeaving(){return this.state===Dn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!((null===(o=i.type)||void 0===o?void 0:o.toLocaleLowerCase())===r&&DA.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vo.close,{},e)}_onError(e){this._on(vo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=qB(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=qB(e.columns,e.old_record)),t}}const kA=()=>{},D_e=[1e3,2e3,5e3,1e4];class N_e{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kA,this.ref=0,this.reconnectTimer=null,this.vsn="1.0.0",this.logger=kA,this.conn=null,this.sendBuffer=[],this.serializer=new E_e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),null===(r=t?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${HB.websocket}`,this.httpEndpoint=WB(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=y_e.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){var t=this;return _(function*(){const r=yield e.unsubscribe();return 0===t.channels.length&&t.disconnect(),r})()}removeAllChannels(){var e=this;return _(function*(){const t=yield Promise.all(e.channels.map(r=>r.unsubscribe()));return e.channels=[],e.disconnect(),t})()}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Rl.connecting:return Nl.Connecting;case Rl.open:return Nl.Open;case Rl.closing:return Nl.Closing;default:return Nl.Closed}}isConnected(){return this.connectionState()===Nl.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new DA(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:i,ref:o}=e,s=()=>{this.encode(e,a=>{var c;null===(c=this.conn)||void 0===c||c.send(a)})};this.log("push",`${t} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var e=this;return _(function*(t=null){e._authPromise=e._performAuth(t);try{yield e._authPromise}finally{e._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var e=this;return _(function*(){var t;if(e.isConnected()){if(e.pendingHeartbeatRef){e.pendingHeartbeatRef=null,e.log("transport","heartbeat timeout. Attempting to re-establish connection");try{e.heartbeatCallback("timeout")}catch(r){e.log("error","error in heartbeat callback",r)}return e._wasManualDisconnect=!1,null===(t=e.conn)||void 0===t||t.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;e.isConnected()||null===(r=e.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}e.pendingHeartbeatRef=e._makeRef(),e.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e.pendingHeartbeatRef});try{e.heartbeatCallback("sent")}catch(r){e.log("error","error in heartbeat callback",r)}e._setAuthSafely("heartbeat")}else try{e.heartbeatCallback("disconnected")}catch(r){e.log("error","error in heartbeat callback",r)}})()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return this.ref=e===this.ref?0:e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if("phoenix"===t.topic&&"phx_reply"===t.event)try{this.heartbeatCallback("ok"===t.payload.status?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:s}=t;this.log("receive",`${o.status||""} ${r} ${i} ${s?`(${s})`:""}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,o,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Rl.open||this.conn.readyState===Rl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{"keepAlive"===t.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vo.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}_performAuth(){var e=this;return _(function*(t=null){let r;r=t||(e.accessToken?yield e.accessToken():e.accessTokenValue),e.accessTokenValue!=r&&(e.accessTokenValue=r,e.channels.forEach(i=>{r&&i.updateJoinPayload({access_token:r,version:"realtime-js/2.86.0"}),i.joinedOnce&&i._isJoined()&&i._push(vo.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var e=this;return _(function*(){e._authPromise&&(yield e._authPromise)})()}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){var e=this;this.reconnectTimer=new zB(_(function*(){setTimeout(_(function*(){yield e._waitForAuthIfNeeded(),e.isConnected()||e.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,o,s,a,c,u,l,h,f,g;switch(this.transport=null!==(t=e?.transport)&&void 0!==t?t:null,this.timeout=null!==(r=e?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(i=e?.heartbeatIntervalMs)&&void 0!==i?i:25e3,this.worker=null!==(o=e?.worker)&&void 0!==o&&o,this.accessToken=null!==(s=e?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=e?.heartbeatCallback)&&void 0!==a?a:kA,this.vsn=null!==(c=e?.vsn)&&void 0!==c?c:"1.0.0",e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(u=e?.reconnectAfterMs)&&void 0!==u?u:b=>D_e[b-1]||1e4,this.vsn){case"1.0.0":this.encode=null!==(l=e?.encode)&&void 0!==l?l:(b,C)=>C(JSON.stringify(b)),this.decode=null!==(h=e?.decode)&&void 0!==h?h:(b,C)=>C(JSON.parse(b));break;case"2.0.0":this.encode=null!==(f=e?.encode)&&void 0!==f?f:this.serializer.encode.bind(this.serializer),this.decode=null!==(g=e?.decode)&&void 0!==g?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Ty extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Yt(n){return"object"==typeof n&&null!==n&&"__isStorageError"in n}class F_e extends Ty{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class RA extends Ty{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const NA=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),FA=n=>{if(Array.isArray(n))return n.map(t=>FA(t));if("function"==typeof n||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=FA(r)}),e},VA=n=>{var e;return n.msg||n.message||n.error_description||("string"==typeof n.error?n.error:null===(e=n.error)||void 0===e?void 0:e.message)||JSON.stringify(n)},j_e=(n,e,t)=>(0,re.__awaiter)(void 0,void 0,void 0,function*(){const r=yield Response;n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const o=n.status||500,s=i?.statusCode||o+"";e(new F_e(VA(i),o,s))}).catch(i=>{e(new RA(VA(i),i))}):e(new RA(VA(n),n))}),$_e=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const e=Object.getPrototypeOf(n);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t)):i};function Nf(n,e,t,r,i,o){return(0,re.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(t,$_e(e,r,i,o)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>j_e(c,a,r))})})}function Ff(n,e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){return Nf(n,"GET",e,t,r)})}function Ui(n,e,t,r,i){return(0,re.__awaiter)(this,void 0,void 0,function*(){return Nf(n,"POST",e,r,i,t)})}function LA(n,e,t,r,i){return(0,re.__awaiter)(this,void 0,void 0,function*(){return Nf(n,"PUT",e,r,i,t)})}function UA(n,e,t,r,i){return(0,re.__awaiter)(this,void 0,void 0,function*(){return Nf(n,"DELETE",e,r,i,t)})}class H_e{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Yt(e))return{data:null,error:e};throw e}})}}var KB;KB=Symbol.toStringTag;const G_e={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},QB={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class W_e{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=NA(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},QB),i);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&"object"==typeof o&&"pipe"in o&&"function"==typeof o.pipe)&&!s.duplex&&(s.duplex="half")),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),l=this._getFinalPath(u),h=yield("PUT"==e?LA:Ui)(this.fetch,`${this.url}/object/${l}`,o,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yt(o))return{data:null,error:o};throw o}})}upload(e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return(0,re.__awaiter)(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:QB.upsert},i),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType),{data:{path:o,fullPath:(yield LA(this.fetch,a.toString(),c,{headers:l})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Yt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const o=yield Ui(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new Ty("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}update(e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}copy(e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield Ui(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Ui(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{const i=yield Ui(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),s=o?`?${o}`:"",a=this._getFinalPath(e);return new class z_e{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[KB]="BlobDownloadBuilder",this.promise=null}asStream(){return new H_e(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Yt(e))return{data:null,error:e};throw e}})}}(()=>Ff(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ff(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:FA(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}exists(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function B_e(n,e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){return Nf(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r)&&r instanceof RA){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],o=t?.download?`download=${!0===t.download?"":t.download}`:"";""!==o&&i.push(o);const a=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});""!==c&&i.push(c);let u=i.join("&");return""!==u&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield UA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}list(e,t,r){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},G_e),t),{prefix:e||""});return{data:yield Ui(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}listV2(e,t){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ui(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const YB={"X-Client-Info":"storage-js/2.86.0"};class K_e{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YB),t),this.fetch=NA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Ff(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ff(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}createBucket(e){return(0,re.__awaiter)(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Ui(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Yt(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield LA(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Yt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield UA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var Vf=class extends Error{constructor(n,e){super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown="CommitStateUnknownException"===e.icebergType||[500,502,504].includes(e.status)&&!0===e.icebergType?.includes("CommitState")}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function jA(){return(jA=_(function*(n){return n&&"none"!==n.type?"bearer"===n.type?{Authorization:`Bearer ${n.token}`}:"header"===n.type?{[n.name]:n.value}:"custom"===n.type?yield n.getHeaders():{}:{}})).apply(this,arguments)}function Py(n){return n.join("\x1f")}function Fl(n){return n.join("\x1f")}class tye{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},YB),t),this.fetch=NA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}listBuckets(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==e?.limit&&t.set("limit",e.limit.toString()),void 0!==e?.offset&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ff(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield UA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Yt(t))return{data:null,error:t};throw t}})}from(e){if(!(n=e)||"string"!=typeof n||0===n.length||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")||!/^[\w!.\*'() &$@=;:+,?-]+$/.test(n))throw new Ty("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");var n;return new class{constructor(n){let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=function Y_e(n){const e=n.fetchImpl??globalThis.fetch;return{request(t){return _(function*({method:r,path:i,query:o,body:s,headers:a}){const c=function Q_e(n,e,t){const r=new URL(e,n);if(t)for(const[i,o]of Object.entries(t))void 0!==o&&r.searchParams.set(i,o);return r.toString()}(n.baseUrl,i,o),u=yield function J_e(n){return jA.apply(this,arguments)}(n.auth),l=yield e(c,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...u,...a},body:s?JSON.stringify(s):void 0}),h=yield l.text(),f=(l.headers.get("content-type")||"").includes("application/json"),g=f&&h?JSON.parse(h):h;if(!l.ok){const b=f?g:void 0,C=b?.error;throw new Vf(C?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:C?.type,icebergCode:C?.code,details:b})}return{status:l.status,headers:l.headers,data:g}}).apply(this,arguments)}}}({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new class{constructor(n,e=""){this.client=n,this.prefix=e}listNamespaces(n){var e=this;return _(function*(){const t=n?{parent:Py(n.namespace)}:void 0;return(yield e.client.request({method:"GET",path:`${e.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))})()}createNamespace(n,e){var t=this;return _(function*(){const r={namespace:n.namespace,properties:e?.properties};return(yield t.client.request({method:"POST",path:`${t.prefix}/namespaces`,body:r})).data})()}dropNamespace(n){var e=this;return _(function*(){yield e.client.request({method:"DELETE",path:`${e.prefix}/namespaces/${Py(n.namespace)}`})})()}loadNamespaceMetadata(n){var e=this;return _(function*(){return{properties:(yield e.client.request({method:"GET",path:`${e.prefix}/namespaces/${Py(n.namespace)}`})).data.properties}})()}namespaceExists(n){var e=this;return _(function*(){try{return yield e.client.request({method:"HEAD",path:`${e.prefix}/namespaces/${Py(n.namespace)}`}),!0}catch(t){if(t instanceof Vf&&404===t.status)return!1;throw t}})()}createNamespaceIfNotExists(n,e){var t=this;return _(function*(){try{return yield t.createNamespace(n,e)}catch(r){if(r instanceof Vf&&409===r.status)return;throw r}})()}}(this.client,e),this.tableOps=new class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}listTables(n){var e=this;return _(function*(){return(yield e.client.request({method:"GET",path:`${e.prefix}/namespaces/${Fl(n.namespace)}/tables`})).data.identifiers})()}createTable(n,e){var t=this;return _(function*(){const r={};return t.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=t.accessDelegation),(yield t.client.request({method:"POST",path:`${t.prefix}/namespaces/${Fl(n.namespace)}/tables`,body:e,headers:r})).data.metadata})()}updateTable(n,e){var t=this;return _(function*(){const r=yield t.client.request({method:"POST",path:`${t.prefix}/namespaces/${Fl(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}})()}dropTable(n,e){var t=this;return _(function*(){yield t.client.request({method:"DELETE",path:`${t.prefix}/namespaces/${Fl(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(e?.purge??!1)}})})()}loadTable(n){var e=this;return _(function*(){const t={};return e.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=e.accessDelegation),(yield e.client.request({method:"GET",path:`${e.prefix}/namespaces/${Fl(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata})()}tableExists(n){var e=this;return _(function*(){const t={};e.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=e.accessDelegation);try{return yield e.client.request({method:"HEAD",path:`${e.prefix}/namespaces/${Fl(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(r){if(r instanceof Vf&&404===r.status)return!1;throw r}})()}createTableIfNotExists(n,e){var t=this;return _(function*(){try{return yield t.createTable(n,e)}catch(r){if(r instanceof Vf&&409===r.status)return yield t.loadTable({namespace:n.namespace,name:e.name});throw r}})()}}(this.client,e,this.accessDelegation)}listNamespaces(n){var e=this;return _(function*(){return e.namespaceOps.listNamespaces(n)})()}createNamespace(n,e){var t=this;return _(function*(){return t.namespaceOps.createNamespace(n,e)})()}dropNamespace(n){var e=this;return _(function*(){yield e.namespaceOps.dropNamespace(n)})()}loadNamespaceMetadata(n){var e=this;return _(function*(){return e.namespaceOps.loadNamespaceMetadata(n)})()}listTables(n){var e=this;return _(function*(){return e.tableOps.listTables(n)})()}createTable(n,e){var t=this;return _(function*(){return t.tableOps.createTable(n,e)})()}updateTable(n,e){var t=this;return _(function*(){return t.tableOps.updateTable(n,e)})()}dropTable(n,e){var t=this;return _(function*(){yield t.tableOps.dropTable(n,e)})()}loadTable(n){var e=this;return _(function*(){return e.tableOps.loadTable(n)})()}namespaceExists(n){var e=this;return _(function*(){return e.namespaceOps.namespaceExists(n)})()}tableExists(n){var e=this;return _(function*(){return e.tableOps.tableExists(n)})()}createNamespaceIfNotExists(n,e){var t=this;return _(function*(){return t.namespaceOps.createNamespaceIfNotExists(n,e)})()}createTableIfNotExists(n,e){var t=this;return _(function*(){return t.tableOps.createTableIfNotExists(n,e)})()}}({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>(0,re.__awaiter)(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const $A={"X-Client-Info":"storage-js/2.86.0","Content-Type":"application/json"};class XB extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function si(n){return"object"==typeof n&&null!==n&&"__isStorageVectorsError"in n}class BA extends XB{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nye extends XB{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}const HA=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),ZB=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),oye=(n,e,t)=>(0,re.__awaiter)(void 0,void 0,void 0,function*(){if(n&&"object"==typeof n&&"status"in n&&"ok"in n&&"number"==typeof n.status&&!t?.noResolveJson){const i=n.status||500,o=n;"function"==typeof o.json?o.json().then(s=>{const a=s?.statusCode||s?.code||i+"";e(new BA(ZB(s),i,a))}).catch(()=>{e(new BA(o.statusText||`HTTP ${i} error`,i,i+""))}):e(new BA(o.statusText||`HTTP ${i} error`,i,i+""))}else e(new nye(ZB(n),n))}),sye=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return"GET"!==n&&r?((n=>{if("object"!=typeof n||null===n)return!1;const e=Object.getPrototypeOf(n);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in n||Symbol.iterator in n)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function ai(n,e,t,r,i){return(0,re.__awaiter)(this,void 0,void 0,function*(){return function My(n,e,t,r,i,o){return(0,re.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(t,sye(e,r,i,o)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;const u=c.headers.get("content-type");return u&&u.includes("application/json")?c.json():{}}).then(c=>s(c)).catch(c=>oye(c,a,r))})})}(n,"POST",e,r,i,t)})}class aye{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$A),t),this.fetch=HA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield ai(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}getIndex(e,t){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ai(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}})}listIndexes(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ai(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield ai(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(si(r))return{data:null,error:r};throw r}})}}class cye{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$A),t),this.fetch=HA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ai(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}getVectors(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ai(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}listVectors(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield ai(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}queryVectors(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ai(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}deleteVectors(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ai(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}}class uye{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$A),t),this.fetch=HA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield ai(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}getBucket(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ai(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}listBuckets(){return(0,re.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield ai(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}deleteBucket(e){return(0,re.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield ai(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(si(t))return{data:null,error:t};throw t}})}}class lye extends uye{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new dye(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return(0,re.__awaiter)(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class dye extends aye{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,re.__awaiter)(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new hye(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class hye extends cye{constructor(e,t,r,i,o){super(e,t,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,re.__awaiter)(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,re.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class fye extends K_e{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new W_e(this.url,this.headers,e,this.fetch)}get vectors(){return new lye(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tye(this.url+"/iceberg",this.headers,this.fetch)}}let Lf="";Lf=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const gye={headers:{"X-Client-Info":`supabase-js-${Lf}/2.86.0`}},mye={schema:"public"},_ye={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yye={},Cye=(n,e,t)=>{const r=(n=>n?(...e)=>n(...e):(...e)=>fetch(...e))(t),i=Headers;return function(){var o=_(function*(s,a){var c;const u=null!==(c=yield e())&&void 0!==c?c:n;let l=new i(a?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},a),{headers:l}))});return function(s,a){return o.apply(this,arguments)}}()},Vl=3e4,GA="X-Supabase-Api-Version",t6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Aye=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Uf extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Pe(n){return"object"==typeof n&&null!==n&&"__isAuthError"in n}class Oye extends Uf{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class pc extends Uf{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class na extends Uf{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class ci extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ll extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ay extends na{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Sy extends na{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class n6 extends na{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class WA extends na{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function KA(n){return Pe(n)&&"AuthRetryableFetchError"===n.name}class r6 extends na{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class QA extends na{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),i6=" \t\n\r=".split(""),Rye=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<i6.length;e+=1)n[i6[e].charCodeAt(0)]=-2;for(let e=0;e<Oy.length;e+=1)n[Oy[e].charCodeAt(0)]=e;return n})();function xy(n,e,t){if(null!==n)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;)t(Oy[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6;else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;)t(Oy[e.queue>>e.queuedBits-6&63]),e.queuedBits-=6}function o6(n,e,t){const r=Rye[n];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8}function s6(n){const e=[],t=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{!function Fye(n,e,t){if(0===e.utf8seq){if(n<=127)return void t(n);for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(2===e.utf8seq)e.codepoint=31&n;else if(3===e.utf8seq)e.codepoint=15&n;else{if(4!==e.utf8seq)throw new Error("Invalid UTF-8 sequence");e.codepoint=7&n}e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|63&n,e.utf8seq-=1,0===e.utf8seq&&t(e.codepoint)}}(s,r,t)};for(let s=0;s<n.length;s+=1)o6(n.charCodeAt(s),i,o);return e.join("")}function Nye(n,e){if(!(n<=127)){if(n<=2047)return e(192|n>>6),void e(128|63&n);if(n<=65535)return e(224|n>>12),e(128|n>>6&63),void e(128|63&n);if(n<=1114111)return e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),void e(128|63&n);throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}e(n)}function Ul(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)o6(n.charCodeAt(i),t,r);return new Uint8Array(e)}function gc(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>xy(i,t,r)),xy(null,t,r),e.join("")}const Wn=()=>typeof window<"u"&&typeof document<"u",mc={tested:!1,writable:!1},c6=()=>{if(!Wn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(mc.tested)return mc.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),mc.tested=!0,mc.writable=!0}catch{mc.tested=!0,mc.writable=!1}return mc.writable},u6=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),$ye=n=>"object"==typeof n&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json,jl=function(){var n=_(function*(e,t,r){yield e.setItem(t,JSON.stringify(r))});return function(t,r,i){return n.apply(this,arguments)}}(),_c=function(){var n=_(function*(e,t){const r=yield e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(t,r){return n.apply(this,arguments)}}(),ra=function(){var n=_(function*(e,t){yield e.removeItem(t)});return function(t,r){return n.apply(this,arguments)}}();class Dy{constructor(){this.promise=new Dy.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function JA(n){const e=n.split(".");if(3!==e.length)throw new QA("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Aye.test(e[r]))throw new QA("JWT not in base64url format");return{header:JSON.parse(s6(e[0])),payload:JSON.parse(s6(e[1])),signature:Ul(e[2]),raw:{header:e[0],payload:e[1]}}}function YA(){return(YA=_(function*(n){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})).apply(this,arguments)}function zye(n){return("0"+n.toString(16)).substr(-2)}function XA(){return(XA=_(function*(n){const t=(new TextEncoder).encode(n),r=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")})).apply(this,arguments)}function ZA(){return ZA=_(function*(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=yield function Gye(n){return XA.apply(this,arguments)}(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),ZA.apply(this,arguments)}function $l(n,e){return eS.apply(this,arguments)}function eS(){return eS=_(function*(n,e,t=!1){const r=function qye(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,zye).join("")}();let i=r;t&&(i+="/PASSWORD_RECOVERY"),yield jl(n,`${e}-code-verifier`,i);const o=yield function Wye(n){return ZA.apply(this,arguments)}(r);return[o,r===o?"plain":"s256"]}),eS.apply(this,arguments)}Dy.promiseConstructor=Promise;const Kye=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,Xye=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bl(n){if(!Xye.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tS(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function l6(n){return JSON.parse(JSON.stringify(n))}const yc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),eve=[502,503,504];function d6(n){return nS.apply(this,arguments)}function nS(){return(nS=_(function*(n){var e;if(!$ye(n))throw new WA(yc(n),0);if(eve.includes(n.status))throw new WA(yc(n),n.status);let t,r;try{t=yield n.json()}catch(o){throw new pc(yc(o),o)}const i=function Qye(n){const e=n.headers.get(GA);if(!e||!e.match(Kye))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}(n);if(i&&i.getTime()>=t6["2024-01-01"].timestamp&&"object"==typeof t&&t&&"string"==typeof t.code?r=t.code:"object"==typeof t&&t&&"string"==typeof t.error_code&&(r=t.error_code),r){if("weak_password"===r)throw new r6(yc(t),n.status,(null===(e=t.weak_password)||void 0===e?void 0:e.reasons)||[]);if("session_not_found"===r)throw new ci}else if("object"==typeof t&&t&&"object"==typeof t.weak_password&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,s)=>o&&"string"==typeof s,!0))throw new r6(yc(t),n.status,t.weak_password.reasons);throw new Oye(yc(t),n.status||500,r)})).apply(this,arguments)}const tve=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return"GET"===n?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function xe(n,e,t,r){return rS.apply(this,arguments)}function rS(){return rS=_(function*(n,e,t,r){var i;const o=Object.assign({},r?.headers);o[GA]||(o[GA]=t6["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const s=null!==(i=r?.query)&&void 0!==i?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=yield function nve(n,e,t,r,i,o){return iS.apply(this,arguments)}(n,e,t+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}),rS.apply(this,arguments)}function iS(){return(iS=_(function*(n,e,t,r,i,o){const s=tve(e,r,i,o);let a;try{a=yield n(t,Object.assign({},s))}catch(c){throw console.error(c),new WA(yc(c),0)}if(a.ok||(yield d6(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield d6(c)}})).apply(this,arguments)}function ji(n){var e;let t=null;return function ove(n){return n.access_token&&n.refresh_token&&n.expires_in}(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=function Lye(n){return Math.round(Date.now()/1e3)+n}(n.expires_in))),{data:{session:t,user:null!==(e=n.user)&&void 0!==e?e:n},error:null}}function h6(n){const e=ji(n);return!e.error&&n.weak_password&&"object"==typeof n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&"string"==typeof n.weak_password.message&&n.weak_password.reasons.reduce((t,r)=>t&&"string"==typeof r,!0)&&(e.data.weak_password=n.weak_password),e}function ia(n){var e;return{data:{user:null!==(e=n.user)&&void 0!==e?e:n},error:null}}function rve(n){return{data:n,error:null}}function ive(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o}=n,s=(0,re.__rest)(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o},user:Object.assign({},s)},error:null}}function f6(n){return n}const oS=["global","local","others"];class sve{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=u6(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(e){var t=this;return _(function*(r,i=oS[0]){if(oS.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oS.join(", ")}`);try{return yield xe(t.fetch,"POST",`${t.url}/logout?scope=${i}`,{headers:t.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Pe(o))return{data:null,error:o};throw o}}).apply(this,arguments)}inviteUserByEmail(e){var t=this;return _(function*(r,i={}){try{return yield xe(t.fetch,"POST",`${t.url}/invite`,{body:{email:r,data:i.data},headers:t.headers,redirectTo:i.redirectTo,xform:ia})}catch(o){if(Pe(o))return{data:{user:null},error:o};throw o}}).apply(this,arguments)}generateLink(e){var t=this;return _(function*(){try{const{options:r}=e,i=(0,re.__rest)(e,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),yield xe(t.fetch,"POST",`${t.url}/admin/generate_link`,{body:o,headers:t.headers,xform:ive,redirectTo:r?.redirectTo})}catch(r){if(Pe(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(e){var t=this;return _(function*(){try{return yield xe(t.fetch,"POST",`${t.url}/admin/users`,{body:e,headers:t.headers,xform:ia})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}})()}listUsers(e){var t=this;return _(function*(){var r,i,o,s,a,c,u;try{const l={nextPage:null,lastPage:0,total:0},h=yield xe(t.fetch,"GET",`${t.url}/admin/users`,{headers:t.headers,noResolveJson:!0,query:{page:null!==(i=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==i?i:"",per_page:null!==(s=null===(o=e?.perPage)||void 0===o?void 0:o.toString())&&void 0!==s?s:""},xform:f6});if(h.error)throw h.error;const f=yield h.json(),g=null!==(a=h.headers.get("x-total-count"))&&void 0!==a?a:0,b=null!==(u=null===(c=h.headers.get("link"))||void 0===c?void 0:c.split(","))&&void 0!==u?u:[];return b.length>0&&(b.forEach(C=>{const I=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);l[`${A}Page`]=I}),l.total=parseInt(g)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Pe(l))return{data:{users:[]},error:l};throw l}})()}getUserById(e){var t=this;return _(function*(){Bl(e);try{return yield xe(t.fetch,"GET",`${t.url}/admin/users/${e}`,{headers:t.headers,xform:ia})}catch(r){if(Pe(r))return{data:{user:null},error:r};throw r}})()}updateUserById(e,t){var r=this;return _(function*(){Bl(e);try{return yield xe(r.fetch,"PUT",`${r.url}/admin/users/${e}`,{body:t,headers:r.headers,xform:ia})}catch(i){if(Pe(i))return{data:{user:null},error:i};throw i}})()}deleteUser(e){var t=this;return _(function*(r,i=!1){Bl(r);try{return yield xe(t.fetch,"DELETE",`${t.url}/admin/users/${r}`,{headers:t.headers,body:{should_soft_delete:i},xform:ia})}catch(o){if(Pe(o))return{data:{user:null},error:o};throw o}}).apply(this,arguments)}_listFactors(e){var t=this;return _(function*(){Bl(e.userId);try{const{data:r,error:i}=yield xe(t.fetch,"GET",`${t.url}/admin/users/${e.userId}/factors`,{headers:t.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})()}_deleteFactor(e){var t=this;return _(function*(){Bl(e.userId),Bl(e.id);try{return{data:yield xe(t.fetch,"DELETE",`${t.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:t.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})()}_listOAuthClients(e){var t=this;return _(function*(){var r,i,o,s,a,c,u;try{const l={nextPage:null,lastPage:0,total:0},h=yield xe(t.fetch,"GET",`${t.url}/admin/oauth/clients`,{headers:t.headers,noResolveJson:!0,query:{page:null!==(i=null===(r=e?.page)||void 0===r?void 0:r.toString())&&void 0!==i?i:"",per_page:null!==(s=null===(o=e?.perPage)||void 0===o?void 0:o.toString())&&void 0!==s?s:""},xform:f6});if(h.error)throw h.error;const f=yield h.json(),g=null!==(a=h.headers.get("x-total-count"))&&void 0!==a?a:0,b=null!==(u=null===(c=h.headers.get("link"))||void 0===c?void 0:c.split(","))&&void 0!==u?u:[];return b.length>0&&(b.forEach(C=>{const I=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);l[`${A}Page`]=I}),l.total=parseInt(g)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Pe(l))return{data:{clients:[]},error:l};throw l}})()}_createOAuthClient(e){var t=this;return _(function*(){try{return yield xe(t.fetch,"POST",`${t.url}/admin/oauth/clients`,{body:e,headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}})()}_getOAuthClient(e){var t=this;return _(function*(){try{return yield xe(t.fetch,"GET",`${t.url}/admin/oauth/clients/${e}`,{headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}})()}_updateOAuthClient(e,t){var r=this;return _(function*(){try{return yield xe(r.fetch,"PUT",`${r.url}/admin/oauth/clients/${e}`,{body:t,headers:r.headers,xform:i=>({data:i,error:null})})}catch(i){if(Pe(i))return{data:null,error:i};throw i}})()}_deleteOAuthClient(e){var t=this;return _(function*(){try{return yield xe(t.fetch,"DELETE",`${t.url}/admin/oauth/clients/${e}`,{headers:t.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(e){var t=this;return _(function*(){try{return yield xe(t.fetch,"POST",`${t.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:t.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pe(r))return{data:null,error:r};throw r}})()}}function p6(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Hl={debug:!!(globalThis&&c6()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class g6 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ave extends g6{}function uve(n,e,t){return sS.apply(this,arguments)}function sS(){return sS=_(function*(n,e,t){Hl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Hl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var i=_(function*(o){if(!o){if(0===e)throw Hl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ave(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Hl.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}Hl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return yield t()}finally{Hl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}});return function(o){return i.apply(this,arguments)}}()))}),sS.apply(this,arguments)}function _6(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function hve(n){const e=(new TextEncoder).encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}class yn extends Error{constructor({message:e,code:t,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(o=i??(r instanceof Error?r.name:void 0))&&void 0!==o?o:"Unknown Error",this.code=t}}class ky extends yn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function pve({error:n,options:e}){var t,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(e.signal instanceof AbortSignal)return new yn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("ConstraintError"===n.name){if(!0===(null===(t=o.authenticatorSelection)||void 0===t?void 0:t.requireResidentKey))return new yn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if("conditional"===e.mediation&&"required"===(null===(r=o.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new yn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if("required"===(null===(i=o.authenticatorSelection)||void 0===i?void 0:i.userVerification))return new yn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if("InvalidStateError"===n.name)return new yn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if("NotAllowedError"===n.name)return new yn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("NotSupportedError"===n.name)return 0===o.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new yn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new yn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if("SecurityError"===n.name){const s=window.location.hostname;if(!y6(s))return new yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(o.rp.id!==s)return new yn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("TypeError"===n.name){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new yn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if("UnknownError"===n.name)return new yn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function gve({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(e.signal instanceof AbortSignal)return new yn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if("NotAllowedError"===n.name)return new yn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if("SecurityError"===n.name){const r=window.location.hostname;if(!y6(r))return new yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n});if(t.rpId!==r)return new yn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else if("UnknownError"===n.name)return new yn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}const _ve=new class mve{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function yve(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=(0,re.__rest)(n,["challenge","user","excludeCredentials"]),o=Ul(e).buffer,s=Object.assign(Object.assign({},t),{id:Ul(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Ul(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function vve(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=(0,re.__rest)(n,["challenge","allowCredentials"]),i=Ul(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let s=0;s<t.length;s++){const a=t[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Ul(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function bve(n){var e;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:gc(new Uint8Array(n.response.attestationObject)),clientDataJSON:gc(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:null!==(e=t.authenticatorAttachment)&&void 0!==e?e:void 0}}function Cve(n){var e;if("toJSON"in n&&"function"==typeof n.toJSON)return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:gc(new Uint8Array(i.authenticatorData)),clientDataJSON:gc(new Uint8Array(i.clientDataJSON)),signature:gc(new Uint8Array(i.signature)),userHandle:i.userHandle?gc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(e=t.authenticatorAttachment)&&void 0!==e?e:void 0}}function y6(n){return"localhost"===n||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function v6(){var n,e;return!!(Wn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.create)&&"function"==typeof(null===(e=navigator?.credentials)||void 0===e?void 0:e.get))}function cS(){return(cS=_(function*(n){try{const e=yield navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ky("Browser returned unexpected credential type",e)}:{data:null,error:new ky("Empty credential response",e)}}catch(e){return{data:null,error:pve({error:e,options:n})}}})).apply(this,arguments)}function uS(){return(uS=_(function*(n){try{const e=yield navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ky("Browser returned unexpected credential type",e)}:{data:null,error:new ky("Empty credential response",e)}}catch(e){return{data:null,error:gve({error:e,options:n})}}})).apply(this,arguments)}const Ive={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Tve={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ry(...n){const e=i=>null!==i&&"object"==typeof i&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const o in i){const s=i[o];if(void 0!==s)if(Array.isArray(s))r[o]=s;else if(t(s))r[o]=s;else if(e(s)){const a=r[o];r[o]=e(a)?Ry(a,s):Ry(s)}else r[o]=s}return r}class Ave{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){var t=this;return _(function*(){return t.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})()}_challenge(e,t){var r=this;return _(function*({factorId:i,webauthn:o,friendlyName:s,signal:a},c){try{const{data:u,error:l}=yield r.client.mfa.challenge({factorId:i,webauthn:o});if(!u)return{data:null,error:l};const h=a??_ve.createNewAbortSignal();if("create"===u.webauthn.type){const{user:f}=u.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${s}`),f.displayName||(f.displayName=f.name)}switch(u.webauthn.type){case"create":{const f=function Pve(n,e){return Ry(Ive,n,e||{})}(u.webauthn.credential_options.publicKey,c?.create),{data:g,error:b}=yield function wve(n){return cS.apply(this,arguments)}({publicKey:f,signal:h});return g?{data:{factorId:i,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:b}}case"request":{const f=function Mve(n,e){return Ry(Tve,n,e||{})}(u.webauthn.credential_options.publicKey,c?.request),{data:g,error:b}=yield function Eve(n){return uS.apply(this,arguments)}(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:f,signal:h}));return g?{data:{factorId:i,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:b}}}}catch(u){return Pe(u)?{data:null,error:u}:{data:null,error:new pc("Unexpected error in challenge",u)}}}).apply(this,arguments)}_verify(e){var t=this;return _(function*({challengeId:r,factorId:i,webauthn:o}){return t.client.mfa.verify({factorId:i,challengeId:r,webauthn:o})}).apply(this,arguments)}_authenticate(e,t){var r=this;return _(function*({factorId:i,webauthn:{rpId:o=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}={}},c){if(!o)return{data:null,error:new Uf("rpId is required for WebAuthn authentication")};try{if(!v6())return{data:null,error:new pc("Browser does not support WebAuthn",null)};const{data:u,error:l}=yield r.challenge({factorId:i,webauthn:{rpId:o,rpOrigins:s},signal:a},{request:c});if(!u)return{data:null,error:l};const{webauthn:h}=u;return r._verify({factorId:i,challengeId:u.challengeId,webauthn:{type:h.type,rpId:o,rpOrigins:s,credential_response:h.credential_response}})}catch(u){return Pe(u)?{data:null,error:u}:{data:null,error:new pc("Unexpected error in authenticate",u)}}}).apply(this,arguments)}_register(e,t){var r=this;return _(function*({friendlyName:i,webauthn:{rpId:o=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}={}},c){if(!o)return{data:null,error:new Uf("rpId is required for WebAuthn registration")};try{if(!v6())return{data:null,error:new pc("Browser does not support WebAuthn",null)};const{data:u,error:l}=yield r._enroll({friendlyName:i});if(!u)return yield r.client.mfa.listFactors().then(g=>{var b;return null===(b=g.data)||void 0===b?void 0:b.all.find(C=>"webauthn"===C.factor_type&&C.friendly_name===i&&"unverified"!==C.status)}).then(g=>g?r.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:l};const{data:h,error:f}=yield r._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:o,rpOrigins:s},signal:a},{create:c});return h?r._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:o,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(u){return Pe(u)?{data:null,error:u}:{data:null,error:new pc("Unexpected error in register",u)}}}).apply(this,arguments)}}!function lve(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const Sve={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.86.0"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function b6(n,e,t){return lS.apply(this,arguments)}function lS(){return(lS=_(function*(n,e,t){return yield t()})).apply(this,arguments)}const zl={},xve=(()=>{class n{get jwks(){var t,r;return null!==(r=null===(t=zl[this.storageKey])||void 0===t?void 0:t.jwks)&&void 0!==r?r:{keys:[]}}set jwks(t){zl[this.storageKey]=Object.assign(Object.assign({},zl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return null!==(r=null===(t=zl[this.storageKey])||void 0===t?void 0:t.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){zl[this.storageKey]=Object.assign(Object.assign({},zl[this.storageKey]),{cachedAt:t})}constructor(t){var i,o,s,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Sve),t);if(this.storageKey=a.storageKey,this.instanceID=null!==(i=n.nextInstanceID[this.storageKey])&&void 0!==i?i:0,n.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"==typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&Wn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new sve({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=u6(a.fetch),this.lock=a.lock||b6,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lock=a.lock?a.lock:Wn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?uve:b6,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ave(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:c6()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=p6(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=p6(this.memoryStorage)),Wn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",function(){var c=_(function*(u){r._debug("received broadcast notification from other tab or client",u),yield r._notifyAllSubscribers(u.data.event,u.data.session,!1)});return function(u){return c.apply(this,arguments)}}())}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (2.86.0) ${(new Date).toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){var t=this;return _(function*(){return t.initializePromise||(t.initializePromise=_(function*(){return yield t._acquireLock(-1,_(function*(){return yield t._initialize()}))})()),yield t.initializePromise})()}_initialize(){var t=this;return _(function*(){var r;try{let i={},o="none";if(Wn()&&(i=function jye(n){const e={},t=new URL(n);if(t.hash&&"#"===t.hash[0])try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}(window.location.href),t._isImplicitGrantCallback(i)?o="implicit":(yield t._isPKCECallback(i))&&(o="pkce")),Wn()&&t.detectSessionInUrl&&"none"!==o){const{data:s,error:a}=yield t._getSessionFromURL(i,o);if(a){if(t._debug("#_initialize()","error detecting session from URL",a),function kye(n){return Pe(n)&&"AuthImplicitGrantRedirectError"===n.name}(a)){const l=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===l||"identity_not_found"===l||"single_identity_not_deletable"===l)return{error:a}}return yield t._removeSession(),{error:a}}const{session:c,redirectType:u}=s;return t._debug("#_initialize()","detected session in URL",c,"redirect type",u),yield t._saveSession(c),setTimeout(_(function*(){"recovery"===u?yield t._notifyAllSubscribers("PASSWORD_RECOVERY",c):yield t._notifyAllSubscribers("SIGNED_IN",c)}),0),{error:null}}return yield t._recoverAndRefresh(),{error:null}}catch(i){return Pe(i)?t._returnResult({error:i}):t._returnResult({error:new pc("Unexpected error during initialization",i)})}finally{yield t._handleVisibilityChange(),t._debug("#_initialize()","end")}})()}signInAnonymously(t){var r=this;return _(function*(){var i,o,s;try{const a=yield xe(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(o=null===(i=t?.options)||void 0===i?void 0:i.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:null===(s=t?.options)||void 0===s?void 0:s.captchaToken}},xform:ji}),{data:c,error:u}=a;if(u||!c)return r._returnResult({data:{user:null,session:null},error:u});const l=c.session,h=c.user;return c.session&&(yield r._saveSession(c.session),yield r._notifyAllSubscribers("SIGNED_IN",l)),r._returnResult({data:{user:h,session:l},error:null})}catch(a){if(Pe(a))return r._returnResult({data:{user:null,session:null},error:a});throw a}})()}signUp(t){var r=this;return _(function*(){var i,o,s;try{let a;if("email"in t){const{email:f,password:g,options:b}=t;let C=null,I=null;"pkce"===r.flowType&&([C,I]=yield $l(r.storage,r.storageKey)),a=yield xe(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:b?.emailRedirectTo,body:{email:f,password:g,data:null!==(i=b?.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:C,code_challenge_method:I},xform:ji})}else{if(!("phone"in t))throw new Ay("You must provide either an email or phone number and a password");{const{phone:f,password:g,options:b}=t;a=yield xe(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:f,password:g,data:null!==(o=b?.data)&&void 0!==o?o:{},channel:null!==(s=b?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:ji})}}const{data:c,error:u}=a;if(u||!c)return r._returnResult({data:{user:null,session:null},error:u});const l=c.session,h=c.user;return c.session&&(yield r._saveSession(c.session),yield r._notifyAllSubscribers("SIGNED_IN",l)),r._returnResult({data:{user:h,session:l},error:null})}catch(a){if(Pe(a))return r._returnResult({data:{user:null,session:null},error:a});throw a}})()}signInWithPassword(t){var r=this;return _(function*(){try{let i;if("email"in t){const{email:a,password:c,options:u}=t;i=yield xe(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:h6})}else{if(!("phone"in t))throw new Ay("You must provide either an email or phone number and a password");{const{phone:a,password:c,options:u}=t;i=yield xe(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:h6})}}const{data:o,error:s}=i;if(s)return r._returnResult({data:{user:null,session:null},error:s});if(!o||!o.session||!o.user){const a=new Ll;return r._returnResult({data:{user:null,session:null},error:a})}return o.session&&(yield r._saveSession(o.session),yield r._notifyAllSubscribers("SIGNED_IN",o.session)),r._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:s})}catch(i){if(Pe(i))return r._returnResult({data:{user:null,session:null},error:i});throw i}})()}signInWithOAuth(t){var r=this;return _(function*(){var i,o,s,a;return yield r._handleProviderSignIn(t.provider,{redirectTo:null===(i=t.options)||void 0===i?void 0:i.redirectTo,scopes:null===(o=t.options)||void 0===o?void 0:o.scopes,queryParams:null===(s=t.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=t.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(t){var r=this;return _(function*(){return yield r.initializePromise,r._acquireLock(-1,_(function*(){return r._exchangeCodeForSession(t)}))})()}signInWithWeb3(t){var r=this;return _(function*(){const{chain:i}=t;switch(i){case"ethereum":return yield r.signInWithEthereum(t);case"solana":return yield r.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}})()}signInWithEthereum(t){var r=this;return _(function*(){var i,o,s,a,c,u,l,h,f,g,b;let C,I;if("message"in t)C=t.message,I=t.signature;else{const{wallet:M,statement:N,options:j}=t;let Q;if(Wn())if("object"==typeof M)Q=M;else{const R=window;if(!("ethereum"in R)||"object"!=typeof R.ethereum||!("request"in R.ethereum)||"function"!=typeof R.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");Q=R.ethereum}else{if("object"!=typeof M||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=M}const le=new URL(null!==(i=j?.url)&&void 0!==i?i:window.location.href),x=yield Q.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||0===x.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=_6(x[0]);let S=null===(o=j?.signInWithEthereum)||void 0===o?void 0:o.chainId;S||(S=function dve(n){return parseInt(n,16)}(yield Q.request({method:"eth_chainId"}))),C=function fve(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:u,scheme:l,uri:h,version:f}=n;if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==f)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(null!==(e=n.statement)&&void 0!==e&&e.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`);const I=`${l?`${l}://${r}`:r} wants you to sign in with your Ethereum account:\n${_6(n.address)}\n\n${n.statement?`${n.statement}\n`:""}`;let A=`URI: ${h}\nVersion: ${f}\nChain ID: ${t}${s?`\nNonce: ${s}`:""}\nIssued At: ${o.toISOString()}`;if(i&&(A+=`\nExpiration Time: ${i.toISOString()}`),a&&(A+=`\nNot Before: ${a.toISOString()}`),c&&(A+=`\nRequest ID: ${c}`),u){let M="\nResources:";for(const N of u){if(!N||"string"!=typeof N)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);M+=`\n- ${N}`}A+=M}return`${I}\n${A}`}({domain:le.host,address:P,statement:N,uri:le.href,version:"1",chainId:S,nonce:null===(s=j?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(c=null===(a=j?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==c?c:new Date,expirationTime:null===(u=j?.signInWithEthereum)||void 0===u?void 0:u.expirationTime,notBefore:null===(l=j?.signInWithEthereum)||void 0===l?void 0:l.notBefore,requestId:null===(h=j?.signInWithEthereum)||void 0===h?void 0:h.requestId,resources:null===(f=j?.signInWithEthereum)||void 0===f?void 0:f.resources}),I=yield Q.request({method:"personal_sign",params:[hve(C),P]})}try{const{data:A,error:M}=yield xe(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:C,signature:I},null!==(g=t.options)&&void 0!==g&&g.captchaToken?{gotrue_meta_security:{captcha_token:null===(b=t.options)||void 0===b?void 0:b.captchaToken}}:null),xform:ji});if(M)throw M;if(!A||!A.session||!A.user){const N=new Ll;return r._returnResult({data:{user:null,session:null},error:N})}return A.session&&(yield r._saveSession(A.session),yield r._notifyAllSubscribers("SIGNED_IN",A.session)),r._returnResult({data:Object.assign({},A),error:M})}catch(A){if(Pe(A))return r._returnResult({data:{user:null,session:null},error:A});throw A}})()}signInWithSolana(t){var r=this;return _(function*(){var i,o,s,a,c,u,l,h,f,g,b,C;let I,A;if("message"in t)I=t.message,A=t.signature;else{const{wallet:N,statement:j,options:Q}=t;let le;if(Wn())if("object"==typeof N)le=N;else{const P=window;if(!("solana"in P)||"object"!=typeof P.solana||!("signIn"in P.solana&&"function"==typeof P.solana.signIn||"signMessage"in P.solana&&"function"==typeof P.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");le=P.solana}else{if("object"!=typeof N||!Q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");le=N}const x=new URL(null!==(i=Q?.url)&&void 0!==i?i:window.location.href);if("signIn"in le&&le.signIn){const P=yield le.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},Q?.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),j?{statement:j}:null));let S;if(Array.isArray(P)&&P[0]&&"object"==typeof P[0])S=P[0];else{if(!(P&&"object"==typeof P&&"signedMessage"in P&&"signature"in P))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");S=P}if(!("signedMessage"in S&&"signature"in S&&("string"==typeof S.signedMessage||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");I="string"==typeof S.signedMessage?S.signedMessage:(new TextDecoder).decode(S.signedMessage),A=S.signature}else{if(!("signMessage"in le&&"function"==typeof le.signMessage&&"publicKey"in le&&"object"==typeof le&&le.publicKey&&"toBase58"in le.publicKey&&"function"==typeof le.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${x.host} wants you to sign in with your Solana account:`,le.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${null!==(s=null===(o=Q?.signInWithSolana)||void 0===o?void 0:o.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=Q?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${Q.signInWithSolana.notBefore}`]:[],...null!==(c=Q?.signInWithSolana)&&void 0!==c&&c.expirationTime?[`Expiration Time: ${Q.signInWithSolana.expirationTime}`]:[],...null!==(u=Q?.signInWithSolana)&&void 0!==u&&u.chainId?[`Chain ID: ${Q.signInWithSolana.chainId}`]:[],...null!==(l=Q?.signInWithSolana)&&void 0!==l&&l.nonce?[`Nonce: ${Q.signInWithSolana.nonce}`]:[],...null!==(h=Q?.signInWithSolana)&&void 0!==h&&h.requestId?[`Request ID: ${Q.signInWithSolana.requestId}`]:[],...null!==(g=null===(f=Q?.signInWithSolana)||void 0===f?void 0:f.resources)&&void 0!==g&&g.length?["Resources",...Q.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join("\n");const P=yield le.signMessage((new TextEncoder).encode(I),"utf8");if(!(P&&P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=P}}try{const{data:M,error:N}=yield xe(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:I,signature:gc(A)},null!==(b=t.options)&&void 0!==b&&b.captchaToken?{gotrue_meta_security:{captcha_token:null===(C=t.options)||void 0===C?void 0:C.captchaToken}}:null),xform:ji});if(N)throw N;if(!M||!M.session||!M.user){const j=new Ll;return r._returnResult({data:{user:null,session:null},error:j})}return M.session&&(yield r._saveSession(M.session),yield r._notifyAllSubscribers("SIGNED_IN",M.session)),r._returnResult({data:Object.assign({},M),error:N})}catch(M){if(Pe(M))return r._returnResult({data:{user:null,session:null},error:M});throw M}})()}_exchangeCodeForSession(t){var r=this;return _(function*(){const i=yield _c(r.storage,`${r.storageKey}-code-verifier`),[o,s]=(i??"").split("/");try{const{data:a,error:c}=yield xe(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:t,code_verifier:o},xform:ji});if(yield ra(r.storage,`${r.storageKey}-code-verifier`),c)throw c;if(!a||!a.session||!a.user){const u=new Ll;return r._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),r._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:c})}catch(a){if(Pe(a))return r._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}})()}signInWithIdToken(t){var r=this;return _(function*(){try{const{options:i,provider:o,token:s,access_token:a,nonce:c}=t,u=yield xe(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:o,id_token:s,access_token:a,nonce:c,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:ji}),{data:l,error:h}=u;if(h)return r._returnResult({data:{user:null,session:null},error:h});if(!l||!l.session||!l.user){const f=new Ll;return r._returnResult({data:{user:null,session:null},error:f})}return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",l.session)),r._returnResult({data:l,error:h})}catch(i){if(Pe(i))return r._returnResult({data:{user:null,session:null},error:i});throw i}})()}signInWithOtp(t){var r=this;return _(function*(){var i,o,s,a,c;try{if("email"in t){const{email:u,options:l}=t;let h=null,f=null;"pkce"===r.flowType&&([h,f]=yield $l(r.storage,r.storageKey));const{error:g}=yield xe(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:u,data:null!==(i=l?.data)&&void 0!==i?i:{},create_user:null===(o=l?.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:l?.emailRedirectTo});return r._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:u,options:l}=t,{data:h,error:f}=yield xe(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:u,data:null!==(s=l?.data)&&void 0!==s?s:{},create_user:null===(a=l?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:null!==(c=l?.channel)&&void 0!==c?c:"sms"}});return r._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:f})}throw new Ay("You must provide either an email or phone number.")}catch(u){if(Pe(u))return r._returnResult({data:{user:null,session:null},error:u});throw u}})()}verifyOtp(t){var r=this;return _(function*(){var i,o;try{let s,a;"options"in t&&(s=null===(i=t.options)||void 0===i?void 0:i.redirectTo,a=null===(o=t.options)||void 0===o?void 0:o.captchaToken);const{data:c,error:u}=yield xe(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:ji});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const l=c.session,h=c.user;return l?.access_token&&(yield r._saveSession(l),yield r._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",l)),r._returnResult({data:{user:h,session:l},error:null})}catch(s){if(Pe(s))return r._returnResult({data:{user:null,session:null},error:s});throw s}})()}signInWithSSO(t){var r=this;return _(function*(){var i,o,s,a,c;try{let u=null,l=null;"pkce"===r.flowType&&([u,l]=yield $l(r.storage,r.storageKey));const h=yield xe(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(o=null===(i=t.options)||void 0===i?void 0:i.redirectTo)&&void 0!==o?o:void 0}),null!==(s=t?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:l}),headers:r.headers,xform:rve});return!(null===(a=h.data)||void 0===a)&&a.url&&Wn()&&!(null!==(c=t.options)&&void 0!==c&&c.skipBrowserRedirect)&&window.location.assign(h.data.url),r._returnResult(h)}catch(u){if(Pe(u))return r._returnResult({data:null,error:u});throw u}})()}reauthenticate(){var t=this;return _(function*(){return yield t.initializePromise,yield t._acquireLock(-1,_(function*(){return yield t._reauthenticate()}))})()}_reauthenticate(){var t=this;return _(function*(){try{return yield t._useSession(function(){var r=_(function*(i){const{data:{session:o},error:s}=i;if(s)throw s;if(!o)throw new ci;const{error:a}=yield xe(t.fetch,"GET",`${t.url}/reauthenticate`,{headers:t.headers,jwt:o.access_token});return t._returnResult({data:{user:null,session:null},error:a})});return function(i){return r.apply(this,arguments)}}())}catch(r){if(Pe(r))return t._returnResult({data:{user:null,session:null},error:r});throw r}})()}resend(t){var r=this;return _(function*(){try{const i=`${r.url}/resend`;if("email"in t){const{email:o,type:s,options:a}=t,{error:c}=yield xe(r.fetch,"POST",i,{headers:r.headers,body:{email:o,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return r._returnResult({data:{user:null,session:null},error:c})}if("phone"in t){const{phone:o,type:s,options:a}=t,{data:c,error:u}=yield xe(r.fetch,"POST",i,{headers:r.headers,body:{phone:o,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return r._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new Ay("You must provide either an email or phone number and a type")}catch(i){if(Pe(i))return r._returnResult({data:{user:null,session:null},error:i});throw i}})()}getSession(){var t=this;return _(function*(){return yield t.initializePromise,yield t._acquireLock(-1,_(function*(){return t._useSession(function(){var i=_(function*(o){return o});return function(o){return i.apply(this,arguments)}}())}))})()}_acquireLock(t,r){var i=this;return _(function*(){i._debug("#_acquireLock","begin",t);try{if(i.lockAcquired){const o=i.pendingInLock.length?i.pendingInLock[i.pendingInLock.length-1]:Promise.resolve(),s=_(function*(){return yield o,yield r()})();return i.pendingInLock.push(_(function*(){try{yield s}catch{}})()),s}return yield i.lock(`lock:${i.storageKey}`,t,_(function*(){i._debug("#_acquireLock","lock acquired for storage key",i.storageKey);try{i.lockAcquired=!0;const o=r();for(i.pendingInLock.push(_(function*(){try{yield o}catch{}})()),yield o;i.pendingInLock.length;){const s=[...i.pendingInLock];yield Promise.all(s),i.pendingInLock.splice(0,s.length)}return yield o}finally{i._debug("#_acquireLock","lock released for storage key",i.storageKey),i.lockAcquired=!1}}))}finally{i._debug("#_acquireLock","end")}})()}_useSession(t){var r=this;return _(function*(){r._debug("#_useSession","begin");try{const i=yield r.__loadSession();return yield t(i)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var t=this;return _(function*(){t._debug("#__loadSession()","begin"),t.lockAcquired||t._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const i=yield _c(t.storage,t.storageKey);if(t._debug("#getSession()","session from storage",i),null!==i&&(t._isValidSession(i)?r=i:(t._debug("#getSession()","session from storage is not valid"),yield t._removeSession())),!r)return{data:{session:null},error:null};const o=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(t._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(t.userStorage){const c=yield _c(t.userStorage,t.storageKey+"-user");r.user=c?.user?c.user:tS()}if(t.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const c={value:t.suppressGetSessionWarning};r.user=function Zye(n,e){return new Proxy(n,{get:(t,r,i)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"==typeof r){const o=r.toString();if("Symbol(Symbol.toPrimitive)"===o||"Symbol(Symbol.toStringTag)"===o||"Symbol(util.inspect.custom)"===o||"Symbol(nodejs.util.inspect.custom)"===o)return Reflect.get(t,r,i)}return!e.value&&"string"==typeof r&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,i)}})}(r.user,c),c.value&&(t.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:s,error:a}=yield t._callRefreshToken(r.refresh_token);return t._returnResult(a?{data:{session:null},error:a}:{data:{session:s},error:null})}finally{t._debug("#__loadSession()","end")}})()}getUser(t){var r=this;return _(function*(){return t?yield r._getUser(t):(yield r.initializePromise,yield r._acquireLock(-1,_(function*(){return yield r._getUser()})))})()}_getUser(t){var r=this;return _(function*(){try{return t?yield xe(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:t,xform:ia}):yield r._useSession(function(){var i=_(function*(o){var s,a,c;const{data:u,error:l}=o;if(l)throw l;return null!==(s=u.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield xe(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(c=null===(a=u.session)||void 0===a?void 0:a.access_token)&&void 0!==c?c:void 0,xform:ia}):{data:{user:null},error:new ci}});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return function Dye(n){return Pe(n)&&"AuthSessionMissingError"===n.name}(i)&&(yield r._removeSession(),yield ra(r.storage,`${r.storageKey}-code-verifier`)),r._returnResult({data:{user:null},error:i});throw i}})()}updateUser(t){var r=this;return _(function*(i,o={}){return yield r.initializePromise,yield r._acquireLock(-1,_(function*(){return yield r._updateUser(i,o)}))}).apply(this,arguments)}_updateUser(t){var r=this;return _(function*(i,o={}){try{return yield r._useSession(function(){var s=_(function*(a){const{data:c,error:u}=a;if(u)throw u;if(!c.session)throw new ci;const l=c.session;let h=null,f=null;"pkce"===r.flowType&&null!=i.email&&([h,f]=yield $l(r.storage,r.storageKey));const{data:g,error:b}=yield xe(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:o?.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:h,code_challenge_method:f}),jwt:l.access_token,xform:ia});if(b)throw b;return l.user=g.user,yield r._saveSession(l),yield r._notifyAllSubscribers("USER_UPDATED",l),r._returnResult({data:{user:l.user},error:null})});return function(a){return s.apply(this,arguments)}}())}catch(s){if(Pe(s))return r._returnResult({data:{user:null},error:s});throw s}}).apply(this,arguments)}setSession(t){var r=this;return _(function*(){return yield r.initializePromise,yield r._acquireLock(-1,_(function*(){return yield r._setSession(t)}))})()}_setSession(t){var r=this;return _(function*(){try{if(!t.access_token||!t.refresh_token)throw new ci;const i=Date.now()/1e3;let o=i,s=!0,a=null;const{payload:c}=JA(t.access_token);if(c.exp&&(o=c.exp,s=o<=i),s){const{data:u,error:l}=yield r._callRefreshToken(t.refresh_token);if(l)return r._returnResult({data:{user:null,session:null},error:l});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:l}=yield r._getUser(t.access_token);if(l)throw l;a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:o-i,expires_at:o},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return r._returnResult({data:{user:a.user,session:a},error:null})}catch(i){if(Pe(i))return r._returnResult({data:{session:null,user:null},error:i});throw i}})()}refreshSession(t){var r=this;return _(function*(){return yield r.initializePromise,yield r._acquireLock(-1,_(function*(){return yield r._refreshSession(t)}))})()}_refreshSession(t){var r=this;return _(function*(){try{return yield r._useSession(function(){var i=_(function*(o){var s;if(!t){const{data:u,error:l}=o;if(l)throw l;t=null!==(s=u.session)&&void 0!==s?s:void 0}if(!t?.refresh_token)throw new ci;const{data:a,error:c}=yield r._callRefreshToken(t.refresh_token);return r._returnResult(c?{data:{user:null,session:null},error:c}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null})});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return r._returnResult({data:{user:null,session:null},error:i});throw i}})()}_getSessionFromURL(t,r){var i=this;return _(function*(){try{if(!Wn())throw new Sy("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sy(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===i.flowType)throw new n6("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===i.flowType)throw new Sy("Not a valid implicit grant flow url.")}if("pkce"===r){if(i._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new n6("No code detected.");const{data:j,error:Q}=yield i._exchangeCodeForSession(t.code);if(Q)throw Q;const le=new URL(window.location.href);return le.searchParams.delete("code"),window.history.replaceState(window.history.state,"",le.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:s,access_token:a,refresh_token:c,expires_in:u,expires_at:l,token_type:h}=t;if(!(a&&u&&c&&h))throw new Sy("No session defined in URL");const f=Math.round(Date.now()/1e3),g=parseInt(u);let b=f+g;l&&(b=parseInt(l));const C=b-f;1e3*C<=Vl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${g}s`);const I=b-g;f-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,b,f):f-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,b,f);const{data:A,error:M}=yield i._getUser(a);if(M)throw M;const N={provider_token:o,provider_refresh_token:s,access_token:a,expires_in:g,expires_at:b,refresh_token:c,token_type:h,user:A.user};return window.location.hash="",i._debug("#_getSessionFromURL()","clearing window.location.hash"),i._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(o){if(Pe(o))return i._returnResult({data:{session:null,redirectType:null},error:o});throw o}})()}_isImplicitGrantCallback(t){return!(!t.access_token&&!t.error_description)}_isPKCECallback(t){var r=this;return _(function*(){const i=yield _c(r.storage,`${r.storageKey}-code-verifier`);return!(!t.code||!i)})()}signOut(){var t=this;return _(function*(r={scope:"global"}){return yield t.initializePromise,yield t._acquireLock(-1,_(function*(){return yield t._signOut(r)}))}).apply(this,arguments)}_signOut(){var t=this;return _(function*({scope:r}={scope:"global"}){return yield t._useSession(function(){var i=_(function*(o){var s;const{data:a,error:c}=o;if(c)return t._returnResult({error:c});const u=null===(s=a.session)||void 0===s?void 0:s.access_token;if(u){const{error:l}=yield t.admin.signOut(u,r);if(l&&(!function xye(n){return Pe(n)&&"AuthApiError"===n.name}(l)||404!==l.status&&401!==l.status&&403!==l.status))return t._returnResult({error:l})}return"others"!==r&&(yield t._removeSession(),yield ra(t.storage,`${t.storageKey}-code-verifier`)),t._returnResult({error:null})});return function(o){return i.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(t){var r=this;const i=function Uye(){return Symbol("auth-callback")}(),o={id:i,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),_(function*(){yield r.initializePromise,yield r._acquireLock(-1,_(function*(){r._emitInitialSession(i)}))})(),{data:{subscription:o}}}_emitInitialSession(t){var r=this;return _(function*(){return yield r._useSession(function(){var i=_(function*(o){var s,a;try{const{data:{session:c},error:u}=o;if(u)throw u;yield null===(s=r.stateChangeEmitters.get(t))||void 0===s?void 0:s.callback("INITIAL_SESSION",c),r._debug("INITIAL_SESSION","callback id",t,"session",c)}catch(c){yield null===(a=r.stateChangeEmitters.get(t))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",t,"error",c),console.error(c)}});return function(o){return i.apply(this,arguments)}}())})()}resetPasswordForEmail(t){var r=this;return _(function*(i,o={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield $l(r.storage,r.storageKey,!0));try{return yield xe(r.fetch,"POST",`${r.url}/recover`,{body:{email:i,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:o.captchaToken}},headers:r.headers,redirectTo:o.redirectTo})}catch(c){if(Pe(c))return r._returnResult({data:null,error:c});throw c}}).apply(this,arguments)}getUserIdentities(){var t=this;return _(function*(){var r;try{const{data:i,error:o}=yield t.getUser();if(o)throw o;return t._returnResult({data:{identities:null!==(r=i.user.identities)&&void 0!==r?r:[]},error:null})}catch(i){if(Pe(i))return t._returnResult({data:null,error:i});throw i}})()}linkIdentity(t){var r=this;return _(function*(){return"token"in t?r.linkIdentityIdToken(t):r.linkIdentityOAuth(t)})()}linkIdentityOAuth(t){var r=this;return _(function*(){var i;try{const{data:o,error:s}=yield r._useSession(function(){var a=_(function*(c){var u,l,h,f,g;const{data:b,error:C}=c;if(C)throw C;const I=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,t.provider,{redirectTo:null===(u=t.options)||void 0===u?void 0:u.redirectTo,scopes:null===(l=t.options)||void 0===l?void 0:l.scopes,queryParams:null===(h=t.options)||void 0===h?void 0:h.queryParams,skipBrowserRedirect:!0});return yield xe(r.fetch,"GET",I,{headers:r.headers,jwt:null!==(g=null===(f=b.session)||void 0===f?void 0:f.access_token)&&void 0!==g?g:void 0})});return function(c){return a.apply(this,arguments)}}());if(s)throw s;return Wn()&&!(null!==(i=t.options)&&void 0!==i&&i.skipBrowserRedirect)&&window.location.assign(o?.url),r._returnResult({data:{provider:t.provider,url:o?.url},error:null})}catch(o){if(Pe(o))return r._returnResult({data:{provider:t.provider,url:null},error:o});throw o}})()}linkIdentityIdToken(t){var r=this;return _(function*(){return yield r._useSession(function(){var i=_(function*(o){var s;try{const{error:a,data:{session:c}}=o;if(a)throw a;const{options:u,provider:l,token:h,access_token:f,nonce:g}=t,b=yield xe(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=c?.access_token)&&void 0!==s?s:void 0,body:{provider:l,id_token:h,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:ji}),{data:C,error:I}=b;return I?r._returnResult({data:{user:null,session:null},error:I}):C&&C.session&&C.user?(C.session&&(yield r._saveSession(C.session),yield r._notifyAllSubscribers("USER_UPDATED",C.session)),r._returnResult({data:C,error:I})):r._returnResult({data:{user:null,session:null},error:new Ll})}catch(a){if(Pe(a))return r._returnResult({data:{user:null,session:null},error:a});throw a}});return function(o){return i.apply(this,arguments)}}())})()}unlinkIdentity(t){var r=this;return _(function*(){try{return yield r._useSession(function(){var i=_(function*(o){var s,a;const{data:c,error:u}=o;if(u)throw u;return yield xe(r.fetch,"DELETE",`${r.url}/user/identities/${t.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=c.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return r._returnResult({data:null,error:i});throw i}})()}_refreshAccessToken(t){var r=this;return _(function*(){const i=`#_refreshAccessToken(${t.substring(0,5)}...)`;r._debug(i,"begin");try{const o=Date.now();return yield function Hye(n,e){return new Promise((r,i)=>{_(function*(){for(let o=0;o<1/0;o++)try{const s=yield n(o);if(!e(o,null,s))return void r(s)}catch(s){if(!e(o,s))return void i(s)}})()})}(function(){var s=_(function*(a){return a>0&&(yield function Bye(n){return YA.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(i,"refreshing attempt",a),yield xe(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:r.headers,xform:ji})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const c=200*Math.pow(2,s);return a&&KA(a)&&Date.now()+c-o<Vl})}catch(o){if(r._debug(i,"error",o),Pe(o))return r._returnResult({data:{session:null,user:null},error:o});throw o}finally{r._debug(i,"end")}})()}_isValidSession(t){return"object"==typeof t&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){var i=this;return _(function*(){const o=yield i._getUrlForProvider(`${i.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return i._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",o),Wn()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:t,url:o},error:null}})()}_recoverAndRefresh(){var t=this;return _(function*(){var r,i;const o="#_recoverAndRefresh()";t._debug(o,"begin");try{const s=yield _c(t.storage,t.storageKey);if(s&&t.userStorage){let c=yield _c(t.userStorage,t.storageKey+"-user");!t.storage.isServer&&Object.is(t.storage,t.userStorage)&&!c&&(c={user:s.user},yield jl(t.userStorage,t.storageKey+"-user",c)),s.user=null!==(r=c?.user)&&void 0!==r?r:tS()}else if(s&&!s.user&&!s.user){const c=yield _c(t.storage,t.storageKey+"-user");c&&c?.user?(s.user=c.user,yield ra(t.storage,t.storageKey+"-user"),yield jl(t.storage,t.storageKey,s)):s.user=tS()}if(t._debug(o,"session from storage",s),!t._isValidSession(s))return t._debug(o,"session is not valid"),void(null!==s&&(yield t._removeSession()));const a=1e3*(null!==(i=s.expires_at)&&void 0!==i?i:1/0)-Date.now()<9e4;if(t._debug(o,`session has${a?"":" not"} expired with margin of 90000s`),a){if(t.autoRefreshToken&&s.refresh_token){const{error:c}=yield t._callRefreshToken(s.refresh_token);c&&(console.error(c),KA(c)||(t._debug(o,"refresh failed with a non-retryable error, removing the session",c),yield t._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:c,error:u}=yield t._getUser(s.access_token);!u&&c?.user?(s.user=c.user,yield t._saveSession(s),yield t._notifyAllSubscribers("SIGNED_IN",s)):t._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),t._debug(o,"error getting user data, skipping SIGNED_IN notification",c)}else yield t._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return t._debug(o,"error",s),void console.error(s)}finally{t._debug(o,"end")}})()}_callRefreshToken(t){var r=this;return _(function*(){var i,o;if(!t)throw new ci;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new Dy;const{data:a,error:c}=yield r._refreshAccessToken(t);if(c)throw c;if(!a.session)throw new ci;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return r.refreshingDeferred.resolve(u),u}catch(a){if(r._debug(s,"error",a),Pe(a)){const c={data:null,error:a};return KA(a)||(yield r._removeSession()),null===(i=r.refreshingDeferred)||void 0===i||i.resolve(c),c}throw null===(o=r.refreshingDeferred)||void 0===o||o.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(t,r){var i=this;return _(function*(o,s,a=!0){const c=`#_notifyAllSubscribers(${o})`;i._debug(c,"begin",s,`broadcast = ${a}`);try{i.broadcastChannel&&a&&i.broadcastChannel.postMessage({event:o,session:s});const u=[],l=Array.from(i.stateChangeEmitters.values()).map(function(){var h=_(function*(f){try{yield f.callback(o,s)}catch(g){u.push(g)}});return function(f){return h.apply(this,arguments)}}());if(yield Promise.all(l),u.length>0){for(let h=0;h<u.length;h+=1)console.error(u[h]);throw u[0]}}finally{i._debug(c,"end")}}).apply(this,arguments)}_saveSession(t){var r=this;return _(function*(){r._debug("#_saveSession()",t),r.suppressGetSessionWarning=!0;const i=Object.assign({},t);if(r.userStorage){(!i.user||!0!==i.user.__isUserNotAvailableProxy)&&i.user&&(yield jl(r.userStorage,r.storageKey+"-user",{user:i.user}));const s=Object.assign({},i);delete s.user;const a=l6(s);yield jl(r.storage,r.storageKey,a)}else{const s=l6(i);yield jl(r.storage,r.storageKey,s)}})()}_removeSession(){var t=this;return _(function*(){t._debug("#_removeSession()"),yield ra(t.storage,t.storageKey),yield ra(t.storage,t.storageKey+"-code-verifier"),yield ra(t.storage,t.storageKey+"-user"),t.userStorage&&(yield ra(t.userStorage,t.storageKey+"-user")),yield t._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Wn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var t=this;return _(function*(){yield t._stopAutoRefresh(),t._debug("#_startAutoRefresh()");const r=setInterval(()=>t._autoRefreshTokenTick(),Vl);t.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(_(function*(){yield t.initializePromise,yield t._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var t=this;return _(function*(){t._debug("#_stopAutoRefresh()");const r=t.autoRefreshTicker;t.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var t=this;return _(function*(){t._removeVisibilityChangedCallback(),yield t._startAutoRefresh()})()}stopAutoRefresh(){var t=this;return _(function*(){t._removeVisibilityChangedCallback(),yield t._stopAutoRefresh()})()}_autoRefreshTokenTick(){var t=this;return _(function*(){t._debug("#_autoRefreshTokenTick()","begin");try{yield t._acquireLock(0,_(function*(){try{const r=Date.now();try{return yield t._useSession(function(){var i=_(function*(o){const{data:{session:s}}=o;if(!s||!s.refresh_token||!s.expires_at)return void t._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/Vl);t._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield t._callRefreshToken(s.refresh_token))});return function(o){return i.apply(this,arguments)}}())}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{t._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof g6))throw r;t._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var t=this;return _(function*(){if(t._debug("#_handleVisibilityChange()"),!Wn()||!window?.addEventListener)return t.autoRefreshToken&&t.startAutoRefresh(),!1;try{t.visibilityChangedCallback=_(function*(){return yield t._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",t.visibilityChangedCallback),yield t._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(t){var r=this;return _(function*(){const i=`#_onVisibilityChanged(${t})`;r._debug(i,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),t||(yield r.initializePromise,yield r._acquireLock(-1,_(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(t,r,i){var o=this;return _(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),"pkce"===o.flowType){const[a,c]=yield $l(o.storage,o.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});s.push(u.toString())}if(i?.queryParams){const a=new URLSearchParams(i.queryParams);s.push(a.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${s.join("&")}`})()}_unenroll(t){var r=this;return _(function*(){try{return yield r._useSession(function(){var i=_(function*(o){var s;const{data:a,error:c}=o;return c?r._returnResult({data:null,error:c}):yield xe(r.fetch,"DELETE",`${r.url}/factors/${t.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return r._returnResult({data:null,error:i});throw i}})()}_enroll(t){var r=this;return _(function*(){try{return yield r._useSession(function(){var i=_(function*(o){var s,a;const{data:c,error:u}=o;if(u)return r._returnResult({data:null,error:u});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},"phone"===t.factorType?{phone:t.phone}:"totp"===t.factorType?{issuer:t.issuer}:{}),{data:h,error:f}=yield xe(r.fetch,"POST",`${r.url}/factors`,{body:l,headers:r.headers,jwt:null===(s=c?.session)||void 0===s?void 0:s.access_token});return f?r._returnResult({data:null,error:f}):("totp"===t.factorType&&"totp"===h.type&&!(null===(a=h?.totp)||void 0===a)&&a.qr_code&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),r._returnResult({data:h,error:null}))});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return r._returnResult({data:null,error:i});throw i}})()}_verify(t){var r=this;return _(function*(){return r._acquireLock(-1,_(function*(){try{return yield r._useSession(function(){var i=_(function*(o){var s;const{data:a,error:c}=o;if(c)return r._returnResult({data:null,error:c});const u=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:"create"===t.webauthn.type?bve(t.webauthn.credential_response):Cve(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:h}=yield xe(r.fetch,"POST",`${r.url}/factors/${t.factorId}/verify`,{body:u,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return h?r._returnResult({data:null,error:h}):(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),r._returnResult({data:l,error:h}))});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return r._returnResult({data:null,error:i});throw i}}))})()}_challenge(t){var r=this;return _(function*(){return r._acquireLock(-1,_(function*(){try{return yield r._useSession(function(){var i=_(function*(o){var s;const{data:a,error:c}=o;if(c)return r._returnResult({data:null,error:c});const u=yield xe(r.fetch,"POST",`${r.url}/factors/${t.factorId}/challenge`,{body:t,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(u.error)return u;const{data:l}=u;if("webauthn"!==l.type)return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:yve(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:vve(l.webauthn.credential_options.publicKey)})})}),error:null}}});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return r._returnResult({data:null,error:i});throw i}}))})()}_challengeAndVerify(t){var r=this;return _(function*(){const{data:i,error:o}=yield r._challenge({factorId:t.factorId});return o?r._returnResult({data:null,error:o}):yield r._verify({factorId:t.factorId,challengeId:i.id,code:t.code})})()}_listFactors(){var t=this;return _(function*(){var r;const{data:{user:i},error:o}=yield t.getUser();if(o)return{data:null,error:o};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=i?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var t=this;return _(function*(){var r,i;const{data:{session:o},error:s}=yield t.getSession();if(s)return t._returnResult({data:null,error:s});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=JA(o.access_token);let c=null;a.aal&&(c=a.aal);let u=c;return(null!==(i=null===(r=o.user.factors)||void 0===r?void 0:r.filter(f=>"verified"===f.status))&&void 0!==i?i:[]).length>0&&(u="aal2"),{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:a.amr||[]},error:null}})()}_getAuthorizationDetails(t){var r=this;return _(function*(){try{return yield r._useSession(function(){var i=_(function*(o){const{data:{session:s},error:a}=o;return a?r._returnResult({data:null,error:a}):s?yield xe(r.fetch,"GET",`${r.url}/oauth/authorizations/${t}`,{headers:r.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):r._returnResult({data:null,error:new ci})});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return r._returnResult({data:null,error:i});throw i}})()}_approveAuthorization(t,r){var i=this;return _(function*(){try{return yield i._useSession(function(){var o=_(function*(s){const{data:{session:a},error:c}=s;if(c)return i._returnResult({data:null,error:c});if(!a)return i._returnResult({data:null,error:new ci});const u=yield xe(i.fetch,"POST",`${i.url}/oauth/authorizations/${t}/consent`,{headers:i.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return u.data&&u.data.redirect_url&&Wn()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u});return function(s){return o.apply(this,arguments)}}())}catch(o){if(Pe(o))return i._returnResult({data:null,error:o});throw o}})()}_denyAuthorization(t,r){var i=this;return _(function*(){try{return yield i._useSession(function(){var o=_(function*(s){const{data:{session:a},error:c}=s;if(c)return i._returnResult({data:null,error:c});if(!a)return i._returnResult({data:null,error:new ci});const u=yield xe(i.fetch,"POST",`${i.url}/oauth/authorizations/${t}/consent`,{headers:i.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return u.data&&u.data.redirect_url&&Wn()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u});return function(s){return o.apply(this,arguments)}}())}catch(o){if(Pe(o))return i._returnResult({data:null,error:o});throw o}})()}_listOAuthGrants(){var t=this;return _(function*(){try{return yield t._useSession(function(){var r=_(function*(i){const{data:{session:o},error:s}=i;return s?t._returnResult({data:null,error:s}):o?yield xe(t.fetch,"GET",`${t.url}/user/oauth/grants`,{headers:t.headers,jwt:o.access_token,xform:a=>({data:a,error:null})}):t._returnResult({data:null,error:new ci})});return function(i){return r.apply(this,arguments)}}())}catch(r){if(Pe(r))return t._returnResult({data:null,error:r});throw r}})()}_revokeOAuthGrant(t){var r=this;return _(function*(){try{return yield r._useSession(function(){var i=_(function*(o){const{data:{session:s},error:a}=o;return a?r._returnResult({data:null,error:a}):s?(yield xe(r.fetch,"DELETE",`${r.url}/user/oauth/grants`,{headers:r.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):r._returnResult({data:null,error:new ci})});return function(o){return i.apply(this,arguments)}}())}catch(i){if(Pe(i))return r._returnResult({data:null,error:i});throw i}})()}fetchJwk(t){var r=this;return _(function*(i,o={keys:[]}){let s=o.keys.find(l=>l.kid===i);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(l=>l.kid===i),s&&r.jwks_cached_at+6e5>a)return s;const{data:c,error:u}=yield xe(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(u)throw u;return c.keys&&0!==c.keys.length&&(r.jwks=c,r.jwks_cached_at=a,s=c.keys.find(l=>l.kid===i),s)?s:null}).apply(this,arguments)}getClaims(t){var r=this;return _(function*(i,o={}){try{let s=i;if(!s){const{data:I,error:A}=yield r.getSession();if(A||!I.session)return r._returnResult({data:null,error:A});s=I.session.access_token}const{header:a,payload:c,signature:u,raw:{header:l,payload:h}}=JA(s);o?.allowExpired||function Jye(n){if(!n)throw new Error("Missing exp claim");if(n<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(c.exp);const f=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,o?.keys?{keys:o.keys}:o?.jwks):null;if(!f){const{error:I}=yield r.getUser(s);if(I)throw I;return{data:{claims:c,header:a,signature:u},error:null}}const g=function Yye(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),b=yield crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!(yield crypto.subtle.verify(g,b,u,function Vye(n){const e=[];return function a6(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=1024*(r-55296)&65535;r=65536+(n.charCodeAt(t+1)-56320&65535|i),t+=1}Nye(r,e)}}(n,t=>e.push(t)),new Uint8Array(e)}(`${l}.${h}`))))throw new QA("Invalid JWT signature");return{data:{claims:c,header:a,signature:u},error:null}}catch(s){if(Pe(s))return r._returnResult({data:null,error:s});throw s}}).apply(this,arguments)}}return n.nextInstanceID={},n})();class Dve extends xve{constructor(e){super(e)}}class kve{constructor(e,t,r){var i,o,s;this.supabaseUrl=e,this.supabaseKey=t;const a=function Iye(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function wye(n){return n.endsWith("/")?n:n+"/"}(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,l=function Eye(n,e){var t,r;const{db:i,auth:o,realtime:s,global:a}=n,{db:c,auth:u,realtime:l,global:h}=e,f={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},l),s),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},null!==(t=h?.headers)&&void 0!==t?t:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(g=_(function*(){return""}),function(){return g.apply(this,arguments)})};var g;return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}(r??{},{db:mye,realtime:yye,auth:Object.assign(Object.assign({},_ye),{storageKey:c}),global:gye});this.storageKey=null!==(i=l.auth.storageKey)&&void 0!==i?i:"",this.headers=null!==(o=l.global.headers)&&void 0!==o?o:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=l.auth)&&void 0!==s?s:{},this.headers,l.global.fetch),this.fetch=Cye(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new jB(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new fye(this.storageUrl.href,this.headers,this.fetch,r?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new l_e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e=this;return _(function*(){var t,r;if(e.accessToken)return yield e.accessToken();const{data:i}=yield e.auth.getSession();return null!==(r=null===(t=i.session)||void 0===t?void 0:t.access_token)&&void 0!==r?r:e.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:a,lock:c,debug:u,throwOnError:l},h,f){return new Dve({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),h),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:o,flowType:a,lock:c,debug:u,throwOnError:l,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>"authorization"===b.toLowerCase())})}_initRealtimeClient(e){return new N_e(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function Nve(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(null==n)return!1;const e=n.match(/^v(\d+)\./);return!!e&&parseInt(e[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let Fve=(()=>{class n{http;apiUrl=oi_apiUrl;supabase;channel=null;messagesSubject=new Pn([]);messages$=this.messagesSubject.asObservable();typingUsersSubject=new Pn([]);typingUsers$=this.typingUsersSubject.asObservable();statsSubject=new Pn(null);stats$=this.statsSubject.asObservable();connectedSubject=new Pn(!0);connected$=this.connectedSubject.asObservable();onlineUsersSubject=new Pn(1);onlineUsers$=this.onlineUsersSubject.asObservable();currentUser="Usuario";userId=this.generateUserId();currentRoom="general";isTyping=!1;subscriptions=[];constructor(t){this.http=t,this.supabase=((n,e,t)=>new kve(n,e,t))("https://nkojabtbosvzbfcveyfm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rb2phYnRib3N2emJmY3ZleWZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNjgwNzAsImV4cCI6MjA3Mjk0NDA3MH0.rJdadnVoVBw-vrt2XCm3619YzSIX3jSaxRftJQdAw00",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage},realtime:{params:{eventsPerSecond:10}}}),this.loadUserFromStorage(),this.loadInitialHistory().subscribe(()=>{this.setupRealtimeSubscription()}),this.subscriptions.push(this.setupPeriodicStats(),this.setupOnlineUsersCheck())}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.setTyping(!1),this.channel&&this.supabase.removeChannel(this.channel)}setupRealtimeSubscription(){this.channel=this.supabase.channel("chat-messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`room=eq.${this.currentRoom}`},t=>{this.handleNewMessage(t)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:"message_type=eq.system"},t=>{this.handleSystemMessage(t)}).subscribe(t=>{console.log("Canal de Supabase:",t),this.connectedSubject.next("SUBSCRIBED"===t)})}handleNewMessage(t){const r={id:t.new.id,user:t.new.user_name,user_id:t.new.user_id,message:t.new.message,timestamp:t.new.created_at,room:t.new.room,type:t.new.message_type||"message"},i=this.messagesSubject.value;if(!i.find(o=>o.id===r.id)){const s=[...i,r].sort((a,c)=>new Date(a.timestamp).getTime()-new Date(c.timestamp).getTime()).slice(-200);this.messagesSubject.next(s)}}getAuthToken(){return localStorage.getItem("auth_token")}handleSystemMessage(t){this.handleNewMessage(t)}setupPeriodicStats(){return new we(()=>{const t=setInterval(()=>{this.loadStatsObservable().subscribe()},3e4);return()=>clearInterval(t)})}setupOnlineUsersCheck(){return new we(()=>{const t=setInterval(()=>{this.checkOnlineUsers().subscribe()},15e3);return()=>clearInterval(t)})}loadUserFromStorage(){const t=localStorage.getItem("chat_user_name");t&&(this.currentUser=t)}loadInitialHistory(){return this.http.get(`${this.apiUrl}/api/chat/messages?limit=100`).pipe(mt({next:t=>{this.messagesSubject.next(t.messages||[]),this.connectedSubject.next(!0)},error:t=>{console.error("Error loading initial history:",t),this.connectedSubject.next(!1)}}),jn(t=>(console.error("API call failed for initial history:",t),this.connectedSubject.next(!1),Me(null))))}checkOnlineUsers(){return this.http.get(`${this.apiUrl}/api/chat/online-users`).pipe(jn(t=>Me({online_users:1})),mt(t=>this.onlineUsersSubject.next(t.online_users)))}sendMessage(t){const r=this.getAuthToken(),i={"Content-Type":"application/json"};r&&(i.Authorization=`Bearer ${r}`);const o={message:t.trim(),user:this.currentUser,user_id:this.userId,room:this.currentRoom};return this.http.post(`${this.apiUrl}/api/chat/send`,o,{headers:i}).pipe(mt(s=>{s.success&&s.message&&this.setTyping(!1)}),jn(s=>{throw console.error("Error sending message:",s),this.connectedSubject.next(!1),s}))}setTyping(t){this.isTyping!==t&&(this.isTyping=t,this.http.post(`${this.apiUrl}/api/chat/typing`,{user:this.currentUser,room:this.currentRoom,is_typing:t}).pipe(jn(()=>Me(null))).subscribe())}setUser(t){t&&t.trim()&&(this.currentUser=t.trim(),localStorage.setItem("chat_user_name",this.currentUser))}getUser(){return this.currentUser}loadStatsObservable(){return this.http.get(`${this.apiUrl}/api/chat/stats`).pipe(jn(()=>Me(null)),mt(t=>{t&&this.statsSubject.next(t)}))}loadStats(){this.loadStatsObservable().subscribe()}validateUsername(t){const r=this.getAuthToken(),i={"Content-Type":"application/json"};return r&&(i.Authorization=`Bearer ${r}`),this.http.post(`${this.apiUrl}/api/chat/validate-username`,{username:t},{headers:i}).pipe(jn(o=>Me({valid:!1,error:"Error validando nombre"})))}generateUserId(){let t=localStorage.getItem("chat_user_id");return t||(t=`user_${Math.random().toString(36).substring(2,11)}`,localStorage.setItem("chat_user_id",t)),t}static \u0275fac=function(r){return new(r||n)(ve(Vi))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vve=["messagesContainer"],Lve=["chatContainer"];function Uve(n,e){if(1&n&&(y(0,"span",14),T(1),v()),2&n){const t=U(2);w(1),me(t.unreadMessages)}}function jve(n,e){1&n&&(y(0,"div",22),D(1,"i",23),T(2," Reconectando... "),v())}function $ve(n,e){if(1&n){const t=He();y(0,"div",24)(1,"div",25),D(2,"i",26),T(3),v(),y(4,"button",27),K("click",function(){return se(t),ae(U(3).showUserModal=!0)}),D(5,"i",28),v(),y(6,"button",29),K("click",function(){return se(t),ae(U(3).isChatOpen=!1)}),D(7,"i",30),v()()}if(2&n){const t=e.ngIf;w(3),Ae(" ",t,"")}}function Bve(n,e){if(1&n&&(y(0,"div",15)(1,"div",16)(2,"h4"),D(3,"i",17),T(4," Chat Musical"),v(),y(5,"div",18),D(6,"span",19),T(7),v(),Z(8,jve,3,0,"div",20),v(),Z(9,$ve,8,1,"div",21),ws(10,"async"),v()),2&n){const t=e.ngIf,r=U(2);w(5),Oe("connected",t)("disconnected",!t),w(2),Ae(" ",t?"Conectado":"Reconectando..."," "),w(1),L("ngIf",!t),w(1),L("ngIf",Es(10,7,r.onlineUsers$))}}function Hve(n,e){if(1&n&&(y(0,"div",31)(1,"div",32)(2,"small"),T(3),v()(),y(4,"div",32)(5,"small"),T(6),v()()()),2&n){const t=e.ngIf;w(3),Ae("Total: ",null==t?null:t.total_messages,""),w(3),Ae("Hoy: ",null==t?null:t.messages_today,"")}}function zve(n,e){if(1&n&&(y(0,"div",36)(1,"strong",37),T(2),v(),y(3,"span",38),T(4),v()()),2&n){const t=U().$implicit,r=U(2);w(2),me(t.user),w(2),me(r.formatTime(t.timestamp))}}function qve(n,e){if(1&n&&(y(0,"div",33),Z(1,zve,5,2,"div",34),y(2,"div",35),T(3),v()()),2&n){const t=e.$implicit,r=U().ngIf;Oe("system-message","system"===t.type)("own-message",t.user===r&&"message"===t.type),w(1),L("ngIf","message"===t.type),w(2),me(t.message)}}function Gve(n,e){if(1&n&&(y(0,"div")(1,"div",41),D(2,"span")(3,"span")(4,"span"),v(),y(5,"span",42),T(6),v()()),2&n){const t=U().ngIf;w(6),Ro("",t.join(", ")," ",1===t.length?"est\xe1 escribiendo...":"est\xe1n escribiendo...","")}}function Wve(n,e){if(1&n&&(y(0,"div",39),Z(1,Gve,7,2,"div",40),v()),2&n){const t=e.ngIf;w(1),L("ngIf",t.length>0)}}function Kve(n,e){if(1&n){const t=He();y(0,"div",43)(1,"input",44,45),K("ngModelChange",function(i){return se(t),ae(U(2).newMessage=i)})("input",function(){return se(t),ae(U(2).onInputChange())})("keyup.enter",function(){return se(t),ae(U(2).sendMessage())}),v(),y(3,"button",46),K("click",function(){return se(t),ae(U(2).sendMessage())}),D(4,"i",47),v()()}if(2&n){const t=e.ngIf,r=U(2);w(1),wg("placeholder",t?"Escribe un mensaje...":"Conectando..."),L("ngModel",r.newMessage)("disabled",!t),w(2),L("disabled",!r.newMessage.trim()||!t)}}function Qve(n,e){if(1&n&&(y(0,"div",56)(1,"small",57),T(2),v()()),2&n){const t=U(3);w(2),me(t.usernameError)}}function Jve(n,e){if(1&n){const t=He();y(0,"div",48),K("click",function(){return se(t),ae(U(2).showUserModal=!1)}),y(1,"div",49),K("click",function(i){return i.stopPropagation()}),y(2,"h4"),T(3,"Cambiar Nombre"),v(),y(4,"input",50,51),K("keyup",function(){se(t);const i=eo(5);return ae(U(2).onUsernameInput(i.value))})("keyup.enter",function(){se(t);const i=eo(5);return ae(U(2).updateUser(i.value))}),v(),Z(6,Qve,3,1,"div",52),y(7,"div",53)(8,"button",54),K("click",function(){return se(t),ae(U(2).showUserModal=!1)}),T(9,"Cancelar"),v(),y(10,"button",55),K("click",function(){se(t);const i=eo(5);return ae(U(2).updateUser(i.value))}),T(11," Guardar "),v()()()()}if(2&n){const t=U().ngIf,r=U();w(4),L("value",t),w(2),L("ngIf",r.usernameError),w(4),L("disabled",r.usernameError)}}function Yve(n,e){if(1&n){const t=He();y(0,"div",1)(1,"button",2),K("click",function(){return se(t),ae(U().toggleChat())}),D(2,"i",3),Z(3,Uve,2,1,"span",4),v(),y(4,"div",5),Z(5,Bve,11,9,"div",6),ws(6,"async"),Z(7,Hve,7,2,"div",7),ws(8,"async"),y(9,"div",8,9),Z(11,qve,4,6,"div",10),ws(12,"async"),Z(13,Wve,2,1,"div",11),ws(14,"async"),v(),Z(15,Kve,5,4,"div",12),ws(16,"async"),Z(17,Jve,12,3,"div",13),v()()}if(2&n){const t=U();w(1),Oe("has-unread",t.unreadMessages>0),w(2),L("ngIf",t.unreadMessages>0),w(1),Oe("open",t.isChatOpen),w(1),L("ngIf",Es(6,12,t.connected$)),w(2),L("ngIf",Es(8,14,t.stats$)),w(4),L("ngForOf",Es(12,16,t.messages$))("ngForTrackBy",t.trackByMessage),w(2),L("ngIf",Es(14,18,t.typingUsers$)),w(2),L("ngIf",Es(16,20,t.connected$)),w(2),L("ngIf",t.showUserModal)}}let Xve=(()=>{class n{chatService;cdr;elementRef;messagesContainer;chatContainer;isChatOpen=!1;newMessage="";showUserModal=!1;unreadMessages=0;usernameError="";previousMessageCount=0;messages$;typingUsers$;onlineUsers$;connected$;stats$;currentUser$;subscriptions=new we;typingTimeout;constructor(t,r,i){this.chatService=t,this.cdr=r,this.elementRef=i,this.messages$=this.chatService.messages$,this.typingUsers$=this.chatService.typingUsers$,this.onlineUsers$=this.chatService.onlineUsers$,this.connected$=this.chatService.connected$,this.stats$=this.chatService.stats$,this.currentUser$=Me(this.chatService.getUser())}ngOnInit(){const t=this.messages$.subscribe(r=>{setTimeout(()=>{this.handleNewMessages(r),this.cdr.detectChanges(),this.autoScrollToBottom()})});this.subscriptions.add(t),setTimeout(()=>{this.chatService.loadInitialHistory().subscribe()},1e3)}onUsernameInput(t){const r=t.trim();r?this.chatService.validateUsername(r).subscribe({next:i=>{this.usernameError=i.valid?"":i.error||"",this.cdr.markForCheck()},error:()=>{this.usernameError="",this.cdr.markForCheck()}}):(this.usernameError="",this.cdr.markForCheck())}ngOnDestroy(){this.subscriptions.unsubscribe(),this.typingTimeout&&clearTimeout(this.typingTimeout)}handleNewMessages(t){if(!this.messagesContainer)return;const r=t.length,i=this.previousMessageCount;if(this.previousMessageCount=r,this.isChatOpen){const o=r-i;o>0&&i>0&&(this.unreadMessages+=o)}else{const o=r-i;o>0&&(this.unreadMessages+=o,this.showNewMessageNotification(this.unreadMessages))}}sendMessage(){this.connected$.pipe(hs(1)).subscribe(t=>{if(this.newMessage.trim()&&t){const r=this.newMessage.trim();this.newMessage="",this.cdr.markForCheck(),this.chatService.sendMessage(r).subscribe({next:()=>{this.stopTyping(),this.scrollToBottom()},error:i=>{this.newMessage=r,this.cdr.markForCheck(),i.error&&i.error.error&&alert(i.error.error)}})}})}scrollToBottom(){this.messagesContainer&&setTimeout(()=>{try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch(t){console.error("Error en scroll:",t)}},50)}showNewMessageNotification(t){!document.hasFocus()&&"Notification"in window&&"granted"===Notification.permission&&new Notification(`Tienes ${t} nuevo${t>1?"s":""} mensaje${t>1?"s":""}`)}toggleChat(){this.isChatOpen=!this.isChatOpen,this.isChatOpen&&(this.unreadMessages=0,this.chatService.loadStats(),setTimeout(()=>{this.scrollToBottom(),this.chatService.loadInitialHistory().subscribe()},100))}setupRealtimeMessages(){const t=this.messages$.subscribe(r=>{const i=this.isNearBottom();this.handleNewMessages(r),this.cdr.markForCheck(),i&&this.autoScrollToBottom()});this.subscriptions.add(t)}isNearBottom(){if(!this.messagesContainer)return!0;const t=this.messagesContainer.nativeElement;return t.scrollHeight-(t.scrollTop+t.clientHeight)<=150}autoScrollToBottom(){this.messagesContainer&&setTimeout(()=>{const t=this.messagesContainer.nativeElement;t.scrollTop=t.scrollHeight},100)}onInputChange(){this.connected$.pipe(hs(1)).subscribe(t=>{this.newMessage.trim()&&t?(this.chatService.setTyping(!0),this.typingTimeout&&clearTimeout(this.typingTimeout),this.typingTimeout=setTimeout(()=>this.stopTyping(),2500)):this.stopTyping()})}stopTyping(){this.typingTimeout&&(clearTimeout(this.typingTimeout),this.typingTimeout=null),this.chatService.setTyping(!1)}updateUser(t){const r=t.trim();r&&this.chatService.validateUsername(r).subscribe({next:i=>{i.valid?(this.chatService.setUser(r),this.currentUser$=Me(r),this.showUserModal=!1,this.usernameError="",this.cdr.markForCheck(),i.is_admin&&console.log("\u2705 Modo administrador activado para el chat")):(this.usernameError=i.error||"Nombre no v\xe1lido",this.cdr.markForCheck())},error:()=>{this.usernameError="Error validando el nombre de usuario",this.cdr.markForCheck()}})}formatTime(t){return new Date(t).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}trackByMessage(t,r){return r.id}onDocumentClick(t){this.isChatOpen&&!this.elementRef.nativeElement.contains(t.target)&&(this.isChatOpen=!1,this.cdr.markForCheck())}static \u0275fac=function(r){return new(r||n)(X(Fve),X(Cu),X(Lr))};static \u0275cmp=fr({type:n,selectors:[["app-floating-chat"]],viewQuery:function(r,i){if(1&r&&(TC(Vve,5),TC(Lve,5)),2&r){let o;kg(o=Rg())&&(i.messagesContainer=o.first),kg(o=Rg())&&(i.chatContainer=o.first)}},hostBindings:function(r,i){1&r&&K("click",function(s){return i.onDocumentClick(s)},0,FD)},standalone:!0,features:[Cr],decls:2,vars:3,consts:[["class","floating-chat-container",4,"ngIf"],[1,"floating-chat-container"],[1,"floating-chat-button",3,"click"],[1,"fas","fa-comments"],["class","unread-badge",4,"ngIf"],[1,"chat-window"],["class","chat-header",4,"ngIf"],["class","chat-stats",4,"ngIf"],[1,"messages-container"],["messagesContainer",""],["class","message",3,"system-message","own-message",4,"ngFor","ngForOf","ngForTrackBy"],["class","typing-indicator",4,"ngIf"],["class","input-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"unread-badge"],[1,"chat-header"],[1,"header-left"],[1,"fas","fa-comments","me-2"],[1,"connection-status"],[1,"status-dot"],["class","reconnection-message",4,"ngIf"],["class","header-right",4,"ngIf"],[1,"reconnection-message"],[1,"fas","fa-sync-alt","fa-spin"],[1,"header-right"],[1,"online-users"],[1,"fas","fa-users","me-1"],["title","Cambiar usuario",1,"btn-user",3,"click"],[1,"fas","fa-user-edit"],["title","Cerrar chat",1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"chat-stats"],[1,"stat-item"],[1,"message"],["class","message-header",4,"ngIf"],[1,"message-content"],[1,"message-header"],[1,"username"],[1,"message-time"],[1,"typing-indicator"],[4,"ngIf"],[1,"typing-dots"],[1,"typing-text"],[1,"input-container"],["type","text",1,"message-input",3,"ngModel","disabled","placeholder","ngModelChange","input","keyup.enter"],["messageInput",""],[1,"send-button",3,"disabled","click"],[1,"fas","fa-paper-plane"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],["type","text","placeholder","Tu nombre de usuario","maxlength","20",1,"user-input",3,"value","keyup","keyup.enter"],["userInput",""],["class","validation-message",4,"ngIf"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"disabled","click"],[1,"validation-message"],[1,"text-danger"]],template:function(r,i){1&r&&(Z(0,Yve,18,22,"div",0),ws(1,"async")),2&r&&L("ngIf",Es(1,1,i.currentUser$))},dependencies:[ni,ro,ti,X2,hc,yo,ea,as],styles:[".floating-chat-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:1000}.floating-chat-button[_ngcontent-%COMP%]{position:relative;width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,var(--primary-color),#1db954);color:#fff;border:none;cursor:pointer;box-shadow:0 6px 25px #1db95480;display:flex;align-items:center;justify-content:center;font-size:1.8rem;transition:all .3s ease}.floating-chat-button[_ngcontent-%COMP%]:hover{transform:scale(1.15);box-shadow:0 8px 30px #1db954b3}.floating-chat-button.has-unread[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.floating-chat-button[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:#e74c3c;color:#fff;border-radius:50%;width:24px;height:24px;font-size:.8rem;display:flex;align-items:center;justify-content:center;font-weight:700;border:2px solid var(--card-bg)}.chat-window[_ngcontent-%COMP%]{position:absolute;bottom:85px;right:0;width:450px;height:650px;background:var(--card-bg);border:1px solid var(--hover-bg);border-radius:16px;box-shadow:0 15px 50px #0006;display:flex;flex-direction:column;opacity:0;transform:translateY(20px) scale(.95);pointer-events:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.chat-window.open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:all}.chat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem;background:linear-gradient(135deg,var(--hover-bg),var(--card-bg));border-bottom:1px solid var(--border-color);border-radius:16px 16px 0 0}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.1rem;font-weight:600}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;padding:.3rem .6rem;border-radius:20px;background:var(--bg-color);font-weight:500}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]{color:#10b981;background:rgba(16,185,129,.1)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#10b981;box-shadow:0 0 8px #10b98180}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status.disconnected[_ngcontent-%COMP%]{color:#ef4444;background:rgba(239,68,68,.1)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status.disconnected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#ef4444}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .online-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem;padding:.4rem .8rem;background:var(--bg-color);border-radius:20px;font-size:.8rem;color:var(--text-secondary);font-weight:500}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-user[_ngcontent-%COMP%], .chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);padding:.5rem;border-radius:8px;cursor:pointer;transition:all .2s ease}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-user[_ngcontent-%COMP%]:hover, .chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary);transform:scale(1.1)}.chat-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem;padding:.75rem 1.25rem;background:var(--bg-color);border-bottom:1px solid var(--border-color)}.chat-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.75rem;font-weight:500}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.25rem;display:flex;flex-direction:column;gap:.75rem;background:var(--bg-color)}.message[_ngcontent-%COMP%]{max-width:90%;padding:.75rem 1rem;border-radius:16px;background:var(--hover-bg);animation:_ngcontent-%COMP%_messageSlide .25s ease-out;border:1px solid transparent;transition:all .2s ease}.message[_ngcontent-%COMP%]:hover{border-color:var(--border-color);transform:translateY(-1px)}.message.own-message[_ngcontent-%COMP%]{align-self:flex-end;background:linear-gradient(135deg,var(--primary-color),#1a8cff);color:#fff;box-shadow:0 4px 15px #1db9544d}.message.own-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{color:#fffffff2}.message.own-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#fffc}.message.system-message[_ngcontent-%COMP%]{align-self:center;background:transparent;text-align:center;color:var(--text-secondary);font-style:italic;max-width:100%;border:1px dashed var(--border-color)}.message.system-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500}.message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.3rem}.message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:var(--text-primary)}.message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8;color:var(--text-secondary)}.message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{word-wrap:break-word;line-height:1.4;font-size:.9rem}.typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;color:var(--text-secondary);font-size:.85rem;font-style:italic;background:var(--hover-bg);border-radius:12px;margin-top:.5rem}.typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]{display:flex;gap:3px}.typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:var(--primary-color);animation:_ngcontent-%COMP%_typingBounce 1.4s infinite ease-in-out}.typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}.input-container[_ngcontent-%COMP%]{display:flex;padding:1rem;border-top:1px solid var(--border-color);background:var(--card-bg);gap:.75rem;align-items:center}.input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:2px solid var(--border-color);border-radius:25px;background:var(--bg-color);color:var(--text-primary);font-size:.9rem;transition:all .3s ease}.input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #1db9541a}.input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.input-container[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{padding:.75rem;background:linear-gradient(135deg,var(--primary-color),#1db954);color:#fff;border:none;border-radius:50%;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.input-container[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1) rotate(5deg);box-shadow:0 6px 20px #1db95466}.input-container[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.modal-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:16px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem;border-radius:16px;width:90%;max-width:400px;border:1px solid var(--border-color);box-shadow:0 20px 60px #0000004d}.modal-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-primary);font-size:1.2rem;font-weight:600;text-align:center}.modal-content[_ngcontent-%COMP%]   .user-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid var(--border-color);border-radius:12px;background:var(--bg-color);color:var(--text-primary);margin-bottom:1.5rem;font-size:1rem;transition:all .3s ease}.modal-content[_ngcontent-%COMP%]   .user-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #1db9541a}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding:.6rem 1.25rem;border:none;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:500;transition:all .3s ease}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:transparent;color:var(--text-secondary);border:2px solid var(--border-color)}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:var(--hover-bg);border-color:var(--text-secondary)}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#1db954);color:#fff}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1db9544d}@keyframes _ngcontent-%COMP%_messageSlide{0%{opacity:0;transform:translateY(8px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_typingBounce{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1.2);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 6px 25px #1db95480}50%{box-shadow:0 6px 30px #1db954cc}}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.messages-container[_ngcontent-%COMP%]{scroll-behavior:smooth;overflow-anchor:auto}@media (max-width: 768px){.floating-chat-container[_ngcontent-%COMP%]{bottom:15px;right:15px}.floating-chat-button[_ngcontent-%COMP%]{width:60px;height:60px;font-size:1.5rem}.chat-window[_ngcontent-%COMP%]{width:380px;height:550px;bottom:75px}}@media (max-width: 480px){.floating-chat-container[_ngcontent-%COMP%]{bottom:10px;right:10px}.chat-window[_ngcontent-%COMP%]{width:calc(100vw - 30px);height:70vh;right:-5px;bottom:65px}.floating-chat-button[_ngcontent-%COMP%]{width:55px;height:55px;font-size:1.3rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.chat-window[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.connection-status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.message[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary-color);outline-offset:2px}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.reconnection-message[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:var(--text-secondary);font-size:.9rem}.reconnection-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.reconnect-info[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8}.reconnect-info[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8;margin-left:.3rem}.reconnection-message[_ngcontent-%COMP%]{text-align:center;padding:.5rem;color:var(--text-secondary);font-size:.8rem;background:rgba(239,68,68,.1);border-radius:8px;margin-top:.5rem}.reconnection-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.connection-status.disconnected[_ngcontent-%COMP%]{background:rgba(239,68,68,.15)!important;border:1px solid rgba(239,68,68,.3)}.connection-status.connected[_ngcontent-%COMP%]{background:rgba(16,185,129,.15)!important;border:1px solid rgba(16,185,129,.3)}.validation-message[_ngcontent-%COMP%]{margin:-.5rem 0 1rem;text-align:center}.validation-message[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:#e74c3c;font-size:.8rem;font-weight:500}.modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:disabled:hover{box-shadow:none!important;transform:none!important}"],changeDetection:0})}return n})();const Zve=function(){return{exact:!0}};(function gZ(n,e){return ZQ({rootComponent:n,...kF(e)})})((()=>{class n{title="UPTC Music";isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=fr({type:n,selectors:[["app-root"]],standalone:!0,features:[Cr],decls:43,vars:6,consts:[[1,"main-container"],[1,"main-header"],[1,"container","d-flex","justify-content-between","align-items-center"],[1,"logo-container"],["routerLink","/",1,"text-decoration-none","text-white","d-flex","align-items-center"],[1,"logo-icon"],[1,"fab","fa-spotify"],[1,"app-title","mb-0","ms-2"],[1,"hamburger-menu","d-md-none",3,"click"],[1,"fas",3,"ngClass"],[1,"main-nav"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions","click"],[1,"fas","fa-home","me-1"],["routerLink","/discussion","routerLinkActive","active",3,"click"],[1,"fas","fa-comments","me-1"],["routerLink","/ranking","routerLinkActive","active",3,"click"],[1,"fas","fa-trophy","me-1"],["routerLink","/admin-login","routerLinkActive","active",3,"click"],[1,"fas","fa-lock","me-1"],[1,"content-area"],[1,"container"],[1,"now-playing-bar"],[1,"footer-content","text-center"],[1,"footer-text","mb-0"],[1,"footer-text","mb-1"],[1,"social-links"],["href","https://github.com/SebastianVega4","target","_blank"],[1,"fab","fa-github","me-1"],["href","https://www.linkedin.com/in/johan-sebastian-vega-ruiz-b1292011b/","target","_blank"],[1,"fab","fa-linkedin","me-1"],["href","https://www.instagram.com/sebastian.vegar/","target","_blank"],[1,"fab","fa-instagram","me-1"]],template:function(r,i){1&r&&(y(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"div",5),D(6,"i",6),v(),y(7,"h1",7),T(8),v()()(),y(9,"button",8),K("click",function(){return i.toggleMenu()}),D(10,"i",9),v(),y(11,"nav",10)(12,"a",11),K("click",function(){return i.toggleMenu()}),D(13,"i",12),T(14,"Inicio "),v(),y(15,"a",13),K("click",function(){return i.toggleMenu()}),D(16,"i",14),T(17,"Foro "),v(),y(18,"a",15),K("click",function(){return i.toggleMenu()}),D(19,"i",16),T(20,"Ranking "),v(),y(21,"a",17),K("click",function(){return i.toggleMenu()}),D(22,"i",18),v()()()(),y(23,"main",19)(24,"div",20),D(25,"router-outlet"),v()(),D(26,"app-floating-chat"),v(),y(27,"footer",21)(28,"div",22)(29,"p",23),T(30,"Desarrollado por:"),v(),y(31,"p",24),T(32,"Estudiante de Ingenier\xeda de Sistemas - UPTC Sogamoso 2025-II"),v(),y(33,"div",25)(34,"a",26),D(35,"i",27),T(36,"GitHub "),v(),y(37,"a",28),D(38,"i",29),T(39,"LinkedIn "),v(),y(40,"a",30),D(41,"i",31),T(42,"Instagram "),v()()()()),2&r&&(w(8),me(i.title),w(2),L("ngClass",i.isMenuOpen?"fa-times":"fa-bars"),w(1),Oe("active",i.isMenuOpen),w(1),L("routerLinkActiveOptions",wa(5,Zve)))},dependencies:[vh,$0,xa,VV,ni,G2,Xve],styles:[".main-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-bottom:1px solid rgba(255,255,255,.1);top:0;z-index:1000;box-shadow:0 4px 30px #0000004d}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem}.logo-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--primary-color) 0%,var(--accent-purple) 100%);display:flex;align-items:center;justify-content:center;box-shadow:0 0 15px #1db95466}.logo-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--text-primary)}.app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:var(--text-primary);margin:0;letter-spacing:-.5px;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary-color) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.main-nav[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-secondary);text-decoration:none;font-weight:600;padding:.5rem 1rem;border-radius:50px;transition:all .3s ease;display:flex;align-items:center}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:rgba(255,255,255,.05);transform:translateY(-2px)}.main-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--text-primary);background:rgba(29,185,84,.15);box-shadow:0 0 15px #1db95433}.main-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;transition:color .3s ease}.now-playing-bar[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-top:1px solid rgba(255,255,255,.1);padding:1rem;color:var(--text-primary);display:flex;align-items:center;justify-content:center;position:relative;z-index:5}.footer-content[_ngcontent-%COMP%]{width:100%;text-align:center}.footer-text[_ngcontent-%COMP%]{font-size:.8rem;margin:.3rem 0;color:var(--text-secondary)}.social-links[_ngcontent-%COMP%]{margin-top:.5rem}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-secondary);text-decoration:none;margin:0 .8rem;font-size:.9rem;transition:all .3s ease;display:inline-flex;align-items:center}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color);transform:translateY(-2px)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.3rem;font-size:1rem}@media (max-width: 768px){.main-header[_ngcontent-%COMP%]{padding:.8rem 1rem}.main-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative}.main-header[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]{display:block;background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;z-index:1001}.main-header[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;background-color:#000000f2;flex-direction:column;align-items:center;padding:1rem 0;display:none;z-index:1000;border-bottom:1px solid rgba(255,255,255,.1);gap:0}.main-header[_ngcontent-%COMP%]   .main-nav.active[_ngcontent-%COMP%]{display:flex}.main-header[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;text-align:center;padding:1rem;margin:0;border-bottom:1px solid rgba(255,255,255,.05);border-radius:0}.main-header[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{border-bottom:none}.main-header[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:none}.app-title[_ngcontent-%COMP%]{font-size:1.2rem}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 .5rem;font-size:.8rem}}@media (min-width: 769px){.hamburger-menu[_ngcontent-%COMP%]{display:none}.main-nav[_ngcontent-%COMP%]{display:flex!important}}"]})}return n})(),a_e).catch(n=>console.error(n))},958:(Qn,We,tt)=>{"use strict";var Se=tt(293).default;Object.defineProperty(We,"__esModule",{value:!0});const Dt=tt(215).__importDefault(tt(659));We.default=class kt{constructor(W){var Y,ye;this.shouldThrowOnError=!1,this.method=W.method,this.url=W.url,this.headers=new Headers(W.headers),this.schema=W.schema,this.body=W.body,this.shouldThrowOnError=null!==(Y=W.shouldThrowOnError)&&void 0!==Y&&Y,this.signal=W.signal,this.isMaybeSingle=null!==(ye=W.isMaybeSingle)&&void 0!==ye&&ye,this.fetch=W.fetch?W.fetch:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(W,Y){return this.headers=new Headers(this.headers),this.headers.set(W,Y),this}then(W,Y){var ye=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Ke=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var Ne=Se(function*(Qe){var rn,on,dr,sn;let Je=null,vt=null,qt=null,Or=Qe.status,kn=Qe.statusText;if(Qe.ok){if("HEAD"!==ye.method){const li=yield Qe.text();""===li||(vt="text/csv"===ye.headers.get("Accept")||ye.headers.get("Accept")&&null!==(rn=ye.headers.get("Accept"))&&void 0!==rn&&rn.includes("application/vnd.pgrst.plan+text")?li:JSON.parse(li))}const Bi=null===(on=ye.headers.get("Prefer"))||void 0===on?void 0:on.match(/count=(exact|planned|estimated)/),qr=null===(dr=Qe.headers.get("content-range"))||void 0===dr?void 0:dr.split("/");Bi&&qr&&qr.length>1&&(qt=parseInt(qr[1])),ye.isMaybeSingle&&"GET"===ye.method&&Array.isArray(vt)&&(vt.length>1?(Je={code:"PGRST116",details:`Results contain ${vt.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},vt=null,qt=null,Or=406,kn="Not Acceptable"):vt=1===vt.length?vt[0]:null)}else{const Bi=yield Qe.text();try{Je=JSON.parse(Bi),Array.isArray(Je)&&404===Qe.status&&(vt=[],Je=null,Or=200,kn="OK")}catch{404===Qe.status&&""===Bi?(Or=204,kn="No Content"):Je={message:Bi}}if(Je&&ye.isMaybeSingle&&!(null===(sn=Je?.details)||void 0===sn)&&sn.includes("0 rows")&&(Je=null,Or=200,kn="OK"),Je&&ye.shouldThrowOnError)throw new Dt.default(Je)}return{error:Je,data:vt,count:qt,status:Or,statusText:kn}});return function(Qe){return Ne.apply(this,arguments)}}());return this.shouldThrowOnError||(Ke=Ke.catch(Ne=>{var Qe,rn,on,dr,sn,Je;let vt="";const qt=Ne?.cause;if(qt){const Or=null!==(Qe=qt?.message)&&void 0!==Qe?Qe:"",kn=null!==(rn=qt?.code)&&void 0!==rn?rn:"";vt=`${null!==(on=Ne?.name)&&void 0!==on?on:"FetchError"}: ${Ne?.message}`,vt+=`\n\nCaused by: ${null!==(dr=qt?.name)&&void 0!==dr?dr:"Error"}: ${Or}`,kn&&(vt+=` (${kn})`),qt?.stack&&(vt+=`\n${qt.stack}`)}else vt=null!==(sn=Ne?.stack)&&void 0!==sn?sn:"";return{error:{message:`${null!==(Je=Ne?.name)&&void 0!==Je?Je:"FetchError"}: ${Ne?.message}`,details:vt,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),Ke.then(W,Y)}returns(){return this}overrideTypes(){return this}}},242:(Qn,We,tt)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});const Se=tt(215),lt=Se.__importDefault(tt(666)),Dt=Se.__importDefault(tt(608));class kt{constructor(W,{headers:Y={},schema:ye,fetch:Re}={}){this.url=W,this.headers=new Headers(Y),this.schemaName=ye,this.fetch=Re}from(W){if(!W||"string"!=typeof W||""===W.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");const Y=new URL(`${this.url}/${W}`);return new lt.default(Y,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(W){return new kt(this.url,{headers:this.headers,schema:W,fetch:this.fetch})}rpc(W,Y={},{head:ye=!1,get:Re=!1,count:Ke}={}){var Ne;let Qe;const rn=new URL(`${this.url}/rpc/${W}`);let on;ye||Re?(Qe=ye?"HEAD":"GET",Object.entries(Y).filter(([sn,Je])=>void 0!==Je).map(([sn,Je])=>[sn,Array.isArray(Je)?`{${Je.join(",")}}`:`${Je}`]).forEach(([sn,Je])=>{rn.searchParams.append(sn,Je)})):(Qe="POST",on=Y);const dr=new Headers(this.headers);return Ke&&dr.set("Prefer",`count=${Ke}`),new Dt.default({method:Qe,url:rn,headers:dr,schema:this.schemaName,body:on,fetch:null!==(Ne=this.fetch)&&void 0!==Ne?Ne:fetch})}}We.default=kt},659:(Qn,We)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});class tt extends Error{constructor(lt){super(lt.message),this.name="PostgrestError",this.details=lt.details,this.hint=lt.hint,this.code=lt.code}}We.default=tt},608:(Qn,We,tt)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});const lt=tt(215).__importDefault(tt(342)),Dt=new RegExp("[,()]");We.default=class kt extends lt.default{eq(W,Y){return this.url.searchParams.append(W,`eq.${Y}`),this}neq(W,Y){return this.url.searchParams.append(W,`neq.${Y}`),this}gt(W,Y){return this.url.searchParams.append(W,`gt.${Y}`),this}gte(W,Y){return this.url.searchParams.append(W,`gte.${Y}`),this}lt(W,Y){return this.url.searchParams.append(W,`lt.${Y}`),this}lte(W,Y){return this.url.searchParams.append(W,`lte.${Y}`),this}like(W,Y){return this.url.searchParams.append(W,`like.${Y}`),this}likeAllOf(W,Y){return this.url.searchParams.append(W,`like(all).{${Y.join(",")}}`),this}likeAnyOf(W,Y){return this.url.searchParams.append(W,`like(any).{${Y.join(",")}}`),this}ilike(W,Y){return this.url.searchParams.append(W,`ilike.${Y}`),this}ilikeAllOf(W,Y){return this.url.searchParams.append(W,`ilike(all).{${Y.join(",")}}`),this}ilikeAnyOf(W,Y){return this.url.searchParams.append(W,`ilike(any).{${Y.join(",")}}`),this}regexMatch(W,Y){return this.url.searchParams.append(W,`match.${Y}`),this}regexIMatch(W,Y){return this.url.searchParams.append(W,`imatch.${Y}`),this}is(W,Y){return this.url.searchParams.append(W,`is.${Y}`),this}isDistinct(W,Y){return this.url.searchParams.append(W,`isdistinct.${Y}`),this}in(W,Y){const ye=Array.from(new Set(Y)).map(Re=>"string"==typeof Re&&Dt.test(Re)?`"${Re}"`:`${Re}`).join(",");return this.url.searchParams.append(W,`in.(${ye})`),this}contains(W,Y){return"string"==typeof Y?this.url.searchParams.append(W,`cs.${Y}`):Array.isArray(Y)?this.url.searchParams.append(W,`cs.{${Y.join(",")}}`):this.url.searchParams.append(W,`cs.${JSON.stringify(Y)}`),this}containedBy(W,Y){return"string"==typeof Y?this.url.searchParams.append(W,`cd.${Y}`):Array.isArray(Y)?this.url.searchParams.append(W,`cd.{${Y.join(",")}}`):this.url.searchParams.append(W,`cd.${JSON.stringify(Y)}`),this}rangeGt(W,Y){return this.url.searchParams.append(W,`sr.${Y}`),this}rangeGte(W,Y){return this.url.searchParams.append(W,`nxl.${Y}`),this}rangeLt(W,Y){return this.url.searchParams.append(W,`sl.${Y}`),this}rangeLte(W,Y){return this.url.searchParams.append(W,`nxr.${Y}`),this}rangeAdjacent(W,Y){return this.url.searchParams.append(W,`adj.${Y}`),this}overlaps(W,Y){return this.url.searchParams.append(W,"string"==typeof Y?`ov.${Y}`:`ov.{${Y.join(",")}}`),this}textSearch(W,Y,{config:ye,type:Re}={}){let Ke="";return"plain"===Re?Ke="pl":"phrase"===Re?Ke="ph":"websearch"===Re&&(Ke="w"),this.url.searchParams.append(W,`${Ke}fts${void 0===ye?"":`(${ye})`}.${Y}`),this}match(W){return Object.entries(W).forEach(([Y,ye])=>{this.url.searchParams.append(Y,`eq.${ye}`)}),this}not(W,Y,ye){return this.url.searchParams.append(W,`not.${Y}.${ye}`),this}or(W,{foreignTable:Y,referencedTable:ye=Y}={}){return this.url.searchParams.append(ye?`${ye}.or`:"or",`(${W})`),this}filter(W,Y,ye){return this.url.searchParams.append(W,`${Y}.${ye}`),this}}},666:(Qn,We,tt)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});const lt=tt(215).__importDefault(tt(608));We.default=class Dt{constructor(we,{headers:W={},schema:Y,fetch:ye}){this.url=we,this.headers=new Headers(W),this.schema=Y,this.fetch=ye}select(we,W){const{head:Y=!1,count:ye}=W??{},Re=Y?"HEAD":"GET";let Ke=!1;const Ne=(we??"*").split("").map(Qe=>/\s/.test(Qe)&&!Ke?"":('"'===Qe&&(Ke=!Ke),Qe)).join("");return this.url.searchParams.set("select",Ne),ye&&this.headers.append("Prefer",`count=${ye}`),new lt.default({method:Re,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(we,{count:W,defaultToNull:Y=!0}={}){var ye;if(W&&this.headers.append("Prefer",`count=${W}`),Y||this.headers.append("Prefer","missing=default"),Array.isArray(we)){const Ke=we.reduce((Ne,Qe)=>Ne.concat(Object.keys(Qe)),[]);if(Ke.length>0){const Ne=[...new Set(Ke)].map(Qe=>`"${Qe}"`);this.url.searchParams.set("columns",Ne.join(","))}}return new lt.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:we,fetch:null!==(ye=this.fetch)&&void 0!==ye?ye:fetch})}upsert(we,{onConflict:W,ignoreDuplicates:Y=!1,count:ye,defaultToNull:Re=!0}={}){var Ke;if(this.headers.append("Prefer",`resolution=${Y?"ignore":"merge"}-duplicates`),void 0!==W&&this.url.searchParams.set("on_conflict",W),ye&&this.headers.append("Prefer",`count=${ye}`),Re||this.headers.append("Prefer","missing=default"),Array.isArray(we)){const Qe=we.reduce((rn,on)=>rn.concat(Object.keys(on)),[]);if(Qe.length>0){const rn=[...new Set(Qe)].map(on=>`"${on}"`);this.url.searchParams.set("columns",rn.join(","))}}return new lt.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:we,fetch:null!==(Ke=this.fetch)&&void 0!==Ke?Ke:fetch})}update(we,{count:W}={}){var Y;return W&&this.headers.append("Prefer",`count=${W}`),new lt.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:we,fetch:null!==(Y=this.fetch)&&void 0!==Y?Y:fetch})}delete({count:we}={}){var W;return we&&this.headers.append("Prefer",`count=${we}`),new lt.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(W=this.fetch)&&void 0!==W?W:fetch})}}},342:(Qn,We,tt)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});const lt=tt(215).__importDefault(tt(958));We.default=class Dt extends lt.default{select(we){let W=!1;const Y=(we??"*").split("").map(ye=>/\s/.test(ye)&&!W?"":('"'===ye&&(W=!W),ye)).join("");return this.url.searchParams.set("select",Y),this.headers.append("Prefer","return=representation"),this}order(we,{ascending:W=!0,nullsFirst:Y,foreignTable:ye,referencedTable:Re=ye}={}){const Ke=Re?`${Re}.order`:"order",Ne=this.url.searchParams.get(Ke);return this.url.searchParams.set(Ke,`${Ne?`${Ne},`:""}${we}.${W?"asc":"desc"}${void 0===Y?"":Y?".nullsfirst":".nullslast"}`),this}limit(we,{foreignTable:W,referencedTable:Y=W}={}){return this.url.searchParams.set(typeof Y>"u"?"limit":`${Y}.limit`,`${we}`),this}range(we,W,{foreignTable:Y,referencedTable:ye=Y}={}){const Ke=typeof ye>"u"?"limit":`${ye}.limit`;return this.url.searchParams.set(typeof ye>"u"?"offset":`${ye}.offset`,`${we}`),this.url.searchParams.set(Ke,""+(W-we+1)),this}abortSignal(we){return this.signal=we,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:we=!1,verbose:W=!1,settings:Y=!1,buffers:ye=!1,wal:Re=!1,format:Ke="text"}={}){var Ne;const Qe=[we?"analyze":null,W?"verbose":null,Y?"settings":null,ye?"buffers":null,Re?"wal":null].filter(Boolean).join("|"),rn=null!==(Ne=this.headers.get("Accept"))&&void 0!==Ne?Ne:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${Ke}; for="${rn}"; options=${Qe};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(we){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${we}`),this}}},60:(Qn,We,tt)=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0}),We.PostgrestError=We.PostgrestBuilder=We.PostgrestTransformBuilder=We.PostgrestFilterBuilder=We.PostgrestQueryBuilder=We.PostgrestClient=void 0;const Se=tt(215),lt=Se.__importDefault(tt(242));We.PostgrestClient=lt.default;const Dt=Se.__importDefault(tt(666));We.PostgrestQueryBuilder=Dt.default;const kt=Se.__importDefault(tt(608));We.PostgrestFilterBuilder=kt.default;const we=Se.__importDefault(tt(342));We.PostgrestTransformBuilder=we.default;const W=Se.__importDefault(tt(958));We.PostgrestBuilder=W.default;const Y=Se.__importDefault(tt(659));We.PostgrestError=Y.default,We.default={PostgrestClient:lt.default,PostgrestQueryBuilder:Dt.default,PostgrestFilterBuilder:kt.default,PostgrestTransformBuilder:we.default,PostgrestBuilder:W.default,PostgrestError:Y.default}},215:(Qn,We,tt)=>{"use strict";tt.r(We),tt.d(We,{__addDisposableResource:()=>Ct,__assign:()=>Dt,__asyncDelegator:()=>Bi,__asyncGenerator:()=>ua,__asyncValues:()=>qr,__await:()=>kn,__awaiter:()=>Qe,__classPrivateFieldGet:()=>Pi,__classPrivateFieldIn:()=>Ql,__classPrivateFieldSet:()=>sp,__createBinding:()=>on,__decorate:()=>we,__disposeResources:()=>cp,__esDecorate:()=>Y,__exportStar:()=>dr,__extends:()=>lt,__generator:()=>rn,__importDefault:()=>Ec,__importStar:()=>op,__makeTemplateObject:()=>li,__metadata:()=>Ne,__param:()=>W,__propKey:()=>Re,__read:()=>Je,__rest:()=>kt,__rewriteRelativeImportExtension:()=>up,__runInitializers:()=>ye,__setFunctionName:()=>Ke,__spread:()=>vt,__spreadArray:()=>Or,__spreadArrays:()=>qt,__values:()=>sn,default:()=>Zy});var Se=function($,G){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,z){J.__proto__=z}||function(J,z){for(var ee in z)Object.prototype.hasOwnProperty.call(z,ee)&&(J[ee]=z[ee])})($,G)};function lt($,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function J(){this.constructor=$}Se($,G),$.prototype=null===G?Object.create(G):(J.prototype=G.prototype,new J)}var Dt=function(){return Dt=Object.assign||function(G){for(var J,z=1,ee=arguments.length;z<ee;z++)for(var ce in J=arguments[z])Object.prototype.hasOwnProperty.call(J,ce)&&(G[ce]=J[ce]);return G},Dt.apply(this,arguments)};function kt($,G){var J={};for(var z in $)Object.prototype.hasOwnProperty.call($,z)&&G.indexOf(z)<0&&(J[z]=$[z]);if(null!=$&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(z=Object.getOwnPropertySymbols($);ee<z.length;ee++)G.indexOf(z[ee])<0&&Object.prototype.propertyIsEnumerable.call($,z[ee])&&(J[z[ee]]=$[z[ee]])}return J}function we($,G,J,z){var ue,ee=arguments.length,ce=ee<3?G:null===z?z=Object.getOwnPropertyDescriptor(G,J):z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ce=Reflect.decorate($,G,J,z);else for(var re=$.length-1;re>=0;re--)(ue=$[re])&&(ce=(ee<3?ue(ce):ee>3?ue(G,J,ce):ue(G,J))||ce);return ee>3&&ce&&Object.defineProperty(G,J,ce),ce}function W($,G){return function(J,z){G(J,z,$)}}function Y($,G,J,z,ee,ce){function ue(Hi){if(void 0!==Hi&&"function"!=typeof Hi)throw new TypeError("Function expected");return Hi}for(var vn,re=z.kind,Tn="getter"===re?"get":"setter"===re?"set":"value",Ue=!G&&$?z.static?$:$.prototype:null,Ut=G||(Ue?Object.getOwnPropertyDescriptor(Ue,z.name):{}),ds=!1,Tt=J.length-1;Tt>=0;Tt--){var Jn={};for(var xr in z)Jn[xr]="access"===xr?{}:z[xr];for(var xr in z.access)Jn.access[xr]=z.access[xr];Jn.addInitializer=function(Hi){if(ds)throw new TypeError("Cannot add initializers after decoration has completed");ce.push(ue(Hi||null))};var di=(0,J[Tt])("accessor"===re?{get:Ut.get,set:Ut.set}:Ut[Tn],Jn);if("accessor"===re){if(void 0===di)continue;if(null===di||"object"!=typeof di)throw new TypeError("Object expected");(vn=ue(di.get))&&(Ut.get=vn),(vn=ue(di.set))&&(Ut.set=vn),(vn=ue(di.init))&&ee.unshift(vn)}else(vn=ue(di))&&("field"===re?ee.unshift(vn):Ut[Tn]=vn)}Ue&&Object.defineProperty(Ue,z.name,Ut),ds=!0}function ye($,G,J){for(var z=arguments.length>2,ee=0;ee<G.length;ee++)J=z?G[ee].call($,J):G[ee].call($);return z?J:void 0}function Re($){return"symbol"==typeof $?$:"".concat($)}function Ke($,G,J){return"symbol"==typeof G&&(G=G.description?"[".concat(G.description,"]"):""),Object.defineProperty($,"name",{configurable:!0,value:J?"".concat(J," ",G):G})}function Ne($,G){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata($,G)}function Qe($,G,J,z){return new(J||(J=Promise))(function(ce,ue){function re(Ut){try{Ue(z.next(Ut))}catch(vn){ue(vn)}}function Tn(Ut){try{Ue(z.throw(Ut))}catch(vn){ue(vn)}}function Ue(Ut){Ut.done?ce(Ut.value):function ee(ce){return ce instanceof J?ce:new J(function(ue){ue(ce)})}(Ut.value).then(re,Tn)}Ue((z=z.apply($,G||[])).next())})}function rn($,G){var z,ee,ce,J={label:0,sent:function(){if(1&ce[0])throw ce[1];return ce[1]},trys:[],ops:[]},ue=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return ue.next=re(0),ue.throw=re(1),ue.return=re(2),"function"==typeof Symbol&&(ue[Symbol.iterator]=function(){return this}),ue;function re(Ue){return function(Ut){return function Tn(Ue){if(z)throw new TypeError("Generator is already executing.");for(;ue&&(ue=0,Ue[0]&&(J=0)),J;)try{if(z=1,ee&&(ce=2&Ue[0]?ee.return:Ue[0]?ee.throw||((ce=ee.return)&&ce.call(ee),0):ee.next)&&!(ce=ce.call(ee,Ue[1])).done)return ce;switch(ee=0,ce&&(Ue=[2&Ue[0],ce.value]),Ue[0]){case 0:case 1:ce=Ue;break;case 4:return J.label++,{value:Ue[1],done:!1};case 5:J.label++,ee=Ue[1],Ue=[0];continue;case 7:Ue=J.ops.pop(),J.trys.pop();continue;default:if(!(ce=(ce=J.trys).length>0&&ce[ce.length-1])&&(6===Ue[0]||2===Ue[0])){J=0;continue}if(3===Ue[0]&&(!ce||Ue[1]>ce[0]&&Ue[1]<ce[3])){J.label=Ue[1];break}if(6===Ue[0]&&J.label<ce[1]){J.label=ce[1],ce=Ue;break}if(ce&&J.label<ce[2]){J.label=ce[2],J.ops.push(Ue);break}ce[2]&&J.ops.pop(),J.trys.pop();continue}Ue=G.call($,J)}catch(Ut){Ue=[6,Ut],ee=0}finally{z=ce=0}if(5&Ue[0])throw Ue[1];return{value:Ue[0]?Ue[1]:void 0,done:!0}}([Ue,Ut])}}}var on=Object.create?function($,G,J,z){void 0===z&&(z=J);var ee=Object.getOwnPropertyDescriptor(G,J);(!ee||("get"in ee?!G.__esModule:ee.writable||ee.configurable))&&(ee={enumerable:!0,get:function(){return G[J]}}),Object.defineProperty($,z,ee)}:function($,G,J,z){void 0===z&&(z=J),$[z]=G[J]};function dr($,G){for(var J in $)"default"!==J&&!Object.prototype.hasOwnProperty.call(G,J)&&on(G,$,J)}function sn($){var G="function"==typeof Symbol&&Symbol.iterator,J=G&&$[G],z=0;if(J)return J.call($);if($&&"number"==typeof $.length)return{next:function(){return $&&z>=$.length&&($=void 0),{value:$&&$[z++],done:!$}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je($,G){var J="function"==typeof Symbol&&$[Symbol.iterator];if(!J)return $;var ee,ue,z=J.call($),ce=[];try{for(;(void 0===G||G-- >0)&&!(ee=z.next()).done;)ce.push(ee.value)}catch(re){ue={error:re}}finally{try{ee&&!ee.done&&(J=z.return)&&J.call(z)}finally{if(ue)throw ue.error}}return ce}function vt(){for(var $=[],G=0;G<arguments.length;G++)$=$.concat(Je(arguments[G]));return $}function qt(){for(var $=0,G=0,J=arguments.length;G<J;G++)$+=arguments[G].length;var z=Array($),ee=0;for(G=0;G<J;G++)for(var ce=arguments[G],ue=0,re=ce.length;ue<re;ue++,ee++)z[ee]=ce[ue];return z}function Or($,G,J){if(J||2===arguments.length)for(var ce,z=0,ee=G.length;z<ee;z++)(ce||!(z in G))&&(ce||(ce=Array.prototype.slice.call(G,0,z)),ce[z]=G[z]);return $.concat(ce||Array.prototype.slice.call(G))}function kn($){return this instanceof kn?(this.v=$,this):new kn($)}function ua($,G,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,z=J.apply($,G||[]),ce=[];return ee=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),re("next"),re("throw"),re("return",function ue(Tt){return function(Jn){return Promise.resolve(Jn).then(Tt,vn)}}),ee[Symbol.asyncIterator]=function(){return this},ee;function re(Tt,Jn){z[Tt]&&(ee[Tt]=function(xr){return new Promise(function(di,Hi){ce.push([Tt,xr,di,Hi])>1||Tn(Tt,xr)})},Jn&&(ee[Tt]=Jn(ee[Tt])))}function Tn(Tt,Jn){try{!function Ue(Tt){Tt.value instanceof kn?Promise.resolve(Tt.value.v).then(Ut,vn):ds(ce[0][2],Tt)}(z[Tt](Jn))}catch(xr){ds(ce[0][3],xr)}}function Ut(Tt){Tn("next",Tt)}function vn(Tt){Tn("throw",Tt)}function ds(Tt,Jn){Tt(Jn),ce.shift(),ce.length&&Tn(ce[0][0],ce[0][1])}}function Bi($){var G,J;return G={},z("next"),z("throw",function(ee){throw ee}),z("return"),G[Symbol.iterator]=function(){return this},G;function z(ee,ce){G[ee]=$[ee]?function(ue){return(J=!J)?{value:kn($[ee](ue)),done:!1}:ce?ce(ue):ue}:ce}}function qr($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,G=$[Symbol.asyncIterator];return G?G.call($):($=sn($),J={},z("next"),z("throw"),z("return"),J[Symbol.asyncIterator]=function(){return this},J);function z(ce){J[ce]=$[ce]&&function(ue){return new Promise(function(re,Tn){!function ee(ce,ue,re,Tn){Promise.resolve(Tn).then(function(Ue){ce({value:Ue,done:re})},ue)}(re,Tn,(ue=$[ce](ue)).done,ue.value)})}}}function li($,G){return Object.defineProperty?Object.defineProperty($,"raw",{value:G}):$.raw=G,$}var Xy=Object.create?function($,G){Object.defineProperty($,"default",{enumerable:!0,value:G})}:function($,G){$.default=G},la=function($){return(la=Object.getOwnPropertyNames||function(G){var J=[];for(var z in G)Object.prototype.hasOwnProperty.call(G,z)&&(J[J.length]=z);return J})($)};function op($){if($&&$.__esModule)return $;var G={};if(null!=$)for(var J=la($),z=0;z<J.length;z++)"default"!==J[z]&&on(G,$,J[z]);return Xy(G,$),G}function Ec($){return $&&$.__esModule?$:{default:$}}function Pi($,G,J,z){if("a"===J&&!z)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof G?$!==G||!z:!G.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===J?z:"a"===J?z.call($):z?z.value:G.get($)}function sp($,G,J,z,ee){if("m"===z)throw new TypeError("Private method is not writable");if("a"===z&&!ee)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof G?$!==G||!ee:!G.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===z?ee.call($,J):ee?ee.value=J:G.set($,J),J}function Ql($,G){if(null===G||"object"!=typeof G&&"function"!=typeof G)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof $?G===$:$.has(G)}function Ct($,G,J){if(null!=G){if("object"!=typeof G&&"function"!=typeof G)throw new TypeError("Object expected.");var z,ee;if(J){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");z=G[Symbol.asyncDispose]}if(void 0===z){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");z=G[Symbol.dispose],J&&(ee=z)}if("function"!=typeof z)throw new TypeError("Object not disposable.");ee&&(z=function(){try{ee.call(this)}catch(ce){return Promise.reject(ce)}}),$.stack.push({value:G,dispose:z,async:J})}else J&&$.stack.push({async:!0});return G}var ap="function"==typeof SuppressedError?SuppressedError:function($,G,J){var z=new Error(J);return z.name="SuppressedError",z.error=$,z.suppressed=G,z};function cp($){function G(ce){$.error=$.hasError?new ap(ce,$.error,"An error was suppressed during disposal."):ce,$.hasError=!0}var J,z=0;return function ee(){for(;J=$.stack.pop();)try{if(!J.async&&1===z)return z=0,$.stack.push(J),Promise.resolve().then(ee);if(J.dispose){var ce=J.dispose.call(J.value);if(J.async)return z|=2,Promise.resolve(ce).then(ee,function(ue){return G(ue),ee()})}else z|=1}catch(ue){G(ue)}if(1===z)return $.hasError?Promise.reject($.error):Promise.resolve();if($.hasError)throw $.error}()}function up($,G){return"string"==typeof $&&/^\.\.?\//.test($)?$.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(J,z,ee,ce,ue){return z?G?".jsx":".js":!ee||ce&&ue?ee+ce+"."+ue.toLowerCase()+"js":J}):$}const Zy={__extends:lt,__assign:Dt,__rest:kt,__decorate:we,__param:W,__esDecorate:Y,__runInitializers:ye,__propKey:Re,__setFunctionName:Ke,__metadata:Ne,__awaiter:Qe,__generator:rn,__createBinding:on,__exportStar:dr,__values:sn,__read:Je,__spread:vt,__spreadArrays:qt,__spreadArray:Or,__await:kn,__asyncGenerator:ua,__asyncDelegator:Bi,__asyncValues:qr,__makeTemplateObject:li,__importStar:op,__importDefault:Ec,__classPrivateFieldGet:Pi,__classPrivateFieldSet:sp,__classPrivateFieldIn:Ql,__addDisposableResource:Ct,__disposeResources:cp,__rewriteRelativeImportExtension:up}},293:Qn=>{function We(Se,lt,Dt,kt,we,W,Y){try{var ye=Se[W](Y),Re=ye.value}catch(Ke){return void Dt(Ke)}ye.done?lt(Re):Promise.resolve(Re).then(kt,we)}Qn.exports=function tt(Se){return function(){var lt=this,Dt=arguments;return new Promise(function(kt,we){var W=Se.apply(lt,Dt);function Y(Re){We(W,kt,we,Y,ye,"next",Re)}function ye(Re){We(W,kt,we,Y,ye,"throw",Re)}Y(void 0)})}},Qn.exports.__esModule=!0,Qn.exports.default=Qn.exports}},Qn=>{Qn(Qn.s=731)}]);