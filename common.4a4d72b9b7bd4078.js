"use strict";(self.webpackChunkuptc_music=self.webpackChunkuptc_music||[]).push([[76],{8440:(m,c,a)=>{a.d(c,{m:()=>u});var n=a(1626),d=a(5321),o=a(5312),p=a(6354),l=a(6276),i=a(3205);let u=(()=>{class e{http;authService;supabase;apiUrl=`${o.c.apiUrl}/api/buitres`;constructor(t,r){this.http=t,this.authService=r,this.supabase=(0,d.UU)(o.c.supabaseUrl,o.c.supabaseKey)}getSongNotes(t){return this.http.get(`${this.apiUrl}/people/${t}/songs`,{headers:this.getAuthHeaders()})}addSongNote(t,r,h,g="song",_=""){return this.http.post(`${this.apiUrl}/people/${t}/songs`,{track_data:r,dedication:h,type:g,bg_color:_},{headers:this.getAuthHeaders()})}deleteSongNote(t){return this.http.delete(`${this.apiUrl}/songs/${t}`,{headers:this.getAuthHeaders()})}searchSongs(t){return this.http.get(`${o.c.apiUrl}/api/search`,{params:{q:t},headers:this.getAuthHeaders()})}getAuthHeaders(){const t=this.authService.getBuitresToken(),r={};return t&&(r.Authorization=`Bearer ${t}`),r}getPeople(t="",r="recent"){let h=(new n.Nl).set("search",t).set("sortBy",r);return this.http.get(`${this.apiUrl}/people`,{params:h,headers:this.getAuthHeaders()})}getTotalPeopleCount(){return this.http.get(`${this.apiUrl}/people/count`,{headers:this.getAuthHeaders()}).pipe((0,p.T)(t=>t.count))}getPersonById(t){return this.http.get(`${this.apiUrl}/people/${t}`,{headers:this.getAuthHeaders()})}createPerson(t,r,h,g=""){return this.http.post(`${this.apiUrl}/people`,{name:t,description:r,gender:h,email:g},{headers:this.getAuthHeaders()})}updatePerson(t,r){return this.http.patch(`${this.apiUrl}/people/${t}`,r,{headers:this.getAuthHeaders()})}deletePerson(t){return this.http.delete(`${this.apiUrl}/people/${t}`,{headers:this.getAuthHeaders()})}getDetails(t){return this.http.get(`${this.apiUrl}/people/${t}/details`,{headers:this.getAuthHeaders()})}addOrIncrementDetail(t,r,h){return this.http.post(`${this.apiUrl}/people/${t}/details`,{content:r,fingerprint:h},{headers:this.getAuthHeaders()})}deleteDetail(t){return this.http.delete(`${this.apiUrl}/details/${t}`,{headers:this.getAuthHeaders()})}getComments(t){return this.http.get(`${this.apiUrl}/people/${t}/comments`,{headers:this.getAuthHeaders()})}addComment(t,r,h){return this.http.post(`${this.apiUrl}/people/${t}/comments`,{content:r,fingerprint:h},{headers:this.getAuthHeaders()})}deleteComment(t){return this.http.delete(`${this.apiUrl}/comments/${t}`,{headers:this.getAuthHeaders()})}likeComment(t,r){return this.http.post(`${this.apiUrl}/comments/${t}/like`,{fingerprint:r},{headers:this.getAuthHeaders()})}votePerson(t,r,h){return this.http.post(`${this.apiUrl}/people/${t}/vote`,{type:r,fingerprint:h},{headers:this.getAuthHeaders()})}mergePersons(t,r){return this.http.post(`${this.apiUrl}/merge`,{keepId:t,removeId:r},{headers:this.getAuthHeaders()})}subscribeToChanges(t,r){return this.supabase.channel(`public:${t}`).on("postgres_changes",{event:"*",schema:"public",table:t},r).subscribe()}static \u0275fac=function(r){return new(r||e)(l.KVO(n.Qq),l.KVO(i.u))};static \u0275prov=l.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()},5154:(m,c,a)=>{a.d(c,{u:()=>l});var n=a(8141),d=a(5312),o=a(6276),p=a(1626);let l=(()=>{class i{http;apiUrl=d.c.apiUrl;likedItems=new Set;constructor(e){this.http=e,this.loadLikedItemsFromStorage()}loadLikedItemsFromStorage(){const e=localStorage.getItem("discussion_likes");e&&(this.likedItems=new Set(JSON.parse(e)))}saveLikedItemsToStorage(){localStorage.setItem("discussion_likes",JSON.stringify([...this.likedItems]))}getItemKey(e,s){return`${e}:${s}`}hasUserLiked(e,s){return this.likedItems.has(this.getItemKey(e,s))}updateLikeStatus(e,s,t){const r=this.getItemKey(e,s);t?this.likedItems.add(r):this.likedItems.delete(r),this.saveLikedItemsToStorage()}getThreads(e="updated_at",s="desc"){return this.http.get(`${this.apiUrl}/api/discussion/threads?sort=${e}&order=${s}`)}getThread(e){return this.http.get(`${this.apiUrl}/api/discussion/threads/${e}`)}createThread(e,s){return this.http.post(`${this.apiUrl}/api/discussion/threads`,{title:e,content:s})}addComment(e,s,t){return this.http.post(`${this.apiUrl}/api/discussion/threads/${e}/comments`,{content:s,parent_comment_id:t})}likeThread(e){return this.http.post(`${this.apiUrl}/api/discussion/like`,{thread_id:e}).pipe((0,n.M)(s=>{this.updateLikeStatus("thread",e,"liked"===s.action)}))}likeComment(e){return this.http.post(`${this.apiUrl}/api/discussion/like`,{comment_id:e}).pipe((0,n.M)(s=>{this.updateLikeStatus("comment",e,"liked"===s.action)}))}static \u0275fac=function(s){return new(s||i)(o.KVO(p.Qq))};static \u0275prov=o.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},2915:(m,c,a)=>{a.d(c,{R:()=>o});var n=a(6276),d=a(345);let o=(()=>{class p{title;meta;constructor(i,u){this.title=i,this.meta=u}updateTitle(i){this.title.setTitle(`${i} | MusicaUPTC`)}updateTags(i){i.forEach(u=>{this.meta.updateTag(u)})}updatePageData(i,u,e){this.updateTitle(i);const s=[{name:"description",content:u},{property:"og:title",content:i},{property:"og:description",content:u},{property:"twitter:card",content:"summary_large_image"},{property:"twitter:title",content:i},{property:"twitter:description",content:u}];e&&(s.push({property:"og:image",content:e}),s.push({property:"twitter:image",content:e})),this.updateTags(s)}static \u0275fac=function(u){return new(u||p)(n.KVO(d.hE),n.KVO(d.W8))};static \u0275prov=n.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},7483:(m,c,a)=>{a.d(c,{l:()=>l});var n=a(5312),d=a(6276),o=a(1626),p=a(3205);let l=(()=>{class i{http;authService;apiUrl=n.c.apiUrl;constructor(e,s){this.http=e,this.authService=s}getSchedules(){return this.http.get(`${this.apiUrl}/api/schedules`)}updateSchedules(e){const s=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/api/schedules`,e,{headers:s})}static \u0275fac=function(s){return new(s||i)(d.KVO(o.Qq),d.KVO(p.u))};static \u0275prov=d.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},152:(m,c,a)=>{a.d(c,{B:()=>p});var n=a(3888),d=a(9974),o=a(4360);function p(l,i=n.E){return(0,d.N)((u,e)=>{let s=null,t=null,r=null;const h=()=>{if(s){s.unsubscribe(),s=null;const _=t;t=null,e.next(_)}};function g(){const _=r+l,E=i.now();if(E<_)return s=this.schedule(void 0,_-E),void e.add(s);h()}u.subscribe((0,o._)(e,_=>{t=_,r=i.now(),s||(s=i.schedule(g,l),e.add(s))},()=>{h(),e.complete()},void 0,()=>{t=s=null}))})}}}]);