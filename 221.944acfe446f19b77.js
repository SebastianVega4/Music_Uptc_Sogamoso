"use strict";(self.webpackChunkuptc_music=self.webpackChunkuptc_music||[]).push([[221],{1221:(b,f,s)=>{s.r(f),s.d(f,{ThreadDetailComponent:()=>K});var h=s(177),l=s(4341),_=s(8435),t=s(6276),M=s(5154),O=s(2915),g=s(3205);function k(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",8),t.nrm(1,"i",9),t.EFF(2),t.j41(3,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.error=null)}),t.nrm(4,"i",11),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ",e.error," ")}}function a(o,d){1&o&&(t.j41(0,"div",12)(1,"div",13),t.nrm(2,"div",14),t.j41(3,"p"),t.EFF(4,"Cargando hilo..."),t.k0s()()())}function c(o,d){if(1&o&&(t.j41(0,"div")(1,"h1",46),t.EFF(2),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.JRh(e.thread.title)}}function p(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",47)(1,"input",48),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.editedThreadTitle=i)}),t.k0s()()}if(2&o){const e=t.XpG(2);t.R7$(1),t.Y8G("ngModel",e.editedThreadTitle)}}function C(o,d){if(1&o){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.startEditThread())}),t.nrm(1,"i",53),t.k0s()}}function x(o,d){if(1&o){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.deleteThread())}),t.nrm(1,"i",55),t.k0s()}}function T(o,d){if(1&o&&(t.j41(0,"div",49),t.DNE(1,C,2,0,"button",50),t.DNE(2,x,2,0,"button",51),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.Y8G("ngIf",!e.isEditingThread),t.R7$(1),t.Y8G("ngIf",!e.isEditingThread)}}function E(o,d){if(1&o&&(t.j41(0,"div",56),t.nrm(1,"img",57),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.Y8G("src",e.thread.image_url,t.B4B)}}function y(o,d){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.JRh(e.thread.content)}}function j(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",58)(1,"textarea",59),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.editedThreadContent=i)}),t.k0s(),t.j41(2,"div",60)(3,"button",61),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.cancelEditThread())}),t.EFF(4,"Cancelar"),t.k0s(),t.j41(5,"button",62),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.saveThread())}),t.EFF(6,"Guardar Cambios"),t.k0s()()()}if(2&o){const e=t.XpG(2);t.R7$(1),t.Y8G("ngModel",e.editedThreadContent)}}function I(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",63)(1,"button",61),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.cancelReply())}),t.nrm(2,"i",64),t.EFF(3,"Cancelar "),t.k0s(),t.j41(4,"button",65),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.addReply())}),t.nrm(5,"i",66),t.EFF(6,"Responder "),t.k0s()()}if(2&o){const e=t.XpG(2);t.R7$(4),t.Y8G("disabled",!e.replyContent.trim())}}function D(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",63)(1,"button",65),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.addComment())}),t.nrm(2,"i",67),t.EFF(3,"Publicar comentario "),t.k0s()()}if(2&o){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",!e.newComment.trim())}}function R(o,d){1&o&&(t.j41(0,"div",68)(1,"div",69),t.nrm(2,"i",70),t.j41(3,"h4"),t.EFF(4,"\xa1S\xe9 el primero en comentar!"),t.k0s(),t.j41(5,"p"),t.EFF(6,"A\xfan no hay comentarios en este hilo. Comparte tu opini\xf3n."),t.k0s()()())}function $(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",86)(1,"button",87),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(3);return t.Njj(r.startEditComment(i))}),t.nrm(2,"i",53),t.k0s(),t.j41(3,"button",88),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(3);return t.Njj(r.deleteComment(i))}),t.nrm(4,"i",55),t.k0s()()}}function G(o,d){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.content)}}function F(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",89)(1,"textarea",90),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(4);return t.Njj(r.editedCommentContent=i)}),t.k0s(),t.j41(2,"div",60)(3,"button",91),t.bIt("click",function(){t.eBV(e);const i=t.XpG(4);return t.Njj(i.cancelEditComment())}),t.EFF(4,"Cancelar"),t.k0s(),t.j41(5,"button",92),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(3);return t.Njj(r.saveComment(i))}),t.EFF(6,"Guardar"),t.k0s()()()}if(2&o){const e=t.XpG(4);t.R7$(1),t.Y8G("ngModel",e.editedCommentContent)}}function X(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",63)(1,"button",93),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(3);return t.Njj(r.likeComment(i))}),t.nrm(2,"i",31),t.j41(3,"span"),t.EFF(4),t.k0s()(),t.j41(5,"button",94),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(3);return r.replyingTo=i.id,t.Njj(r.replyContent="")}),t.nrm(6,"i",95),t.j41(7,"span"),t.EFF(8,"Responder"),t.k0s()()()}if(2&o){const e=t.XpG().$implicit;t.R7$(1),t.AVh("liked",e.user_has_liked),t.R7$(3),t.JRh(e.likes_count)}}function N(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",86)(1,"button",87),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(5);return t.Njj(r.startEditComment(i))}),t.nrm(2,"i",53),t.k0s(),t.j41(3,"button",88),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(5);return t.Njj(r.deleteComment(i))}),t.nrm(4,"i",55),t.k0s()()}}function S(o,d){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.content)}}function w(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",89)(1,"textarea",90),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(6);return t.Njj(r.editedCommentContent=i)}),t.k0s(),t.j41(2,"div",60)(3,"button",91),t.bIt("click",function(){t.eBV(e);const i=t.XpG(6);return t.Njj(i.cancelEditComment())}),t.EFF(4,"Cancelar"),t.k0s(),t.j41(5,"button",92),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(5);return t.Njj(r.saveComment(i))}),t.EFF(6,"Guardar"),t.k0s()()()}if(2&o){const e=t.XpG(6);t.R7$(1),t.Y8G("ngModel",e.editedCommentContent)}}function V(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",63)(1,"button",93),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(5);return t.Njj(r.likeComment(i))}),t.nrm(2,"i",31),t.j41(3,"span"),t.EFF(4),t.k0s()(),t.j41(5,"button",94),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2).$implicit,m=t.XpG(3);return m.replyingTo=r.id,t.Njj(m.replyContent="@"+(i.author_fingerprint.substring(0,8)||"")+" ")}),t.nrm(6,"i",95),t.j41(7,"span"),t.EFF(8,"Responder"),t.k0s()()()}if(2&o){const e=t.XpG().$implicit;t.R7$(1),t.AVh("liked",e.user_has_liked),t.R7$(3),t.JRh(e.likes_count)}}function B(o,d){if(1&o&&(t.j41(0,"div",98)(1,"div",99),t.nrm(2,"i",76),t.k0s(),t.j41(3,"div",77)(4,"div",78)(5,"span",79),t.nrm(6,"i",24),t.EFF(7),t.k0s(),t.j41(8,"div",80)(9,"span",81),t.nrm(10,"i",22),t.EFF(11),t.k0s(),t.DNE(12,N,5,0,"div",82),t.k0s()(),t.j41(13,"div",83),t.DNE(14,S,2,1,"p",18),t.DNE(15,w,7,1,"div",84),t.k0s(),t.DNE(16,V,9,3,"div",40),t.k0s()()),2&o){const e=d.$implicit,n=t.XpG(5);t.R7$(7),t.SpI(" Usuario ",e.author_fingerprint.substring(0,8)," "),t.R7$(4),t.SpI("",n.formatTimeAgo(e.created_at)," "),t.R7$(1),t.Y8G("ngIf",n.isAdmin&&n.editingCommentId!==e.id),t.R7$(2),t.Y8G("ngIf",n.editingCommentId!==e.id),t.R7$(1),t.Y8G("ngIf",n.editingCommentId===e.id),t.R7$(1),t.Y8G("ngIf",n.editingCommentId!==e.id)}}function Y(o,d){if(1&o&&(t.j41(0,"div",96),t.DNE(1,B,17,6,"div",97),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.Y8G("ngForOf",e.replies)}}function U(o,d){if(1&o&&(t.j41(0,"div",73)(1,"div",74)(2,"div",75),t.nrm(3,"i",76),t.k0s(),t.j41(4,"div",77)(5,"div",78)(6,"span",79),t.nrm(7,"i",24),t.EFF(8),t.k0s(),t.j41(9,"div",80)(10,"span",81),t.nrm(11,"i",22),t.EFF(12),t.k0s(),t.DNE(13,$,5,0,"div",82),t.k0s()(),t.j41(14,"div",83),t.DNE(15,G,2,1,"p",18),t.DNE(16,F,7,1,"div",84),t.k0s(),t.DNE(17,X,9,3,"div",40),t.k0s()(),t.DNE(18,Y,2,1,"div",85),t.k0s()),2&o){const e=d.$implicit,n=t.XpG(3);t.AVh("has-replies",e.replies&&e.replies.length>0),t.R7$(8),t.SpI(" Usuario ",e.author_fingerprint.substring(0,8)," "),t.R7$(4),t.SpI("",n.formatTimeAgo(e.created_at)," "),t.R7$(1),t.Y8G("ngIf",n.isAdmin&&n.editingCommentId!==e.id),t.R7$(2),t.Y8G("ngIf",n.editingCommentId!==e.id),t.R7$(1),t.Y8G("ngIf",n.editingCommentId===e.id),t.R7$(1),t.Y8G("ngIf",n.editingCommentId!==e.id),t.R7$(1),t.Y8G("ngIf",e.replies&&e.replies.length>0)}}function A(o,d){if(1&o&&(t.j41(0,"div",71),t.DNE(1,U,19,9,"div",72),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.comments)}}function L(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",15)(1,"div",16)(2,"div",17),t.DNE(3,c,3,1,"div",18),t.DNE(4,p,2,1,"div",19),t.j41(5,"div",20)(6,"span",21),t.nrm(7,"i",22),t.EFF(8),t.k0s(),t.j41(9,"span",23),t.nrm(10,"i",24),t.EFF(11),t.k0s(),t.DNE(12,T,3,2,"div",25),t.k0s()(),t.DNE(13,E,2,1,"div",26),t.j41(14,"div",27),t.DNE(15,y,2,1,"p",18),t.DNE(16,j,7,1,"div",28),t.k0s(),t.j41(17,"div",29)(18,"button",30),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.likeThread(i.thread))}),t.nrm(19,"i",31),t.j41(20,"span"),t.EFF(21),t.k0s(),t.j41(22,"span",32),t.EFF(23,"Me gusta"),t.k0s()(),t.j41(24,"div",33),t.nrm(25,"i",34),t.j41(26,"span"),t.EFF(27),t.k0s(),t.j41(28,"span",32),t.EFF(29),t.k0s()()()(),t.j41(30,"div",35)(31,"div",36)(32,"h3"),t.nrm(33,"i",37),t.EFF(34),t.k0s(),t.j41(35,"div",38)(36,"textarea",39),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.replyingTo?r.replyContent=i:r.newComment=i)}),t.k0s(),t.DNE(37,I,7,1,"div",40),t.DNE(38,D,4,1,"div",40),t.k0s()()(),t.j41(39,"div",41)(40,"div",42)(41,"h3"),t.nrm(42,"i",43),t.EFF(43),t.k0s()(),t.DNE(44,R,7,0,"div",44),t.DNE(45,A,2,1,"div",45),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",!e.isEditingThread),t.R7$(1),t.Y8G("ngIf",e.isEditingThread),t.R7$(4),t.SpI("Publicado ",e.formatTimeAgo(e.thread.created_at)," "),t.R7$(3),t.SpI("Usuario ",e.thread.author_fingerprint.substring(0,8)," "),t.R7$(1),t.Y8G("ngIf",e.isAdmin),t.R7$(1),t.Y8G("ngIf",e.thread.image_url),t.R7$(2),t.Y8G("ngIf",!e.isEditingThread),t.R7$(1),t.Y8G("ngIf",e.isEditingThread),t.R7$(2),t.AVh("liked",e.thread.user_has_liked),t.R7$(3),t.JRh(e.thread.likes_count),t.R7$(6),t.JRh(e.thread.comments_count),t.R7$(2),t.SpI("Comentario",1!==e.thread.comments_count?"s":"",""),t.R7$(5),t.SpI(" ",e.replyingTo?"Respondiendo a comentario...":"Agregar comentario"," "),t.R7$(2),t.FS9("placeholder",e.replyingTo?"Escribe tu respuesta...":"Comparte tu opini\xf3n sobre este tema..."),t.Y8G("ngModel",e.replyingTo?e.replyContent:e.newComment),t.R7$(1),t.Y8G("ngIf",e.replyingTo),t.R7$(1),t.Y8G("ngIf",!e.replyingTo),t.R7$(5),t.Lme(" ",e.thread.comments_count," Comentario",1!==e.thread.comments_count?"s":""," "),t.R7$(1),t.Y8G("ngIf",0===e.comments.length),t.R7$(1),t.Y8G("ngIf",e.comments.length>0)}}const v=function(){return["/discussion"]};function z(o,d){if(1&o&&(t.j41(0,"div",100)(1,"div",101),t.nrm(2,"i",102),t.j41(3,"h3"),t.EFF(4,"Error al cargar el hilo"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"a",103),t.nrm(8,"i",3),t.EFF(9,"Volver al foro "),t.k0s()()()),2&o){const e=t.XpG();t.R7$(6),t.JRh(e.error),t.R7$(1),t.Y8G("routerLink",t.lJ4(2,v))}}let K=(()=>{class o{route;router;discussionService;metaService;authService;thread;comments=[];newComment="";replyingTo=null;replyContent="";error=null;isLoading=!0;isAdmin=!1;isEditingThread=!1;editedThreadTitle="";editedThreadContent="";editingCommentId=null;editedCommentContent="";constructor(e,n,i,r,m){this.route=e,this.router=n,this.discussionService=i,this.metaService=r,this.authService=m}ngOnInit(){this.checkAdminStatus();const e=this.route.snapshot.paramMap.get("id");e&&this.loadThread(e)}checkAdminStatus(){this.isAdmin=this.authService.isRoleAdmin()}deleteThread(){confirm("\xbfEst\xe1s seguro de que quieres eliminar este hilo y todos sus comentarios? Esta acci\xf3n no se puede deshacer.")&&this.discussionService.deleteThread(this.thread.id).subscribe({next:()=>{this.router.navigate(["/discussion"])},error:e=>{console.error("Error deleting thread:",e),alert("Error al eliminar el hilo")}})}startEditThread(){this.isEditingThread=!0,this.editedThreadTitle=this.thread.title,this.editedThreadContent=this.thread.content}cancelEditThread(){this.isEditingThread=!1,this.editedThreadTitle="",this.editedThreadContent=""}saveThread(){this.editedThreadContent.trim()&&this.discussionService.updateThread(this.thread.id,{title:this.editedThreadTitle,content:this.editedThreadContent}).subscribe({next:()=>{this.thread.title=this.editedThreadTitle,this.thread.content=this.editedThreadContent,this.isEditingThread=!1},error:e=>{console.error("Error updating thread:",e),alert("Error al actualizar el hilo")}})}deleteComment(e){confirm("\xbfEst\xe1s seguro de que quieres eliminar este comentario?")&&this.discussionService.deleteComment(e.id).subscribe({next:()=>{this.removeCommentFromList(e.id),this.thread.comments_count--},error:n=>{console.error("Error deleting comment:",n),alert("Error al eliminar el comentario")}})}removeCommentFromList(e){this.comments=this.comments.filter(n=>n.id!==e),this.comments.forEach(n=>{n.replies&&(n.replies=n.replies.filter(i=>i.id!==e))})}startEditComment(e){this.editingCommentId=e.id,this.editedCommentContent=e.content}cancelEditComment(){this.editingCommentId=null,this.editedCommentContent=""}saveComment(e){this.editedCommentContent.trim()&&this.discussionService.updateComment(e.id,this.editedCommentContent).subscribe({next:()=>{e.content=this.editedCommentContent,this.editingCommentId=null},error:n=>{console.error("Error updating comment:",n),alert("Error al actualizar el comentario")}})}loadThread(e){this.isLoading=!0,this.error=null,this.discussionService.getThread(e).subscribe({next:n=>{this.thread={...n.thread,user_has_liked:this.discussionService.hasUserLiked("thread",n.thread.id)},this.metaService.updatePageData(this.thread.title,this.thread.content.substring(0,150)+"..."),this.comments=this.buildCommentTree(n.comments).map(i=>({...i,user_has_liked:this.discussionService.hasUserLiked("comment",i.id),replies:i.replies?.map(r=>({...r,user_has_liked:this.discussionService.hasUserLiked("comment",r.id)}))})),this.isLoading=!1,this.error=null},error:n=>{console.error("Error loading thread:",n),this.error="No se pudo cargar el hilo. Por favor, intenta nuevamente.",this.isLoading=!1}})}buildCommentTree(e){const n=new Map,i=[];return e.forEach(r=>{r.replies=[],n.set(r.id,r)}),e.forEach(r=>{if(r.parent_comment_id){const m=n.get(r.parent_comment_id);m&&m.replies.push(r)}else i.push(r)}),i}addComment(){this.newComment.trim()&&this.discussionService.addComment(this.thread.id,this.newComment).subscribe({next:e=>{const n={...e,user_has_liked:!1,replies:[]};this.comments.push(n),this.newComment="",this.thread.comments_count++,this.error=null},error:e=>{console.error("Error adding comment:",e),this.error="Error al agregar el comentario. Por favor, intenta nuevamente."}})}addReply(){!this.replyContent.trim()||!this.replyingTo||this.discussionService.addComment(this.thread.id,this.replyContent,this.replyingTo).subscribe({next:e=>{const n=this.findCommentById(this.replyingTo);if(n){n.replies||(n.replies=[]);const i={...e,user_has_liked:!1};n.replies.push(i)}this.replyContent="",this.replyingTo=null,this.thread.comments_count++,this.error=null},error:e=>{console.error("Error adding reply:",e),this.error="Error al agregar la respuesta. Por favor, intenta nuevamente."}})}findCommentById(e){for(const n of this.comments){if(n.id===e)return n;if(n.replies)for(const i of n.replies)if(i.id===e)return i}return null}likeThread(e){this.discussionService.likeThread(e.id).subscribe({next:n=>{e.likes_count=n.new_count,e.user_has_liked="liked"===n.action},error:n=>{console.error("Error liking thread:",n),this.error="Error al dar like. Por favor, intenta nuevamente."}})}likeComment(e){this.discussionService.likeComment(e.id).subscribe({next:n=>{e.likes_count=n.new_count,e.user_has_liked="liked"===n.action},error:n=>{console.error("Error liking comment:",n),this.error="Error al dar like. Por favor, intenta nuevamente."}})}formatTimeAgo(e){const n=new Date(e),r=(new Date).getTime()-n.getTime(),m=Math.floor(r/6e4),P=Math.floor(m/60),u=Math.floor(P/24);return m<1?"Ahora mismo":m<60?`Hace ${m} min`:P<24?`Hace ${P} h`:1===u?"Ayer":u<7?`Hace ${u} d\xedas`:u<30?`Hace ${Math.floor(u/7)} sem`:`Hace ${Math.floor(u/30)} mes`}cancelReply(){this.replyingTo=null,this.replyContent=""}static \u0275fac=function(n){return new(n||o)(t.rXU(_.nX),t.rXU(_.Ix),t.rXU(M.u),t.rXU(O.R),t.rXU(g.u))};static \u0275cmp=t.VBU({type:o,selectors:[["app-thread-detail"]],standalone:!0,features:[t.aNF],decls:9,vars:6,consts:[[1,"thread-detail-container"],[1,"back-nav"],[1,"back-link",3,"routerLink"],[1,"fas","fa-arrow-left","me-2"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","thread-main",4,"ngIf"],["class","error-state",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"loading-state"],[1,"loader"],[1,"spinner"],[1,"thread-main"],[1,"thread-card","detailed"],[1,"thread-header"],[4,"ngIf"],["class","edit-form mb-3",4,"ngIf"],[1,"thread-meta"],[1,"thread-date"],[1,"fas","fa-clock","me-1"],[1,"thread-author"],[1,"fas","fa-user","me-1"],["class","admin-actions ms-auto",4,"ngIf"],["class","thread-image-container",4,"ngIf"],[1,"thread-content","detailed"],["class","edit-form",4,"ngIf"],[1,"thread-stats","detailed"],[1,"like-btn",3,"click"],[1,"fas","fa-heart"],[1,"label"],[1,"stat"],[1,"fas","fa-comment"],[1,"comment-form-section"],[1,"form-card"],[1,"fas","fa-reply","me-2"],[1,"comment-form"],["rows","4",3,"ngModel","placeholder","ngModelChange"],["class","comment-actions",4,"ngIf"],[1,"comments-section"],[1,"comments-header"],[1,"fas","fa-comments","me-2"],["class","empty-comments",4,"ngIf"],["class","comments-list",4,"ngIf"],[1,"thread-title"],[1,"edit-form","mb-3"],["type","text","placeholder","T\xedtulo del hilo",1,"form-control","mb-2",3,"ngModel","ngModelChange"],[1,"admin-actions","ms-auto"],["class","btn-admin btn-edit","title","Editar",3,"click",4,"ngIf"],["class","btn-admin btn-delete","title","Eliminar",3,"click",4,"ngIf"],["title","Editar",1,"btn-admin","btn-edit",3,"click"],[1,"fas","fa-edit"],["title","Eliminar",1,"btn-admin","btn-delete",3,"click"],[1,"fas","fa-trash-alt"],[1,"thread-image-container"],["alt","Imagen del hilo",1,"thread-image-full",3,"src"],[1,"edit-form"],["rows","6",1,"form-control","mb-3",3,"ngModel","ngModelChange"],[1,"d-flex","gap-2","justify-content-end"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"comment-actions"],[1,"fas","fa-times","me-1"],[1,"btn-submit",3,"disabled","click"],[1,"fas","fa-reply","me-1"],[1,"fas","fa-paper-plane","me-1"],[1,"empty-comments"],[1,"empty-state"],[1,"fas","fa-comment-slash"],[1,"comments-list"],["class","comment-item",3,"has-replies",4,"ngFor","ngForOf"],[1,"comment-item"],[1,"comment-main"],[1,"comment-avatar"],[1,"fas","fa-user"],[1,"comment-content"],[1,"comment-header"],[1,"comment-author"],[1,"d-flex","align-items-center","gap-2"],[1,"comment-date"],["class","admin-actions-mini",4,"ngIf"],[1,"comment-text"],["class","edit-form-mini",4,"ngIf"],["class","comment-replies",4,"ngIf"],[1,"admin-actions-mini"],["title","Editar",1,"btn-mini-edit",3,"click"],["title","Eliminar",1,"btn-mini-delete",3,"click"],[1,"edit-form-mini"],["rows","2",1,"form-control","mb-2",3,"ngModel","ngModelChange"],[1,"btn-mini-cancel",3,"click"],[1,"btn-mini-save",3,"click"],[1,"comment-like-btn",3,"click"],[1,"comment-reply-btn",3,"click"],[1,"fas","fa-reply"],[1,"comment-replies"],["class","reply-item",4,"ngFor","ngForOf"],[1,"reply-item"],[1,"comment-avatar","small"],[1,"error-state"],[1,"error-message"],[1,"fas","fa-exclamation-triangle"],[1,"btn-retry",3,"routerLink"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"a",2),t.nrm(3,"i",3),t.EFF(4,"Volver al foro "),t.k0s()(),t.DNE(5,k,5,1,"div",4),t.DNE(6,a,5,0,"div",5),t.DNE(7,L,46,22,"div",6),t.DNE(8,z,10,3,"div",7),t.k0s()),2&n&&(t.R7$(2),t.Y8G("routerLink",t.lJ4(5,v)),t.R7$(3),t.Y8G("ngIf",i.error),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",i.thread&&!i.isLoading),t.R7$(1),t.Y8G("ngIf",i.error&&!i.isLoading))},dependencies:[h.MD,h.Sq,h.bT,l.YN,l.me,l.BC,l.vS,_.iI,_.Wk],styles:[".thread-detail-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.back-nav[_ngcontent-%COMP%]{margin-bottom:2rem}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:700;display:inline-flex;align-items:center;padding:.8rem 1.5rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:50px;transition:all .3s ease;box-shadow:0 4px 15px #0000001a}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.1);transform:translate(-5px);box-shadow:0 6px 20px #1db95433}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(-3px)}.alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:1.2rem 1.5rem;margin-bottom:2rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:space-between}.alert.alert-danger[_ngcontent-%COMP%]{background:rgba(226,33,52,.15);color:#e22134;border:1px solid rgba(226,33,52,.2)}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:inherit;cursor:pointer;padding:.5rem;border-radius:50%;transition:background .3s ease}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2.5rem;margin-bottom:2rem;box-shadow:0 8px 32px #0003;transition:all .3s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #1db95426;border-color:#1db95433}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:2.2rem;font-weight:800;color:var(--text-primary);line-height:1.3;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary-color) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]{display:flex;gap:2rem;color:var(--text-secondary);font-size:.95rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-image-container[_ngcontent-%COMP%]{margin-bottom:2rem;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-image-container[_ngcontent-%COMP%]   .thread-image-full[_ngcontent-%COMP%]{width:100%;height:auto;max-height:600px;object-fit:contain;background:rgba(0,0,0,.2);display:block}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-content.detailed[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.7;color:var(--text-secondary);margin-bottom:2rem;padding:1.5rem;background:rgba(255,255,255,.05);border-radius:12px;border-left:4px solid var(--primary-color)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]{display:flex;gap:2rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%], .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.8rem 1.5rem;background:rgba(255,255,255,.05);border-radius:50px;cursor:pointer;transition:all .3s ease;border:1px solid rgba(255,255,255,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover, .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1);transform:translateY(-2px)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);font-weight:600}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]{border:none;background:rgba(29,185,84,.1);color:var(--text-secondary)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]{color:#e74c3c;background:rgba(231,76,60,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover.liked{background:rgba(231,76,60,.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{color:var(--text-secondary)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.comment-form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2rem;box-shadow:0 8px 32px #0003}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-primary);font-weight:700;display:flex;align-items:center;font-size:1.3rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:rgba(42,42,42,.6);border:1px solid rgba(255,255,255,.1);border-radius:12px;resize:vertical;font-size:1rem;color:var(--text-primary);margin-bottom:1.5rem;transition:all .3s ease;font-family:inherit}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #1db95433;background:rgba(42,42,42,.8)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:var(--text-secondary);border:1px solid rgba(255,255,255,.2);padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;transition:all .3s ease;font-weight:600}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);color:var(--text-primary);transform:translateY(-2px)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;cursor:pointer;font-weight:700;transition:all .3s ease;box-shadow:0 4px 15px #1db9544d}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:#1ed760;transform:translateY(-2px);box-shadow:0 6px 20px #1db95466}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background:var(--text-tertiary);cursor:not-allowed;transform:none;box-shadow:none}.comments-section[_ngcontent-%COMP%]   .comments-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}.comments-section[_ngcontent-%COMP%]   .comments-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);display:flex;align-items:center;font-size:1.5rem;font-weight:700}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ffffff1a;margin-bottom:1.5rem}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.5rem}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]{margin-bottom:2rem;animation:_ngcontent-%COMP%_slideUp .4s ease-out}.comments-list[_ngcontent-%COMP%]   .comment-item.has-replies[_ngcontent-%COMP%]{border-left:3px solid var(--primary-color);padding-left:1.5rem;margin-left:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]{display:flex;gap:1.2rem;margin-bottom:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,var(--primary-color) 0%,var(--accent-purple) 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;flex-shrink:0;font-size:1.2rem;box-shadow:0 4px 15px #0003}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{flex:1;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1.5rem;transition:all .3s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]:hover{border-color:#1db95433;box-shadow:0 4px 20px #00000026}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary);display:flex;align-items:center;gap:.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem;display:flex;align-items:center;gap:.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-text[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.6;margin-bottom:1.2rem;font-size:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);font-size:.9rem;transition:all .3s ease;padding:.5rem 1rem;border-radius:8px}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.05);color:var(--text-primary)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn.liked[_ngcontent-%COMP%]{color:#e74c3c}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn[_ngcontent-%COMP%]:hover{color:#e74c3c}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-reply-btn[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]{margin-left:3.5rem;border-left:2px solid rgba(255,255,255,.1);padding-left:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.2rem;animation:_ngcontent-%COMP%_slideUp .4s ease-out .1s both}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]   .comment-avatar.small[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{background:rgba(255,255,255,.03);border-color:#ffffff0d}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.loading-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:3px solid rgba(255,255,255,.1);border-top:3px solid var(--primary-color);border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem}.loading-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--text-secondary)}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#e74c3c;margin-bottom:1.5rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.5rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{display:inline-flex;align-items:center;margin-top:1.5rem;color:var(--primary-color);text-decoration:none;font-weight:700;padding:.8rem 1.5rem;background:rgba(29,185,84,.1);border-radius:50px;transition:all .3s ease}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover, .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.2);transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_heartBeat{0%{transform:scale(1)}25%{transform:scale(1.3)}50%{transform:scale(1)}75%{transform:scale(1.2)}to{transform:scale(1)}}@media (max-width: 768px){.thread-detail-container[_ngcontent-%COMP%]{padding:1rem}.thread-card.detailed[_ngcontent-%COMP%]{padding:1.5rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]{font-size:1.6rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]{flex-direction:column;gap:1rem!important}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:1.5rem}.comments-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start!important}.comment-main[_ngcontent-%COMP%]{gap:1rem!important;flex-direction:column}.comment-replies[_ngcontent-%COMP%]{margin-left:1rem!important;padding-left:1rem!important}.comment-avatar[_ngcontent-%COMP%]{align-self:flex-start}}"]})}return o})()},5154:(b,f,s)=>{s.d(f,{u:()=>O});var h=s(8141),l=s(5312),_=s(6276),t=s(1626),M=s(3205);let O=(()=>{class g{http;authService;apiUrl=l.c.apiUrl;likedItems=new Set;constructor(a,c){this.http=a,this.authService=c,this.loadLikedItemsFromStorage()}loadLikedItemsFromStorage(){const a=localStorage.getItem("discussion_likes");a&&(this.likedItems=new Set(JSON.parse(a)))}saveLikedItemsToStorage(){localStorage.setItem("discussion_likes",JSON.stringify([...this.likedItems]))}getItemKey(a,c){return`${a}:${c}`}hasUserLiked(a,c){return this.likedItems.has(this.getItemKey(a,c))}updateLikeStatus(a,c,p){const C=this.getItemKey(a,c);p?this.likedItems.add(C):this.likedItems.delete(C),this.saveLikedItemsToStorage()}getThreads(a="updated_at",c="desc"){return this.http.get(`${this.apiUrl}/api/discussion/threads?sort=${a}&order=${c}`)}getThread(a){return this.http.get(`${this.apiUrl}/api/discussion/threads/${a}`)}createThread(a,c,p){return this.http.post(`${this.apiUrl}/api/discussion/threads`,{title:a,content:c,image_url:p},{headers:this.authService.getAuthHeaders()})}uploadImage(a){const c=new FormData;return c.append("file",a),this.http.post(`${l.c.apiUrl}/api/upload`,c)}addComment(a,c,p){return this.http.post(`${this.apiUrl}/api/discussion/threads/${a}/comments`,{content:c,parent_comment_id:p})}likeThread(a){return this.http.post(`${this.apiUrl}/api/discussion/like`,{thread_id:a}).pipe((0,h.M)(c=>{this.updateLikeStatus("thread",a,"liked"===c.action)}))}likeComment(a){return this.http.post(`${this.apiUrl}/api/discussion/like`,{comment_id:a}).pipe((0,h.M)(c=>{this.updateLikeStatus("comment",a,"liked"===c.action)}))}deleteThread(a){return this.http.delete(`${this.apiUrl}/api/discussion/threads/${a}`,{headers:this.authService.getAuthHeaders()})}updateThread(a,c){return this.http.put(`${this.apiUrl}/api/discussion/threads/${a}`,c,{headers:this.authService.getAuthHeaders()})}deleteComment(a){return this.http.delete(`${this.apiUrl}/api/discussion/comments/${a}`,{headers:this.authService.getAuthHeaders()})}updateComment(a,c){return this.http.put(`${this.apiUrl}/api/discussion/comments/${a}`,{content:c},{headers:this.authService.getAuthHeaders()})}static \u0275fac=function(c){return new(c||g)(_.KVO(t.Qq),_.KVO(M.u))};static \u0275prov=_.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);