(self.webpackChunkuptc_music=self.webpackChunkuptc_music||[]).push([[792],{328:(Nt,Ce,De)=>{"use strict";function oe(t){return"function"==typeof t}function Te(t){const e=t(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Je=Te(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Ye(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class X{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const i of e)i.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(oe(r))try{r()}catch(i){n=i instanceof Je?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{J(i)}catch(s){n=n??[],s instanceof Je?n=[...n,...s.errors]:n.push(s)}}if(n)throw new Je(n)}}add(n){var e;if(n&&n!==this)if(this.closed)J(n);else{if(n instanceof X){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Ye(e,n)}remove(n){const{_finalizers:e}=this;e&&Ye(e,n),n instanceof X&&n._removeParent(this)}}X.EMPTY=(()=>{const t=new X;return t.closed=!0,t})();const I=X.EMPTY;function R(t){return t instanceof X||t&&"closed"in t&&oe(t.remove)&&oe(t.add)&&oe(t.unsubscribe)}function J(t){oe(t)?t():t.unsubscribe()}const le={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},we={setTimeout(t,n,...e){const{delegate:r}=we;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=we;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ue(t){we.setTimeout(()=>{const{onUnhandledError:n}=le;if(!n)throw t;n(t)})}function Me(){}const lt=dt("C",void 0,void 0);function dt(t,n,e){return{kind:t,value:n,error:e}}let Oe=null;function Ve(t){if(le.useDeprecatedSynchronousErrorHandling){const n=!Oe;if(n&&(Oe={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:r}=Oe;if(Oe=null,e)throw r}}else t()}class tn extends X{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,R(n)&&n.add(this)):this.destination=uc}static create(n,e,r){return new fn(n,e,r)}next(n){this.isStopped?Oo(function Ut(t){return dt("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Oo(function ut(t){return dt("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Oo(lt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xt=Function.prototype.bind;function Mo(t,n){return xt.call(t,n)}class rr{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){Sn(r)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){Sn(r)}else Sn(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Sn(e)}}}class fn extends tn{constructor(n,e,r){let o;if(super(),oe(n)||!n)o={next:n??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&le.useDeprecatedNextContext?(i=Object.create(n),i.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&Mo(n.next,i),error:n.error&&Mo(n.error,i),complete:n.complete&&Mo(n.complete,i)}):o=n}this.destination=new rr(o)}}function Sn(t){le.useDeprecatedSynchronousErrorHandling?function nt(t){le.useDeprecatedSynchronousErrorHandling&&Oe&&(Oe.errorThrown=!0,Oe.error=t)}(t):ue(t)}function Oo(t,n){const{onStoppedNotification:e}=le;e&&we.setTimeout(()=>e(t,n))}const uc={closed:!0,next:Me,error:function od(t){throw t},complete:Me},ni="function"==typeof Symbol&&Symbol.observable||"@@observable";function $n(t){return t}function Ds(t){return 0===t.length?$n:1===t.length?t[0]:function(e){return t.reduce((r,o)=>o(r),e)}}let Qe=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,o){const i=function gc(t){return t&&t instanceof tn||function fc(t){return t&&oe(t.next)&&oe(t.error)&&oe(t.complete)}(t)&&R(t)}(e)?e:new fn(e,r,o);return Ve(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=hc(r))((o,i)=>{const s=new fn({next:a=>{try{e(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[ni](){return this}pipe(...e){return Ds(e)(this)}toPromise(e){return new(e=hc(e))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=n=>new t(n),t})();function hc(t){var n;return null!==(n=t??le.Promise)&&void 0!==n?n:Promise}const id=Te(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let D=(()=>{class t extends Qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new S(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new id}next(e){Ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){Ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){Ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:o,observers:i}=this;return r||o?I:(this.currentObservers=null,i.push(e),new X(()=>{this.currentObservers=null,Ye(i,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){const e=new Qe;return e.source=this,e}}return t.create=(n,e)=>new S(n,e),t})();class S extends D{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,n)}error(n){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==r?r:I}}function A(t){return oe(t?.lift)}function E(t){return n=>{if(A(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function F(t,n,e,r,o){return new q(t,n,e,r,o)}class q extends tn{constructor(n,e,r,o,i,s){super(n),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){n.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){n.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function G(t,n){return E((e,r)=>{let o=0;e.subscribe(F(r,i=>{r.next(t.call(n,i,o++))}))})}var U=De(215);const Ot=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function fe(t){return oe(t?.then)}function Xe(t){return oe(t[ni])}function yt(t){return Symbol.asyncIterator&&oe(t?.[Symbol.asyncIterator])}function Jr(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ft=function He(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function nn(t){return oe(t?.[Ft])}function In(t){return(0,U.__asyncGenerator)(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:r,done:o}=yield(0,U.__await)(e.read());if(o)return yield(0,U.__await)(void 0);yield yield(0,U.__await)(r)}}finally{e.releaseLock()}})}function or(t){return oe(t?.getReader)}function gn(t){if(t instanceof Qe)return t;if(null!=t){if(Xe(t))return function mP(t){return new Qe(n=>{const e=t[ni]();if(oe(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Ot(t))return function _P(t){return new Qe(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(fe(t))return function vP(t){return new Qe(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,ue)})}(t);if(yt(t))return sm(t);if(nn(t))return function yP(t){return new Qe(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(or(t))return function bP(t){return sm(In(t))}(t)}throw Jr(t)}function sm(t){return new Qe(n=>{(function CP(t,n){var e,r,o,i;return(0,U.__awaiter)(this,void 0,void 0,function*(){try{for(e=(0,U.__asyncValues)(t);!(r=yield e.next()).done;)if(n.next(r.value),n.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Pr(t,n,e,r=0,o=!1){const i=n.schedule(function(){e(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function Dt(t,n,e=1/0){return oe(n)?Dt((r,o)=>G((i,s)=>n(r,i,o,s))(gn(t(r,o))),e):("number"==typeof n&&(e=n),E((r,o)=>function wP(t,n,e,r,o,i,s,a){const c=[];let l=0,u=0,d=!1;const g=()=>{d&&!c.length&&!l&&n.complete()},m=y=>l<r?v(y):c.push(y),v=y=>{i&&n.next(y),l++;let w=!1;gn(e(y,u++)).subscribe(F(n,x=>{o?.(x),i?m(x):n.next(x)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){const x=c.shift();s?Pr(n,s,()=>v(x)):v(x)}g()}catch(x){n.error(x)}}))};return t.subscribe(F(n,m,()=>{d=!0,g()})),()=>{a?.()}}(r,o,t,e)))}function ri(t=1/0){return Dt($n,t)}const ir=new Qe(t=>t.complete());function am(t){return t&&oe(t.schedule)}function sd(t){return t[t.length-1]}function cm(t){return oe(sd(t))?t.pop():void 0}function Es(t){return am(sd(t))?t.pop():void 0}function lm(t,n=0){return E((e,r)=>{e.subscribe(F(r,o=>Pr(r,t,()=>r.next(o),n),()=>Pr(r,t,()=>r.complete(),n),o=>Pr(r,t,()=>r.error(o),n)))})}function um(t,n=0){return E((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function dm(t,n){if(!t)throw new Error("Iterable cannot be null");return new Qe(e=>{Pr(e,n,()=>{const r=t[Symbol.asyncIterator]();Pr(e,n,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function bt(t,n){return n?function IP(t,n){if(null!=t){if(Xe(t))return function PP(t,n){return gn(t).pipe(um(n),lm(n))}(t,n);if(Ot(t))return function DP(t,n){return new Qe(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}(t,n);if(fe(t))return function xP(t,n){return gn(t).pipe(um(n),lm(n))}(t,n);if(yt(t))return dm(t,n);if(nn(t))return function EP(t,n){return new Qe(e=>{let r;return Pr(e,n,()=>{r=t[Ft](),Pr(e,n,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void e.error(s)}i?e.complete():e.next(o)},0,!0)}),()=>oe(r?.return)&&r.return()})}(t,n);if(or(t))return function SP(t,n){return dm(In(t),n)}(t,n)}throw Jr(t)}(t,n):gn(t)}class mt extends D{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}function re(...t){return bt(t,Es(t))}function hm(t={}){const{connector:n=(()=>new D),resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,c,l=0,u=!1,d=!1;const g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),s=c=void 0,u=d=!1},v=()=>{const y=s;m(),y?.unsubscribe()};return E((y,w)=>{l++,!d&&!u&&g();const x=c=c??n();w.add(()=>{l--,0===l&&!d&&!u&&(a=ad(v,o))}),x.subscribe(w),!s&&l>0&&(s=new fn({next:M=>x.next(M),error:M=>{d=!0,g(),a=ad(m,e,M),x.error(M)},complete:()=>{u=!0,g(),a=ad(m,r),x.complete()}}),gn(y).subscribe(s))})(i)}}function ad(t,n,...e){if(!0===n)return void t();if(!1===n)return;const r=new fn({next:()=>{r.unsubscribe(),t()}});return gn(n(...e)).subscribe(r)}function Bt(t,n){return E((e,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();e.subscribe(F(r,c=>{o?.unsubscribe();let l=0;const u=i++;gn(t(c,u)).subscribe(o=F(r,d=>r.next(n?n(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function AP(t,n){return t===n}const pc=Te(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function xr(t,n){return E((e,r)=>{let o=0;e.subscribe(F(r,i=>t.call(n,i,o++)&&r.next(i)))})}function Yr(t){return t<=0?()=>ir:E((n,e)=>{let r=0;n.subscribe(F(e,o=>{++r<=t&&(e.next(o),t<=r&&e.complete())}))})}function mc(t){return E((n,e)=>{let r=!1;n.subscribe(F(e,o=>{r=!0,e.next(o)},()=>{r||e.next(t),e.complete()}))})}function fm(t=RP){return E((n,e)=>{let r=!1;n.subscribe(F(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(t())))})}function RP(){return new pc}function Dr(t,n){const e=arguments.length>=2;return r=>r.pipe(t?xr((o,i)=>t(o,i,r)):$n,Yr(1),e?mc(n):fm(()=>new pc))}function Fe(t){for(let n in t)if(t[n]===Fe)return n;throw Error("Could not find renamed property on target object.")}function _c(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Ct(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ct).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function cd(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const NP=Fe({__forward_ref__:Fe});function ze(t){return t.__forward_ref__=ze,t.toString=function(){return Ct(this())},t}function de(t){return ld(t)?t():t}function ld(t){return"function"==typeof t&&t.hasOwnProperty(NP)&&t.__forward_ref__===ze}function ud(t){return t&&!!t.\u0275providers}const gm="https://g.co/ng/security#xss";class $ extends Error{constructor(n,e){super(function Ss(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function ge(t){return"string"==typeof t?t:null==t?"":String(t)}function dd(t,n){throw new $(-201,!1)}function kn(t,n){null==t&&function ae(t,n,e,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${e} ${r} ${n} <=Actual]`))}(n,t,null,"!=")}function ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Er(t){return{providers:t.providers||[],imports:t.imports||[]}}function vc(t){return pm(t,bc)||pm(t,mm)}function pm(t,n){return t.hasOwnProperty(n)?t[n]:null}function yc(t){return t&&(t.hasOwnProperty(hd)||t.hasOwnProperty(HP))?t[hd]:null}const bc=Fe({\u0275prov:Fe}),hd=Fe({\u0275inj:Fe}),mm=Fe({ngInjectableDef:Fe}),HP=Fe({ngInjectorDef:Fe});var Pe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Pe||{});let fd;function rn(t){const n=fd;return fd=t,n}function vm(t,n,e){const r=vc(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&Pe.Optional?null:void 0!==n?n:void dd(Ct(t))}const qe=globalThis;class Z{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ee({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Is={},vd="__NG_DI_FLAG__",Cc="ngTempTokenPath",GP=/\n/gm,bm="__source";let oi;function Qr(t){const n=oi;return oi=t,n}function JP(t,n=Pe.Default){if(void 0===oi)throw new $(-203,!1);return null===oi?vm(t,void 0,n):oi.get(t,n&Pe.Optional?null:void 0,n)}function Q(t,n=Pe.Default){return(function _m(){return fd}()||JP)(de(t),n)}function W(t,n=Pe.Default){return Q(t,wc(n))}function wc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function yd(t){const n=[];for(let e=0;e<t.length;e++){const r=de(t[e]);if(Array.isArray(r)){if(0===r.length)throw new $(900,!1);let o,i=Pe.Default;for(let s=0;s<r.length;s++){const a=r[s],c=YP(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}n.push(Q(o,i))}else n.push(Q(r))}return n}function ks(t,n){return t[vd]=n,t.prototype[vd]=n,t}function YP(t){return t[vd]}function Sr(t){return{toString:t}.toString()}var Mc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Mc||{}),Un=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Un||{});const sr={},ke=[],Oc=Fe({\u0275cmp:Fe}),bd=Fe({\u0275dir:Fe}),Cd=Fe({\u0275pipe:Fe}),wm=Fe({\u0275mod:Fe}),Ir=Fe({\u0275fac:Fe}),Ts=Fe({__NG_ELEMENT_ID__:Fe}),Mm=Fe({__NG_ENV_ID__:Fe});function Om(t,n,e){let r=t.length;for(;;){const o=t.indexOf(n,e);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=n.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}e=o+1}}function wd(t,n,e){let r=0;for(;r<e.length;){const o=e[r];if("number"==typeof o){if(0!==o)break;r++;const i=e[r++],s=e[r++],a=e[r++];t.setAttribute(n,s,a,i)}else{const i=o,s=e[++r];xm(i)?t.setProperty(n,i,s):t.setAttribute(n,i,s),r++}}return r}function Pm(t){return 3===t||4===t||6===t}function xm(t){return 64===t.charCodeAt(0)}function As(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){const o=n[r];"number"==typeof o?e=o:0===e||Dm(t,e,o,null,-1===e||2===e?n[++r]:null)}}return t}function Dm(t,n,e,r,o){let i=0,s=t.length;if(-1===n)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==o&&(t[i+1]=o));if(r===t[i+1])return void(t[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,n),i=s+1),t.splice(i++,0,e),null!==r&&t.splice(i++,0,r),null!==o&&t.splice(i++,0,o)}const Em="ng-template";function XP(t,n,e){let r=0,o=!0;for(;r<t.length;){let i=t[r++];if("string"==typeof i&&o){const s=t[r++];if(e&&"class"===i&&-1!==Om(s.toLowerCase(),n,0))return!0}else{if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===n)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function Sm(t){return 4===t.type&&t.value!==Em}function ex(t,n,e){return n===(4!==t.type||e?t.value:Em)}function tx(t,n,e){let r=4;const o=t.attrs||[],i=function ox(t){for(let n=0;n<t.length;n++)if(Pm(t[n]))return n;return t.length}(o);let s=!1;for(let a=0;a<n.length;a++){const c=n[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!ex(t,c,e)||""===c&&1===n.length){if(Bn(r))return!1;s=!0}}else{const l=8&r?c:n[++a];if(8&r&&null!==t.attrs){if(!XP(t.attrs,l,e)){if(Bn(r))return!1;s=!0}continue}const d=nx(8&r?"class":c,o,Sm(t),e);if(-1===d){if(Bn(r))return!1;s=!0;continue}if(""!==l){let g;g=d>i?"":o[d+1].toLowerCase();const m=8&r?g:null;if(m&&-1!==Om(m,l,0)||2&r&&l!==g){if(Bn(r))return!1;s=!0}}}}else{if(!s&&!Bn(r)&&!Bn(c))return!1;if(s&&Bn(c))continue;s=!1,r=c|1&r}}return Bn(r)||s}function Bn(t){return 0==(1&t)}function nx(t,n,e,r){if(null===n)return-1;let o=0;if(r||!e){let i=!1;for(;o<n.length;){const s=n[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=n[++o];for(;"string"==typeof a;)a=n[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function ix(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const r=t[e];if("number"==typeof r)return-1;if(r===n)return e;e++}return-1}(n,t)}function Im(t,n,e=!1){for(let r=0;r<n.length;r++)if(tx(t,n[r],e))return!0;return!1}function km(t,n){return t?":not("+n.trim()+")":n}function ax(t){let n=t[0],e=1,r=2,o="",i=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&r){const a=t[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Bn(s)&&(n+=km(i,o),o=""),r=s,i=i||!Bn(r);e++}return""!==o&&(n+=km(i,o)),n}function Ht(t){return Sr(()=>{const n=Am(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Mc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Un.Emulated,styles:t.styles||ke,_:null,schemas:t.schemas||null,tView:null,id:""};Rm(e);const r=t.dependencies;return e.directiveDefs=Pc(r,!1),e.pipeDefs=Pc(r,!0),e.id=function px(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const o of e)n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(e),e})}function dx(t){return Ee(t)||Et(t)}function hx(t){return null!==t}function Zr(t){return Sr(()=>({type:t.type,bootstrap:t.bootstrap||ke,declarations:t.declarations||ke,imports:t.imports||ke,exports:t.exports||ke,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Tm(t,n){if(null==t)return sr;const e={};for(const r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),e[o]=r,n&&(n[o]=i)}return e}function he(t){return Sr(()=>{const n=Am(t);return Rm(n),n})}function on(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ee(t){return t[Oc]||null}function Et(t){return t[bd]||null}function zt(t){return t[Cd]||null}function mn(t,n){const e=t[wm]||null;if(!e&&!0===n)throw new Error(`Type ${Ct(t)} does not have '\u0275mod' property.`);return e}function Am(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||sr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ke,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Tm(t.inputs,n),outputs:Tm(t.outputs)}}function Rm(t){t.features?.forEach(n=>n(t))}function Pc(t,n){if(!t)return null;const e=n?zt:dx;return()=>("function"==typeof t?t():t).map(r=>e(r)).filter(hx)}const at=0,Y=1,ve=2,et=3,Hn=4,Rs=5,Lt=6,si=7,ht=8,Xr=9,ai=10,pe=11,Ns=12,Nm=13,ci=14,ft=15,Fs=16,li=17,ar=18,Ls=19,Fm=20,eo=21,kr=22,js=23,Vs=24,xe=25,Md=1,Lm=2,cr=7,ui=9,$s=10,St=11;function sn(t){return Array.isArray(t)&&"object"==typeof t[Md]}function qt(t){return Array.isArray(t)&&!0===t[Md]}function Od(t){return 0!=(4&t.flags)}function xo(t){return t.componentOffset>-1}function Dc(t){return 1==(1&t.flags)}function zn(t){return!!t.template}function Pd(t){return 0!=(512&t[ve])}function Do(t,n){return t.hasOwnProperty(Ir)?t[Ir]:null}let It=null,Ec=!1;function Tn(t){const n=It;return It=t,n}const $m={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Bm(t){if(!Us(t)||t.dirty){if(!t.producerMustRecompute(t)&&!qm(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function zm(t){t.dirty=!0,function Hm(t){if(void 0===t.liveConsumerNode)return;const n=Ec;Ec=!0;try{for(const e of t.liveConsumerNode)e.dirty||zm(e)}finally{Ec=n}}(t),t.consumerMarkedDirty?.(t)}function Dd(t){return t&&(t.nextProducerIndex=0),Tn(t)}function Ed(t,n){if(Tn(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Us(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)Sc(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function qm(t){di(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],r=t.producerLastReadVersion[n];if(r!==e.version||(Bm(e),r!==e.version))return!0}return!1}function Gm(t){if(di(t),Us(t))for(let n=0;n<t.producerNode.length;n++)Sc(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Sc(t,n){if(function Km(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),di(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Sc(t.producerNode[r],t.producerIndexOfThis[r]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[n],o=t.liveConsumerNode[n];di(o),o.producerIndexOfThis[r]=n}}function Us(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function di(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Jm=null;function Zm(t){const n=Tn(null);try{return t()}finally{Tn(n)}}const Xm=()=>{},Ex=(()=>({...$m,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Xm}))();class Sx{constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function An(){return e_}function e_(t){return t.type.prototype.ngOnChanges&&(t.setInput=kx),Ix}function Ix(){const t=n_(this),n=t?.current;if(n){const e=t.previous;if(e===sr)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function kx(t,n,e,r){const o=this.declaredInputs[e],i=n_(t)||function Tx(t,n){return t[t_]=n}(t,{previous:sr,current:null}),s=i.current||(i.current={}),a=i.previous,c=a[o];s[o]=new Sx(c&&c.currentValue,n,a===sr),t[r]=n}An.ngInherit=!0;const t_="__ngSimpleChanges__";function n_(t){return t[t_]||null}const lr=function(t,n,e){};function Ge(t){for(;Array.isArray(t);)t=t[at];return t}function Ic(t,n){return Ge(n[t])}function an(t,n){return Ge(n[t.index])}function i_(t,n){return t.data[n]}function hi(t,n){return t[n]}function _n(t,n){const e=n[t];return sn(e)?e:e[at]}function no(t,n){return null==n?null:t[n]}function s_(t){t[li]=0}function jx(t){1024&t[ve]||(t[ve]|=1024,c_(t,1))}function a_(t){1024&t[ve]&&(t[ve]&=-1025,c_(t,-1))}function c_(t,n){let e=t[et];if(null===e)return;e[Rs]+=n;let r=e;for(e=e[et];null!==e&&(1===n&&1===r[Rs]||-1===n&&0===r[Rs]);)e[Rs]+=n,r=e,e=e[et]}const ce={lFrame:y_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function d_(){return ce.bindingsEnabled}function fi(){return null!==ce.skipHydrationRootTNode}function L(){return ce.lFrame.lView}function Se(){return ce.lFrame.tView}function H(t){return ce.lFrame.contextLView=t,t[ht]}function z(t){return ce.lFrame.contextLView=null,t}function kt(){let t=h_();for(;null!==t&&64===t.type;)t=t.parent;return t}function h_(){return ce.lFrame.currentTNode}function ur(t,n){const e=ce.lFrame;e.currentTNode=t,e.isParent=n}function Ad(){return ce.lFrame.isParent}function Gt(){const t=ce.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function gi(){return ce.lFrame.bindingIndex++}function Ar(t){const n=ce.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Yx(t,n){const e=ce.lFrame;e.bindingIndex=e.bindingRootIndex=t,Nd(n)}function Nd(t){ce.lFrame.currentDirectiveIndex=t}function m_(){return ce.lFrame.currentQueryIndex}function Ld(t){ce.lFrame.currentQueryIndex=t}function Zx(t){const n=t[Y];return 2===n.type?n.declTNode:1===n.type?t[Lt]:null}function __(t,n,e){if(e&Pe.SkipSelf){let o=n,i=t;for(;!(o=o.parent,null!==o||e&Pe.Host||(o=Zx(i),null===o||(i=i[ci],10&o.type))););if(null===o)return!1;n=o,t=i}const r=ce.lFrame=v_();return r.currentTNode=n,r.lView=t,!0}function jd(t){const n=v_(),e=t[Y];ce.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function v_(){const t=ce.lFrame,n=null===t?null:t.child;return null===n?y_(t):n}function y_(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function b_(){const t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const C_=b_;function Vd(){const t=b_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Wt(){return ce.lFrame.selectedIndex}function Eo(t){ce.lFrame.selectedIndex=t}function rt(){const t=ce.lFrame;return i_(t.tView,t.selectedIndex)}function w_(){return ce.lFrame.currentNamespace}let M_=!0;function kc(){return M_}function ro(t){M_=t}function Tc(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){const i=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(t.contentHooks??=[]).push(-e,s),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),c&&(t.viewHooks??=[]).push(-e,c),l&&((t.viewHooks??=[]).push(e,l),(t.viewCheckHooks??=[]).push(e,l)),null!=u&&(t.destroyHooks??=[]).push(e,u)}}function Ac(t,n,e){O_(t,n,3,e)}function Rc(t,n,e,r){(3&t[ve])===e&&O_(t,n,e,r)}function $d(t,n){let e=t[ve];(3&e)===n&&(e&=8191,e+=1,t[ve]=e)}function O_(t,n,e,r){const i=r??-1,s=n.length-1;let a=0;for(let c=void 0!==r?65535&t[li]:0;c<s;c++)if("number"==typeof n[c+1]){if(a=n[c],null!=r&&a>=r)break}else n[c]<0&&(t[li]+=65536),(a<i||-1==i)&&(sD(t,e,n,c),t[li]=(4294901760&t[li])+c+2),c++}function P_(t,n){lr(4,t,n);const e=Tn(null);try{n.call(t)}finally{Tn(e),lr(5,t,n)}}function sD(t,n,e,r){const o=e[r]<0,i=e[r+1],a=t[o?-e[r]:e[r]];o?t[ve]>>13<t[li]>>16&&(3&t[ve])===n&&(t[ve]+=8192,P_(a,i)):P_(a,i)}const pi=-1;class Hs{constructor(n,e,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function Bd(t){return t!==pi}function zs(t){return 32767&t}function qs(t,n){let e=function uD(t){return t>>16}(t),r=n;for(;e>0;)r=r[ci],e--;return r}let Hd=!0;function Nc(t){const n=Hd;return Hd=t,n}const x_=255,D_=5;let dD=0;const dr={};function Fc(t,n){const e=E_(t,n);if(-1!==e)return e;const r=n[Y];r.firstCreatePass&&(t.injectorIndex=n.length,zd(r.data,t),zd(n,null),zd(r.blueprint,null));const o=Lc(t,n),i=t.injectorIndex;if(Bd(o)){const s=zs(o),a=qs(o,n),c=a[Y].data;for(let l=0;l<8;l++)n[i+l]=a[s+l]|c[s+l]}return n[i+8]=o,i}function zd(t,n){t.push(0,0,0,0,0,0,0,0,n)}function E_(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Lc(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,r=null,o=n;for(;null!==o;){if(r=N_(o),null===r)return pi;if(e++,o=o[ci],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return pi}function qd(t,n,e){!function hD(t,n,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(Ts)&&(r=e[Ts]),null==r&&(r=e[Ts]=dD++);const o=r&x_;n.data[t+(o>>D_)]|=1<<o}(t,n,e)}function S_(t,n,e){if(e&Pe.Optional||void 0!==t)return t;dd()}function I_(t,n,e,r){if(e&Pe.Optional&&void 0===r&&(r=null),!(e&(Pe.Self|Pe.Host))){const o=t[Xr],i=rn(void 0);try{return o?o.get(n,r,e&Pe.Optional):vm(n,r,e&Pe.Optional)}finally{rn(i)}}return S_(r,0,e)}function k_(t,n,e,r=Pe.Default,o){if(null!==t){if(2048&n[ve]&&!(r&Pe.Self)){const s=function vD(t,n,e,r,o){let i=t,s=n;for(;null!==i&&null!==s&&2048&s[ve]&&!(512&s[ve]);){const a=T_(i,s,e,r|Pe.Self,dr);if(a!==dr)return a;let c=i.parent;if(!c){const l=s[Fm];if(l){const u=l.get(e,dr,r);if(u!==dr)return u}c=N_(s),s=s[ci]}i=c}return o}(t,n,e,r,dr);if(s!==dr)return s}const i=T_(t,n,e,r,dr);if(i!==dr)return i}return I_(n,e,r,o)}function T_(t,n,e,r,o){const i=function pD(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ts)?t[Ts]:void 0;return"number"==typeof n?n>=0?n&x_:_D:n}(e);if("function"==typeof i){if(!__(n,t,r))return r&Pe.Host?S_(o,0,r):I_(n,e,r,o);try{let s;if(s=i(r),null!=s||r&Pe.Optional)return s;dd()}finally{C_()}}else if("number"==typeof i){let s=null,a=E_(t,n),c=pi,l=r&Pe.Host?n[ft][Lt]:null;for((-1===a||r&Pe.SkipSelf)&&(c=-1===a?Lc(t,n):n[a+8],c!==pi&&R_(r,!1)?(s=n[Y],a=zs(c),n=qs(c,n)):a=-1);-1!==a;){const u=n[Y];if(A_(i,a,u.data)){const d=gD(a,n,e,s,r,l);if(d!==dr)return d}c=n[a+8],c!==pi&&R_(r,n[Y].data[a+8]===l)&&A_(i,a,n)?(s=u,a=zs(c),n=qs(c,n)):a=-1}}return o}function gD(t,n,e,r,o,i){const s=n[Y],a=s.data[t+8],u=jc(a,s,e,null==r?xo(a)&&Hd:r!=s&&0!=(3&a.type),o&Pe.Host&&i===a);return null!==u?So(n,s,u,a):dr}function jc(t,n,e,r,o){const i=t.providerIndexes,s=n.data,a=1048575&i,c=t.directiveStart,u=i>>20,g=o?a+u:t.directiveEnd;for(let m=r?a:a+u;m<g;m++){const v=s[m];if(m<c&&e===v||m>=c&&v.type===e)return m}if(o){const m=s[c];if(m&&zn(m)&&m.type===e)return c}return null}function So(t,n,e,r){let o=t[e];const i=n.data;if(function aD(t){return t instanceof Hs}(o)){const s=o;s.resolving&&function FP(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new $(-200,`Circular dependency in DI detected for ${t}${e}`)}(function Ne(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ge(t)}(i[e]));const a=Nc(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?rn(s.injectImpl):null;__(t,r,Pe.Default);try{o=t[e]=s.factory(void 0,i,t,r),n.firstCreatePass&&e>=r.directiveStart&&function iD(t,n,e){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=n.type.prototype;if(r){const s=e_(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}o&&(e.preOrderHooks??=[]).push(0-t,o),i&&((e.preOrderHooks??=[]).push(t,i),(e.preOrderCheckHooks??=[]).push(t,i))}(e,i[e],n)}finally{null!==l&&rn(l),Nc(a),s.resolving=!1,C_()}}return o}function A_(t,n,e){return!!(e[n+(t>>D_)]&1<<t)}function R_(t,n){return!(t&Pe.Self||t&Pe.Host&&n)}class Kt{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return k_(this._tNode,this._lView,n,wc(r),e)}}function _D(){return new Kt(kt(),L())}function Tt(t){return Sr(()=>{const n=t.prototype.constructor,e=n[Ir]||Gd(n),r=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){const i=o[Ir]||Gd(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Gd(t){return ld(t)?()=>{const n=Gd(de(t));return n&&n()}:Do(t)}function N_(t){const n=t[Y],e=n.type;return 2===e?n.declTNode:1===e?t[Lt]:null}const _i="__parameters__";function yi(t,n,e){return Sr(()=>{const r=function Wd(t){return function(...e){if(t){const r=t(...e);for(const o in r)this[o]=r[o]}}}(n);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(c,l,u){const d=c.hasOwnProperty(_i)?c[_i]:Object.defineProperty(c,_i,{value:[]})[_i];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}function Ci(t,n){t.forEach(e=>Array.isArray(e)?Ci(e,n):n(e))}function L_(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function $c(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function vn(t,n,e){let r=wi(t,n);return r>=0?t[1|r]=e:(r=~r,function PD(t,n,e,r){let o=t.length;if(o==n)t.push(e,r);else if(1===o)t.push(r,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;)t[o]=t[o-2],o--;t[n]=e,t[n+1]=r}}(t,r,n,e)),r}function Kd(t,n){const e=wi(t,n);if(e>=0)return t[1|e]}function wi(t,n){return function j_(t,n,e){let r=0,o=t.length>>e;for(;o!==r;){const i=r+(o-r>>1),s=t[i<<e];if(n===s)return i<<e;s>n?o=i:r=i+1}return~(o<<e)}(t,n,1)}const Bc=ks(yi("Optional"),8),Hc=ks(yi("SkipSelf"),4),Oi="ngSkipHydration";function K_(t){const n=Oi.toLowerCase(),e=t.mergedAttrs;if(null===e)return!1;for(let r=0;r<e.length;r+=2){const o=e[r];if("number"==typeof o)return!1;if("string"==typeof o&&o.toLowerCase()===n)return!0}return!1}function J_(t){return t.hasAttribute(Oi)}function Kc(t){return 128==(128&t.flags)}var oo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(oo||{});const GD=/^>|^->|<!--|-->|--!>|<!-$/g,WD=/(<|>)/g,KD="\u200b$1\u200b";const Xd=new Map;let JD=0;const th="__ngContext__";function jt(t,n){sn(n)?(t[th]=n[Ls],function QD(t){Xd.set(t[Ls],t)}(n)):t[th]=n}let nh;function rh(t,n){return nh(t,n)}function Qs(t){const n=t[et];return qt(n)?n[et]:n}function ov(t){return sv(t[Ns])}function iv(t){return sv(t[Hn])}function sv(t){for(;null!==t&&!qt(t);)t=t[Hn];return t}function Pi(t,n,e,r,o){if(null!=r){let i,s=!1;qt(r)?i=r:sn(r)&&(s=!0,r=r[at]);const a=Ge(r);0===t&&null!==e?null==o?uv(n,e,a):Io(n,e,a,o||null,!0):1===t&&null!==e?Io(n,e,a,o||null,!0):2===t?tl(n,a,s):3===t&&n.destroyNode(a),null!=i&&function yE(t,n,e,r,o){const i=e[cr];i!==Ge(e)&&Pi(n,t,r,i,o);for(let a=St;a<e.length;a++){const c=e[a];Xs(c[Y],c,t,n,r,i)}}(n,t,i,e,o)}}function Yc(t,n){return t.createText(n)}function oh(t,n){return t.createComment(function Y_(t){return t.replace(GD,n=>n.replace(WD,KD))}(n))}function Qc(t,n,e){return t.createElement(n,e)}function cv(t,n){const e=t[ui],r=e.indexOf(n);a_(n),e.splice(r,1)}function Zc(t,n){if(t.length<=St)return;const e=St+n,r=t[e];if(r){const o=r[Fs];null!==o&&o!==t&&cv(o,r),n>0&&(t[e-1][Hn]=r[Hn]);const i=$c(t,St+n);!function cE(t,n){Xs(t,n,n[pe],2,null,null),n[at]=null,n[Lt]=null}(r[Y],r);const s=i[ar];null!==s&&s.detachView(i[Y]),r[et]=null,r[Hn]=null,r[ve]&=-129}return r}function ih(t,n){if(!(256&n[ve])){const e=n[pe];n[js]&&Gm(n[js]),n[Vs]&&Gm(n[Vs]),e.destroyNode&&Xs(t,n,e,3,null,null),function dE(t){let n=t[Ns];if(!n)return sh(t[Y],t);for(;n;){let e=null;if(sn(n))e=n[Ns];else{const r=n[St];r&&(e=r)}if(!e){for(;n&&!n[Hn]&&n!==t;)sn(n)&&sh(n[Y],n),n=n[et];null===n&&(n=t),sn(n)&&sh(n[Y],n),e=n&&n[Hn]}n=e}}(n)}}function sh(t,n){if(!(256&n[ve])){n[ve]&=-129,n[ve]|=256,function pE(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let r=0;r<e.length;r+=2){const o=n[e[r]];if(!(o instanceof Hs)){const i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];lr(4,a,c);try{c.call(a)}finally{lr(5,a,c)}}else{lr(4,o,i);try{i.call(o)}finally{lr(5,o,i)}}}}}(t,n),function gE(t,n){const e=t.cleanup,r=n[si];if(null!==e)for(let i=0;i<e.length-1;i+=2)if("string"==typeof e[i]){const s=e[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else e[i].call(r[e[i+1]]);null!==r&&(n[si]=null);const o=n[eo];if(null!==o){n[eo]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(t,n),1===n[Y].type&&n[pe].destroy();const e=n[Fs];if(null!==e&&qt(n[et])){e!==n[et]&&cv(e,n);const r=n[ar];null!==r&&r.detachView(t)}!function ZD(t){Xd.delete(t[Ls])}(n)}}function ah(t,n,e){return function lv(t,n,e){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return e[at];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=t.data[r.directiveStart+o];if(i===Un.None||i===Un.Emulated)return null}return an(r,e)}}(t,n.parent,e)}function Io(t,n,e,r,o){t.insertBefore(n,e,r,o)}function uv(t,n,e){t.appendChild(n,e)}function dv(t,n,e,r,o){null!==r?Io(t,n,e,r,o):uv(t,n,e)}function Xc(t,n){return t.parentNode(n)}let ch,hh,rl,gv=function fv(t,n,e){return 40&t.type?an(t,e):null};function el(t,n,e,r){const o=ah(t,r,n),i=n[pe],a=function hv(t,n,e){return gv(t,n,e)}(r.parent||n[Lt],r,n);if(null!=o)if(Array.isArray(e))for(let c=0;c<e.length;c++)dv(i,o,e[c],a,!1);else dv(i,o,e,a,!1);void 0!==ch&&ch(i,r,n,e,o)}function Zs(t,n){if(null!==n){const e=n.type;if(3&e)return an(n,t);if(4&e)return lh(-1,t[n.index]);if(8&e){const r=n.child;if(null!==r)return Zs(t,r);{const o=t[n.index];return qt(o)?lh(-1,o):Ge(o)}}if(32&e)return rh(n,t)()||Ge(t[n.index]);{const r=mv(t,n);return null!==r?Array.isArray(r)?r[0]:Zs(Qs(t[ft]),r):Zs(t,n.next)}}return null}function mv(t,n){return null!==n?t[ft][Lt].projection[n.projection]:null}function lh(t,n){const e=St+t+1;if(e<n.length){const r=n[e],o=r[Y].firstChild;if(null!==o)return Zs(r,o)}return n[cr]}function tl(t,n,e){const r=Xc(t,n);r&&function mE(t,n,e,r){t.removeChild(n,e,r)}(t,r,n,e)}function _v(t){t.textContent=""}function uh(t,n,e,r,o,i,s){for(;null!=e;){const a=r[e.index],c=e.type;if(s&&0===n&&(a&&jt(Ge(a),r),e.flags|=2),32!=(32&e.flags))if(8&c)uh(t,n,e.child,r,o,i,!1),Pi(n,t,o,a,i);else if(32&c){const l=rh(e,r);let u;for(;u=l();)Pi(n,t,o,u,i);Pi(n,t,o,a,i)}else 16&c?vv(t,n,r,e,o,i):Pi(n,t,o,a,i);e=s?e.projectionNext:e.next}}function Xs(t,n,e,r,o,i){uh(e,r,t.firstChild,n,o,i,!1)}function vv(t,n,e,r,o,i){const s=e[ft],c=s[Lt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Pi(n,t,o,c[l],i);else{let l=c;const u=s[et];Kc(r)&&(l.flags|=128),uh(t,n,l,u,o,i,!0)}}function yv(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function bv(t,n,e){const{mergedAttrs:r,classes:o,styles:i}=e;null!==r&&wd(t,n,r),null!==o&&yv(t,n,o),null!==i&&function CE(t,n,e){t.setAttribute(n,"style",e)}(t,n,i)}function Di(){if(void 0!==hh)return hh;if(typeof document<"u")return document;throw new $(210,!1)}function Mv(t){return function fh(){if(void 0===rl&&(rl=null,qe.trustedTypes))try{rl=qe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return rl}()?.createScriptURL(t)||t}class Ov{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gm})`}}function io(t){return t instanceof Ov?t.changingThisBreaksApplicationSecurity:t}function ea(t,n){const e=function kE(t){return t instanceof Ov&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${gm})`)}return e===n}const NE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ei=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ei||{});function ln(t){const n=na();return n?n.sanitize(Ei.URL,t)||"":ea(t,"URL")?io(t):function gh(t){return(t=String(t)).match(NE)?t:"unsafe:"+t}(ge(t))}function kv(t){const n=na();if(n)return Mv(n.sanitize(Ei.RESOURCE_URL,t)||"");if(ea(t,"ResourceURL"))return Mv(io(t));throw new $(904,!1)}function na(){const t=L();return t&&t[ai].sanitizer}const Si=new Z("ENVIRONMENT_INITIALIZER"),Av=new Z("INJECTOR",-1),Rv=new Z("INJECTOR_DEF_TYPES");class vh{get(n,e=Is){if(e===Is){const r=new Error(`NullInjectorError: No provider for ${Ct(n)}!`);throw r.name="NullInjectorError",r}return e}}function ra(t){return{\u0275providers:t}}function KE(...t){return{\u0275providers:Nv(0,t),\u0275fromNgModule:!0}}function Nv(t,...n){const e=[],r=new Set;let o;const i=s=>{e.push(s)};return Ci(n,s=>{const a=s;il(a,i,[],r)&&(o||=[],o.push(a))}),void 0!==o&&Fv(o,i),e}function Fv(t,n){for(let e=0;e<t.length;e++){const{ngModule:r,providers:o}=t[e];yh(o,i=>{n(i,r)})}}function il(t,n,e,r){if(!(t=de(t)))return!1;let o=null,i=yc(t);const s=!i&&Ee(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const c=t.ngModule;if(i=yc(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)il(l,n,e,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let l;r.add(o);try{Ci(i.imports,u=>{il(u,n,e,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&Fv(l,n)}if(!a){const l=Do(o)||(()=>new o);n({provide:o,useFactory:l,deps:ke},o),n({provide:Rv,useValue:o,multi:!0},o),n({provide:Si,useValue:()=>Q(o),multi:!0},o)}const c=i.providers;if(null!=c&&!a){const l=t;yh(c,u=>{n(u,l)})}}}return o!==t&&void 0!==t.providers}function yh(t,n){for(let e of t)ud(e)&&(e=e.\u0275providers),Array.isArray(e)?yh(e,n):n(e)}const JE=Fe({provide:String,useValue:Fe});function bh(t){return null!==t&&"object"==typeof t&&JE in t}function ko(t){return"function"==typeof t}const Ch=new Z("Set Injector scope."),sl={},QE={};let wh;function al(){return void 0===wh&&(wh=new vh),wh}class yn{}class Ii extends yn{get destroyed(){return this._destroyed}constructor(n,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Oh(n,s=>this.processProvider(s)),this.records.set(Av,ki(void 0,this)),o.has("environment")&&this.records.set(yn,ki(void 0,this));const i=this.records.get(Ch);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Rv.multi,ke,Pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of n)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=Qr(this),r=rn(void 0);try{return n()}finally{Qr(e),rn(r)}}get(n,e=Is,r=Pe.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Mm))return n[Mm](this);r=wc(r);const i=Qr(this),s=rn(void 0);try{if(!(r&Pe.SkipSelf)){let c=this.records.get(n);if(void 0===c){const l=function nS(t){return"function"==typeof t||"object"==typeof t&&t instanceof Z}(n)&&vc(n);c=l&&this.injectableDefInScope(l)?ki(Mh(n),sl):null,this.records.set(n,c)}if(null!=c)return this.hydrate(n,c)}return(r&Pe.Self?al():this.parent).get(n,e=r&Pe.Optional&&e===Is?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Cc]=a[Cc]||[]).unshift(Ct(n)),i)throw a;return function QP(t,n,e,r){const o=t[Cc];throw n[bm]&&o.unshift(n[bm]),t.message=function ZP(t,n,e,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let o=Ct(n);if(Array.isArray(n))o=n.map(Ct).join(" -> ");else if("object"==typeof n){let i=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Ct(a)))}o=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${o}]: ${t.replace(GP,"\n  ")}`}("\n"+t.message,o,e,r),t.ngTokenPath=o,t[Cc]=null,t}(a,n,"R3InjectorError",this.source)}throw a}finally{rn(s),Qr(i)}}resolveInjectorInitializers(){const n=Qr(this),e=rn(void 0);try{const o=this.get(Si.multi,ke,Pe.Self);for(const i of o)i()}finally{Qr(n),rn(e)}}toString(){const n=[],e=this.records;for(const r of e.keys())n.push(Ct(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(n){let e=ko(n=de(n))?n:de(n&&n.provide);const r=function XE(t){return bh(t)?ki(void 0,t.useValue):ki(Vv(t),sl)}(n);if(ko(n)||!0!==n.multi)this.records.get(e);else{let o=this.records.get(e);o||(o=ki(void 0,sl,!0),o.factory=()=>yd(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,r)}hydrate(n,e){return e.value===sl&&(e.value=QE,e.value=e.factory()),"object"==typeof e.value&&e.value&&function tS(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=de(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function Mh(t){const n=vc(t),e=null!==n?n.factory:Do(t);if(null!==e)return e;if(t instanceof Z)throw new $(204,!1);if(t instanceof Function)return function ZE(t){const n=t.length;if(n>0)throw function Ks(t,n){const e=[];for(let r=0;r<t;r++)e.push(n);return e}(n,"?"),new $(204,!1);const e=function BP(t){return t&&(t[bc]||t[mm])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new $(204,!1)}function Vv(t,n,e){let r;if(ko(t)){const o=de(t);return Do(o)||Mh(o)}if(bh(t))r=()=>de(t.useValue);else if(function jv(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...yd(t.deps||[]));else if(function Lv(t){return!(!t||!t.useExisting)}(t))r=()=>Q(de(t.useExisting));else{const o=de(t&&(t.useClass||t.provide));if(!function eS(t){return!!t.deps}(t))return Do(o)||Mh(o);r=()=>new o(...yd(t.deps))}return r}function ki(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Oh(t,n){for(const e of t)Array.isArray(e)?Oh(e,n):e&&ud(e)?Oh(e.\u0275providers,n):n(e)}const Ph=new Z("AppId",{providedIn:"root",factory:()=>rS}),rS="ng",$v=new Z("Platform Initializer"),To=new Z("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Uv=new Z("CSP nonce",{providedIn:"root",factory:()=>Di().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),Bv=new Z("",{providedIn:"root",factory:()=>new Set});function oS(){const t=new Ti;return"browser"===W(To)&&(t.store=function iS(t,n){const e=t.getElementById(n+"-state");if(e?.textContent)try{return JSON.parse(e.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+n,r)}return{}}(Di(),W(Ph))),t}let Ti=(()=>{class t{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=ee({token:t,providedIn:"root",factory:oS})}get(e,r){return void 0!==this.store[e]?this.store[e]:r}set(e,r){this.store[e]=r}remove(e){delete this.store[e]}hasKey(e){return this.store.hasOwnProperty(e)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(e,r){this.onSerializeCallbacks[e]=r}toJson(){for(const e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();const xh="h",Dh="b";var Ai=function(t){return t.FirstChild="f",t.NextSibling="n",t}(Ai||{});const Eh="e",Sh="t",oa="c",cl="x",Ri="r",Ih="i",kh="n",ll="d",Th="__\u0275nghData__",ia="ngh";let Hv=(t,n,e)=>null;function aS(t,n,e=!1){let r=t.getAttribute(ia);if(null==r)return null;const[o,i]=r.split("|");if(r=e?i:o,!r)return null;const s=e?o:i?`|${i}`:"";let a={};if(""!==r){const l=n.get(Ti,null,{optional:!0});null!==l&&(a=l.get(Th,[])[Number(r)])}const c={data:a,firstChild:t.firstChild??null};return e&&(c.firstChild=t,ul(c,0,t.nextSibling)),s?t.setAttribute(ia,s):t.removeAttribute(ia),c}function Ah(t,n,e=!1){return Hv(t,n,e)}function zv(t){let n=t._lView;return 2===n[Y].type?null:(Pd(n)&&(n=n[xe]),n)}function ul(t,n,e){t.segmentHeads??={},t.segmentHeads[n]=e}function Rh(t,n){return t.segmentHeads?.[n]??null}function qv(t,n){return t.data[oa]?.[n]??null}function Nh(t,n){const e=qv(t,n)??[];let r=0;for(let o of e)r+=o[Ri]*(o[cl]??1);return r}function dl(t,n){if(typeof t.disconnectedNodes>"u"){const e=t.data[ll];t.disconnectedNodes=e?new Set(e):null}return!!t.disconnectedNodes?.has(n)}class fS{}class Gv{}class pS{resolveComponentFactory(n){throw function gS(t){const n=Error(`No component factory found for ${Ct(t)}.`);return n.ngComponent=t,n}(n)}}let hl=(()=>{class t{static{this.NULL=new pS}}return t})();function mS(){return Ni(kt(),L())}function Ni(t,n){return new un(an(t,n))}let un=(()=>{class t{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=mS}}return t})();function _S(t){return t instanceof un?t.nativeElement:t}class Kv{}let Nr=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function vS(){const t=L(),e=_n(kt().index,t);return(sn(e)?e:t)[pe]}()}}return t})(),yS=(()=>{class t{static{this.\u0275prov=ee({token:t,providedIn:"root",factory:()=>null})}}return t})();class sa{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const bS=new sa("16.2.12"),Fh={};function Zv(t,n=null,e=null,r){const o=Xv(t,n,e,r);return o.resolveInjectorInitializers(),o}function Xv(t,n=null,e=null,r,o=new Set){const i=[e||ke,KE(t)];return r=r||("object"==typeof t?void 0:Ct(t)),new Ii(i,n||al(),r||null,o)}let bn=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Is}static{this.NULL=new vh}static create(e,r){if(Array.isArray(e))return Zv({name:""},r,e,"");{const o=e.name??"";return Zv({name:o},e.parent,e.providers,o)}}static{this.\u0275prov=ee({token:t,providedIn:"any",factory:()=>Q(Av)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function jh(t){return t.ngOriginalError}class Fr{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&jh(n);for(;e&&jh(e);)e=jh(e);return e||null}}function Vh(t){return n=>{setTimeout(t,void 0,n)}}const ot=class ES extends D{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,r){let o=n,i=e||(()=>null),s=r;if(n&&"object"==typeof n){const c=n;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=Vh(i),o&&(o=Vh(o)),s&&(s=Vh(s)));const a=super.subscribe({next:o,error:i,complete:s});return n instanceof X&&n.add(a),a}};function ty(...t){}class $e{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&e,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function SS(){const t="function"==typeof qe.requestAnimationFrame;let n=qe[t?"requestAnimationFrame":"setTimeout"],e=qe[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r);const o=e[Zone.__symbol__("OriginalDelegate")];o&&(e=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function TS(t){const n=()=>{!function kS(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(qe,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Uh(t),t.isCheckStableRunning=!0,$h(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Uh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,o,i,s,a)=>{if(function RS(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(o,i,s,a);try{return ny(t),e.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&n(),ry(t)}},onInvoke:(e,r,o,i,s,a,c)=>{try{return ny(t),e.invoke(o,i,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&n(),ry(t)}},onHasTask:(e,r,o,i)=>{e.hasTask(o,i),r===o&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Uh(t),$h(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,r,o,i)=>(e.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$e.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if($e.isInAngularZone())throw new $(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,n,IS,ty,ty);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}}const IS={};function $h(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Uh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ny(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ry(t){t._nesting--,$h(t)}const oy=new Z("",{providedIn:"root",factory:iy});function iy(){const t=W($e);let n=!0;return function kP(...t){const n=Es(t),e=function OP(t,n){return"number"==typeof sd(t)?t.pop():n}(t,1/0),r=t;return r.length?1===r.length?gn(r[0]):ri(e)(bt(r,n)):ir}(new Qe(o=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{o.next(n),o.complete()})}),new Qe(o=>{let i;t.runOutsideAngular(()=>{i=t.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,o.next(!0))})})});const s=t.onUnstable.subscribe(()=>{$e.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{o.next(!1)}))});return()=>{i.unsubscribe(),s.unsubscribe()}}).pipe(hm()))}function sy(t){return t.ownerDocument}function Lr(t){return t instanceof Function?t():t}function Li(t){return"browser"===(t??W(bn)).get(To)}let Bh=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}}return t})();function aa(t){for(;t;){t[ve]|=64;const n=Qs(t);if(Pd(t)&&!n)return t;t=n}return null}const gl=new Z(""),dy=new Z("",{providedIn:"root",factory:()=>!1});let pl=null;function py(t,n){return t[n]??vy()}function my(t,n){const e=vy();e.producerNode?.length&&(t[n]=pl,e.lView=t,pl=_y())}const HS={...$m,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{aa(t.lView)},lView:null};function _y(){return Object.create(HS)}function vy(){return pl??=_y(),pl}const me={};function p(t){yy(Se(),L(),Wt()+t,!1)}function yy(t,n,e,r){if(!r)if(3==(3&n[ve])){const i=t.preOrderCheckHooks;null!==i&&Ac(n,i,e)}else{const i=t.preOrderHooks;null!==i&&Rc(n,i,0,e)}Eo(e)}function T(t,n=Pe.Default){const e=L();return null===e?Q(t,n):k_(kt(),e,de(t),n)}function ml(t,n,e,r,o,i,s,a,c,l,u){const d=n.blueprint.slice();return d[at]=o,d[ve]=140|r,(null!==l||t&&2048&t[ve])&&(d[ve]|=2048),s_(d),d[et]=d[ci]=t,d[ht]=e,d[ai]=s||t&&t[ai],d[pe]=a||t&&t[pe],d[Xr]=c||t&&t[Xr]||null,d[Lt]=i,d[Ls]=function YD(){return JD++}(),d[kr]=u,d[Fm]=l,d[ft]=2==n.type?t[ft]:d,d}function ji(t,n,e,r,o){let i=t.data[n];if(null===i)i=function Hh(t,n,e,r,o){const i=h_(),s=Ad(),c=t.data[n]=function QS(t,n,e,r,o,i){let s=n?n.injectorIndex:-1,a=0;return fi()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,e,n,r,o);return null===t.firstChild&&(t.firstChild=c),null!==i&&(s?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c,c.prev=i)),c}(t,n,e,r,o),function Jx(){return ce.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=e,i.value=r,i.attrs=o;const s=function Bs(){const t=ce.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return ur(i,!0),i}function ca(t,n,e,r){if(0===e)return-1;const o=n.length;for(let i=0;i<e;i++)n.push(r),t.blueprint.push(r),t.data.push(null);return o}function Cy(t,n,e,r,o){const i=py(n,js),s=Wt(),a=2&r;try{Eo(-1),a&&n.length>xe&&yy(t,n,xe,!1),lr(a?2:0,o);const l=a?i:null,u=Dd(l);try{null!==l&&(l.dirty=!1),e(r,o)}finally{Ed(l,u)}}finally{a&&null===n[js]&&my(n,js),Eo(s),lr(a?3:1,o)}}function zh(t,n,e){if(Od(n)){const r=Tn(null);try{const i=n.directiveEnd;for(let s=n.directiveStart;s<i;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,e[s],s)}}finally{Tn(r)}}}function qh(t,n,e){d_()&&(function oI(t,n,e,r){const o=e.directiveStart,i=e.directiveEnd;xo(e)&&function dI(t,n,e){const r=an(n,t),o=wy(e);let s=16;e.signals?s=4096:e.onPush&&(s=64);const a=_l(t,ml(t,o,null,s,r,n,null,t[ai].rendererFactory.createRenderer(r,e),null,null,null));t[n.index]=a}(n,e,t.data[o+e.componentOffset]),t.firstCreatePass||Fc(e,n),jt(r,n);const s=e.initialInputs;for(let a=o;a<i;a++){const c=t.data[a],l=So(n,t,a,e);jt(l,n),null!==s&&hI(0,a-o,l,c,0,s),zn(c)&&(_n(e.index,n)[ht]=So(n,t,a,e))}}(t,n,e,an(e,n)),64==(64&e.flags)&&Dy(t,n,e))}function Gh(t,n,e=an){const r=n.localNames;if(null!==r){let o=n.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?e(n,t):t[s];t[o++]=a}}}function wy(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Wh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function Wh(t,n,e,r,o,i,s,a,c,l,u){const d=xe+r,g=d+o,m=function qS(t,n){const e=[];for(let r=0;r<n;r++)e.push(r<t?null:me);return e}(d,g),v="function"==typeof l?l():l;return m[Y]={type:t,blueprint:m,template:e,queries:null,viewQuery:a,declTNode:n,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:u}}let My=t=>null;function KS(t){J_(t)?_v(t):function uS(t){const n=Di(),e=n.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(i){const s=function lS(t){return t.textContent?.replace(/\s/gm,"")}(i);return"ngetn"===s||"ngtns"===s?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let r;const o=[];for(;r=e.nextNode();)o.push(r);for(const i of o)"ngetn"===i.textContent?i.replaceWith(n.createTextNode("")):i.remove()}(t)}function Oy(t,n,e,r){for(let o in t)if(t.hasOwnProperty(o)){e=null===e?{}:e;const i=t[o];null===r?Py(e,n,o,i):r.hasOwnProperty(o)&&Py(e,n,r[o],i)}return e}function Py(t,n,e,r){t.hasOwnProperty(e)?t[e].push(n,r):t[e]=[n,r]}function Cn(t,n,e,r,o,i,s,a){const c=an(n,e);let u,l=n.inputs;!a&&null!=l&&(u=l[r])?(Zh(t,e,u,r,o),xo(n)&&function eI(t,n){const e=_n(n,t);16&e[ve]||(e[ve]|=64)}(e,n.index)):3&n.type&&(r=function XS(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),o=null!=s?s(o,n.value||"",r):o,i.setProperty(c,r,o))}function Kh(t,n,e,r){if(d_()){const o=null===r?null:{"":-1},i=function sI(t,n){const e=t.directiveRegistry;let r=null,o=null;if(e)for(let i=0;i<e.length;i++){const s=e[i];if(Im(n,s.selectors,!1))if(r||(r=[]),zn(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Jh(t,n,a.length)}else r.unshift(s),Jh(t,n,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(t,e);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&xy(t,n,e,s,o,a),o&&function aI(t,n,e){if(n){const r=t.localNames=[];for(let o=0;o<n.length;o+=2){const i=e[n[o+1]];if(null==i)throw new $(-301,!1);r.push(n[o],i)}}}(e,r,o)}e.mergedAttrs=As(e.mergedAttrs,e.attrs)}function xy(t,n,e,r,o,i){for(let l=0;l<r.length;l++)qd(Fc(e,n),t,r[l].type);!function lI(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=ca(t,n,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];e.mergedAttrs=As(e.mergedAttrs,u.hostAttrs),uI(t,e,n,c,u),cI(c,u,o),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),a=!0),c++}!function ZS(t,n,e){const o=n.directiveEnd,i=t.data,s=n.attrs,a=[];let c=null,l=null;for(let u=n.directiveStart;u<o;u++){const d=i[u],g=e?e.get(d):null,v=g?g.outputs:null;c=Oy(d.inputs,u,c,g?g.inputs:null),l=Oy(d.outputs,u,l,v);const y=null===c||null===s||Sm(n)?null:fI(c,u,s);a.push(y)}null!==c&&(c.hasOwnProperty("class")&&(n.flags|=8),c.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=c,n.outputs=l}(t,e,i)}function Dy(t,n,e){const r=e.directiveStart,o=e.directiveEnd,i=e.index,s=function Qx(){return ce.lFrame.currentDirectiveIndex}();try{Eo(i);for(let a=r;a<o;a++){const c=t.data[a],l=n[a];Nd(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&iI(c,l)}}finally{Eo(-1),Nd(s)}}function iI(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Jh(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function cI(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;zn(n)&&(e[""]=t)}}function uI(t,n,e,r,o){t.data[r]=o;const i=o.factory||(o.factory=Do(o.type)),s=new Hs(i,zn(o),T);t.blueprint[r]=s,e[r]=s,function nI(t,n,e,r,o){const i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~n.index;(function rI(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,r,i)}}(t,n,r,ca(t,e,o.hostVars,me),o)}function hr(t,n,e,r,o,i){const s=an(t,n);!function Yh(t,n,e,r,o,i,s){if(null==i)t.removeAttribute(n,o,e);else{const a=null==s?ge(i):s(i,r||"",o);t.setAttribute(n,o,a,e)}}(n[pe],s,i,t.value,e,r,o)}function hI(t,n,e,r,o,i){const s=i[n];if(null!==s)for(let a=0;a<s.length;)Ey(r,e,s[a++],s[a++],s[a++])}function Ey(t,n,e,r,o){const i=Tn(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(o=s[r].call(n,o)),null!==t.setInput?t.setInput(n,o,e,r):n[r]=o}finally{Tn(i)}}function fI(t,n,e){let r=null,o=0;for(;o<e.length;){const i=e[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(t.hasOwnProperty(i)){null===r&&(r=[]);const s=t[i];for(let a=0;a<s.length;a+=2)if(s[a]===n){r.push(i,s[a+1],e[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Sy(t,n,e,r){return[t,!0,!1,n,null,0,r,e,null,null,null]}function Iy(t,n){const e=t.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const i=e[r+1];if(-1!==i){const s=t.data[i];Ld(e[r]),s.contentQueries(2,n[i],i)}}}function _l(t,n){return t[Ns]?t[Nm][Hn]=n:t[Ns]=n,t[Nm]=n,n}function Qh(t,n,e){Ld(0);const r=Tn(null);try{n(t,e)}finally{Tn(r)}}function ky(t){return t[si]||(t[si]=[])}function Ty(t){return t.cleanup||(t.cleanup=[])}function Ry(t,n){const e=t[Xr],r=e?e.get(Fr,null):null;r&&r.handleError(n)}function Zh(t,n,e,r,o){for(let i=0;i<e.length;){const s=e[i++],a=e[i++];Ey(t.data[s],n[s],r,a,o)}}function jr(t,n,e){const r=Ic(n,t);!function av(t,n,e){t.setValue(n,e)}(t[pe],r,e)}function gI(t,n){const e=_n(n,t),r=e[Y];!function pI(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(r,e);const o=e[at];null!==o&&null===e[kr]&&(e[kr]=Ah(o,e[Xr])),Xh(r,e,e[ht])}function Xh(t,n,e){jd(n);try{const r=t.viewQuery;null!==r&&Qh(1,r,e);const o=t.template;null!==o&&Cy(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Iy(t,n),t.staticViewQueries&&Qh(2,t.viewQuery,e);const i=t.components;null!==i&&function mI(t,n){for(let e=0;e<n.length;e++)gI(t,n[e])}(n,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[ve]&=-5,Vd()}}let Ny=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(e,r,o){const i=typeof Zone>"u"?null:Zone.current,s=function Dx(t,n,e){const r=Object.create(Ex);e&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=n;const o=s=>{r.cleanupFn=s};return r.ref={notify:()=>zm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!qm(r))return;r.hasRun=!0;const s=Dd(r);try{r.cleanupFn(),r.cleanupFn=Xm,r.fn(o)}finally{Ed(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(e,l=>{this.all.has(l)&&this.queue.set(l,i)},o);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[e,r]of this.queue)this.queue.delete(e),r?r.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}}return t})();function vl(t,n,e){let r=e?t.styles:null,o=e?t.classes:null,i=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?i=a:1==i?o=cd(o,a):2==i&&(r=cd(r,a+": "+n[++s]+";"))}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=o:t.classesWithoutHost=o}function la(t,n,e,r,o=!1){for(;null!==e;){const i=n[e.index];null!==i&&r.push(Ge(i)),qt(i)&&Fy(i,r);const s=e.type;if(8&s)la(t,n,e.child,r);else if(32&s){const a=rh(e,n);let c;for(;c=a();)r.push(c)}else if(16&s){const a=mv(n,e);if(Array.isArray(a))r.push(...a);else{const c=Qs(n[ft]);la(c[Y],c,a,r,!0)}}e=o?e.projectionNext:e.next}return r}function Fy(t,n){for(let e=St;e<t.length;e++){const r=t[e],o=r[Y].firstChild;null!==o&&la(r[Y],r,o,n)}t[cr]!==t[at]&&n.push(t[cr])}function yl(t,n,e,r=!0){const o=n[ai],i=o.rendererFactory,s=o.afterRenderEventManager;i.begin?.(),s?.begin();try{Ly(t,n,t.template,e)}catch(c){throw r&&Ry(n,c),c}finally{i.end?.(),o.effectManager?.flush(),s?.end()}}function Ly(t,n,e,r){const o=n[ve];if(256!=(256&o)){n[ai].effectManager?.flush(),jd(n);try{s_(n),function g_(t){return ce.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Cy(t,n,e,2,r);const s=3==(3&o);if(s){const l=t.preOrderCheckHooks;null!==l&&Ac(n,l,null)}else{const l=t.preOrderHooks;null!==l&&Rc(n,l,0,null),$d(n,0)}if(function yI(t){for(let n=ov(t);null!==n;n=iv(n)){if(!n[Lm])continue;const e=n[ui];for(let r=0;r<e.length;r++){jx(e[r])}}}(n),jy(n,2),null!==t.contentQueries&&Iy(t,n),s){const l=t.contentCheckHooks;null!==l&&Ac(n,l)}else{const l=t.contentHooks;null!==l&&Rc(n,l,1),$d(n,1)}!function zS(t,n){const e=t.hostBindingOpCodes;if(null===e)return;const r=py(n,Vs);try{for(let o=0;o<e.length;o++){const i=e[o];if(i<0)Eo(~i);else{const s=i,a=e[++o],c=e[++o];Yx(a,s),r.dirty=!1;const l=Dd(r);try{c(2,n[s])}finally{Ed(r,l)}}}}finally{null===n[Vs]&&my(n,Vs),Eo(-1)}}(t,n);const a=t.components;null!==a&&$y(n,a,0);const c=t.viewQuery;if(null!==c&&Qh(2,c,r),s){const l=t.viewCheckHooks;null!==l&&Ac(n,l)}else{const l=t.viewHooks;null!==l&&Rc(n,l,2),$d(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[ve]&=-73,a_(n)}finally{Vd()}}}function jy(t,n){for(let e=ov(t);null!==e;e=iv(e))for(let r=St;r<e.length;r++)Vy(e[r],n)}function bI(t,n,e){Vy(_n(n,t),e)}function Vy(t,n){if(!function Fx(t){return 128==(128&t[ve])}(t))return;const e=t[Y],r=t[ve];if(80&r&&0===n||1024&r||2===n)Ly(e,t,e.template,t[ht]);else if(t[Rs]>0){jy(t,1);const o=e.components;null!==o&&$y(t,o,1)}}function $y(t,n,e){for(let r=0;r<n.length;r++)bI(t,n[r],e)}class ua{get rootNodes(){const n=this._lView,e=n[Y];return la(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ht]}set context(n){this._lView[ht]=n}get destroyed(){return 256==(256&this._lView[ve])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[et];if(qt(n)){const e=n[8],r=e?e.indexOf(this):-1;r>-1&&(Zc(n,r),$c(e,r))}this._attachedToViewContainer=!1}ih(this._lView[Y],this._lView)}onDestroy(n){!function l_(t,n){if(256==(256&t[ve]))throw new $(911,!1);null===t[eo]&&(t[eo]=[]),t[eo].push(n)}(this._lView,n)}markForCheck(){aa(this._cdRefInjectingView||this._lView)}detach(){this._lView[ve]&=-129}reattach(){this._lView[ve]|=128}detectChanges(){yl(this._lView[Y],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uE(t,n){Xs(t,n,n[pe],2,null,null)}(this._lView[Y],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=n}}class CI extends ua{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;yl(n[Y],n,n[ht],!1)}checkNoChanges(){}get context(){return null}}class Uy extends hl{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Ee(n);return new da(e,this.ngModule)}}function By(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class MI{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){r=wc(r);const o=this.injector.get(n,Fh,r);return o!==Fh||e===Fh?o:this.parentInjector.get(n,e,r)}}class da extends Gv{get inputs(){const n=this.componentDef,e=n.inputTransforms,r=By(n.inputs);if(null!==e)for(const o of r)e.hasOwnProperty(o.propName)&&(o.transform=e[o.propName]);return r}get outputs(){return By(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function cx(t){return t.map(ax).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,r,o){let i=(o=o||this.ngModule)instanceof yn?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new MI(n,i):n,a=s.get(Kv,null);if(null===a)throw new $(407,!1);const d={rendererFactory:a,sanitizer:s.get(yS,null),effectManager:s.get(Ny,null),afterRenderEventManager:s.get(Bh,null)},g=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=r?function GS(t,n,e,r){const i=r.get(dy,!1)||e===Un.ShadowDom,s=t.selectRootElement(n,i);return function WS(t){My(t)}(s),s}(g,r,this.componentDef.encapsulation,s):Qc(g,m,function wI(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(m)),x=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let M=null;null!==v&&(M=Ah(v,s,!0));const V=Wh(0,null,null,1,0,null,null,null,null,null,null),j=ml(null,V,null,x,null,null,d,g,s,null,M);let B,be;jd(j);try{const pt=this.componentDef;let Ie,st=null;pt.findHostDirectiveDefs?(Ie=[],st=new Map,pt.findHostDirectiveDefs(pt,Ie,st),Ie.push(pt)):Ie=[pt];const Or=function PI(t,n){const e=t[Y],r=xe;return t[r]=n,ji(e,r,2,"#host",null)}(j,v),nr=function xI(t,n,e,r,o,i,s){const a=o[Y];!function DI(t,n,e,r){for(const o of t)n.mergedAttrs=As(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(vl(n,n.mergedAttrs,!0),null!==e&&bv(r,e,n))}(r,t,n,s);let c=null;null!==n&&(c=Ah(n,o[Xr]));const l=i.rendererFactory.createRenderer(n,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const d=ml(o,wy(e),null,u,o[t.index],t,i,l,null,null,c);return a.firstCreatePass&&Jh(a,t,r.length-1),_l(o,d),o[t.index]=d}(Or,v,pt,Ie,j,d,g);be=i_(V,xe),v&&function SI(t,n,e,r){if(r)wd(t,e,["ng-version",bS.full]);else{const{attrs:o,classes:i}=function lx(t){const n=[],e=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&n.push(i,t[++r]):8===o&&e.push(i);else{if(!Bn(o))break;o=i}r++}return{attrs:n,classes:e}}(n.selectors[0]);o&&wd(t,e,o),i&&i.length>0&&yv(t,e,i.join(" "))}}(g,pt,v,r),void 0!==e&&function II(t,n,e){const r=t.projection=[];for(let o=0;o<n.length;o++){const i=e[o];r.push(null!=i?Array.from(i):null)}}(be,this.ngContentSelectors,e),B=function EI(t,n,e,r,o,i){const s=kt(),a=o[Y],c=an(s,o);xy(a,o,s,e,null,r);for(let u=0;u<e.length;u++)jt(So(o,a,s.directiveStart+u,s),o);Dy(a,o,s),c&&jt(c,o);const l=So(o,a,s.directiveStart+s.componentOffset,s);if(t[ht]=o[ht]=l,null!==i)for(const u of i)u(l,n);return zh(a,s,t),l}(nr,pt,Ie,st,j,[kI]),Xh(V,j,null)}finally{Vd()}return new OI(this.componentType,B,Ni(be,j),j,be)}}class OI extends fS{constructor(n,e,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new CI(o),this.componentType=n}setInput(n,e){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const i=this._rootLView;Zh(i[Y],i,o,n,e),this.previousInputValues.set(n,e),aa(_n(this._tNode.index,i))}}get injector(){return new Kt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function kI(){const t=kt();Tc(L()[Y],t)}function Le(t){let n=function Hy(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const r=[t];for(;n;){let o;if(zn(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new $(903,!1);o=n.\u0275dir}if(o){if(e){r.push(o);const s=t;s.inputs=bl(t.inputs),s.inputTransforms=bl(t.inputTransforms),s.declaredInputs=bl(t.declaredInputs),s.outputs=bl(t.outputs);const a=o.hostBindings;a&&NI(t,a);const c=o.viewQuery,l=o.contentQueries;if(c&&AI(t,c),l&&RI(t,l),_c(t.inputs,o.inputs),_c(t.declaredInputs,o.declaredInputs),_c(t.outputs,o.outputs),null!==o.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),_c(s.inputTransforms,o.inputTransforms)),zn(o)&&o.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(t),a===Le&&(e=!1)}}n=Object.getPrototypeOf(n)}!function TI(t){let n=0,e=null;for(let r=t.length-1;r>=0;r--){const o=t[r];o.hostVars=n+=o.hostVars,o.hostAttrs=As(o.hostAttrs,e=As(e,o.hostAttrs))}}(r)}function bl(t){return t===sr?{}:t===ke?[]:t}function AI(t,n){const e=t.viewQuery;t.viewQuery=e?(r,o)=>{n(r,o),e(r,o)}:n}function RI(t,n){const e=t.contentQueries;t.contentQueries=e?(r,o,i)=>{n(r,o,i),e(r,o,i)}:n}function NI(t,n){const e=t.hostBindings;t.hostBindings=e?(r,o)=>{n(r,o),e(r,o)}:n}function Wy(t){const n=t.inputConfig,e={};for(const r in n)if(n.hasOwnProperty(r)){const o=n[r];Array.isArray(o)&&o[2]&&(e[r]=o[2])}t.inputTransforms=e}function Cl(t){return!!ef(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ef(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function fr(t,n,e){return t[n]=e}function ha(t,n){return t[n]}function Vt(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Ao(t,n,e,r){const o=Vt(t,n,e);return Vt(t,n+1,r)||o}function gr(t,n,e,r){const o=L();return Vt(o,gi(),n)&&(Se(),hr(rt(),o,t,n,e,r)),gr}function $i(t,n,e,r){return Vt(t,gi(),e)?n+ge(e)+r:me}function Ui(t,n,e,r,o,i){const a=Ao(t,function Tr(){return ce.lFrame.bindingIndex}(),e,o);return Ar(2),a?n+ge(e)+r+ge(o)+i:me}const ZI=new RegExp(`^(\\d+)*(${Dh}|${xh})*(.*)`);function sf(t){return t.index-xe}function Ol(t,n,e,r){let o=null;const i=sf(r),s=t.data[kh];if(s?.[i])o=function rk(t,n){const[e,...r]=function ek(t){const n=t.match(ZI),[e,r,o,i]=n,s=r?parseInt(r,10):o,a=[];for(const[c,l,u]of i.matchAll(/(f|n)(\d*)/g)){const d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}(t);let o;return o=e===xh?n[ft][at]:e===Dh?function ay(t){return t.ownerDocument.body}(n[ft][at]):Ge(n[Number(e)+xe]),function nk(t,n){let e=t;for(let r=0;r<n.length;r+=2){const o=n[r],i=n[r+1];for(let s=0;s<i;s++)switch(o){case Ai.FirstChild:e=e.firstChild;break;case Ai.NextSibling:e=e.nextSibling}}return e}(o,r)}(s[i],e);else if(n.firstChild===r)o=t.firstChild;else{const a=null===r.prev,c=r.prev??r.parent;if(function tk(t){return!t.prev&&8===t.parent?.type}(r))o=Rh(t,sf(r.parent));else{let l=an(c,e);if(a)o=l.firstChild;else{const u=sf(c),d=Rh(t,u);o=2===c.type&&d?Pl(Nh(t,u)+1,d):l.nextSibling}}}return o}function Pl(t,n){let e=n;for(let r=0;r<t;r++)e=e.nextSibling;return e}function N(t,n,e,r,o,i,s,a){const c=L(),l=Se(),u=t+xe,d=l.firstCreatePass?function sk(t,n,e,r,o,i,s,a,c){const l=n.consts,u=ji(n,t,4,s||null,no(l,a));Kh(n,e,u,no(l,c)),Tc(n,u);const d=u.tView=Wh(2,u,r,o,i,n.directiveRegistry,n.pipeRegistry,null,n.schemas,l,null);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,l,c,n,e,r,o,i,s):l.data[u];ur(d,!1);const g=sb(l,c,d,t);kc()&&el(l,c,g,d),jt(g,c),_l(c,c[u]=Sy(g,c,g,d)),Dc(d)&&qh(l,c,d),null!=s&&Gh(c,d,a)}let sb=ab;function ab(t,n,e,r){return ro(!0),n[pe].createComment("")}function ak(t,n,e,r){const o=n[kr],i=!o||fi()||dl(o,r);if(ro(i),i)return ab(0,n);const s=o.data[Sh]?.[r]??null;null!==s&&null!==e.tView&&null===e.tView.ssrId&&(e.tView.ssrId=s);const a=Ol(o,t,n,e);return ul(o,r,a),Pl(Nh(o,r),a)}function pr(t){return hi(function Kx(){return ce.lFrame.contextLView}(),xe+t)}function O(t,n,e){const r=L();return Vt(r,gi(),n)&&Cn(Se(),rt(),r,t,n,r[pe],e,!1),O}function cf(t,n,e,r,o){const s=o?"class":"style";Zh(t,e,n.inputs[s],s,r)}function h(t,n,e,r){const o=L(),i=Se(),s=xe+t,a=o[pe],c=i.firstCreatePass?function uk(t,n,e,r,o,i){const s=n.consts,c=ji(n,t,2,r,no(s,o));return Kh(n,e,c,no(s,i)),null!==c.attrs&&vl(c,c.attrs,!1),null!==c.mergedAttrs&&vl(c,c.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,c),c}(s,i,o,n,e,r):i.data[s],l=cb(i,o,c,a,n,t);o[s]=l;const u=Dc(c);return ur(c,!0),bv(a,l,c),32!=(32&c.flags)&&kc()&&el(i,o,l,c),0===function $x(){return ce.lFrame.elementDepthCount}()&&jt(l,o),function Ux(){ce.lFrame.elementDepthCount++}(),u&&(qh(i,o,c),zh(i,c,o)),null!==r&&Gh(o,c),h}function f(){let t=kt();Ad()?function Rd(){ce.lFrame.isParent=!1}():(t=t.parent,ur(t,!1));const n=t;(function Hx(t){return ce.skipHydrationRootTNode===t})(n)&&function Wx(){ce.skipHydrationRootTNode=null}(),function Bx(){ce.lFrame.elementDepthCount--}();const e=Se();return e.firstCreatePass&&(Tc(e,t),Od(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function cD(t){return 0!=(8&t.flags)}(n)&&cf(e,n,L(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function lD(t){return 0!=(16&t.flags)}(n)&&cf(e,n,L(),n.stylesWithoutHost,!1),f}function b(t,n,e,r){return h(t,n,e,r),f(),b}let cb=(t,n,e,r,o,i)=>(ro(!0),Qc(r,o,w_()));function dk(t,n,e,r,o,i){const s=n[kr],a=!s||fi()||dl(s,i);if(ro(a),a)return Qc(r,o,w_());const c=Ol(s,t,n,e);return qv(s,i)&&ul(s,i,c.nextSibling),s&&(K_(e)||J_(c))&&xo(e)&&(function qx(t){ce.skipHydrationRootTNode=t}(e),_v(c)),c}let ub=(t,n,e,r)=>(ro(!0),oh(n[pe],""));function gk(t,n,e,r){let o;const i=n[kr],s=!i||fi();if(ro(s),s)return oh(n[pe],"");const a=Ol(i,t,n,e),c=function hS(t,n){const e=t.data;let r=e[Eh]?.[n]??null;return null===r&&e[oa]?.[n]&&(r=Nh(t,n)),r}(i,r);return ul(i,r,a),o=Pl(c,a),o}function _e(){return L()}function ma(t){return!!t&&"function"==typeof t.then}function db(t){return!!t&&"function"==typeof t.subscribe}function k(t,n,e,r){const o=L(),i=Se(),s=kt();return function fb(t,n,e,r,o,i,s){const a=Dc(r),l=t.firstCreatePass&&Ty(t),u=n[ht],d=ky(n);let g=!0;if(3&r.type||s){const y=an(r,n),w=s?s(y):y,x=d.length,M=s?j=>s(Ge(j[r.index])):r.index;let V=null;if(!s&&a&&(V=function mk(t,n,e,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===e&&o[i+1]===r){const a=n[si],c=o[i+2];return a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(t,n,o,r.index)),null!==V)(V.__ngLastListenerFn__||V).__ngNextListenerFn__=i,V.__ngLastListenerFn__=i,g=!1;else{i=pb(r,n,u,i,!1);const j=e.listen(w,o,i);d.push(i,j),l&&l.push(o,M,x,x+1)}}else i=pb(r,n,u,i,!1);const m=r.outputs;let v;if(g&&null!==m&&(v=m[o])){const y=v.length;if(y)for(let w=0;w<y;w+=2){const B=n[v[w]][v[w+1]].subscribe(i),be=d.length;d.push(i,B),l&&l.push(o,r.index,be,-(be+1))}}}(i,o,o[pe],s,t,n,r),k}function gb(t,n,e,r){try{return lr(6,n,e),!1!==e(r)}catch(o){return Ry(t,o),!1}finally{lr(7,n,e)}}function pb(t,n,e,r,o){return function i(s){if(s===Function)return r;aa(t.componentOffset>-1?_n(t.index,n):n);let c=gb(n,e,r,s),l=i.__ngNextListenerFn__;for(;l;)c=gb(n,e,l,s)&&c,l=l.__ngNextListenerFn__;return o&&!1===c&&s.preventDefault(),c}}function P(t=1){return function Xx(t){return(ce.lFrame.contextLView=function eD(t,n){for(;t>0;)n=n[ci],t--;return n}(t,ce.lFrame.contextLView))[ht]}(t)}function xl(t,n,e){return Dl(t,"",n,"",e),xl}function Dl(t,n,e,r,o){const i=L(),s=$i(i,n,e,r);return s!==me&&Cn(Se(),rt(),i,t,s,i[pe],o,!1),Dl}function El(t,n){return t<<17|n<<2}function so(t){return t>>17&32767}function df(t){return 2|t}function Ro(t){return(131068&t)>>2}function hf(t,n){return-131069&t|n<<2}function ff(t){return 1|t}function Ob(t,n,e,r,o){const i=t[e+1],s=null===n;let a=r?so(i):Ro(i),c=!1;for(;0!==a&&(!1===c||s);){const u=t[a+1];Pk(t[a],n)&&(c=!0,t[a+1]=r?ff(u):df(u)),a=r?so(u):Ro(u)}c&&(t[e+1]=r?df(i):ff(i))}function Pk(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&wi(t,n)>=0}const Mt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pb(t){return t.substring(Mt.key,Mt.keyEnd)}function xb(t,n){const e=Mt.textEnd;return e===n?-1:(n=Mt.keyEnd=function Sk(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,Mt.key=n,e),Ki(t,n,e))}function Ki(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function _a(t,n,e){return qn(t,n,e,!1),_a}function ie(t,n){return qn(t,n,null,!0),ie}function _r(t,n){for(let e=function Dk(t){return function Eb(t){Mt.key=0,Mt.keyEnd=0,Mt.value=0,Mt.valueEnd=0,Mt.textEnd=t.length}(t),xb(t,Ki(t,0,Mt.textEnd))}(n);e>=0;e=xb(n,e))vn(t,Pb(n),!0)}function qn(t,n,e,r){const o=L(),i=Se(),s=Ar(2);i.firstUpdatePass&&Tb(i,t,s,r),n!==me&&Vt(o,s,n)&&Rb(i,i.data[Wt()],o,o[pe],t,o[s+1]=function Uk(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Ct(io(t)))),t}(n,e),r,s)}function kb(t,n){return n>=t.expandoStartIndex}function Tb(t,n,e,r){const o=t.data;if(null===o[e+1]){const i=o[Wt()],s=kb(t,e);Fb(i,r)&&null===n&&!s&&(n=!1),n=function Rk(t,n,e,r){const o=function Fd(t){const n=ce.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let i=r?n.residualClasses:n.residualStyles;if(null===o)0===(r?n.classBindings:n.styleBindings)&&(e=va(e=gf(null,t,n,e,r),n.attrs,r),i=null);else{const s=n.directiveStylingLast;if(-1===s||t[s]!==o)if(e=gf(o,t,n,e,r),null===i){let c=function Nk(t,n,e){const r=e?n.classBindings:n.styleBindings;if(0!==Ro(r))return t[so(r)]}(t,n,r);void 0!==c&&Array.isArray(c)&&(c=gf(null,t,n,c[1],r),c=va(c,n.attrs,r),function Fk(t,n,e,r){t[so(e?n.classBindings:n.styleBindings)]=r}(t,n,r,c))}else i=function Lk(t,n,e){let r;const o=n.directiveEnd;for(let i=1+n.directiveStylingLast;i<o;i++)r=va(r,t[i].hostAttrs,e);return va(r,n.attrs,e)}(t,n,r)}return void 0!==i&&(r?n.residualClasses=i:n.residualStyles=i),e}(o,i,n,r),function Mk(t,n,e,r,o,i){let s=i?n.classBindings:n.styleBindings,a=so(s),c=Ro(s);t[r]=e;let u,l=!1;if(Array.isArray(e)?(u=e[1],(null===u||wi(e,u)>0)&&(l=!0)):u=e,o)if(0!==c){const g=so(t[a+1]);t[r+1]=El(g,a),0!==g&&(t[g+1]=hf(t[g+1],r)),t[a+1]=function Ck(t,n){return 131071&t|n<<17}(t[a+1],r)}else t[r+1]=El(a,0),0!==a&&(t[a+1]=hf(t[a+1],r)),a=r;else t[r+1]=El(c,0),0===a?a=r:t[c+1]=hf(t[c+1],r),c=r;l&&(t[r+1]=df(t[r+1])),Ob(t,u,r,!0),Ob(t,u,r,!1),function Ok(t,n,e,r,o){const i=o?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof n&&wi(i,n)>=0&&(e[r+1]=ff(e[r+1]))}(n,u,t,r,i),s=El(a,c),i?n.classBindings=s:n.styleBindings=s}(o,i,n,e,s,r)}}function gf(t,n,e,r,o){let i=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(i=n[a],r=va(r,i.hostAttrs,o),i!==t);)a++;return null!==t&&(e.directiveStylingLast=a),r}function va(t,n,e){const r=e?1:2;let o=-1;if(null!==n)for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?o=s:o===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),vn(t,s,!!e||n[++i]))}return void 0===t?null:t}function Rb(t,n,e,r,o,i,s,a){if(!(3&n.type))return;const c=t.data,l=c[a+1],u=function wk(t){return 1==(1&t)}(l)?Nb(c,n,e,o,Ro(l),s):void 0;Sl(u)||(Sl(i)||function bk(t){return 2==(2&t)}(l)&&(i=Nb(c,null,e,o,a,s)),function bE(t,n,e,r,o){if(n)o?t.addClass(e,r):t.removeClass(e,r);else{let i=-1===r.indexOf("-")?void 0:oo.DashCase;null==o?t.removeStyle(e,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=oo.Important),t.setStyle(e,r,o,i))}}(r,s,Ic(Wt(),e),o,i))}function Nb(t,n,e,r,o,i){const s=null===n;let a;for(;o>0;){const c=t[o],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let g=e[o+1];g===me&&(g=d?ke:void 0);let m=d?Kd(g,r):u===r?g:void 0;if(l&&!Sl(m)&&(m=Kd(c,r)),Sl(m)&&(a=m,s))return a;const v=t[o+1];o=s?so(v):Ro(v)}if(null!==n){let c=i?n.residualClasses:n.residualStyles;null!=c&&(a=Kd(c,r))}return a}function Sl(t){return void 0!==t}function Fb(t,n){return 0!=(t.flags&(n?8:16))}function _(t,n=""){const e=L(),r=Se(),o=t+xe,i=r.firstCreatePass?ji(r,o,1,n,null):r.data[o],s=Lb(r,e,i,n,t);e[o]=s,kc()&&el(r,e,s,i),ur(i,!1)}let Lb=(t,n,e,r,o)=>(ro(!0),Yc(n[pe],r));function Bk(t,n,e,r,o){const i=n[kr],s=!i||fi()||dl(i,o);return ro(s),s?Yc(n[pe],r):Ol(i,t,n,e)}function K(t){return te("",t,""),K}function te(t,n,e){const r=L(),o=$i(r,t,n,e);return o!==me&&jr(r,Wt(),o),te}function Vr(t,n,e,r,o){const i=L(),s=Ui(i,t,n,e,r,o);return s!==me&&jr(i,Wt(),s),Vr}function Il(t,n,e){!function Gn(t,n,e,r){const o=Se(),i=Ar(2);o.firstUpdatePass&&Tb(o,null,i,r);const s=L();if(e!==me&&Vt(s,i,e)){const a=o.data[Wt()];if(Fb(a,r)&&!kb(o,i)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(e=cd(c,e||"")),cf(o,a,s,e,r)}else!function $k(t,n,e,r,o,i,s,a){o===me&&(o=ke);let c=0,l=0,u=0<o.length?o[0]:null,d=0<i.length?i[0]:null;for(;null!==u||null!==d;){const g=c<o.length?o[c+1]:void 0,m=l<i.length?i[l+1]:void 0;let y,v=null;u===d?(c+=2,l+=2,g!==m&&(v=d,y=m)):null===d||null!==u&&u<d?(c+=2,v=u):(l+=2,v=d,y=m),null!==v&&Rb(t,n,e,r,v,y,s,a),u=c<o.length?o[c]:null,d=l<i.length?i[l]:null}}(o,a,s,s[pe],s[i+1],s[i+1]=function jk(t,n,e){if(null==e||""===e)return ke;const r=[],o=io(e);if(Array.isArray(o))for(let i=0;i<o.length;i++)t(r,o[i],!0);else if("object"==typeof o)for(const i in o)o.hasOwnProperty(i)&&t(r,i,o[i]);else"string"==typeof o&&n(r,o);return r}(t,n,e),r,i)}}(vn,_r,$i(L(),t,n,e),!0)}const Yi="en-US";let oC=Yi;function _f(t,n,e,r,o){if(t=de(t),Array.isArray(t))for(let i=0;i<t.length;i++)_f(t[i],n,e,r,o);else{const i=Se(),s=L(),a=kt();let c=ko(t)?t:de(t.provide);const l=Vv(t),u=1048575&a.providerIndexes,d=a.directiveStart,g=a.providerIndexes>>20;if(ko(t)||!t.multi){const m=new Hs(l,o,T),v=yf(c,n,o?u:u+g,d);-1===v?(qd(Fc(a,s),i,c),vf(i,t,n.length),n.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),e.push(m),s.push(m)):(e[v]=m,s[v]=m)}else{const m=yf(c,n,u+g,d),v=yf(c,n,u,u+g),w=v>=0&&e[v];if(o&&!w||!o&&!(m>=0&&e[m])){qd(Fc(a,s),i,c);const x=function aA(t,n,e,r,o){const i=new Hs(t,e,T);return i.multi=[],i.index=n,i.componentProviders=0,SC(i,o,r&&!e),i}(o?sA:iA,e.length,o,r,l);!o&&w&&(e[v].providerFactory=x),vf(i,t,n.length,0),n.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),e.push(x),s.push(x)}else vf(i,t,m>-1?m:v,SC(e[o?v:m],l,!o&&r));!o&&r&&w&&e[v].componentProviders++}}}function vf(t,n,e,r){const o=ko(n),i=function YE(t){return!!t.useClass}(n);if(o||i){const c=(i?de(n.useClass):n).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){const u=l.indexOf(e);-1===u?l.push(e,[r,c]):l[u+1].push(r,c)}else l.push(e,c)}}}function SC(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function yf(t,n,e,r){for(let o=e;o<r;o++)if(n[o]===t)return o;return-1}function iA(t,n,e,r){return bf(this.multi,[])}function sA(t,n,e,r){const o=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=So(e,e[Y],this.providerFactory.index,r);i=a.slice(0,s),bf(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],bf(o,i);return i}function bf(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function tt(t,n=[]){return e=>{e.providersResolver=(r,o)=>function oA(t,n,e){const r=Se();if(r.firstCreatePass){const o=zn(t);_f(e,r.data,r.blueprint,o,!0),_f(n,r.data,r.blueprint,o,!1)}}(r,o?o(t):t,n)}}class Fo{}class IC{}class Cf extends Fo{constructor(n,e,r){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Uy(this);const o=mn(n);this._bootstrapComponents=Lr(o.bootstrap),this._r3Injector=Xv(n,e,[{provide:Fo,useValue:this},{provide:hl,useValue:this.componentFactoryResolver},...r],Ct(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class wf extends IC{constructor(n){super(),this.moduleType=n}create(n){return new Cf(this.moduleType,n,[])}}class kC extends Fo{constructor(n){super(),this.componentFactoryResolver=new Uy(this),this.instance=null;const e=new Ii([...n.providers,{provide:Fo,useValue:this},{provide:hl,useValue:this.componentFactoryResolver}],n.parent||al(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Mf(t,n,e=null){return new kC({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}let uA=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const r=Nv(0,e.type),o=r.length>0?Mf([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,o)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ee({token:t,providedIn:"environment",factory:()=>new t(Q(yn))})}}return t})();function Yt(t){t.getStandaloneInjector=n=>n.get(uA).getOrCreateStandaloneInjector(t)}function Lo(t,n,e){const r=Gt()+t,o=L();return o[r]===me?fr(o,r,e?n.call(e):n()):ha(o,r)}function Pf(t,n,e,r){return VC(L(),Gt(),t,n,e,r)}function jC(t,n,e,r,o,i,s,a,c){const l=Gt()+t,u=L(),d=function Nn(t,n,e,r,o,i){const s=Ao(t,n,e,r);return Ao(t,n+2,o,i)||s}(u,l,e,r,o,i);return Ao(u,l+4,s,a)||d?fr(u,l+6,c?n.call(c,e,r,o,i,s,a):n(e,r,o,i,s,a)):ha(u,l+6)}function VC(t,n,e,r,o,i){const s=n+e;return Vt(t,s,o)?fr(t,s+1,i?r.call(i,o):r(o)):function Oa(t,n){const e=t[n];return e===me?void 0:e}(t,s+1)}function Wn(t,n){const e=Se();let r;const o=t+xe;e.firstCreatePass?(r=function xA(t,n){if(n)for(let e=n.length-1;e>=0;e--){const r=n[e];if(t===r.name)return r}}(n,e.pipeRegistry),e.data[o]=r,r.onDestroy&&(e.destroyHooks??=[]).push(o,r.onDestroy)):r=e.data[o];const i=r.factory||(r.factory=Do(r.type)),a=rn(T);try{const c=Nc(!1),l=i();return Nc(c),function lk(t,n,e,r){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=r}(e,L(),o,l),l}finally{rn(a)}}function Kn(t,n,e){const r=t+xe,o=L(),i=hi(o,r);return function Pa(t,n){return t[Y].data[n].pure}(o,r)?VC(o,Gt(),n,i.transform,e,i):i.transform(e)}function kA(){return this._results[Symbol.iterator]()}class xf{get changes(){return this._changes||(this._changes=new ot)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=xf.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=kA)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const r=this;r.dirty=!1;const o=function Rn(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function MD(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=n[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}(r._results,o,e))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function AA(t,n,e,r=!0){const o=n[Y];if(function hE(t,n,e,r){const o=St+r,i=e.length;r>0&&(e[o-1][Hn]=n),r<i-St?(n[Hn]=e[o],L_(e,St+r,n)):(e.push(n),n[Hn]=null),n[et]=e;const s=n[Fs];null!==s&&e!==s&&function fE(t,n){const e=t[ui];n[ft]!==n[et][et][ft]&&(t[Lm]=!0),null===e?t[ui]=[n]:e.push(n)}(s,n);const a=n[ar];null!==a&&a.insertView(t),n[ve]|=128}(o,n,t,e),r){const i=lh(e,t),s=n[pe],a=Xc(s,t[cr]);null!==a&&function lE(t,n,e,r,o,i){r[at]=o,r[Lt]=n,Xs(t,r,e,1,o,i)}(o,t[Lt],s,n,a,i)}}let $r=(()=>{class t{static{this.__NG_ELEMENT_ID__=FA}}return t})();const RA=$r,NA=class extends RA{constructor(n,e,r){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,r){const o=function TA(t,n,e,r){const o=n.tView,a=ml(t,o,e,4096&t[ve]?4096:16,null,n,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Fs]=t[n.index];const l=t[ar];return null!==l&&(a[ar]=l.createEmbeddedView(o)),Xh(o,a,e),a}(this._declarationLView,this._declarationTContainer,n,{injector:e,hydrationInfo:r});return new ua(o)}};function FA(){return Nl(kt(),L())}function Nl(t,n){return 4&t.type?new NA(n,t,Ni(t,n)):null}function zC(t){const n=t[$s]??[],r=t[et][pe];for(const o of n)LA(o,r);t[$s]=ke}function LA(t,n){let e=0,r=t.firstChild;if(r){const o=t.data[Ri];for(;e<o;){const i=r.nextSibling;tl(n,r,!1),r=i,e++}}}function qC(t){zC(t);for(let n=St;n<t.length;n++)Fl(t[n])}function Fl(t){const n=t[Y];for(let e=xe;e<n.bindingStartIndex;e++)qt(t[e])?qC(t[e]):Array.isArray(t[e])&&Fl(t[e])}let GC=(t,n)=>null;function $A(t,n){const e=t[$s];return n&&null!==e&&0!==e.length?e[0].data[Ih]===n?e.shift():(zC(t),null):null}function WC(t,n){return GC(t,n)}let Jn=(()=>{class t{static{this.__NG_ELEMENT_ID__=BA}}return t})();function BA(){return YC(kt(),L())}const HA=Jn,KC=class extends HA{constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return Ni(this._hostTNode,this._hostLView)}get injector(){return new Kt(this._hostTNode,this._hostLView)}get parentInjector(){const n=Lc(this._hostTNode,this._hostLView);if(Bd(n)){const e=qs(n,this._hostLView),r=zs(n);return new Kt(e[Y].data[r+8],e)}return new Kt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=JC(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-St}createEmbeddedView(n,e,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=WC(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},i,s),c=!!s&&!Kc(this._hostTNode);return this.insertImpl(a,o,c),a}createComponent(n,e,r,o,i){const s=n&&!function Ws(t){return"function"==typeof t}(n);let a;if(s)a=e;else{const y=e||{};a=y.index,r=y.injector,o=y.projectableNodes,i=y.environmentInjector||y.ngModuleRef}const c=s?n:new da(Ee(n)),l=r||this.parentInjector;if(!i&&null==c.ngModule){const w=(s?l:this.parentInjector).get(yn,null);w&&(i=w)}const u=Ee(c.componentType??{}),d=WC(this._lContainer,u?.id??null),m=c.create(l,o,d?.firstChild??null,i),v=!!d&&!Kc(this._hostTNode);return this.insertImpl(m.hostView,a,v),m}insert(n,e){return this.insertImpl(n,e,!1)}insertImpl(n,e,r){const o=n._lView;if(function Lx(t){return qt(t[et])}(o)){const c=this.indexOf(n);if(-1!==c)this.detach(c);else{const l=o[et],u=new KC(l,l[Lt],l[et]);u.detach(u.indexOf(n))}}const s=this._adjustIndex(e),a=this._lContainer;return AA(a,o,s,!r),n.attachToViewContainerRef(),L_(Df(a),s,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=JC(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),r=Zc(this._lContainer,e);r&&($c(Df(this._lContainer),e),ih(r[Y],r))}detach(n){const e=this._adjustIndex(n,-1),r=Zc(this._lContainer,e);return r&&null!=$c(Df(this._lContainer),e)?new ua(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function JC(t){return t[8]}function Df(t){return t[8]||(t[8]=[])}function YC(t,n){let e;const r=n[t.index];return qt(r)?e=r:(e=Sy(r,n,null,t),n[t.index]=e,_l(n,e)),QC(e,n,t,r),new KC(e,t,n)}let QC=ZC;function ZC(t,n,e,r){if(t[cr])return;let o;o=8&e.type?Ge(r):function zA(t,n){const e=t[pe],r=e.createComment(""),o=an(n,t);return Io(e,Xc(e,o),r,function _E(t,n){return t.nextSibling(n)}(e,o),!1),r}(n,e),t[cr]=o}function qA(t,n,e,r){if(t[cr]&&t[$s])return;const o=n[kr],i=e.index-xe,s=function Jc(t){let n=t.parent;for(;n;){if(K_(n))return!0;n=n.parent}return!1}(e)||Kc(e);if(!o||s||dl(o,i))return ZC(t,n,e,r);const c=Rh(o,i),l=o.data[oa]?.[i],[u,d]=function VA(t,n){const e=[];for(const r of n)for(let o=0;o<(r[cl]??1);o++){const i={data:r,firstChild:null};r[Ri]>0&&(i.firstChild=t,t=Pl(r[Ri],t)),e.push(i)}return[t,e]}(c,l);t[cr]=u,t[$s]=d}class Ef{constructor(n){this.queryList=n,this.matches=null}clone(){return new Ef(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sf{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const r=null!==n.contentQueries?n.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){const s=e.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new Sf(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==o0(n,e).matches&&this.queries[e].setDirty()}}class XC{constructor(n,e,r=null){this.predicate=n,this.flags=e,this.read=r}}class If{constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){const o=null!==e?e.length:0,i=this.getByIndex(r).embeddedTView(n,o);i&&(i.indexInDeclarationView=r,null!==e?e.push(i):e=[i])}return null!==e?new If(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class kf{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new kf(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(n,e,WA(e,i)),this.matchTNodeWithReadOption(n,e,jc(e,n,i,!1,!1))}else r===$r?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,jc(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===un||o===Jn||o===$r&&4&e.type)this.addMatch(e.index,-2);else{const i=jc(e,n,o,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function WA(t,n){const e=t.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1];return null}function JA(t,n,e,r){return-1===e?function KA(t,n){return 11&t.type?Ni(t,n):4&t.type?Nl(t,n):null}(n,t):-2===e?function YA(t,n,e){return e===un?Ni(n,t):e===$r?Nl(n,t):e===Jn?YC(n,t):void 0}(t,n,r):So(t,t[Y],e,n)}function e0(t,n,e,r){const o=n[ar].queries[r];if(null===o.matches){const i=t.data,s=e.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:JA(n,i[l],s[c+1],e.metadata.read))}o.matches=a}return o.matches}function Tf(t,n,e,r){const o=t.queries.getByIndex(e),i=o.matches;if(null!==i){const s=e0(t,n,o,e);for(let a=0;a<i.length;a+=2){const c=i[a];if(c>0)r.push(s[a/2]);else{const l=i[a+1],u=n[-c];for(let d=St;d<u.length;d++){const g=u[d];g[Fs]===g[et]&&Tf(g[Y],g,l,r)}if(null!==u[ui]){const d=u[ui];for(let g=0;g<d.length;g++){const m=d[g];Tf(m[Y],m,l,r)}}}}}return r}function Ll(t){const n=L(),e=Se(),r=m_();Ld(r+1);const o=o0(e,r);if(t.dirty&&function Nx(t){return 4==(4&t[ve])}(n)===(2==(2&o.metadata.flags))){if(null===o.matches)t.reset([]);else{const i=o.crossesNgTemplate?Tf(e,n,r,[]):e0(e,n,o,r);t.reset(i,_S),t.notifyOnChanges()}return!0}return!1}function Af(t,n,e){const r=Se();r.firstCreatePass&&(r0(r,new XC(t,n,e),-1),2==(2&n)&&(r.staticViewQueries=!0)),n0(r,L(),n)}function jl(){return function QA(t,n){return t[ar].queries[n].queryList}(L(),m_())}function n0(t,n,e){const r=new xf(4==(4&e));(function YS(t,n,e,r){const o=ky(n);o.push(e),t.firstCreatePass&&Ty(t).push(r,o.length-1)})(t,n,r,r.destroy),null===n[ar]&&(n[ar]=new Sf),n[ar].queries.push(new Ef(r))}function r0(t,n,e){null===t.queries&&(t.queries=new If),t.queries.track(new kf(n,e))}function o0(t,n){return t.queries.getByIndex(n)}function jo(t,n){return Nl(t,n)}const Vf=new Z("Application Initializer");let $f=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),this.appInits=W(Vf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const o of this.appInits){const i=o();if(ma(i))e.push(i);else if(db(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});e.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),0===e.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Uf=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const Ur=new Z("LocaleId",{providedIn:"root",factory:()=>W(Ur,Pe.Optional|Pe.SkipSelf)||function y2(){return typeof $localize<"u"&&$localize.locale||Yi}()});let $l=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mt(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class w2{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let w0=(()=>{class t{compileModuleSync(e){return new wf(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const r=this.compileModuleSync(e),i=Lr(mn(e).declarations).reduce((s,a)=>{const c=Ee(a);return c&&s.push(new da(c)),s},[]);return new w2(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const x0=new Z("");let ao=null;const Wf=new Z("PlatformDestroyListeners"),Ea=new Z("appBootstrapListener");class S0{constructor(n,e){this.name=n,this.token=e}}function J2(t){try{const{rootComponent:n,appProviders:e,platformProviders:r}=t,o=function K2(t=[]){if(ao)return ao;const n=function k0(t=[],n){return bn.create({name:n,providers:[{provide:Ch,useValue:"platform"},{provide:Wf,useValue:new Set([()=>ao=null])},...t]})}(t);return ao=n,function E0(){!function wx(t){Jm=t}(()=>{throw new $(600,!1)})}(),function I0(t){t.get($v,null)?.forEach(e=>e())}(n),n}(r),i=[eR(),...e||[]],a=new kC({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get($e);return c.run(()=>{a.resolveInjectorInitializers();const l=a.get(Fr,null);let u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:m=>{l.handleError(m)}})});const d=()=>a.destroy(),g=o.get(Wf);return g.add(d),a.onDestroy(()=>{u.unsubscribe(),g.delete(d)}),function R0(t,n,e){try{const r=e();return ma(r)?r.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw n.runOutsideAngular(()=>t.handleError(r)),r}}(l,c,()=>{const m=a.get($f);return m.runInitializers(),m.donePromise.then(()=>{!function iC(t){kn(t,"Expected localeId to be defined"),"string"==typeof t&&(oC=t.toLowerCase().replace(/_/g,"-"))}(a.get(Ur,Yi)||Yi);const y=a.get(Vo);return void 0!==n&&y.bootstrap(n),y})})})}catch(n){return Promise.reject(n)}}let Vo=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=W(L0),this.zoneIsStable=W(oy),this.componentTypes=[],this.components=[],this.isStable=W($l).hasPendingTasks.pipe(Bt(e=>e?re(!1):this.zoneIsStable),function TP(t,n=$n){return t=t??AP,E((e,r)=>{let o,i=!0;e.subscribe(F(r,s=>{const a=n(s);(i||!t(o,a))&&(i=!1,o=a,r.next(s))}))})}(),hm()),this._injector=W(yn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,r){const o=e instanceof Gv;if(!this._injector.get($f).done)throw!o&&function ii(t){const n=Ee(t)||Et(t)||zt(t);return null!==n&&n.standalone}(e),new $(405,!1);let s;s=o?e:this._injector.get(hl).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function G2(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Fo),l=s.create(bn.NULL,[],r||s.selector,a),u=l.location.nativeElement,d=l.injector.get(x0,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Hl(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new $(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;Hl(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(Ea,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Hl(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new $(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Hl(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const L0=new Z("",{providedIn:"root",factory:()=>W(Fr).handleError.bind(void 0)});function Z2(){const t=W($e),n=W(Fr);return e=>t.runOutsideAngular(()=>n.handleError(e))}let X2=(()=>{class t{constructor(){this.zone=W($e),this.applicationRef=W(Vo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function j0(t){return[{provide:$e,useFactory:t},{provide:Si,multi:!0,useFactory:()=>{const n=W(X2,{optional:!0});return()=>n.initialize()}},{provide:L0,useFactory:Z2},{provide:oy,useFactory:iy}]}function eR(t){return ra([[],j0(()=>new $e(function A0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}(t)))])}let Xi=(()=>{class t{static{this.__NG_ELEMENT_ID__=tR}}return t})();function tR(t){return function nR(t,n,e){if(xo(t)&&!e){const r=_n(t.index,n);return new ua(r,r)}return 47&t.type?new ua(n[ft],n):null}(kt(),L(),16==(16&t))}class H0{constructor(){}supports(n){return Cl(n)}create(n){return new aR(n)}}const sR=(t,n)=>n;class aR{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||sR}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,r=this._removalsHead,o=0,i=null;for(;e||r;){const s=!r||e&&e.currentIndex<q0(r,o,i)?e:r,a=q0(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)o++;else{i||(i=[]);const l=a-o,u=c-o;if(l!=u){for(let g=0;g<l;g++){const m=g<i.length?i[g]:i[g]=0,v=m+g;u<=v&&v<l&&(i[g]=m+1)}i[s.previousIndex]=u-l}}a!==c&&n(s,a,c)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Cl(n))throw new $(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,i,s,e=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)i=n[a],s=this._trackByFn(a,i),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,i,s,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)):(e=this._mismatch(e,i,s,a),r=!0),e=e._next}else o=0,function BI(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let r;for(;!(r=e.next()).done;)n(r.value)}}(n,a=>{s=this._trackByFn(o,a),null!==e&&Object.is(e.trackById,s)?(r&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,o),r=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,r,o){let i;return null===n?i=this._itTail:(i=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,i,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,i,o)):n=this._addAfter(new cR(e,r),i,o),n}_verifyReinsertion(n,e,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?n=this._reinsertAfter(i,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,i=n._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(n,e,r),this._addToMoves(n,r),n}_moveAfter(n,e,r){return this._unlink(n),this._insertAfter(n,e,r),this._addToMoves(n,r),n}_addAfter(n,e,r){return this._insertAfter(n,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,r){const o=null===e?this._itHead:e._next;return n._next=o,n._prev=e,null===o?this._itTail=n:o._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new z0),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,r=n._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new z0),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class cR{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lR{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const e=n._prevDup,r=n._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class z0{constructor(){this.map=new Map}put(n){const e=n.trackById;let r=this.map.get(e);r||(r=new lR,this.map.set(e,r)),r.add(n)}get(n,e){const o=this.map.get(n);return o?o.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function q0(t,n,e){const r=t.previousIndex;if(null===r)return r;let o=0;return e&&r<e.length&&(o=e[r]),r+n+o}class G0{constructor(){}supports(n){return n instanceof Map||ef(n)}create(){return new uR}}class uR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||ef(n)))throw new $(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const o=this._records.get(n);this._maybeAddToChanges(o,e);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new dR(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}}class dR{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function W0(){return new Gl([new H0])}let Gl=(()=>{class t{static{this.\u0275prov=ee({token:t,providedIn:"root",factory:W0})}constructor(e){this.factories=e}static create(e,r){if(null!=r){const o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||W0()),deps:[[t,new Hc,new Bc]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(null!=r)return r;throw new $(901,!1)}}return t})();function K0(){return new Sa([new G0])}let Sa=(()=>{class t{static{this.\u0275prov=ee({token:t,providedIn:"root",factory:K0})}constructor(e){this.factories=e}static create(e,r){if(r){const o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||K0()),deps:[[t,new Hc,new Bc]]}}find(e){const r=this.factories.find(o=>o.supports(e));if(r)return r;throw new $(901,!1)}}return t})(),nw=!1;function MR(){return ra([{provide:gl,useFactory:()=>{let t=!0;return Li()&&(t=!!W(Ti,{optional:!0})?.get(Th,null)),t&&W(Bv).add("hydration"),t}},{provide:Si,useValue:()=>{Li()&&W(gl)&&(function OR(){const t=Di();let n;for(const e of t.body.childNodes)if(e.nodeType===Node.COMMENT_NODE&&"nghm"===e.textContent?.trim()){n=e;break}if(!n)throw new $(-507,!1)}(),function CR(){nw||(nw=!0,function cS(){Hv=aS}(),function hk(){cb=dk}(),function Hk(){Lb=Bk}(),function pk(){ub=gk}(),function ck(){sb=ak}(),function GA(){QC=qA}(),function UA(){GC=$A}(),function JS(){My=KS}())}())},multi:!0},{provide:dy,useFactory:()=>Li()&&W(gl)},{provide:Ea,useFactory:()=>{if(Li()&&W(gl)){const t=W(Vo);return W(bn),()=>{(function wR(t,n){return t.isStable.pipe(Dr(r=>r)).toPromise().then(()=>{})})(t).then(()=>{$e.assertInAngularZone(),function jA(t){const n=t._views;for(const e of n){const r=zv(e);null!==r&&null!==r[at]&&(sn(r)?Fl(r):(Fl(r[at]),qC(r)))}}(t)})}}return()=>{}},multi:!0}])}function es(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let eg=null;function co(){return eg}class ER{}const wn=new Z("DocumentToken");let tg=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:function(){return W(IR)},providedIn:"platform"})}}return t})();const SR=new Z("Location Initialized");let IR=(()=>{class t extends tg{constructor(){super(),this._doc=W(wn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return co().getBaseHref(this._doc)}onPopState(e){const r=co().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=co().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){this._history.pushState(e,r,o)}replaceState(e,r,o){this._history.replaceState(e,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:function(){return new t},providedIn:"platform"})}}return t})();function ng(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function rw(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Br(t){return t&&"?"!==t[0]?"?"+t:t}let Uo=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:function(){return W(iw)},providedIn:"root"})}}return t})();const ow=new Z("appBaseHref");let iw=(()=>{class t extends Uo{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(wn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ng(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Br(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){const s=this.prepareExternalUrl(o+Br(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){const s=this.prepareExternalUrl(o+Br(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(r){return new(r||t)(Q(tg),Q(ow,8))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),kR=(()=>{class t extends Uo{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=ng(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+Br(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+Br(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(r){return new(r||t)(Q(tg),Q(ow,8))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})(),rg=(()=>{class t{constructor(e){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function RR(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(rw(sw(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Br(r))}normalize(e){return t.stripTrailingSlash(function AR(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,sw(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Br(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Br(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}static{this.normalizeQueryParams=Br}static{this.joinWithSlash=ng}static{this.stripTrailingSlash=rw}static{this.\u0275fac=function(r){return new(r||t)(Q(Uo))}}static{this.\u0275prov=ee({token:t,factory:function(){return function TR(){return new rg(Q(Uo))}()},providedIn:"root"})}}return t})();function sw(t){return t.replace(/\/index.html$/,"")}function pw(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const r=e.indexOf("="),[o,i]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===n)return decodeURIComponent(i)}return null}const fg=/\s+/,mw=[];let ou=(()=>{class t{constructor(e,r,o,i){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this.initialClasses=mw,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(fg):mw}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(fg):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(fg).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static{this.\u0275fac=function(r){return new(r||t)(T(Gl),T(Sa),T(un),T(Nr))}}static{this.\u0275dir=he({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();class yN{constructor(n,e,r,o){this.$implicit=n,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vr=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new yN(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),vw(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{vw(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(T(Jn),T($r),T(Gl))}}static{this.\u0275dir=he({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function vw(t,n){t.context.$implicit=n.item}let On=(()=>{class t{constructor(e,r){this._viewContainer=e,this._context=new bN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){yw("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){yw("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(T(Jn),T($r))}}static{this.\u0275dir=he({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})();class bN{constructor(){this.$implicit=null,this.ngIf=null}}function yw(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ct(n)}'.`)}let Cw=(()=>{class t{constructor(e,r,o){this._ngEl=e,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){const[o,i]=e.split("."),s=-1===o.indexOf("-")?void 0:oo.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||t)(T(un),T(Sa),T(Nr))}}static{this.\u0275dir=he({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return t})();class ON{createSubscription(n,e){return Zm(()=>n.subscribe({next:e,error:r=>{throw r}}))}dispose(n){Zm(()=>n.unsubscribe())}}class PN{createSubscription(n,e){return n.then(e,r=>{throw r})}dispose(n){}}const xN=new PN,DN=new ON;let iu=(()=>{class t{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(ma(e))return xN;if(db(e))return DN;throw function Qn(t,n){return new $(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(T(Xi,16))}}static{this.\u0275pipe=on({name:"async",type:t,pure:!1,standalone:!0})}}return t})(),Pn=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zr({type:t})}static{this.\u0275inj=Er({})}}return t})();function Ow(t){return"server"===t}let KN=(()=>{class t{static{this.\u0275prov=ee({token:t,providedIn:"root",factory:()=>new JN(Q(wn),window)})}}return t})();class JN{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function YN(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(n)||i.querySelector(`[name="${n}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const e=n.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Pw{}function ns(t,n){return oe(n)?Dt(t,n,1):Dt(t,1)}function Aa(t){return E((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function Ue(t,n,e){const r=oe(t)||n||e?{next:t,error:n,complete:e}:t;return r?E((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(F(i,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),i.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):$n}class cu{}class lu{}class jn{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),i=o.toLowerCase(),s=e.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof jn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new jn;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof jn?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,e);const o=("a"===n.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const i=n.value;if(i){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class yF{encodeKey(n){return Iw(n)}encodeValue(n){return Iw(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const CF=/%(\d[a-f0-9])/gi,wF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Iw(t){return encodeURIComponent(t).replace(CF,(n,e)=>wF[e]??n)}function uu(t){return`${t}`}class qr{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new yF,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function bF(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,i)),n.decodeValue(o.slice(i+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const r=n.fromObject[e],o=Array.isArray(r)?r.map(uu):[uu(r)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(r=>{const o=n[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new qr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(uu(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const o=r.indexOf(uu(n.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class MF{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function kw(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Tw(t){return typeof Blob<"u"&&t instanceof Blob}function Aw(t){return typeof FormData<"u"&&t instanceof FormData}class Ra{constructor(n,e,r,o){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function OF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new jn),this.context||(this.context=new MF),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new qr,this.urlWithParams=e}serializeBody(){return null===this.body?null:kw(this.body)||Tw(this.body)||Aw(this.body)||function PF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Aw(this.body)?null:Tw(this.body)?this.body.type||null:kw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,i=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,a=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let c=n.headers||this.headers,l=n.params||this.params;const u=n.context??this.context;return void 0!==n.setHeaders&&(c=Object.keys(n.setHeaders).reduce((d,g)=>d.set(g,n.setHeaders[g]),c)),n.setParams&&(l=Object.keys(n.setParams).reduce((d,g)=>d.set(g,n.setParams[g]),l)),new Ra(e,r,i,{params:l,headers:c,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var rs=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(rs||{});class bg{constructor(n,e=200,r="OK"){this.headers=n.headers||new jn,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Cg extends bg{constructor(n={}){super(n),this.type=rs.ResponseHeader}clone(n={}){return new Cg({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class os extends bg{constructor(n={}){super(n),this.type=rs.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new os({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Rw extends bg{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function wg(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Zn=(()=>{class t{constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof Ra)i=e;else{let c,l;c=o.headers instanceof jn?o.headers:new jn(o.headers),o.params&&(l=o.params instanceof qr?o.params:new qr({fromObject:o.params})),i=new Ra(e,r,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=re(i).pipe(ns(c=>this.handler.handle(c)));if(e instanceof Ra||"events"===o.observe)return s;const a=s.pipe(xr(c=>c instanceof os));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(G(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(G(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(G(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(G(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new qr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,wg(o,r))}post(e,r,o={}){return this.request("POST",e,wg(o,r))}put(e,r,o={}){return this.request("PUT",e,wg(o,r))}static{this.\u0275fac=function(r){return new(r||t)(Q(cu))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();function Lw(t,n){return n(t)}function DF(t,n){return(e,r)=>n.intercept(e,{handle:o=>t(o,r)})}const SF=new Z(""),Na=new Z(""),jw=new Z("");function IF(){let t=null;return(n,e)=>{null===t&&(t=(W(SF,{optional:!0})??[]).reduceRight(DF,Lw));const r=W($l),o=r.add();return t(n,e).pipe(Aa(()=>r.remove(o)))}}let Vw=(()=>{class t extends cu{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null,this.pendingTasks=W($l)}handle(e){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(Na),...this.injector.get(jw,[])]));this.chain=o.reduceRight((i,s)=>function EF(t,n,e){return(r,o)=>e.runInContext(()=>n(r,i=>t(i,o)))}(i,s,this.injector),Lw)}const r=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(Aa(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||t)(Q(lu),Q(yn))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();const RF=/^\)\]\}',?\n/;let Uw=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new $(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?bt(r.\u0275loadImpl()):re(null)).pipe(Bt(()=>new Qe(i=>{const s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((y,w)=>s.setRequestHeader(y,w.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const y=e.detectContentTypeHeader();null!==y&&s.setRequestHeader("Content-Type",y)}if(e.responseType){const y=e.responseType.toLowerCase();s.responseType="json"!==y?y:"text"}const a=e.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const y=s.statusText||"OK",w=new jn(s.getAllResponseHeaders()),x=function NF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(s)||e.url;return c=new Cg({headers:w,status:s.status,statusText:y,url:x}),c},u=()=>{let{headers:y,status:w,statusText:x,url:M}=l(),V=null;204!==w&&(V=typeof s.response>"u"?s.responseText:s.response),0===w&&(w=V?200:0);let j=w>=200&&w<300;if("json"===e.responseType&&"string"==typeof V){const B=V;V=V.replace(RF,"");try{V=""!==V?JSON.parse(V):null}catch(be){V=B,j&&(j=!1,V={error:be,text:V})}}j?(i.next(new os({body:V,headers:y,status:w,statusText:x,url:M||void 0})),i.complete()):i.error(new Rw({error:V,headers:y,status:w,statusText:x,url:M||void 0}))},d=y=>{const{url:w}=l(),x=new Rw({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});i.error(x)};let g=!1;const m=y=>{g||(i.next(l()),g=!0);let w={type:rs.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),"text"===e.responseType&&s.responseText&&(w.partialText=s.responseText),i.next(w)},v=y=>{let w={type:rs.UploadProgress,loaded:y.loaded};y.lengthComputable&&(w.total=y.total),i.next(w)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),e.reportProgress&&(s.addEventListener("progress",m),null!==a&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),i.next({type:rs.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),e.reportProgress&&(s.removeEventListener("progress",m),null!==a&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||t)(Q(Pw))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();const Mg=new Z("XSRF_ENABLED"),Bw=new Z("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Hw=new Z("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class zw{}let jF=(()=>{class t{constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=pw(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(r){return new(r||t)(Q(wn),Q(To),Q(Bw))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();function VF(t,n){const e=t.url.toLowerCase();if(!W(Mg)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const r=W(zw).getToken(),o=W(Hw);return null!=r&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),n(t)}var lo=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(lo||{});function Bo(t,n){return{\u0275kind:t,\u0275providers:n}}function qw(...t){const n=[Zn,Uw,Vw,{provide:cu,useExisting:Vw},{provide:lu,useExisting:Uw},{provide:Na,useValue:VF,multi:!0},{provide:Mg,useValue:!0},{provide:zw,useClass:jF}];for(const e of t)n.push(...e.\u0275providers);return ra(n)}const Gw=new Z("LEGACY_INTERCEPTOR_FN");let UF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zr({type:t})}static{this.\u0275inj=Er({providers:[qw(Bo(lo.LegacyInterceptors,[{provide:Gw,useFactory:IF},{provide:Na,useExisting:Gw,multi:!0}]))]})}}return t})();const du=new Z(""),BF=["GET","HEAD"];function HF(t,n){const{isCacheActive:e}=W(du);if(!e||!BF.includes(t.method))return n(t);const r=W(Ti),o=function qF(t){const{params:n,method:e,responseType:r,url:o}=t;return function GF(t){let n=0;for(const e of t)n=Math.imul(31,n)+e.charCodeAt(0)<<0;return n+=2147483648,n.toString()}(e+"."+r+"."+o+"?"+n.keys().sort().map(c=>`${c}=${n.getAll(c)}`).join("&"))}(t),i=r.get(o,null);if(i){let s=i.body;switch(i.responseType){case"arraybuffer":s=(new TextEncoder).encode(i.body).buffer;break;case"blob":s=new Blob([i.body])}return re(new os({body:s,headers:new jn(i.headers),status:i.status,statusText:i.statusText,url:i.url}))}return n(t).pipe(Ue(s=>{s instanceof os&&r.set(o,{body:s.body,headers:zF(s.headers),status:s.status,statusText:s.statusText,url:s.url||"",responseType:t.responseType})}))}function zF(t){const n={};for(const e of t.keys()){const r=t.getAll(e);null!==r&&(n[e]=r)}return n}class KF extends ER{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Og extends KF{static makeCurrent(){!function DR(t){eg||(eg=t)}(new Og)}onAndCancel(n,e,r){return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function JF(){return Fa=Fa||document.querySelector("base"),Fa?Fa.getAttribute("href"):null}();return null==e?null:function YF(t){hu=hu||document.createElement("a"),hu.setAttribute("href",t);const n=hu.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return pw(document.cookie,n)}}let hu,Fa=null,ZF=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();const Pg=new Z("EventManagerPlugins");let Ww=(()=>{class t{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(e,r),r}static{this.\u0275fac=function(r){return new(r||t)(Q(Pg),Q($e))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();class Kw{constructor(n){this._doc=n}}const xg="ng-app-id";let Jw=(()=>{class t{constructor(e,r,o,i={}){this.doc=e,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ow(i),this.resetHostNodes()}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.elements?.forEach(o=>o.remove()),r.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${xg}="${this.appId}"]`);if(e?.length){const r=new Map;return e.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(e,r){const o=this.styleRef;if(o.has(e)){const i=o.get(e);return i.usage+=r,i.usage}return o.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){const o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===e)return o.delete(r),i.removeAttribute(xg),i;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(xg,this.appId),s}}addStyleToHost(e,r){const o=this.getStyleElement(e,r);e.appendChild(o);const i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(Q(wn),Q(Ph),Q(Uv,8),Q(To))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();const Dg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Eg=/%COMP%/g,n5=new Z("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Qw(t,n){return n.map(e=>e.replace(Eg,t))}let Zw=(()=>{class t{constructor(e,r,o,i,s,a,c,l=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ow(a),this.defaultRenderer=new Sg(e,s,c,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Un.ShadowDom&&(r={...r,encapsulation:Un.Emulated});const o=this.getOrCreateRenderer(e,r);return o instanceof eM?o.applyToHost(e):o instanceof Ig&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Un.Emulated:i=new eM(c,l,r,this.appId,u,s,a,d);break;case Un.ShadowDom:return new s5(c,l,e,r,s,a,this.nonce,d);default:i=new Ig(c,l,r,u,s,a,d)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(Q(Ww),Q(Jw),Q(Ph),Q(n5),Q(wn),Q(To),Q($e),Q(Uv))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();class Sg{constructor(n,e,r,o){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(Dg[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(Xw(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(Xw(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new $(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,o){if(o){e=o+":"+e;const i=Dg[o];i?n.setAttributeNS(i,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){const o=Dg[r];o?n.removeAttributeNS(o,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,o){o&(oo.DashCase|oo.Important)?n.style.setProperty(e,r,o&oo.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&oo.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n[e]=r}setValue(n,e){n.nodeValue=e}listen(n,e,r){if("string"==typeof n&&!(n=co().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(r))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function Xw(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class s5 extends Sg{constructor(n,e,r,o,i,s,a,c){super(n,i,s,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Qw(o.id,o.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ig extends Sg{constructor(n,e,r,o,i,s,a,c){super(n,i,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o,this.styles=c?Qw(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class eM extends Ig{constructor(n,e,r,o,i,s,a,c){const l=o+"-"+r.id;super(n,e,r,i,s,a,c,l),this.contentAttr=function r5(t){return"_ngcontent-%COMP%".replace(Eg,t)}(l),this.hostAttr=function o5(t){return"_nghost-%COMP%".replace(Eg,t)}(l)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}}const tM=["alt","control","meta","shift"],c5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},l5={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function nM(t){return{appProviders:[..._5,...t?.providers??[]],platformProviders:p5}}const p5=[{provide:To,useValue:"browser"},{provide:$v,useValue:function h5(){Og.makeCurrent()},multi:!0},{provide:wn,useFactory:function g5(){return function PE(t){hh=t}(document),document},deps:[]}],_5=[{provide:Ch,useValue:"root"},{provide:Fr,useFactory:function f5(){return new Fr},deps:[]},{provide:Pg,useClass:(()=>{class t extends Kw{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}static{this.\u0275fac=function(r){return new(r||t)(Q(wn))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})(),multi:!0,deps:[wn,$e,To]},{provide:Pg,useClass:(()=>{class t extends Kw{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,r,o){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>co().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),tM.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(e,r){let o=c5[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),tM.forEach(s=>{s!==o&&(0,l5[s])(e)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{t.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return"esc"===e?"escape":e}static{this.\u0275fac=function(r){return new(r||t)(Q(wn))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})(),multi:!0,deps:[wn]},Zw,Jw,Ww,{provide:Kv,useExisting:Zw},{provide:Pw,useClass:ZF,deps:[]},[]];let rM=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(r){return new(r||t)(Q(wn))}}static{this.\u0275prov=ee({token:t,factory:function(r){let o=null;return o=r?new r:function y5(){return new rM(Q(wn))}(),o},providedIn:"root"})}}return t})();typeof window<"u"&&window;const{isArray:x5}=Array,{getPrototypeOf:D5,prototype:E5,keys:S5}=Object;function aM(t){if(1===t.length){const n=t[0];if(x5(n))return{args:n,keys:null};if(function I5(t){return t&&"object"==typeof t&&D5(t)===E5}(n)){const e=S5(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}const{isArray:k5}=Array;function cM(t){return G(n=>function T5(t,n){return k5(n)?t(...n):t(n)}(t,n))}function lM(t,n){return t.reduce((e,r,o)=>(e[r]=n[o],e),{})}function Tg(...t){const n=Es(t),e=cm(t),{args:r,keys:o}=aM(t);if(0===r.length)return bt([],n);const i=new Qe(function A5(t,n,e=$n){return r=>{uM(n,()=>{const{length:o}=t,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)uM(n,()=>{const l=bt(t[c],n);let u=!1;l.subscribe(F(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,n,o?s=>lM(o,s):$n));return e?i.pipe(cM(e)):i}function uM(t,n,e){t?Pr(e,t,n):n()}function Ag(...t){return function R5(){return ri(1)}()(bt(t,Es(t)))}function dM(t){return new Qe(n=>{gn(t()).subscribe(n)})}function ho(t,n){const e=oe(t)?t:()=>t,r=o=>o.error(e());return new Qe(n?o=>n.schedule(r,0,o):r)}function Rg(){return E((t,n)=>{let e=null;t._refCount++;const r=F(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const o=t._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(e=t.connect())})}class hM extends Qe{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,A(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new X;const e=this.getSubject();n.add(this.source.subscribe(F(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=X.EMPTY)}return n}refCount(){return Rg()(this)}}function fu(...t){const n=Es(t);return E((e,r)=>{(n?Ag(t,e,n):Ag(t,e)).subscribe(r)})}function At(t){return E((n,e)=>{let i,r=null,o=!1;r=n.subscribe(F(e,void 0,void 0,s=>{i=gn(t(s,At(t)(n))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function Ng(t){return t<=0?()=>ir:E((n,e)=>{let r=[];n.subscribe(F(e,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}const ye="primary",La=Symbol("RouteTitle");class $5{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function is(t){return new $5(t)}function U5(t,n,e){const r=e.path.split("/");if(r.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||r.length<t.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function yr(t,n){const e=t?Object.keys(t):void 0,r=n?Object.keys(n):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!fM(t[o],n[o]))return!1;return!0}function fM(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),r=[...n].sort();return e.every((o,i)=>r[i]===o)}return t===n}function gM(t){return t.length>0?t[t.length-1]:null}function fo(t){return function P5(t){return!!t&&(t instanceof Qe||oe(t.lift)&&oe(t.subscribe))}(t)?t:ma(t)?bt(Promise.resolve(t)):re(t)}const H5={exact:function _M(t,n,e){if(!Ho(t.segments,n.segments)||!gu(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!t.children[r]||!_M(t.children[r],n.children[r],e))return!1;return!0},subset:vM},pM={exact:function z5(t,n){return yr(t,n)},subset:function q5(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>fM(t[e],n[e]))},ignored:()=>!0};function mM(t,n,e){return H5[e.paths](t.root,n.root,e.matrixParams)&&pM[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function vM(t,n,e){return yM(t,n,n.segments,e)}function yM(t,n,e,r){if(t.segments.length>e.length){const o=t.segments.slice(0,e.length);return!(!Ho(o,e)||n.hasChildren()||!gu(o,e,r))}if(t.segments.length===e.length){if(!Ho(t.segments,e)||!gu(t.segments,e,r))return!1;for(const o in n.children)if(!t.children[o]||!vM(t.children[o],n.children[o],r))return!1;return!0}{const o=e.slice(0,t.segments.length),i=e.slice(t.segments.length);return!!(Ho(t.segments,o)&&gu(t.segments,o,r)&&t.children[ye])&&yM(t.children[ye],n,i,r)}}function gu(t,n,e){return n.every((r,o)=>pM[e](t[o].parameters,r.parameters))}class ss{constructor(n=new je([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=is(this.queryParams)),this._queryParamMap}toString(){return K5.serialize(this)}}class je{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pu(this)}}class ja{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=is(this.parameters)),this._parameterMap}toString(){return wM(this)}}function Ho(t,n){return t.length===n.length&&t.every((e,r)=>e.path===n[r].path)}let Va=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:function(){return new Fg},providedIn:"root"})}}return t})();class Fg{parse(n){const e=new i3(n);return new ss(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${$a(n.root,!0)}`,r=function Q5(t){const n=Object.keys(t).map(e=>{const r=t[e];return Array.isArray(r)?r.map(o=>`${mu(e)}=${mu(o)}`).join("&"):`${mu(e)}=${mu(r)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${r}${"string"==typeof n.fragment?`#${function J5(t){return encodeURI(t)}(n.fragment)}`:""}`}}const K5=new Fg;function pu(t){return t.segments.map(n=>wM(n)).join("/")}function $a(t,n){if(!t.hasChildren())return pu(t);if(n){const e=t.children[ye]?$a(t.children[ye],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==ye&&r.push(`${o}:${$a(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function W5(t,n){let e=[];return Object.entries(t.children).forEach(([r,o])=>{r===ye&&(e=e.concat(n(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==ye&&(e=e.concat(n(o,r)))}),e}(t,(r,o)=>o===ye?[$a(t.children[ye],!1)]:[`${o}:${$a(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ye]?`${pu(t)}/${e[0]}`:`${pu(t)}/(${e.join("//")})`}}function bM(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mu(t){return bM(t).replace(/%3B/gi,";")}function Lg(t){return bM(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _u(t){return decodeURIComponent(t)}function CM(t){return _u(t.replace(/\+/g,"%20"))}function wM(t){return`${Lg(t.path)}${function Y5(t){return Object.keys(t).map(n=>`;${Lg(n)}=${Lg(t[n])}`).join("")}(t.parameters)}`}const Z5=/^[^\/()?;#]+/;function jg(t){const n=t.match(Z5);return n?n[0]:""}const X5=/^[^\/()?;=#]+/,t3=/^[^=?&#]+/,r3=/^[^&#]+/;class i3{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[ye]=new je(n,e)),r}parseSegment(){const n=jg(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(n),new ja(_u(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function e3(t){const n=t.match(X5);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=jg(this.remaining);o&&(r=o,this.capture(r))}n[_u(e)]=_u(r)}parseQueryParam(n){const e=function n3(t){const n=t.match(t3);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const s=function o3(t){const n=t.match(r3);return n?n[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=CM(e),i=CM(r);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(i)}else n[o]=i}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jg(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new $(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):n&&(i=ye);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s[ye]:new je([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new $(4011,!1)}}function MM(t){return t.segments.length>0?new je([],{[ye]:t}):t}function OM(t){const n={};for(const r of Object.keys(t.children)){const i=OM(t.children[r]);if(r===ye&&0===i.segments.length&&i.hasChildren())for(const[s,a]of Object.entries(i.children))n[s]=a;else(i.segments.length>0||i.hasChildren())&&(n[r]=i)}return function s3(t){if(1===t.numberOfChildren&&t.children[ye]){const n=t.children[ye];return new je(t.segments.concat(n.segments),n.children)}return t}(new je(t.segments,n))}function zo(t){return t instanceof ss}function PM(t){let n;const o=MM(function e(i){const s={};for(const c of i.children){const l=e(c);s[c.outlet]=l}const a=new je(i.url,s);return i===t&&(n=a),a}(t.root));return n??o}function xM(t,n,e,r){let o=t;for(;o.parent;)o=o.parent;if(0===n.length)return Vg(o,o,o,e,r);const i=function c3(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new EM(!0,0,t);let n=0,e=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?e=!0:".."===a?n++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new EM(e,n,r)}(n);if(i.toRoot())return Vg(o,o,new je([],{}),e,r);const s=function l3(t,n,e){if(t.isAbsolute)return new yu(n,!0,0);if(!e)return new yu(n,!1,NaN);if(null===e.parent)return new yu(e,!0,0);const r=vu(t.commands[0])?0:1;return function u3(t,n,e){let r=t,o=n,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new $(4005,!1);o=r.segments.length}return new yu(r,!1,o-i)}(e,e.segments.length-1+r,t.numberOfDoubleDots)}(i,o,t),a=s.processChildren?Ba(s.segmentGroup,s.index,i.commands):SM(s.segmentGroup,s.index,i.commands);return Vg(o,s.segmentGroup,a,e,r)}function vu(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ua(t){return"object"==typeof t&&null!=t&&t.outlets}function Vg(t,n,e,r,o){let s,i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=t===n?e:DM(t,n,e);const a=MM(OM(s));return new ss(a,i,o)}function DM(t,n,e){const r={};return Object.entries(t.children).forEach(([o,i])=>{r[o]=i===n?e:DM(i,n,e)}),new je(t.segments,r)}class EM{constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&vu(r[0]))throw new $(4003,!1);const o=r.find(Ua);if(o&&o!==gM(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yu{constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}}function SM(t,n,e){if(t||(t=new je([],{})),0===t.segments.length&&t.hasChildren())return Ba(t,n,e);const r=function h3(t,n,e){let r=0,o=n;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=e.length)return i;const s=t.segments[o],a=e[r];if(Ua(a))break;const c=`${a}`,l=r<e.length-1?e[r+1]:null;if(o>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!kM(c,l,s))return i;r+=2}else{if(!kM(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,n,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new je(t.segments.slice(0,r.pathIndex),{});return i.children[ye]=new je(t.segments.slice(r.pathIndex),t.children),Ba(i,0,o)}return r.match&&0===o.length?new je(t.segments,{}):r.match&&!t.hasChildren()?$g(t,n,e):r.match?Ba(t,0,o):$g(t,n,e)}function Ba(t,n,e){if(0===e.length)return new je(t.segments,{});{const r=function d3(t){return Ua(t[0])?t[0].outlets:{[ye]:t}}(e),o={};if(Object.keys(r).some(i=>i!==ye)&&t.children[ye]&&1===t.numberOfChildren&&0===t.children[ye].segments.length){const i=Ba(t.children[ye],n,e);return new je(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=SM(t.children[i],n,s))}),Object.entries(t.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new je(t.segments,o)}}function $g(t,n,e){const r=t.segments.slice(0,n);let o=0;for(;o<e.length;){const i=e[o];if(Ua(i)){const c=f3(i.outlets);return new je(r,c)}if(0===o&&vu(e[0])){r.push(new ja(t.segments[n].path,IM(e[0]))),o++;continue}const s=Ua(i)?i.outlets[ye]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&vu(a)?(r.push(new ja(s,IM(a))),o+=2):(r.push(new ja(s,{})),o++)}return new je(r,{})}function f3(t){const n={};return Object.entries(t).forEach(([e,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[e]=$g(new je([],{}),0,r))}),n}function IM(t){const n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function kM(t,n,e){return t==e.path&&yr(n,e.parameters)}const Ha="imperative";class br{constructor(n,e){this.id=n,this.url=e}}class bu extends br{constructor(n,e,r="imperative",o=null){super(n,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class go extends br{constructor(n,e,r){super(n,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class za extends br{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class as extends br{constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o,this.type=16}}class Cu extends br{constructor(n,e,r,o){super(n,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class TM extends br{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g3 extends br{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p3 extends br{constructor(n,e,r,o,i){super(n,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class m3 extends br{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _3 extends br{constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v3{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class y3{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class b3{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C3{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w3{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class M3{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AM{constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ug{}class Bg{constructor(n){this.url=n}}class O3{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qa,this.attachRef=null}}let qa=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new O3,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class RM{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Hg(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){const e=Hg(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=zg(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return zg(n,this._root).map(e=>e.value)}}function Hg(t,n){if(t===n.value)return n;for(const e of n.children){const r=Hg(t,e);if(r)return r}return null}function zg(t,n){if(t===n.value)return[n];for(const e of n.children){const r=zg(t,e);if(r.length)return r.unshift(n),r}return[]}class Gr{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function cs(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class NM extends RM{constructor(n,e){super(n),this.snapshot=e,qg(this,n)}toString(){return this.snapshot.toString()}}function FM(t,n){const e=function P3(t,n){const s=new wu([],{},{},"",{},ye,n,null,{});return new jM("",new Gr(s,[]))}(0,n),r=new mt([new ja("",{})]),o=new mt({}),i=new mt({}),s=new mt({}),a=new mt(""),c=new qo(r,o,s,a,i,ye,n,e.root);return c.snapshot=e.root,new NM(new Gr(c,[]),e)}class qo{constructor(n,e,r,o,i,s,a,c){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(l=>l[La]))??re(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(G(n=>is(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(G(n=>is(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function LM(t,n="emptyOnly"){const e=t.pathFromRoot;let r=0;if("always"!==n)for(r=e.length-1;r>=1;){const o=e[r],i=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function x3(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class wu{get title(){return this.data?.[La]}constructor(n,e,r,o,i,s,a,c,l){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=is(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=is(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jM extends RM{constructor(n,e){super(e),this.url=n,qg(this,e)}toString(){return VM(this._root)}}function qg(t,n){n.value._routerState=t,n.children.forEach(e=>qg(t,e))}function VM(t){const n=t.children.length>0?` { ${t.children.map(VM).join(", ")} } `:"";return`${t.value}${n}`}function Gg(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,yr(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),yr(n.params,e.params)||t.paramsSubject.next(e.params),function B5(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!yr(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.urlSubject.next(e.url),yr(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Wg(t,n){const e=yr(t.params,n.params)&&function G5(t,n){return Ho(t,n)&&t.every((e,r)=>yr(e.parameters,n[r].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Wg(t.parent,n.parent))}let Kg=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ye,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=W(qa),this.location=W(Jn),this.changeDetector=W(Xi),this.environmentInjector=W(yn),this.inputBinder=W(Mu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=e;const o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new D3(e,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=he({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[An]})}}return t})();class D3{constructor(n,e,r){this.route=n,this.childContexts=e,this.parent=r}get(n,e){return n===qo?this.route:n===qa?this.childContexts:this.parent.get(n,e)}}const Mu=new Z("");let $M=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:r}=e,o=Tg([r.queryParams,r.params,r.data]).pipe(Bt(([i,s,a],c)=>(a={...i,...s,...a},0===c?re(a):Promise.resolve(a)))).subscribe(i=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(e);const s=function xR(t){const n=Ee(t);if(!n)return null;const e=new da(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,i[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,o)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();function Ga(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=n.value;const o=function S3(t,n,e){return n.children.map(r=>{for(const o of e.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return Ga(t,r,o);return Ga(t,r)})}(t,n,e);return new Gr(r,o)}{if(t.shouldAttach(n.value)){const i=t.retrieve(n.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>Ga(t,a)),s}}const r=function I3(t){return new qo(new mt(t.url),new mt(t.params),new mt(t.queryParams),new mt(t.fragment),new mt(t.data),t.outlet,t.component,t)}(n.value),o=n.children.map(i=>Ga(t,i));return new Gr(r,o)}}const Jg="ngNavigationCancelingError";function UM(t,n){const{redirectTo:e,navigationBehaviorOptions:r}=zo(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=BM(!1,0,n);return o.url=e,o.navigationBehaviorOptions=r,o}function BM(t,n,e){const r=new Error("NavigationCancelingError: "+(t||""));return r[Jg]=!0,r.cancellationCode=n,e&&(r.url=e),r}function HM(t){return t&&t[Jg]}let zM=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ht({type:t,selectors:[["ng-component"]],standalone:!0,features:[Yt],decls:1,vars:0,template:function(r,o){1&r&&b(0,"router-outlet")},dependencies:[Kg],encapsulation:2})}}return t})();function Yg(t){const n=t.children&&t.children.map(Yg),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==ye&&(e.component=zM),e}function Xn(t){return t.outlet||ye}function Wa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class j3{constructor(n,e,r,o,i){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(n){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),Gg(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){const o=cs(e);n.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(n,e,r){const o=n.value,i=e?e.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=cs(n);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){const r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=cs(n);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){const o=cs(e);n.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new M3(i.value.snapshot))}),n.children.length&&this.forwardEvent(new C3(n.value.snapshot))}activateRoutes(n,e,r){const o=n.value,i=e?e.value:null;if(Gg(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Gg(a.route.value),this.activateChildRoutes(n,null,s.children)}else{const a=Wa(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,r)}}class qM{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Ou{constructor(n,e){this.component=n,this.route=e}}function V3(t,n,e){const r=t._root;return Ka(r,n?n._root:null,e,[r.value])}function ls(t,n){const e=Symbol(),r=n.get(t,e);return r===e?"function"!=typeof t||function UP(t){return null!==vc(t)}(t)?n.get(t):t:r}function Ka(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=cs(n);return t.children.forEach(s=>{(function U3(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function B3(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Ho(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Ho(t.url,n.url)||!yr(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wg(t,n)||!yr(t.queryParams,n.queryParams);default:return!Wg(t,n)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new qM(r)):(i.data=s.data,i._resolvedData=s._resolvedData),Ka(t,n,i.component?a?a.children:null:e,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Ou(a.outlet.component,s))}else s&&Ja(n,a,o),o.canActivateChecks.push(new qM(r)),Ka(t,null,i.component?a?a.children:null:e,r,o)})(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>Ja(a,e.getContext(s),o)),o}function Ja(t,n,e){const r=cs(t),o=t.value;Object.entries(r).forEach(([i,s])=>{Ja(s,o.component?n?n.children.getContext(i):null:n,e)}),e.canDeactivateChecks.push(new Ou(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function Ya(t){return"function"==typeof t}function GM(t){return t instanceof pc||"EmptyError"===t?.name}const Pu=Symbol("INITIAL_VALUE");function us(){return Bt(t=>Tg(t.map(n=>n.pipe(Yr(1),fu(Pu)))).pipe(G(n=>{for(const e of n)if(!0!==e){if(e===Pu)return Pu;if(!1===e||e instanceof ss)return e}return!0}),xr(n=>n!==Pu),Yr(1)))}function WM(t){return function dc(...t){return Ds(t)}(Ue(n=>{if(zo(n))throw UM(0,n)}),G(n=>!0===n))}class xu{constructor(n){this.segmentGroup=n||null}}class KM{constructor(n){this.urlTree=n}}function ds(t){return ho(new xu(t))}function JM(t){return ho(new KM(t))}class cL{constructor(n,e){this.urlSerializer=n,this.urlTree=e}noMatchError(n){return new $(4002,!1)}lineralizeSegments(n,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return re(r);if(o.numberOfChildren>1||!o.children[ye])return ho(new $(4e3,!1));o=o.children[ye]}}applyRedirectCommands(n,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r)}applyRedirectCreateUrlTree(n,e,r,o){const i=this.createSegmentGroup(n,e.root,r,o);return new ss(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const r={};return Object.entries(n).forEach(([o,i])=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=e[a]}else r[o]=i}),r}createSegmentGroup(n,e,r,o){const i=this.createSegments(n,e.segments,r,o);let s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(n,c,r,o)}),new je(i,s)}createSegments(n,e,r,o){return e.map(i=>i.path.startsWith(":")?this.findPosParam(n,i,o):this.findOrReturn(i,r))}findPosParam(n,e,r){const o=r[e.path.substring(1)];if(!o)throw new $(4001,!1);return o}findOrReturn(n,e){let r=0;for(const o of e){if(o.path===n.path)return e.splice(r),o;r++}return n}}const Qg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lL(t,n,e,r,o){const i=Zg(t,n,e);return i.matched?(r=function T3(t,n){return t.providers&&!t._injector&&(t._injector=Mf(t.providers,n,`Route: ${t.path}`)),t._injector??n}(n,r),function iL(t,n,e,r){const o=n.canMatch;return o&&0!==o.length?re(o.map(s=>{const a=ls(s,t);return fo(function K3(t){return t&&Ya(t.canMatch)}(a)?a.canMatch(n,e):t.runInContext(()=>a(n,e)))})).pipe(us(),WM()):re(!0)}(r,n,e).pipe(G(s=>!0===s?i:{...Qg}))):re(i)}function Zg(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...Qg}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(n.matcher||U5)(e,t,n);if(!o)return{...Qg};const i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function YM(t,n,e,r){return e.length>0&&function hL(t,n,e){return e.some(r=>Du(t,n,r)&&Xn(r)!==ye)}(t,e,r)?{segmentGroup:new je(n,dL(r,new je(e,t.children))),slicedSegments:[]}:0===e.length&&function fL(t,n,e){return e.some(r=>Du(t,n,r))}(t,e,r)?{segmentGroup:new je(t.segments,uL(t,0,e,r,t.children)),slicedSegments:e}:{segmentGroup:new je(t.segments,t.children),slicedSegments:e}}function uL(t,n,e,r,o){const i={};for(const s of r)if(Du(t,e,s)&&!o[Xn(s)]){const a=new je([],{});i[Xn(s)]=a}return{...o,...i}}function dL(t,n){const e={};e[ye]=n;for(const r of t)if(""===r.path&&Xn(r)!==ye){const o=new je([],{});e[Xn(r)]=o}return e}function Du(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class _L{constructor(n,e,r,o,i,s,a){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new cL(this.urlSerializer,this.urlTree)}noMatchError(n){return new $(4002,!1)}recognize(){const n=YM(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,ye).pipe(At(e=>{if(e instanceof KM)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof xu?this.noMatchError(e):e}),G(e=>{const r=new wu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ye,this.rootComponentType,null,{}),o=new Gr(r,e),i=new jM("",o),s=function a3(t,n,e=null,r=null){return xM(PM(t),n,e,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root),{state:i,tree:s}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,ye).pipe(At(r=>{throw r instanceof xu?this.noMatchError(r):r}))}inheritParamsAndData(n){const e=n.value,r=LM(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,e,r):this.processSegment(n,e,r,r.segments,o,!0)}processChildren(n,e,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return bt(o).pipe(ns(i=>{const s=r.children[i],a=function F3(t,n){const e=t.filter(r=>Xn(r)===n);return e.push(...t.filter(r=>Xn(r)!==n)),e}(e,i);return this.processSegmentGroup(n,a,s,i)}),function F5(t,n){return E(function N5(t,n,e,r,o){return(i,s)=>{let a=e,c=n,l=0;i.subscribe(F(s,u=>{const d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(t,n,arguments.length>=2,!0))}((i,s)=>(i.push(...s),i)),mc(null),function L5(t,n){const e=arguments.length>=2;return r=>r.pipe(t?xr((o,i)=>t(o,i,r)):$n,Ng(1),e?mc(n):fm(()=>new pc))}(),Dt(i=>{if(null===i)return ds(r);const s=QM(i);return function vL(t){t.sort((n,e)=>n.value.outlet===ye?-1:e.value.outlet===ye?1:n.value.outlet.localeCompare(e.value.outlet))}(s),re(s)}))}processSegment(n,e,r,o,i,s){return bt(e).pipe(ns(a=>this.processSegmentAgainstRoute(a._injector??n,e,a,r,o,i,s).pipe(At(c=>{if(c instanceof xu)return re(null);throw c}))),Dr(a=>!!a),At(a=>{if(GM(a))return function pL(t,n,e){return 0===n.length&&!t.children[e]}(r,o,i)?re([]):ds(r);throw a}))}processSegmentAgainstRoute(n,e,r,o,i,s,a){return function gL(t,n,e,r){return!!(Xn(t)===r||r!==ye&&Du(n,e,t))&&("**"===t.path||Zg(n,t,e).matched)}(r,o,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,o,r,i,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,o,e,r,i,s):ds(o):ds(o)}expandSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,r,o){const i=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?JM(i):this.applyRedirects.lineralizeSegments(r,i).pipe(Dt(s=>{const a=new je(s,{});return this.processSegment(n,e,a,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=Zg(e,o,i);if(!a)return ds(e);const d=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,u);return o.redirectTo.startsWith("/")?JM(d):this.applyRedirects.lineralizeSegments(o,d).pipe(Dt(g=>this.processSegment(n,r,e,g.concat(l),s,!1)))}matchSegmentAgainstRoute(n,e,r,o,i,s){let a;if("**"===r.path){const c=o.length>0?gM(o).parameters:{};a=re({snapshot:new wu(o,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ZM(r),Xn(r),r.component??r._loadedComponent??null,r,XM(r)),consumedSegments:[],remainingSegments:[]}),e.children={}}else a=lL(e,r,o,n).pipe(G(({matched:c,consumedSegments:l,remainingSegments:u,parameters:d})=>c?{snapshot:new wu(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ZM(r),Xn(r),r.component??r._loadedComponent??null,r,XM(r)),consumedSegments:l,remainingSegments:u}:null));return a.pipe(Bt(c=>null===c?ds(e):this.getChildConfig(n=r._injector??n,r,o).pipe(Bt(({routes:l})=>{const u=r._loadedInjector??n,{snapshot:d,consumedSegments:g,remainingSegments:m}=c,{segmentGroup:v,slicedSegments:y}=YM(e,g,m,l);if(0===y.length&&v.hasChildren())return this.processChildren(u,l,v).pipe(G(x=>null===x?null:[new Gr(d,x)]));if(0===l.length&&0===y.length)return re([new Gr(d,[])]);const w=Xn(r)===i;return this.processSegment(u,l,v,y,w?ye:i,!0).pipe(G(x=>[new Gr(d,x)]))}))))}getChildConfig(n,e,r){return e.children?re({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?re({routes:e._loadedRoutes,injector:e._loadedInjector}):function oL(t,n,e,r){const o=n.canLoad;return void 0===o||0===o.length?re(!0):re(o.map(s=>{const a=ls(s,t);return fo(function z3(t){return t&&Ya(t.canLoad)}(a)?a.canLoad(n,e):t.runInContext(()=>a(n,e)))})).pipe(us(),WM())}(n,e,r).pipe(Dt(o=>o?this.configLoader.loadChildren(n,e).pipe(Ue(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):function aL(t){return ho(BM(!1,3))}())):re({routes:[],injector:n})}}function yL(t){const n=t.value.routeConfig;return n&&""===n.path}function QM(t){const n=[],e=new Set;for(const r of t){if(!yL(r)){n.push(r);continue}const o=n.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):n.push(r)}for(const r of e){const o=QM(r.children);n.push(new Gr(r.value,o))}return n.filter(r=>!e.has(r))}function ZM(t){return t.data||{}}function XM(t){return t.resolve||{}}function e1(t){return"string"==typeof t.title||null===t.title}function Xg(t){return Bt(n=>{const e=t(n);return e?bt(e).pipe(G(()=>n)):re(n)})}const hs=new Z("ROUTES");let ep=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(w0)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return re(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=fo(e.loadComponent()).pipe(G(t1),Ue(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),Aa(()=>{this.componentLoaders.delete(e)})),o=new hM(r,()=>new D).pipe(Rg());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function xL(t,n,e,r){return fo(t.loadChildren()).pipe(G(t1),Dt(o=>o instanceof IC||Array.isArray(o)?re(o):bt(n.compileModuleAsync(o))),G(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,!0):(i=o.create(e).injector,s=i.get(hs,[],{optional:!0,self:!0}).flat()),{routes:s.map(Yg),injector:i}}))}(r,this.compiler,e,this.onLoadEndListener).pipe(Aa(()=>{this.childrenLoaders.delete(r)})),s=new hM(i,()=>new D).pipe(Rg());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function t1(t){return function DL(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Eu=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new D,this.transitionAbortSubject=new D,this.configLoader=W(ep),this.environmentInjector=W(yn),this.urlSerializer=W(Va),this.rootContexts=W(qa),this.inputBindingEnabled=null!==W(Mu,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>re(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new y3(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new v3(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e,r,o){return this.transitions=new mt({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:e.urlHandlingStrategy.extract(r),urlAfterRedirects:e.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ha,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xr(i=>0!==i.id),G(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),Bt(i=>{this.currentTransition=i;let s=!1,a=!1;return re(i).pipe(Ue(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bt(c=>{const l=c.currentBrowserUrl.toString(),u=!e.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const g="";return this.events.next(new as(c.id,this.urlSerializer.serialize(c.rawUrl),g,0)),c.resolve(null),ir}if(e.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return re(c).pipe(Bt(g=>{const m=this.transitions?.getValue();return this.events.next(new bu(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?ir:Promise.resolve(g)}),function bL(t,n,e,r,o,i){return Dt(s=>function mL(t,n,e,r,o,i,s="emptyOnly"){return new _L(t,n,e,r,o,s,i).recognize()}(t,n,e,r,s.extractedUrl,o,i).pipe(G(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),Ue(g=>{i.targetSnapshot=g.targetSnapshot,i.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const m=new TM(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(u&&e.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:g,extractedUrl:m,source:v,restoredState:y,extras:w}=c,x=new bu(g,this.urlSerializer.serialize(m),v,y);this.events.next(x);const M=FM(0,this.rootComponentType).snapshot;return this.currentTransition=i={...c,targetSnapshot:M,urlAfterRedirects:m,extras:{...w,skipLocationChange:!1,replaceUrl:!1}},re(i)}{const g="";return this.events.next(new as(c.id,this.urlSerializer.serialize(c.extractedUrl),g,1)),c.resolve(null),ir}}),Ue(c=>{const l=new g3(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),G(c=>(this.currentTransition=i={...c,guards:V3(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},i)),function Y3(t,n){return Dt(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return 0===s.length&&0===i.length?re({...e,guardsResult:!0}):function Q3(t,n,e,r){return bt(t).pipe(Dt(o=>function rL(t,n,e,r,o){const i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return i&&0!==i.length?re(i.map(a=>{const c=Wa(n)??o,l=ls(a,c);return fo(function W3(t){return t&&Ya(t.canDeactivate)}(l)?l.canDeactivate(t,n,e,r):c.runInContext(()=>l(t,n,e,r))).pipe(Dr())})).pipe(us()):re(!0)}(o.component,o.route,e,n,r)),Dr(o=>!0!==o,!0))}(s,r,o,t).pipe(Dt(a=>a&&function H3(t){return"boolean"==typeof t}(a)?function Z3(t,n,e,r){return bt(n).pipe(ns(o=>Ag(function eL(t,n){return null!==t&&n&&n(new b3(t)),re(!0)}(o.route.parent,r),function X3(t,n){return null!==t&&n&&n(new w3(t)),re(!0)}(o.route,r),function nL(t,n,e){const r=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(s=>function $3(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(s)).filter(s=>null!==s).map(s=>dM(()=>re(s.guards.map(c=>{const l=Wa(s.node)??e,u=ls(c,l);return fo(function G3(t){return t&&Ya(t.canActivateChild)}(u)?u.canActivateChild(r,t):l.runInContext(()=>u(r,t))).pipe(Dr())})).pipe(us())));return re(i).pipe(us())}(t,o.path,e),function tL(t,n,e){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return re(!0);const o=r.map(i=>dM(()=>{const s=Wa(n)??e,a=ls(i,s);return fo(function q3(t){return t&&Ya(t.canActivate)}(a)?a.canActivate(n,t):s.runInContext(()=>a(n,t))).pipe(Dr())}));return re(o).pipe(us())}(t,o.route,e))),Dr(o=>!0!==o,!0))}(r,i,t,n):re(a)),G(a=>({...e,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Ue(c=>{if(i.guardsResult=c.guardsResult,zo(c.guardsResult))throw UM(0,c.guardsResult);const l=new p3(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),xr(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),Xg(c=>{if(c.guards.canActivateChecks.length)return re(c).pipe(Ue(l=>{const u=new m3(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Bt(l=>{let u=!1;return re(l).pipe(function CL(t,n){return Dt(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return re(e);let i=0;return bt(o).pipe(ns(s=>function wL(t,n,e,r){const o=t.routeConfig,i=t._resolve;return void 0!==o?.title&&!e1(o)&&(i[La]=o.title),function ML(t,n,e,r){const o=function OL(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===o.length)return re({});const i={};return bt(o).pipe(Dt(s=>function PL(t,n,e,r){const o=Wa(n)??r,i=ls(t,o);return fo(i.resolve?i.resolve(n,e):o.runInContext(()=>i(n,e)))}(t[s],n,e,r).pipe(Dr(),Ue(a=>{i[s]=a}))),Ng(1),function j5(t){return G(()=>t)}(i),At(s=>GM(s)?ir:ho(s)))}(i,t,n,r).pipe(G(s=>(t._resolvedData=s,t.data=LM(t,e).resolve,o&&e1(o)&&(t.data[La]=o.title),null)))}(s.route,r,t,n)),Ue(()=>i++),Ng(1),Dt(s=>i===o.length?re(e):ir))})}(e.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),Ue(l=>{const u=new _3(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Xg(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ue(g=>{u.component=g}),G(()=>{})));for(const g of u.children)d.push(...l(g));return d};return Tg(l(c.targetSnapshot.root)).pipe(mc(),Yr(1))}),Xg(()=>this.afterPreactivation()),G(c=>{const l=function E3(t,n,e){const r=Ga(t,n._root,e?e._root:void 0);return new NM(r,n)}(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i={...c,targetRouterState:l},i}),Ue(()=>{this.events.next(new Ug)}),((t,n,e,r)=>G(o=>(new j3(n,o.targetRouterState,o.currentRouterState,e,r).activate(t),o)))(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Yr(1),Ue({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new go(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),e.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function V5(t){return E((n,e)=>{gn(t).subscribe(F(e,()=>e.complete(),Me)),!e.closed&&n.subscribe(e)})}(this.transitionAbortSubject.pipe(Ue(c=>{throw c}))),Aa(()=>{s||a||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),At(c=>{if(a=!0,HM(c))this.events.next(new za(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),function k3(t){return HM(t)&&zo(t.url)}(c)?this.events.next(new Bg(c.url)):i.resolve(!1);else{this.events.next(new Cu(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(e.errorHandler(c))}catch(l){i.reject(l)}}return ir}))}))}cancelNavigationTransition(e,r,o){const i=new za(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function n1(t){return t!==Ha}let r1=(()=>{class t{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===ye);return r}getResolvedTitleForRoute(e){return e.data[La]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:function(){return W(EL)},providedIn:"root"})}}return t})(),EL=(()=>{class t extends r1{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(Q(rM))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),SL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:function(){return W(kL)},providedIn:"root"})}}return t})();class IL{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let kL=(()=>{class t extends IL{static{this.\u0275fac=function(){let e;return function(o){return(e||(e=Tt(t)))(o||t)}}()}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Su=new Z("",{providedIn:"root",factory:()=>({})});let TL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:function(){return W(AL)},providedIn:"root"})}}return t})(),AL=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Qa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Qa||{});function o1(t,n){t.events.pipe(xr(e=>e instanceof go||e instanceof za||e instanceof Cu||e instanceof as),G(e=>e instanceof go||e instanceof as?Qa.COMPLETE:e instanceof za&&(0===e.code||1===e.code)?Qa.REDIRECTING:Qa.FAILED),xr(e=>e!==Qa.REDIRECTING),Yr(1)).subscribe(()=>{n()})}function RL(t){throw t}function NL(t,n,e){return n.parse("/")}const FL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xt=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=W(Uf),this.isNgZoneEnabled=!1,this._events=new D,this.options=W(Su,{optional:!0})||{},this.pendingTasks=W($l),this.errorHandler=this.options.errorHandler||RL,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||NL,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=W(TL),this.routeReuseStrategy=W(SL),this.titleStrategy=W(r1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=W(hs,{optional:!0})?.flat()??[],this.navigationTransitions=W(Eu),this.urlSerializer=W(Va),this.location=W(rg),this.componentInputBindingEnabled=!!W(Mu,{optional:!0}),this.eventsSubscription=new X,this.isNgZoneEnabled=W($e)instanceof $e&&$e.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ss,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=FM(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(i1(r)&&this._events.next(r));if(r instanceof bu)n1(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof as)this.rawUrlTree=o.rawUrl;else if(r instanceof TM){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(i,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof Ug)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof za)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof Bg){const i=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),s={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||n1(o.source)};this.scheduleNavigation(i,Ha,null,s,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof Cu&&this.restoreHistory(o,!0),r instanceof go&&(this.navigated=!0),i1(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ha,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Yg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}null!==u&&(u=this.removeEmptyProps(u));try{d=PM(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),d=this.currentUrlTree.root}return xM(d,e,u,l??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=zo(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Ha,null,r)}navigate(e,r={skipLocationChange:!1}){return function jL(t){for(let n=0;n<t.length;n++)if(null==t[n])throw new $(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...FL}:!1===r?{...LL}:r,zo(e))return mM(this.currentUrlTree,e,o);const i=this.parseUrl(e);return mM(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const i=e[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,g)=>{a=d,c=g});const u=this.pendingTasks.add();return o1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",i)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function i1(t){return!(t instanceof Ug||t instanceof Bg)}let Go=(()=>{class t{constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new D,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=e.events.subscribe(l=>{l instanceof go&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function Tv(t,n,e){return function WE(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?kv:ln}(n,e)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(T(Xt),T(qo),function Vc(t){return function fD(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const r=e.length;let o=0;for(;o<r;){const i=e[o];if(Pm(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof e[o];)o++;else{if(i===n)return e[o+1];o+=2}}}return null}(kt(),t)}("tabindex"),T(Nr),T(un),T(Uo))}}static{this.\u0275dir=he({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){1&r&&k("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&gr("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",es],skipLocationChange:["skipLocationChange","skipLocationChange",es],replaceUrl:["replaceUrl","replaceUrl",es],routerLink:"routerLink"},standalone:!0,features:[Wy,An]})}}return t})(),s1=(()=>{class t{get isActive(){return this._isActive}constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ot,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof go&&this.update()})}ngAfterContentInit(){re(this.links.changes,re(null)).pipe(ri()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=bt(e).pipe(ri()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const r=function VL(t){return!!t.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&e.isActive(o.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(r){return new(r||t)(T(Xt),T(un),T(Nr),T(Xi),T(Go,8))}}static{this.\u0275dir=he({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,i){if(1&r&&function t0(t,n,e,r){const o=Se();if(o.firstCreatePass){const i=kt();r0(o,new XC(n,e,r),i.index),function ZA(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(o,t),2==(2&e)&&(o.staticContentQueries=!0)}n0(o,L(),e)}(i,Go,5),2&r){let s;Ll(s=jl())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[An]})}}return t})();class a1{}let $L=(()=>{class t{constructor(e,r,o,i,s){this.router=e,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(xr(e=>e instanceof go),ns(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Mf(i.providers,e,`Route: ${i.path}`));const s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return bt(o).pipe(ri())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):re(null);const i=o.pipe(Dt(s=>null===s?re(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return r.loadComponent&&!r._loadedComponent?bt([i,this.loader.loadComponent(r)]).pipe(ri()):i})}static{this.\u0275fac=function(r){return new(r||t)(Q(Xt),Q(w0),Q(yn),Q(a1),Q(ep))}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const tp=new Z("");let c1=(()=>{class t{constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof bu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof go?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof as&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof AM&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new AM(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function by(){throw new Error("invalid")}()}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})();function l1(t){return t.routerState.root}function Wr(t,n){return{\u0275kind:t,\u0275providers:n}}function u1(){const t=W(bn);return n=>{const e=t.get(Vo);if(n!==e.components[0])return;const r=t.get(Xt),o=t.get(d1);1===t.get(np)&&r.initialNavigation(),t.get(h1,null,Pe.Optional)?.setUpPreloading(),t.get(tp,null,Pe.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const d1=new Z("",{factory:()=>new D}),np=new Z("",{providedIn:"root",factory:()=>1}),h1=new Z("");function qL(t){return Wr(0,[{provide:h1,useExisting:$L},{provide:a1,useExisting:t}])}const f1=new Z("ROUTER_FORROOT_GUARD"),WL=[rg,{provide:Va,useClass:Fg},Xt,qa,{provide:qo,useFactory:l1,deps:[Xt]},ep,[]];function KL(){return new S0("Router",Xt)}let Za=(()=>{class t{constructor(e){}static forRoot(e,r){return{ngModule:t,providers:[WL,[],{provide:hs,multi:!0,useValue:e},{provide:f1,useFactory:ZL,deps:[[Xt,new Bc,new Hc]]},{provide:Su,useValue:r||{}},r?.useHash?{provide:Uo,useClass:kR}:{provide:Uo,useClass:iw},{provide:tp,useFactory:()=>{const t=W(KN),n=W($e),e=W(Su),r=W(Eu),o=W(Va);return e.scrollOffset&&t.setOffset(e.scrollOffset),new c1(o,r,t,n,e)}},r?.preloadingStrategy?qL(r.preloadingStrategy).\u0275providers:[],{provide:S0,multi:!0,useFactory:KL},r?.initialNavigation?XL(r):[],r?.bindToComponentInputs?Wr(8,[$M,{provide:Mu,useExisting:$M}]).\u0275providers:[],[{provide:g1,useFactory:u1},{provide:Ea,multi:!0,useExisting:g1}]]}}static forChild(e){return{ngModule:t,providers:[{provide:hs,multi:!0,useValue:e}]}}static{this.\u0275fac=function(r){return new(r||t)(Q(f1,8))}}static{this.\u0275mod=Zr({type:t})}static{this.\u0275inj=Er({})}}return t})();function ZL(t){return"guarded"}function XL(t){return["disabled"===t.initialNavigation?Wr(3,[{provide:Vf,multi:!0,useFactory:()=>{const n=W(Xt);return()=>{n.setUpLocationChangeListener()}}},{provide:np,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Wr(2,[{provide:np,useValue:0},{provide:Vf,multi:!0,deps:[bn],useFactory:n=>{const e=n.get(SR,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=n.get(Xt),i=n.get(d1);o1(o,()=>{r(!0)}),n.get(Eu).afterPreactivation=()=>(r(!0),i.closed?re(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const g1=new Z("");let p1=(()=>{class t{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(r){return new(r||t)(T(Nr),T(un))}}static{this.\u0275dir=he({type:t})}}return t})(),Wo=(()=>{class t extends p1{static{this.\u0275fac=function(){let e;return function(o){return(e||(e=Tt(t)))(o||t)}}()}static{this.\u0275dir=he({type:t,features:[Le]})}}return t})();const Cr=new Z("NgValueAccessor"),n4={provide:Cr,useExisting:ze(()=>rp),multi:!0};let rp=(()=>{class t extends Wo{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=function(){let e;return function(o){return(e||(e=Tt(t)))(o||t)}}()}static{this.\u0275dir=he({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){1&r&&k("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},features:[tt([n4]),Le]})}}return t})();const r4={provide:Cr,useExisting:ze(()=>wr),multi:!0},i4=new Z("CompositionEventMode");let wr=(()=>{class t extends p1{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function o4(){const t=co()?co().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(r){return new(r||t)(T(Nr),T(un),T(i4,8))}}static{this.\u0275dir=he({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&k("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[tt([r4]),Le]})}}return t})();const $t=new Z("NgValidators"),mo=new Z("NgAsyncValidators");function y1(t){return function po(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}(t.value)?{required:!0}:null}function Iu(t){return null}function P1(t){return null!=t}function x1(t){return ma(t)?bt(t):t}function D1(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function E1(t,n){return n.map(e=>e(t))}function S1(t){return t.map(n=>function a4(t){return!t.validate}(n)?n:e=>n.validate(e))}function op(t){return null!=t?function I1(t){if(!t)return null;const n=t.filter(P1);return 0==n.length?null:function(e){return D1(E1(e,n))}}(S1(t)):null}function ip(t){return null!=t?function k1(t){if(!t)return null;const n=t.filter(P1);return 0==n.length?null:function(e){return function t4(...t){const n=cm(t),{args:e,keys:r}=aM(t),o=new Qe(i=>{const{length:s}=e;if(!s)return void i.complete();const a=new Array(s);let c=s,l=s;for(let u=0;u<s;u++){let d=!1;gn(e[u]).subscribe(F(i,g=>{d||(d=!0,l--),a[u]=g},()=>c--,void 0,()=>{(!c||!d)&&(l||i.next(r?lM(r,a):a),i.complete())}))}});return n?o.pipe(cM(n)):o}(E1(e,n).map(x1)).pipe(G(D1))}}(S1(t)):null}function T1(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function sp(t){return t?Array.isArray(t)?t:[t]:[]}function ku(t,n){return Array.isArray(t)?t.includes(n):t===n}function N1(t,n){const e=sp(n);return sp(t).forEach(o=>{ku(e,o)||e.push(o)}),e}function F1(t,n){return sp(n).filter(e=>!ku(t,e))}class L1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=op(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=ip(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class en extends L1{get formDirective(){return null}get path(){return null}}class _o extends L1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class j1{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vo=(()=>{class t extends j1{constructor(e){super(e)}static{this.\u0275fac=function(r){return new(r||t)(T(_o,2))}}static{this.\u0275dir=he({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&ie("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Le]})}}return t})(),V1=(()=>{class t extends j1{constructor(e){super(e)}static{this.\u0275fac=function(r){return new(r||t)(T(en,10))}}static{this.\u0275dir=he({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){2&r&&ie("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Le]})}}return t})();const Xa="VALID",Au="INVALID",fs="PENDING",ec="DISABLED";function lp(t){return(Ru(t)?t.validators:t)||null}function up(t,n){return(Ru(n)?n.asyncValidators:t)||null}function Ru(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class dp{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Xa}get invalid(){return this.status===Au}get pending(){return this.status==fs}get disabled(){return this.status===ec}get enabled(){return this.status!==ec}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(N1(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(N1(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(F1(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(F1(n,this._rawAsyncValidators))}hasValidator(n){return ku(this._rawValidators,n)}hasAsyncValidator(n){return ku(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=fs,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=ec,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Xa,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xa||this.status===fs)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ec:Xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=fs,this._hasOwnPendingAsyncValidator=!0;const e=x1(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(n,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?ec:this.errors?Au:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fs)?fs:this._anyControlsHaveStatus(Au)?Au:Xa}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Ru(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function d4(t){return Array.isArray(t)?op(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function h4(t){return Array.isArray(t)?ip(t):t||null}(this._rawAsyncValidators)}}class hp extends dp{constructor(n,e,r){super(lp(e),up(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function B1(t,n,e){t._forEachChild((r,o)=>{if(void 0===e[o])throw new $(1002,"")})})(this,0,n),Object.keys(n).forEach(r=>{(function U1(t,n,e){const r=t.controls;if(!(n?Object.keys(r):r).length)throw new $(1e3,"");if(!r[e])throw new $(1001,"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(r=>{const o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n?n[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const gs=new Z("CallSetDisabledState",{providedIn:"root",factory:()=>Nu}),Nu="always";function tc(t,n,e=Nu){fp(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function p4(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&H1(t,n)})}(t,n),function _4(t,n){const e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function m4(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&H1(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function g4(t,n){if(n.valueAccessor.setDisabledState){const e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function ju(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function fp(t,n){const e=function A1(t){return t._rawValidators}(t);null!==n.validator?t.setValidators(T1(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const r=function R1(t){return t._rawAsyncValidators}(t);null!==n.asyncValidator?t.setAsyncValidators(T1(r,n.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const o=()=>t.updateValueAndValidity();ju(n._rawValidators,o),ju(n._rawAsyncValidators,o)}function H1(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const w4={provide:en,useExisting:ze(()=>$u)},nc=(()=>Promise.resolve())();let $u=(()=>{class t extends en{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ot,this.form=new hp({},op(e),ip(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){nc.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),tc(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){nc.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){nc.then(()=>{const r=this._findContainer(e.path),o=new hp({});(function z1(t,n){fp(t,n)})(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){nc.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){nc.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function q1(t,n){t._syncPendingControls(),n.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(r){return new(r||t)(T($t,10),T(mo,10),T(gs,8))}}static{this.\u0275dir=he({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){1&r&&k("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[tt([w4]),Le]})}}return t})();function G1(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function W1(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const K1=class extends dp{constructor(n=null,e,r){super(lp(e),up(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ru(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=W1(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){G1(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){G1(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){W1(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},P4={provide:_o,useExisting:ze(()=>Kr)},Q1=(()=>Promise.resolve())();let Kr=(()=>{class t extends _o{constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new K1,this._registered=!1,this.name="",this.update=new ot,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function mp(t,n){if(!n)return null;let e,r,o;return Array.isArray(n),n.forEach(i=>{i.constructor===wr?e=i:function b4(t){return Object.getPrototypeOf(t.constructor)===Wo}(i)?r=i:o=i}),o||r||e||null}(0,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function pp(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){tc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Q1.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&es(r);Q1.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function Fu(t,n){return[...n.path,t]}(e,this._parent):[e]}static{this.\u0275fac=function(r){return new(r||t)(T(en,9),T($t,10),T(mo,10),T(Cr,10),T(Xi,8),T(gs,8))}}static{this.\u0275dir=he({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[tt([P4]),Le,An]})}}return t})(),Z1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=he({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),eO=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zr({type:t})}static{this.\u0275inj=Er({})}}return t})();const N4={provide:Cr,useExisting:ze(()=>Uu),multi:!0};function aO(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Uu=(()=>{class t extends Wo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const o=aO(this._getOptionId(e),e);this.setProperty("value",o)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function F4(t){return t.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static{this.\u0275fac=function(){let e;return function(o){return(e||(e=Tt(t)))(o||t)}}()}static{this.\u0275dir=he({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){1&r&&k("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[tt([N4]),Le]})}}return t})(),cO=(()=>{class t{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(aO(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(T(un),T(Nr),T(Uu,9))}}static{this.\u0275dir=he({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();const L4={provide:Cr,useExisting:ze(()=>bp),multi:!0};function lO(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let bp=(()=>{class t extends Wo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const o=e.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const o=[],i=r.selectedOptions;if(void 0!==i){const s=i;for(let a=0;a<s.length;a++){const l=this._getOptionValue(s[a].value);o.push(l)}}else{const s=r.options;for(let a=0;a<s.length;a++){const c=s[a];if(c.selected){const l=this._getOptionValue(c.value);o.push(l)}}}this.value=o,e(o)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function j4(t){return t.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static{this.\u0275fac=function(){let e;return function(o){return(e||(e=Tt(t)))(o||t)}}()}static{this.\u0275dir=he({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){1&r&&k("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[tt([L4]),Le]})}}return t})(),uO=(()=>{class t{constructor(e,r,o){this._element=e,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(lO(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(lO(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(T(un),T(Nr),T(bp,9))}}static{this.\u0275dir=he({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();let Ko=(()=>{class t{constructor(){this._validator=Iu}ngOnChanges(e){if(this.inputName in e){const r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Iu,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=he({type:t,features:[An]})}}return t})();const U4={provide:$t,useExisting:ze(()=>Bu),multi:!0};let Bu=(()=>{class t extends Ko{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=es,this.createValidator=e=>y1}enabled(e){return e}static{this.\u0275fac=function(){let e;return function(o){return(e||(e=Tt(t)))(o||t)}}()}static{this.\u0275dir=he({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){2&r&&gr("required",o._enabled?"":null)},inputs:{required:"required"},features:[tt([U4]),Le]})}}return t})();const q4={provide:$t,useExisting:ze(()=>Cp),multi:!0};let Cp=(()=>{class t extends Ko{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>function dO(t){return"number"==typeof t?t:parseInt(t,10)}(e),this.createValidator=e=>function M1(t){return n=>function m1(t){return null!=t&&"number"==typeof t.length}(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}static{this.\u0275fac=function(){let e;return function(o){return(e||(e=Tt(t)))(o||t)}}()}static{this.\u0275dir=he({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){2&r&&gr("maxlength",o._enabled?o.maxlength:null)},inputs:{maxlength:"maxlength"},features:[tt([q4]),Le]})}}return t})(),W4=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zr({type:t})}static{this.\u0275inj=Er({imports:[eO]})}}return t})(),Jo=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:gs,useValue:e.callSetDisabledState??Nu}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zr({type:t})}static{this.\u0275inj=Er({imports:[W4]})}}return t})();const Vn_apiUrl="https://music-uptc-sogamoso-back.vercel.app";let yO=(()=>{class t{http;apiUrl=Vn_apiUrl;constructor(e){this.http=e}searchTracks(e){return this.http.get(`${this.apiUrl}/api/search?q=${encodeURIComponent(e)}`).pipe(G(r=>r.map(o=>({id:o.id,name:o.name,artists:o.artists,album:o.album,image:o.image,preview_url:o.preview_url,duration_ms:o.duration_ms}))))}getAuthUrl(){return this.http.get(`${this.apiUrl}/api/spotify/auth`)}getCurrentlyPlaying(){return this.http.get(`${this.apiUrl}/api/spotify/currently-playing`)}getStatus(){return this.http.get(`${this.apiUrl}/api/spotify/admin/status`)}static \u0275fac=function(r){return new(r||t)(Q(Zn))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class J4 extends X{constructor(n,e){super()}schedule(n,e=0){return this}}const Hu={setInterval(t,n,...e){const{delegate:r}=Hu;return r?.setInterval?r.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){const{delegate:n}=Hu;return(n?.clearInterval||clearInterval)(t)},delegate:void 0},bO={now:()=>(bO.delegate||Date).now(),delegate:void 0};class rc{constructor(n,e=rc.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,r){return new this.schedulerActionCtor(this,n).schedule(r,e)}}rc.now=bO.now;const CO=new class Q4 extends rc{constructor(n,e=rc.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,r){for(;n=e.shift();)n.unsubscribe();throw r}}}(class Y4 extends J4{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var r;if(this.closed)return this;this.state=n;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,e),this}requestAsyncId(n,e,r=0){return Hu.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&Hu.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let o,r=!1;try{this.work(n)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Ye(r,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),Z4=CO;function wO(t=0,n,e=Z4){let r=-1;return null!=n&&(am(n)?e=n:r=n),new Qe(o=>{let i=function X4(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;i<0&&(i=0);let s=0;return e.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}function zu(t=0,n=CO){return t<0&&(t=0),wO(t,t,n)}let Yo=(()=>{class t{http;apiUrl=Vn_apiUrl;currentUserSubject=new mt(null);currentUser=this.currentUserSubject.asObservable();constructor(e){this.http=e;const r=localStorage.getItem("adminToken"),o=localStorage.getItem("adminUser");r&&o&&this.currentUserSubject.next(JSON.parse(o))}login(e,r){return this.http.post(`${this.apiUrl}/api/auth/login`,{email:e,password:r}).pipe(Ue(o=>{o.token&&(localStorage.setItem("adminToken",o.token),localStorage.setItem("adminUser",JSON.stringify(o.user)),localStorage.setItem("auth_token",o.token),this.currentUserSubject.next(o.user))}))}logout(){localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),this.currentUserSubject.next(null)}isLoggedIn(){return!!localStorage.getItem("adminToken")}getAuthToken(){return localStorage.getItem("adminToken")}getAuthHeaders(){const e=this.getToken();return new jn(e?{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"})}getToken(){return localStorage.getItem("adminToken")}static \u0275fac=function(r){return new(r||t)(Q(Zn))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ps=(()=>{class t{http;authService;apiUrl=Vn_apiUrl;cachedSongs=[];lastFetchTime=0;CACHE_DURATION=2e3;cachedVotingStatus=null;lastVotingStatusFetch=0;constructor(e,r){this.http=e,this.authService=r}getCacheBustedUrl(e){const r=e.includes("?")?"&":"?";return`${e}${r}_=${(new Date).getTime()}`}invalidateCache(){this.cachedSongs=[],this.lastFetchTime=0}invalidateVotingStatusCache(){this.cachedVotingStatus=null,this.lastVotingStatusFetch=0}processSongs(e){return e&&0!==e.length?e.sort((r,o)=>r.votes>o.votes?-1:r.votes<o.votes?1:new Date(o.createdat).getTime()-new Date(r.createdat).getTime()):[]}voteForSong(e,r,o=!1,i=""){return this.http.post(`${this.apiUrl}/api/vote`,{trackid:e,trackInfo:r,is_dislike:o,dedication:i}).pipe(Ue(()=>{this.invalidateCache()}))}changeVote(e,r,o){return this.voteForSong(e,r,o)}getRankedSongsPolling(){return zu(3e4).pipe(fu(0),Bt(()=>this.getRankedSongs()))}getRankedSongs(){const e=Date.now();if(this.cachedSongs.length>0&&e-this.lastFetchTime<this.CACHE_DURATION)return re([...this.cachedSongs]);const r=this.getCacheBustedUrl(`${this.apiUrl}/api/votes`);return this.http.get(r).pipe(G(o=>{const i=this.processSongs(o||[]);return this.cachedSongs=i,this.lastFetchTime=e,i}))}getRecentlyAddedSongs(){return this.getRankedSongs().pipe(G(e=>[...e].sort((r,o)=>new Date(o.createdat).getTime()-new Date(r.createdat).getTime()).slice(0,10)))}getSongs(){return this.getRankedSongs()}addToHistory(e){return this.http.post(`${this.apiUrl}/spotify/history`,{trackId:e})}vote(e,r,o=!1){return this.http.post(`${this.apiUrl}/vote`,{song:e,isDislike:r,isAdmin:o})}deleteSong(e){const r=this.authService.getAuthHeaders(),i=this.getCacheBustedUrl(`${this.apiUrl}/api/votes?trackid=${e}`);return this.http.delete(i,{headers:r}).pipe(Ue(()=>{this.invalidateCache()}))}deleteAllVotes(){const e=this.authService.getAuthHeaders(),r=this.getCacheBustedUrl(`${this.apiUrl}/api/votes/all`);return this.http.delete(r,{headers:e}).pipe(Ue(()=>{this.invalidateCache()}))}forceRefresh(){this.invalidateCache();const e=this.getCacheBustedUrl(`${this.apiUrl}/api/votes`);return this.http.get(e).pipe(G(r=>{const o=this.processSongs(r||[]);return this.cachedSongs=o,this.lastFetchTime=Date.now(),o}))}getRankedSongsImmediate(){const e=this.getCacheBustedUrl(`${this.apiUrl}/api/votes`);return this.http.get(e).pipe(G(r=>this.processSongs(r||[])))}getVotingStatus(){const e=this.getCacheBustedUrl(`${this.apiUrl}/api/voting/status`);return this.http.get(e)}submitVote(e){return this.http.post(`${this.apiUrl}/api/voting/vote`,{vote_type:e}).pipe(Ue(()=>{this.invalidateVotingStatusCache()}),At(r=>{let o="Error al votar";return r.error?.error?o=r.error.error:400===r.status?o="Solicitud incorrecta":409===r.status?o=r.error?.error||"Ya has votado por esta opci\xf3n":500===r.status?o="Error del servidor":0===r.status&&(o="Error de conexi\xf3n"),this.invalidateVotingStatusCache(),ho(()=>new Error(o))}))}getVotingStatusImmediate(){const e=this.getCacheBustedUrl(`${this.apiUrl}/api/voting/status`);return this.http.get(e)}static \u0275fac=function(r){return new(r||t)(Q(Zn),Q(Yo))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qu=(()=>{class t{audio;currentUrlSubject=new mt(null);isPlayingSubject=new mt(!1);currentUrl$=this.currentUrlSubject.asObservable();isPlaying$=this.isPlayingSubject.asObservable();constructor(){this.audio=new Audio,this.audio.addEventListener("ended",()=>{this.stop()}),this.audio.addEventListener("pause",()=>{this.isPlayingSubject.next(!1)}),this.audio.addEventListener("play",()=>{this.isPlayingSubject.next(!0)})}play(e){console.log("AudioService: Request to play",e),e?this.currentUrlSubject.value===e?this.audio.paused?(console.log("AudioService: Resuming audio"),this.audio.play().catch(r=>console.error("AudioService: Error resuming:",r))):(console.log("AudioService: Pausing audio"),this.audio.pause()):(console.log("AudioService: Playing new song"),this.stop(),this.audio.src=e,this.audio.load(),this.audio.play().then(()=>console.log("AudioService: Playback started")).catch(r=>console.error("AudioService: Error playing audio:",r)),this.currentUrlSubject.next(e)):console.warn("AudioService: No URL provided")}pause(){this.audio.pause()}stop(){this.audio.pause(),this.audio.currentTime=0,this.currentUrlSubject.next(null),this.isPlayingSubject.next(!1)}isCurrentSong(e){return this.currentUrlSubject.value===e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ej(t,n){1&t&&b(0,"i",11)}function tj(t,n){1&t&&b(0,"i",12)}function nj(t,n){1&t&&(h(0,"div",16),_(1," No se encontraron resultados. Intenta con otras palabras. "),f())}function rj(t,n){if(1&t){const e=_e();h(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20),b(4,"img",21),f(),h(5,"div",22)(6,"div",23)(7,"h6",24),_(8),f(),h(9,"button",25),k("click",function(){const i=H(e).$implicit;return z(P(2).playPreview(i.preview_url))}),b(10,"i",26),Wn(11,"async"),f()(),h(12,"p",27),_(13),f(),h(14,"p",28),_(15),f()(),h(16,"div",29)(17,"div",30)(18,"input",31),k("ngModelChange",function(o){return z(H(e).$implicit.dedication=o)}),f()(),h(19,"button",32),k("click",function(){const i=H(e).$implicit;return z(P(2).vote(i))}),b(20,"i",33),_(21,"Votar "),f()()()()()}if(2&t){const e=n.$implicit,r=P(2);p(4),O("src",e.image,ln)("alt",e.name),p(4),K(e.name),p(1),O("disabled",!e.preview_url)("title",e.preview_url?"Escuchar previa":"Previa no disponible"),p(1),O("ngClass",r.audioService.isCurrentSong(e.preview_url)&&Kn(11,9,r.audioService.isPlaying$)?"fa-pause":"fa-play"),p(3),K(e.artists.join(", ")),p(2),K(r.formatDuration(e.duration_ms)),p(3),O("ngModel",e.dedication)}}function oj(t,n){if(1&t&&(h(0,"div"),N(1,nj,2,0,"div",13),h(2,"div",14),N(3,rj,22,11,"div",15),f()()),2&t){const e=P();p(1),O("ngIf",0===e.results.length&&!e.isLoading),p(2),O("ngForOf",e.results)}}let ij=(()=>{class t{spotifyService;votingService;audioService;voteCasted=new ot;query="";results=[];isLoading=!1;searchPerformed=!1;constructor(e,r,o){this.spotifyService=e,this.votingService=r,this.audioService=o}search(){this.query.trim()&&(this.isLoading=!0,this.searchPerformed=!0,this.audioService.stop(),this.spotifyService.searchTracks(this.query).subscribe({next:e=>{this.results=e,this.isLoading=!1},error:e=>{console.error("Error al buscar:",e),this.isLoading=!1,alert("Error al buscar canciones. Intenta nuevamente.")}}))}vote(e){this.votingService.voteForSong(e.id,{name:e.name,artists:e.artists,image:e.album?.images?.[0]?.url||e.image,preview_url:e.preview_url,album:e.album?.name||"Unknown Album"},!1,e.dedication).subscribe({next:()=>{alert("\xa1Tu voto ha sido registrado!"),this.query="",this.results=[],this.searchPerformed=!1,this.voteCasted.emit()},error:o=>{409===o.status?alert("Ya has votado por esta canci\xf3n."):alert("Error al registrar tu voto. Intenta nuevamente.")}})}playPreview(e){e?this.audioService.play(e):alert("Esta canci\xf3n no tiene vista previa disponible.")}formatDuration(e){const r=Math.floor(e/6e4),o=(e%6e4/1e3).toFixed(0);return`${r}:${parseInt(o)<10?"0":""}${o}`}static \u0275fac=function(r){return new(r||t)(T(yO),T(ps),T(qu))};static \u0275cmp=Ht({type:t,selectors:[["app-search"]],outputs:{voteCasted:"voteCasted"},standalone:!0,features:[Yt],decls:13,vars:5,consts:[[1,"card","mb-4"],[1,"card-header"],[1,"mb-0"],[1,"fas","fa-search","me-2"],[1,"card-body"],[1,"input-group","mb-3"],["type","text","placeholder","Nombre de canci\xf3n o artista...",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"btn","btn-primary",3,"disabled","click"],["class","fas fa-search me-1",4,"ngIf"],["class","fas fa-spinner fa-spin me-1",4,"ngIf"],[4,"ngIf"],[1,"fas","fa-search","me-1"],[1,"fas","fa-spinner","fa-spin","me-1"],["class","alert alert-info",4,"ngIf"],[1,"results-container"],["class","card mb-2 track-card",4,"ngFor","ngForOf"],[1,"alert","alert-info"],[1,"card","mb-2","track-card"],[1,"card-body","py-2"],[1,"row","align-items-center"],[1,"col-3","col-sm-2"],[1,"img-fluid","rounded",3,"src","alt"],[1,"col-5","col-sm-6"],[1,"d-flex","align-items-center","mb-1"],[1,"mb-0","text-truncate","me-2"],[1,"btn","btn-sm","btn-outline-primary","rounded-circle","p-0","d-flex","align-items-center","justify-content-center",2,"width","24px","height","24px",3,"disabled","title","click"],[1,"fas",2,"font-size","10px",3,"ngClass"],[1,"text-muted","mb-1","small","text-truncate"],[1,"text-muted","mb-0","small"],[1,"col-4","col-sm-4","text-end"],[1,"mb-2"],["type","text","placeholder","Dedicatoria (opcional)",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"btn","btn-success","btn-sm","w-100",3,"click"],[1,"fas","fa-thumbs-up","me-1"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"div",1)(2,"h5",2),b(3,"i",3),_(4,"Buscar canciones en Spotify "),f()(),h(5,"div",4)(6,"div",5)(7,"input",6),k("ngModelChange",function(s){return o.query=s})("keyup.enter",function(){return o.search()}),f(),h(8,"button",7),k("click",function(){return o.search()}),N(9,ej,1,0,"i",8),N(10,tj,1,0,"i",9),_(11," Buscar "),f()(),N(12,oj,4,2,"div",10),f()()),2&r&&(p(7),O("ngModel",o.query),p(1),O("disabled",o.isLoading),p(1),O("ngIf",!o.isLoading),p(1),O("ngIf",o.isLoading),p(2),O("ngIf",o.searchPerformed))},dependencies:[Pn,ou,vr,On,iu,Jo,wr,vo,Kr],styles:[".track-card[_ngcontent-%COMP%]{transition:transform .2s,background-color .2s}.track-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background-color:#282828}.results-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}@media (max-width: 576px){.track-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.75rem}.track-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.9rem}.track-card[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:.2rem .5rem;font-size:.8rem}}.text-truncate[_ngcontent-%COMP%]{color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]})}return t})();function sj(t,n){1&t&&(h(0,"span"),_(1,"Actualizar"),f())}function aj(t,n){1&t&&(h(0,"span"),_(1,"Actualizando..."),f())}function cj(t,n){if(1&t&&(h(0,"span"),_(1),f()),2&t){const e=P();p(1),te("Espera ",e.countdown,"s")}}function lj(t,n){1&t&&(h(0,"div",7),b(1,"div",8),h(2,"p"),_(3,"Cargando canciones..."),f()())}function uj(t,n){if(1&t&&(h(0,"small",34),b(1,"i",35),_(2),f()),2&t){const e=P().$implicit;p(2),te("",e.dedication," ")}}function dj(t,n){if(1&t){const e=_e();h(0,"div",17)(1,"div",18),b(2,"img",19),h(3,"button",20),k("click",function(){const i=H(e).$implicit;return z(P(3).playPreview(i.preview_url))}),b(4,"i",21),Wn(5,"async"),f()(),h(6,"div",22)(7,"div",23)(8,"h6",24),_(9),f(),h(10,"p",25),_(11),f(),N(12,uj,3,1,"small",26),f(),h(13,"div",27)(14,"span",28),b(15,"i",29),_(16),f()(),h(17,"div")(18,"button",30),k("click",function(){const i=H(e).$implicit;return z(P(3).vote(i,!1))}),b(19,"i",31),_(20),f(),h(21,"button",32),k("click",function(){const i=H(e).$implicit;return z(P(3).vote(i,!0))}),b(22,"i",33),_(23),f()()()()}if(2&t){const e=n.$implicit,r=P(3);p(2),O("src",e.image,ln)("alt",e.name),p(1),O("disabled",!e.preview_url)("title",e.preview_url?"Escuchar previa":"Previa no disponible"),p(1),O("ngClass",r.audioService.isCurrentSong(e.preview_url)&&Kn(5,15,r.audioService.isPlaying$)?"fa-pause":"fa-play"),p(5),K(e.name),p(2),K(e.artists.join(", ")),p(1),O("ngIf",e.dedication),p(4),te("",r.formatTimeAgo(e.createdat)," "),p(2),ie("active",r.hasUserLiked(e.id)),p(2),te("",e.votes||0," "),p(1),ie("active",r.hasUserDisliked(e.id)),p(2),te("",e.dislikes||0," ")}}function hj(t,n){if(1&t&&(h(0,"div",14)(1,"h2"),_(2,"Reci\xe9n Agregadas"),f(),h(3,"div",15),N(4,dj,24,17,"div",16),f()()),2&t){const e=P(2);p(4),O("ngForOf",e.recentlyAddedSongs)}}function fj(t,n){if(1&t&&(h(0,"small",46),b(1,"i",35),_(2),f()),2&t){const e=P().$implicit;p(2),te("",e.dedication," ")}}function gj(t,n){if(1&t){const e=_e();h(0,"tr")(1,"td"),_(2),f(),h(3,"td")(4,"div",36)(5,"div",37),b(6,"img",38),h(7,"button",39),k("click",function(){const i=H(e).$implicit;return z(P(2).playPreview(i.preview_url))}),b(8,"i",21),Wn(9,"async"),f()(),h(10,"div",40)(11,"span"),_(12),f(),N(13,fj,3,1,"small",41),f()()(),h(14,"td"),_(15),f(),h(16,"td")(17,"span",42),b(18,"i",31),_(19),f(),h(20,"span",43),b(21,"i",33),_(22),f()(),h(23,"td")(24,"span",44),_(25),f()(),h(26,"td")(27,"div",45)(28,"button",30),k("click",function(){const i=H(e).$implicit;return z(P(2).vote(i,!1))}),b(29,"i",31),f(),h(30,"button",32),k("click",function(){const i=H(e).$implicit;return z(P(2).vote(i,!0))}),b(31,"i",33),f()()()()}if(2&t){const e=n.$implicit,r=n.index,o=P(2);p(2),K(r+1),p(4),O("src",e.image,ln)("alt",e.name),p(1),O("disabled",!e.preview_url)("title",e.preview_url?"Escuchar previa":"Previa no disponible"),p(1),O("ngClass",o.audioService.isCurrentSong(e.preview_url)&&Kn(9,16,o.audioService.isPlaying$)?"fa-pause":"fa-play"),p(4),K(e.name),p(1),O("ngIf",e.dedication),p(2),K(e.artists.join(", ")),p(4),te(" ",e.votes||0," "),p(3),te(" ",e.dislikes||0," "),p(3),K(o.formatTimeAgo(e.createdat)),p(3),ie("active",o.hasUserLiked(e.id)),p(2),ie("active",o.hasUserDisliked(e.id))}}function pj(t,n){if(1&t&&(h(0,"div",9),N(1,hj,5,1,"div",10),h(2,"h2"),_(3,"Ranking General"),f(),h(4,"div",11)(5,"table",12)(6,"thead")(7,"tr")(8,"th"),_(9,"#"),f(),h(10,"th"),_(11,"T\xedtulo"),f(),h(12,"th"),_(13,"Artista"),f(),h(14,"th"),_(15,"Votos"),f(),h(16,"th"),_(17,"Agregada"),f(),h(18,"th"),_(19,"Acci\xf3n"),f()()(),h(20,"tbody"),N(21,gj,32,18,"tr",13),f()()()()),2&t){const e=P();p(1),O("ngIf",e.recentlyAddedSongs.length>0),p(20),O("ngForOf",e.songs)}}let mj=(()=>{class t{votingService;audioService;songs=[];recentlyAddedSongs=[];isLoading=!0;isRefreshing=!1;userVotes=new Map;pollingSubscription=null;refreshCooldown=30;countdown=0;timerSubscription=null;constructor(e,r){this.votingService=e,this.audioService=r}ngOnInit(){this.startPolling()}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe(),this.timerSubscription&&this.timerSubscription.unsubscribe()}startPolling(){this.pollingSubscription=this.votingService.getRankedSongsPolling().subscribe({next:e=>{this.songs=e,this.votingService.getRecentlyAddedSongs().subscribe({next:r=>{this.recentlyAddedSongs=r}}),this.isLoading=!1},error:e=>{console.error("Error al cargar canciones:",e),this.isLoading=!1}})}forceRefresh(){this.isRefreshing||this.countdown>0||(this.isRefreshing=!0,this.votingService.forceRefresh().subscribe({next:e=>{this.songs=e,this.votingService.getRecentlyAddedSongs().subscribe({next:r=>{this.recentlyAddedSongs=r,this.isRefreshing=!1,this.startCooldown()}})},error:e=>{console.error("Error al forzar actualizaci\xf3n:",e),this.isRefreshing=!1,this.startCooldown()}}))}hasUserLiked(e){return this.userVotes.has(e)&&!1===this.userVotes.get(e)}hasUserDisliked(e){return this.userVotes.has(e)&&!0===this.userVotes.get(e)}formatTimeAgo(e){try{if(!e)return"reciente";let r;if("string"!=typeof e)return"Reciente";if(r=e.includes("Z")||e.includes("+")?new Date(e):new Date(e+"Z"),isNaN(r.getTime()))return console.warn("Fecha inv\xe1lida:",e),"Reciente";const i=Math.floor(((new Date).getTime()-r.getTime())/1e3),s=Math.floor(i/60),a=Math.floor(i/3600),c=Math.floor(i/86400);return i<60?`${i} s`:s<60?`Hace ${s} min ${i%60} s`:a<24?`Hace ${a} h ${s%60} min`:1===c?"Ayer":`Hace ${c} d`}catch(r){return console.error("Error formateando fecha:",r,"Fecha recibida:",e),"Reciente"}}startCooldown(){this.timerSubscription&&this.timerSubscription.unsubscribe(),this.countdown=this.refreshCooldown,this.timerSubscription=wO(0,1e3).subscribe(()=>{this.countdown>0?this.countdown--:this.timerSubscription&&(this.timerSubscription.unsubscribe(),this.timerSubscription=null)})}vote(e,r=!1){const o={name:e.name,artists:e.artists,image:e.image,album:e.album,preview_url:e.preview_url};this.votingService.voteForSong(e.id,o,r).subscribe({next:i=>{i.deleted?alert("La canci\xf3n ha sido eliminada por recibir muchos dislikes"):(alert(`\xa1Tu ${r?"dislike":"like"} ha sido registrado!`),this.userVotes.set(e.id,r)),this.forceRefresh()},error:i=>{409===i.status?confirm("Ya has votado por esta canci\xf3n. \xbfQuieres cambiar tu voto?")&&this.votingService.changeVote(e.id,o,r).subscribe({next:s=>{s.deleted?alert("La canci\xf3n ha sido eliminada por recibir muchos dislikes"):(alert("\xa1Tu voto ha sido cambiado!"),this.userVotes.set(e.id,r)),this.forceRefresh()},error:s=>{alert("Error al cambiar tu voto. Intenta nuevamente.")}}):alert("Error al registrar tu voto. Intenta nuevamente.")}})}playPreview(e){e?this.audioService.play(e):alert("Esta canci\xf3n no tiene vista previa disponible.")}static \u0275fac=function(r){return new(r||t)(T(ps),T(qu))};static \u0275cmp=Ht({type:t,selectors:[["app-voting-list"]],standalone:!0,features:[Yt],decls:11,vars:8,consts:[[1,"spotify-container"],[1,"header"],[1,"btn-refresh",3,"disabled","click"],[1,"fas","fa-sync-alt"],[4,"ngIf"],["class","loader",4,"ngIf"],["class","content",4,"ngIf"],[1,"loader"],[1,"spinner"],[1,"content"],["class","recently-added",4,"ngIf"],[1,"song-table-container"],[1,"song-table"],[4,"ngFor","ngForOf"],[1,"recently-added"],[1,"recent-songs-grid"],["class","recent-song-card",4,"ngFor","ngForOf"],[1,"recent-song-card"],[1,"recent-song-image-container"],[1,"recent-song-image",3,"src","alt"],[1,"btn-play-overlay",3,"disabled","title","click"],[1,"fas",3,"ngClass"],[1,"recent-song-content"],[1,"recent-song-info"],[1,"recent-song-title"],[1,"recent-song-artist"],["class","text-info fst-italic d-block mt-1",4,"ngIf"],[1,"recent-song-meta"],[1,"badge","bg-secondary"],[1,"fas","fa-clock","me-1"],[1,"btn-vote","like-btn",3,"click"],[1,"fas","fa-thumbs-up"],[1,"btn-vote","dislike-btn",3,"click"],[1,"fas","fa-thumbs-down"],[1,"text-info","fst-italic","d-block","mt-1"],[1,"fas","fa-heart","me-1"],[1,"song-cell"],[1,"position-relative"],[3,"src","alt"],[1,"btn-play-mini",3,"disabled","title","click"],[1,"d-flex","flex-column"],["class","text-info fst-italic",4,"ngIf"],[1,"vote-count"],[1,"dislike-count"],[1,"time-ago"],[1,"vote-actions"],[1,"text-info","fst-italic"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"div",1)(2,"h1"),_(3,"Votaci\xf3n de Canciones"),f(),h(4,"button",2),k("click",function(){return o.forceRefresh()}),b(5,"i",3),N(6,sj,2,0,"span",4),N(7,aj,2,0,"span",4),N(8,cj,2,1,"span",4),f()(),N(9,lj,4,0,"div",5),N(10,pj,22,2,"div",6),f()),2&r&&(p(4),O("disabled",o.isRefreshing||o.countdown>0),p(1),ie("fa-spin",o.isRefreshing),p(1),O("ngIf",!o.isRefreshing&&0===o.countdown),p(1),O("ngIf",o.isRefreshing),p(1),O("ngIf",!o.isRefreshing&&o.countdown>0),p(1),O("ngIf",o.isLoading),p(1),O("ngIf",!o.isLoading))},dependencies:[Pn,ou,vr,On,iu],styles:['.spotify-container[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:2rem;color:var(--text-primary);box-shadow:0 10px 30px #0003;margin-bottom:2rem}.spotify-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}.spotify-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary-color) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;margin:0}.btn-refresh[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;font-weight:700;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;box-shadow:0 5px 15px #1db9544d}.btn-refresh[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #1db95466}.btn-refresh[_ngcontent-%COMP%]:disabled{opacity:.7;transform:none;box-shadow:none;cursor:not-allowed}.loader[_ngcontent-%COMP%]{text-align:center;padding:3rem}.loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.2);border-left-color:var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem;box-shadow:0 0 15px #1db9544d}.loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1.5rem;padding-bottom:.8rem;border-bottom:2px solid rgba(255,255,255,.1);color:var(--text-primary)}.recently-added[_ngcontent-%COMP%]{margin-bottom:3rem}.recently-added[_ngcontent-%COMP%]   .song-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]{display:flex;align-items:center;background:rgba(42,42,42,.5);padding:1rem;border-radius:12px;transition:all .3s ease;border:1px solid rgba(255,255,255,.05)}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]:hover{background:rgba(42,42,42,.7);transform:translateY(-3px);border-color:#1db95433;box-shadow:0 8px 25px #0003}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;margin-right:1rem;box-shadow:0 4px 15px #0000004d;transition:all .3s ease}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]{flex-grow:1;min-width:0}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin:0;color:var(--text-primary)}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin:.3rem 0 0}.recently-added[_ngcontent-%COMP%]   .song-card[_ngcontent-%COMP%]   .song-actions[_ngcontent-%COMP%]{margin-left:1rem}.song-table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:12px;background:rgba(42,42,42,.3);padding:1rem}.song-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.song-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .song-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid rgba(255,255,255,.1)}.song-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;text-transform:uppercase;font-weight:600;letter-spacing:.5px}.song-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}.song-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.05)}.song-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.song-cell[_ngcontent-%COMP%]{display:flex;align-items:center}.song-cell[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;margin-right:1rem;box-shadow:0 4px 15px #0000004d}.vote-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;color:var(--text-primary)}.vote-count[_ngcontent-%COMP%]   .fa-thumbs-up[_ngcontent-%COMP%]{color:var(--primary-color);margin-right:.5rem;font-size:1.1rem}.btn-vote[_ngcontent-%COMP%]{background:transparent;color:var(--primary-color);border:2px solid var(--primary-color);padding:.5rem 1.2rem;border-radius:50px;cursor:pointer;transition:all .3s ease;font-weight:700}.btn-vote[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:var(--text-primary);transform:translateY(-2px);box-shadow:0 5px 15px #1db9544d}.btn-vote-small[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;padding:.6rem 1.2rem;border-radius:50px;cursor:pointer;font-weight:700;transition:all .3s ease;box-shadow:0 4px 12px #1db9544d}.btn-vote-small[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #1db95466}@media (max-width: 768px){.spotify-container[_ngcontent-%COMP%]{padding:1.5rem}.header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.song-table[_ngcontent-%COMP%]{font-size:.9rem}.song-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .song-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8rem}.song-cell[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.song-cell[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:0;margin-bottom:.5rem}}.recently-added[_ngcontent-%COMP%]{margin-bottom:2rem}.recently-added[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid rgba(255,255,255,.1);color:var(--text-primary)}.recent-songs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;margin-bottom:1.5rem}.recent-song-card[_ngcontent-%COMP%]{background:rgba(42,42,42,.5);border-radius:10px;padding:.8rem;display:flex;align-items:center;transition:all .3s ease;border:1px solid rgba(255,255,255,.05);position:relative;overflow:hidden;gap:.8rem;min-height:80px}.recent-song-card[_ngcontent-%COMP%]:hover{background:rgba(42,42,42,.7);transform:translateY(-3px);border-color:#1db95433;box-shadow:0 5px 15px #0003}.recent-song-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:3px;height:100%;background:linear-gradient(to bottom,var(--primary-color),var(--accent-purple))}.recent-song-image-container[_ngcontent-%COMP%]{flex-shrink:0;width:50px;height:50px;border-radius:6px;overflow:hidden;position:relative}.recent-song-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.recent-song-card[_ngcontent-%COMP%]:hover   .recent-song-image[_ngcontent-%COMP%]{transform:scale(1.1)}.recent-song-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:.4rem;min-width:0}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:.5rem;margin-top:.3rem}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   .btn-vote[_ngcontent-%COMP%]{padding:.25rem .6rem;font-size:.75rem;border-radius:4px;min-width:auto}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   .btn-vote[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;margin-right:.3rem}.recent-song-info[_ngcontent-%COMP%]{min-width:0}.recent-song-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary);margin:0;line-height:1.2;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.recent-song-artist[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);margin:0;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.recent-song-meta[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.recent-song-meta[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.3rem .6rem;border-radius:12px;font-size:.7rem;font-weight:600}.recent-song-meta[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.dislike-btn[_ngcontent-%COMP%]{background:transparent;color:#f44336;border:2px solid #f44336}.dislike-btn[_ngcontent-%COMP%]:hover, .dislike-btn.active[_ngcontent-%COMP%]{background:#f44336;color:#fff}.like-btn[_ngcontent-%COMP%]{background:transparent;color:var(--primary-color);border:2px solid var(--primary-color)}.like-btn[_ngcontent-%COMP%]:hover, .like-btn.active[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.vote-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.vote-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]{padding:.3rem .6rem;border-radius:4px;font-size:.8rem}.dislike-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;color:#f44336;margin-left:1rem}.dislike-count[_ngcontent-%COMP%]   .fa-thumbs-down[_ngcontent-%COMP%]{margin-right:.3rem;font-size:.9rem}.recent-song-actions[_ngcontent-%COMP%]{flex-shrink:0}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;width:32px;height:32px;border-radius:50%;cursor:pointer;font-weight:600;transition:all .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #1db9544d}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #1db95466}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}@media (max-width: 480px){.recent-songs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.recent-song-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.recent-song-card[_ngcontent-%COMP%]:hover   .recent-song-image[_ngcontent-%COMP%]{transform:scale(1.1)}.recent-song-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:.4rem;min-width:0}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:.5rem;margin-top:.3rem}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   .btn-vote[_ngcontent-%COMP%]{padding:.25rem .6rem;font-size:.75rem;border-radius:4px;min-width:auto}.recent-song-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   .btn-vote[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;margin-right:.3rem}.recent-song-info[_ngcontent-%COMP%]{min-width:0}.recent-song-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary);margin:0;line-height:1.2;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.recent-song-artist[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);margin:0;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.recent-song-meta[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.recent-song-meta[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.3rem .6rem;border-radius:12px;font-size:.7rem;font-weight:600}.recent-song-meta[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.dislike-btn[_ngcontent-%COMP%]{background:transparent;color:#f44336;border:2px solid #f44336}.dislike-btn[_ngcontent-%COMP%]:hover, .dislike-btn.active[_ngcontent-%COMP%]{background:#f44336;color:#fff}.like-btn[_ngcontent-%COMP%]{background:transparent;color:var(--primary-color);border:2px solid var(--primary-color)}.like-btn[_ngcontent-%COMP%]:hover, .like-btn.active[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.vote-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.vote-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]{padding:.3rem .6rem;border-radius:4px;font-size:.8rem}.dislike-count[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;color:#f44336;margin-left:1rem}.dislike-count[_ngcontent-%COMP%]   .fa-thumbs-down[_ngcontent-%COMP%]{margin-right:.3rem;font-size:.9rem}.recent-song-actions[_ngcontent-%COMP%]{flex-shrink:0}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;width:32px;height:32px;border-radius:50%;cursor:pointer;font-weight:600;transition:all .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #1db9544d}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #1db95466}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 1024px){.recent-songs-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}}@media (max-width: 768px){.recent-songs-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.8rem}.recent-song-card[_ngcontent-%COMP%]{padding:.7rem;gap:.6rem}.recent-song-image-container[_ngcontent-%COMP%]{width:45px;height:45px}.recent-song-title[_ngcontent-%COMP%]{font-size:.85rem}.recent-song-artist[_ngcontent-%COMP%]{font-size:.7rem}}@media (max-width: 480px){.recent-songs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.recent-song-meta[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.3rem}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]{width:28px;height:28px}.recent-song-actions[_ngcontent-%COMP%]   .btn-vote[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}}.btn-play-overlay[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.5);color:#fff;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:0;transition:all .2s ease;z-index:10}.btn-play-overlay[_ngcontent-%COMP%]:hover{background:var(--primary-color);border-color:var(--primary-color);transform:translate(-50%,-50%) scale(1.1)}.btn-play-overlay[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5;background:rgba(100,100,100,.6)}.btn-play-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;margin-left:1px}.recent-song-image-container[_ngcontent-%COMP%]:hover   .btn-play-overlay[_ngcontent-%COMP%], .btn-play-overlay[_ngcontent-%COMP%]:focus{opacity:1}@media (hover: none){.btn-play-overlay[_ngcontent-%COMP%]{opacity:1;background:rgba(0,0,0,.4)}}.btn-play-mini[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.6);border:none;color:#fff;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:0;transition:all .2s ease}.btn-play-mini[_ngcontent-%COMP%]:hover{background:var(--primary-color);transform:translate(-50%,-50%) scale(1.1)}.btn-play-mini[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.song-cell[_ngcontent-%COMP%]   .position-relative[_ngcontent-%COMP%]:hover   .btn-play-mini[_ngcontent-%COMP%]{opacity:1}']})}return t})(),wp=(()=>{class t{http;authService;apiUrl=Vn_apiUrl;automaticCheckInterval=null;constructor(e,r){this.http=e,this.authService=r,this.startAutomaticPlayingSongCheck(5e3)}getCacheBustedUrl(e){return`${e}?_=${(new Date).getTime()}`}startAutomaticPlayingSongCheck(e=3e4){this.stopAutomaticPlayingSongCheck(),this.automaticCheckInterval=setInterval(()=>{this.checkAndRemovePlayingSongFromRanking().subscribe({next:r=>{r.deleted&&alert(`Canci\xf3n eliminada autom\xe1ticamente del ranking: ${r.song.name}`)},error:r=>{401===r.status?console.warn("Sesi\xf3n expirada en verificaci\xf3n autom\xe1tica, esperando reconexi\xf3n..."):console.error("Error en verificaci\xf3n autom\xe1tica:",r)}})},e)}playTrack(e){const r=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/play`,{uri:e},{headers:r})}pausePlayback(){const e=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/api/spotify/admin/pause`,{},{headers:e})}resumePlayback(){const e=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/api/spotify/admin/resume`,{},{headers:e})}nextTrack(){const e=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/next`,{},{headers:e})}previousTrack(){const e=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/previous`,{},{headers:e})}stopAutomaticPlayingSongCheck(){this.automaticCheckInterval&&(clearInterval(this.automaticCheckInterval),this.automaticCheckInterval=null)}getAdminCurrentlyPlaying(){const e=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/admin/currently-playing`);return this.http.get(e).pipe(At(r=>401===r.status?this.refreshAdminToken().pipe(Bt(()=>{const o=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/admin/currently-playing`);return this.http.get(o)}),At(o=>(console.error("Error al refrescar token:",o),ho(()=>o)))):ho(()=>r)))}refreshAdminToken(){const e=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/refresh-token`,{},{headers:e})}getAdminCurrentlyPlayingPolling(){return zu(3e3).pipe(fu(0),Bt(()=>this.getAdminCurrentlyPlaying()))}getAdminSpotifyStatus(){const e=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/admin/status`);return this.http.get(e)}startAdminSpotifyAuth(){const e=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/admin/auth`);return this.http.get(e)}disconnectAdminSpotify(){const e=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/disconnect`,{},{headers:e})}startSpotifyAuth(){const e=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/auth`);return this.http.get(e)}getCurrentlyPlaying(){const e=this.getCacheBustedUrl(`${this.apiUrl}/api/spotify/currently-playing`);return this.http.get(e)}getCurrentlyPlayingPolling(){return zu(3e3).pipe(fu(0),Bt(()=>this.getCurrentlyPlaying()))}addToQueue(e){const r=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/queue`,{uri:e},{headers:r})}checkAndRemovePlayingSongFromRanking(e=!1){const r=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/check-playing-song`,{force_add:e},{headers:r})}getQueue(){const e=this.authService.getAuthHeaders();return this.http.get(`${this.apiUrl}/api/spotify/admin/queue`,{headers:e})}addToHistory(){const e=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/add-to-history`,{},{headers:e})}addToHistoryConfirmed(){const e=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/add-to-history-confirmed`,{},{headers:e})}static \u0275fac=function(r){return new(r||t)(Q(Zn),Q(Yo))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _j(t,n){1&t&&b(0,"div",21)}function vj(t,n){1&t&&b(0,"div",21)}function yj(t,n){1&t&&b(0,"div",21)}function bj(t,n){if(1&t&&(h(0,"div",22),b(1,"i",23),h(2,"span"),_(3),f()()),2&t){const e=P(2);p(3),te("Votaste por: ",e.getVoteTypeName(e.lastVoteType),"")}}function Cj(t,n){if(1&t){const e=_e();h(0,"div",1)(1,"div",2),b(2,"div",3),f(),h(3,"div",4)(4,"div",5)(5,"div",6),b(6,"i",7),h(7,"span"),_(8),f()(),h(9,"button",8),k("click",function(){return H(e),z(P().forceRefresh())}),b(10,"i",9),f()()(),h(11,"div",10)(12,"button",11),k("click",function(){return H(e),z(P().vote("next"))}),h(13,"div",12),b(14,"i",13),h(15,"span"),_(16,"Siguiente"),f(),h(17,"div",14),_(18),f()(),N(19,_j,1,0,"div",15),f(),h(20,"button",16),k("click",function(){return H(e),z(P().vote("genre_change"))}),h(21,"div",12),b(22,"i",17),h(23,"span"),_(24,"Cambiar g\xe9nero"),f(),h(25,"div",14),_(26),f()(),N(27,vj,1,0,"div",15),f(),h(28,"button",18),k("click",function(){return H(e),z(P().vote("repeat"))}),h(29,"div",12),b(30,"i",19),h(31,"span"),_(32,"Mismo g\xe9nero"),f(),h(33,"div",14),_(34),f()(),N(35,yj,1,0,"div",15),f()(),N(36,bj,4,1,"div",20),f()}if(2&t){const e=P();p(1),ie("visible",e.isLoading),p(7),te("",e.votingStatus.total_votes," votos (beta) "),p(4),ie("voted",e.hasVoted("next")),O("disabled",e.hasVoted("next")||e.isLoading),p(5),ie("updating",e.isUpdatingNext),p(1),te(" ",e.votingStatus.votes.next," "),p(1),O("ngIf",e.hasVoted("next")),p(1),ie("voted",e.hasVoted("genre_change")),O("disabled",e.hasVoted("genre_change")||e.isLoading),p(5),ie("updating",e.isUpdatingGenre),p(1),te(" ",e.votingStatus.votes.genre_change," "),p(1),O("ngIf",e.hasVoted("genre_change")),p(1),ie("voted",e.hasVoted("repeat")),O("disabled",e.hasVoted("repeat")||e.isLoading),p(5),ie("updating",e.isUpdatingRepeat),p(1),te(" ",e.votingStatus.votes.repeat," "),p(1),O("ngIf",e.hasVoted("repeat")),p(1),O("ngIf",e.lastVoteType)}}let wj=(()=>{class t{votingService;spotifyService;cdr;votingStatus=null;currentSong=null;userVotes=[];lastVoteType="";isLoading=!1;isUpdatingNext=!1;isUpdatingGenre=!1;isUpdatingRepeat=!1;votingSubscription;songSubscription;statusPollingSubscription;constructor(e,r,o){this.votingService=e,this.spotifyService=r,this.cdr=o}ngOnInit(){this.loadVotingStatus(),this.votingSubscription=zu(2e3).subscribe(()=>{this.currentSong&&this.currentSong.is_playing&&this.loadVotingStatus()}),this.songSubscription=this.spotifyService.getAdminCurrentlyPlayingPolling().subscribe(e=>{this.currentSong=e,e&&e.id!==this.votingStatus?.current_song_id&&(this.userVotes=[],this.lastVoteType="",this.loadVotingStatus())})}forceRefresh(){this.loadVotingStatus(),this.showNotification("Votaciones actualizadas","success")}ngOnDestroy(){this.votingSubscription&&this.votingSubscription.unsubscribe(),this.songSubscription&&this.songSubscription.unsubscribe(),this.statusPollingSubscription&&this.statusPollingSubscription.unsubscribe()}loadVotingStatus(){this.votingService.getVotingStatusImmediate().subscribe({next:e=>{e&&e.votes?this.votingStatus=e:console.warn("Datos de votaci\xf3n inv\xe1lidos recibidos:",e)},error:e=>{console.error("Error loading voting status:",e),setTimeout(()=>this.loadVotingStatus(),1e3)}})}vote(e){this.hasVoted(e)?this.showNotification("Ya has votado por esta opci\xf3n","warning"):this.votingService.submitVote(e).subscribe({next:r=>{this.userVotes.push(e),this.lastVoteType=e,this.votingStatus=r.status,this.showNotification(`Voto registrado: ${this.getVoteTypeName(e)}`,"success"),this.loadVotingStatus(),this.cdr.detectChanges(),setTimeout(()=>{this.lastVoteType="",this.cdr.detectChanges()},3e3)},error:r=>{console.error("Error submitting vote:",r);let o="Error al votar";r.message.includes("Ya has votado por")&&(this.userVotes.push(e),o=r.message,this.loadVotingStatus()),this.showNotification(o,"warning"),this.cdr.detectChanges()}})}showNotification(e,r){const o=document.createElement("div");o.style.cssText="\n      position: fixed;\n      top: 90px;\n      right: 20px;\n      padding: 12px 20px;\n      border-radius: 8px;\n      color: white;\n      font-weight: 600;\n      z-index: 10000;\n      animation: slideIn 0.3s ease;\n    ",o.style.background="success"===r?"linear-gradient(135deg, #1ed760, #19a34a)":"error"===r?"linear-gradient(135deg, #ff4d4d, #cc0000)":"linear-gradient(135deg, #ff9a00, #e67e00)",o.textContent=e,document.body.appendChild(o),setTimeout(()=>{o.style.animation="slideOut 0.3s ease",setTimeout(()=>{document.body.contains(o)&&document.body.removeChild(o)},300)},3e3)}hasVoted(e){return this.userVotes.includes(e)}getVoteTypeName(e){return{next:"siguiente canci\xf3n",genre_change:"cambiar de g\xe9nero",repeat:"mantener g\xe9nero"}[e]||e}static \u0275fac=function(r){return new(r||t)(T(ps),T(wp),T(Xi))};static \u0275cmp=Ht({type:t,selectors:[["app-voting"]],standalone:!0,features:[Yt],decls:1,vars:1,consts:[["class","voting-container",4,"ngIf"],[1,"voting-container"],[1,"loading-overlay"],[1,"spinner"],[1,"voting-header"],[1,"header-controls"],[1,"total-votes"],[1,"fas","fa-users"],["title","Actualizar votos",1,"refresh-btn",3,"click"],[1,"fas","fa-sync-alt"],[1,"voting-options"],[1,"vote-btn","next",3,"disabled","click"],[1,"btn-content"],[1,"fas","fa-forward"],[1,"vote-count"],["class","pulse-ring",4,"ngIf"],[1,"vote-btn","genre",3,"disabled","click"],[1,"fas","fa-random"],[1,"vote-btn","repeat",3,"disabled","click"],[1,"fas","fa-redo"],["class","voting-feedback",4,"ngIf"],[1,"pulse-ring"],[1,"voting-feedback"],[1,"fas","fa-check-circle"]],template:function(r,o){1&r&&N(0,Cj,37,25,"div",0),2&r&&O("ngIf",o.votingStatus&&(null==o.currentSong?null:o.currentSong.is_playing))},dependencies:[Pn,On],styles:['.voting-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,215,96,.15),rgba(29,185,84,.1));-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:16px;padding:1rem;margin:1rem 0;border:1px solid rgba(30,215,96,.3);width:100%;max-width:100%;box-shadow:0 0 20px #1ed76040,inset 0 1px #ffffff1a;position:relative;overflow:hidden}.voting-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,rgba(30,215,96,.8),transparent);animation:_ngcontent-%COMP%_neonGlow 3s ease-in-out infinite}.voting-header[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:center}.voting-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1ed760;margin:0 0 .5rem;font-weight:700;font-size:1.1rem;text-shadow:0 0 10px rgba(30,215,96,.5);letter-spacing:.5px}.total-votes[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;color:#ffffffb3;font-size:.85rem}.total-votes[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1ed760}.voting-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:.8rem;margin-bottom:1rem}.vote-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.8rem .5rem;border:2px solid rgba(30,215,96,.3);border-radius:12px;background:rgba(25,20,20,.6);color:#fff;transition:all .3s ease;cursor:pointer;flex:1;min-width:0;min-height:80px;position:relative}.vote-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:rgba(30,215,96,.2);border-color:#1ed760;transform:translateY(-2px);box-shadow:0 5px 15px #1ed7604d}.vote-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.vote-btn.voted[_ngcontent-%COMP%]{background:rgba(30,215,96,.25);border-color:#1ed760}.vote-btn.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .vote-btn.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .vote-btn.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{color:#1ed760;text-shadow:0 0 8px rgba(30,215,96,.6)}.vote-btn.next[_ngcontent-%COMP%]{border-color:#1ed76066}.vote-btn.next[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#1ed760}.vote-btn.genre[_ngcontent-%COMP%]{border-color:#569af766}.vote-btn.genre[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#569af7}.vote-btn.genre.voted[_ngcontent-%COMP%]{background:rgba(86,154,247,.25);border-color:#569af7}.vote-btn.genre.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .vote-btn.genre.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .vote-btn.genre.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{color:#569af7;text-shadow:0 0 8px rgba(86,154,247,.6)}.vote-btn.repeat[_ngcontent-%COMP%]{border-color:#ff9a0066}.vote-btn.repeat[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#ff9a00}.vote-btn.repeat.voted[_ngcontent-%COMP%]{background:rgba(255,154,0,.25);border-color:#ff9a00}.vote-btn.repeat.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .vote-btn.repeat.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .vote-btn.repeat.voted[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{color:#ff9a00;text-shadow:0 0 8px rgba(255,154,0,.6)}.btn-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.4rem;z-index:2}.btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;transition:all .3s ease}.btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;text-align:center;transition:all .3s ease}.btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;color:#fff;transition:all .3s ease}.pulse-ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;border:2px solid #1ed760;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite;opacity:.6}.voting-feedback[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding-top:.8rem;border-top:1px solid rgba(255,255,255,.1);color:#1ed760;font-weight:600;font-size:.9rem}.voting-feedback[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce .5s ease-in-out}@keyframes _ngcontent-%COMP%_neonGlow{0%,to{opacity:.5}50%{opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:translate(-50%,-50%) scale(.8);opacity:.6}50%{transform:translate(-50%,-50%) scale(1.1);opacity:.3}to{transform:translate(-50%,-50%) scale(.8);opacity:.6}}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-5px)}60%{transform:translateY(-3px)}}@media (max-width: 768px){.voting-container[_ngcontent-%COMP%]{padding:.8rem;margin:.8rem 0}.voting-options[_ngcontent-%COMP%]{gap:.5rem}.vote-btn[_ngcontent-%COMP%]{padding:.6rem .4rem;min-height:70px}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{font-size:.9rem}.voting-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.voting-options[_ngcontent-%COMP%]{flex-direction:column;gap:.6rem}.vote-btn[_ngcontent-%COMP%]{min-height:60px;flex-direction:row;justify-content:flex-start;padding:.8rem}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{flex-direction:row;gap:.8rem;align-items:center}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:0}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;flex-grow:1;text-align:left}.vote-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{font-size:1rem}}.voting-container[_ngcontent-%COMP%]{position:relative}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;border-radius:16px;z-index:10;opacity:0;visibility:hidden;transition:all .3s ease}.loading-overlay.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}.loading-overlay[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:30px;height:30px;border:3px solid rgba(30,215,96,.3);border-top:3px solid #1ed760;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.vote-count[_ngcontent-%COMP%]{transition:all .3s ease}.vote-count.updating[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulseUpdate .5s ease;color:#1ed760}@keyframes _ngcontent-%COMP%_pulseUpdate{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.header-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.refresh-btn[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.refresh-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);transform:rotate(180deg)}.refresh-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-size:14px}']})}return t})(),MO=(()=>{class t{http;authService;apiUrl=Vn_apiUrl;constructor(e,r){this.http=e,this.authService=r}getQueue(){const e=this.authService.getAuthHeaders();return this.http.get(`${this.apiUrl}/api/spotify/admin/queue`,{headers:e})}getNextSong(){return this.http.get(`${this.apiUrl}/api/spotify/queue/next`)}addToQueue(e){const r=this.authService.getAuthHeaders();return this.http.post(`${this.apiUrl}/api/spotify/admin/queue`,{uri:e},{headers:r}).pipe(At(o=>{console.error("Error adding to queue:",o);let i="Error desconocido al agregar a la cola";throw o.error?.error?i=o.error.error:401===o.status?i="No autorizado - verifica la conexi\xf3n de Spotify":404===o.status&&(i="Dispositivo de Spotify no encontrado"),new Error(i)}))}static \u0275fac=function(r){return new(r||t)(Q(Zn),Q(Yo))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mj(t,n){if(1&t&&(h(0,"div",12)(1,"div",13),b(2,"img",14),f(),h(3,"div",15)(4,"h4",16),_(5),f(),h(6,"p",17),_(7),f()()()),2&t){const e=P();p(2),O("src",e.nextSong.image||"assets/default-song.png",ln),p(3),K(e.nextSong.name),p(2),K(e.nextSong.artists.join(", "))}}function Oj(t,n){1&t&&(h(0,"div",18)(1,"p",19),_(2,"No hay canciones en la cola de Spotify"),f()())}function Pj(t,n){1&t&&(h(0,"div",20)(1,"div",21),b(2,"i",22),h(3,"p",23),_(4,"No hay m\xfasica sonando."),f()()())}function xj(t,n){if(1&t&&(h(0,"p",39),b(1,"i",40),_(2),f()),2&t){const e=P(2);p(2),te("",e.adminCurrentlyPlaying.dedication," ")}}function Dj(t,n){if(1&t){const e=_e();h(0,"div",24)(1,"div",25),b(2,"img",26),f(),h(3,"div",27)(4,"div",28)(5,"h3",29),_(6),f(),h(7,"p",30),_(8),f(),N(9,xj,3,1,"p",31),f(),h(10,"div",32)(11,"span",33),_(12),f(),h(13,"div",34),b(14,"div",35),f(),h(15,"span",33),_(16),f()()(),h(17,"div",36)(18,"button",37),k("click",function(){return H(e),z(P().forceUpdate())}),b(19,"i",38),f()()()}if(2&t){const e=P();p(2),Dl("alt","Car\xe1tula de ",e.adminCurrentlyPlaying.name,""),O("src",e.adminCurrentlyPlaying.image,ln),p(4),K(e.adminCurrentlyPlaying.name),p(2),K(e.adminCurrentlyPlaying.artists),p(1),O("ngIf",e.adminCurrentlyPlaying.dedication),p(3),K(e.formatTime(e.progress*e.songDurationMs/100)),p(2),_a("width",e.progress,"%"),p(2),K(e.formatTime(e.songDurationMs)),p(2),O("disabled",e.isUpdating),p(1),ie("fa-spin",e.isUpdating)}}function Ej(t,n){1&t&&b(0,"app-voting")}let OO=(()=>{class t{spotifyService;votingService;queueService;adminCurrentlyPlaying=null;progress=0;songDurationMs=0;isUpdating=!1;nextSong=null;pollingSubscription=null;progressInterval=null;songInitialProgressMs=0;lastSyncTime=0;constructor(e,r,o){this.spotifyService=e,this.votingService=r,this.queueService=o}ngOnInit(){this.startAdminSpotifyPolling(),this.loadNextSong(),setInterval(()=>{this.loadNextSong()},3e4)}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe(),this.stopProgressBar()}loadNextSong(){this.queueService.getNextSong().subscribe({next:e=>{this.nextSong=e&&e.next_song?e.next_song:null},error:e=>{console.error("Error loading next song:",e),this.nextSong=null}})}startAdminSpotifyPolling(){this.pollingSubscription=this.spotifyService.getAdminCurrentlyPlayingPolling().subscribe({next:e=>{e&&e.is_playing?this.adminCurrentlyPlaying&&this.adminCurrentlyPlaying.id===e.id?this.syncProgressBar(e.progress_ms,e.duration_ms):(this.adminCurrentlyPlaying=e,this.startProgressBar(e.progress_ms,e.duration_ms),this.checkAndRemovePlayingSong(),this.loadNextSong()):(this.adminCurrentlyPlaying=null,this.stopProgressBar())},error:e=>{console.error("Error al obtener reproducci\xf3n actual del admin:",e),this.adminCurrentlyPlaying=null,this.stopProgressBar()}})}forceUpdate(){this.isUpdating||(this.isUpdating=!0,this.spotifyService.getAdminCurrentlyPlaying().subscribe({next:e=>{e&&e.is_playing?this.adminCurrentlyPlaying&&this.adminCurrentlyPlaying.id===e.id?this.syncProgressBar(e.progress_ms,e.duration_ms):(this.adminCurrentlyPlaying=e,this.startProgressBar(e.progress_ms,e.duration_ms)):(this.adminCurrentlyPlaying=null,this.stopProgressBar()),this.isUpdating=!1},error:e=>{console.error("Error al forzar la actualizaci\xf3n:",e),this.adminCurrentlyPlaying=null,this.stopProgressBar(),this.isUpdating=!1}}))}startProgressBar(e,r){this.stopProgressBar(),this.syncProgressBar(e,r),this.progressInterval=setInterval(()=>{this.updateProgress()},500)}syncProgressBar(e,r){this.songInitialProgressMs=e,this.songDurationMs=r,this.lastSyncTime=Date.now(),this.updateProgress()}updateProgress(){if(!this.adminCurrentlyPlaying||this.songDurationMs<=0)return void(this.progress=0);const e=Date.now()-this.lastSyncTime;this.progress=Math.min((this.songInitialProgressMs+e)/this.songDurationMs*100,100),this.progress>=100&&this.stopProgressBar()}stopProgressBar(){this.progressInterval&&(clearInterval(this.progressInterval),this.progressInterval=null)}onVoteCasted(){const e=document.querySelector("app-voting-list");e&&e.forceRefresh&&e.forceRefresh()}checkAndRemovePlayingSong(){this.adminCurrentlyPlaying&&this.adminCurrentlyPlaying.id&&setTimeout(()=>{this.spotifyService.checkAndRemovePlayingSongFromRanking().subscribe({next:e=>{e.deleted&&(console.log("Canci\xf3n eliminada del ranking:",e.song.name),this.votingService.forceRefresh().subscribe())},error:e=>{console.error("Error al verificar canci\xf3n en reproducci\xf3n:",e)}})},3e3)}formatTime(e){if(!e)return"0:00";const r=Math.floor(e/1e3),i=r%60;return`${Math.floor(r/60)}:${i<10?"0":""}${i}`}static \u0275fac=function(r){return new(r||t)(T(wp),T(ps),T(MO))};static \u0275cmp=Ht({type:t,selectors:[["app-home"]],standalone:!0,features:[Yt],decls:16,vars:5,consts:[[1,"home-container"],[1,"next-song-section","compact-card","fade-in"],[1,"card-header"],[1,"fas","fa-forward","text-primary"],[1,"header-title"],["class","next-song-content",4,"ngIf","ngIfElse"],["noNextSong",""],["noSongPlaying",""],["class","now-playing-section compact-card fade-in",4,"ngIf","ngIfElse"],[1,"voting-section"],[4,"ngIf"],[3,"voteCasted"],[1,"next-song-content"],[1,"album-art-mini"],["alt","Car\xe1tula",1,"album-art-img",3,"src"],[1,"song-info-mini"],[1,"song-title-mini"],[1,"song-artist-mini"],[1,"no-next-song-content"],[1,"text-muted","small","mb-0"],[1,"no-song-playing","compact-card","fade-in"],[1,"card-body"],[1,"fas","fa-music-slash","text-muted"],[1,"text-muted"],[1,"now-playing-section","compact-card","fade-in"],[1,"album-art-container"],[1,"album-art",3,"src","alt"],[1,"song-info-container"],[1,"song-details"],[1,"song-title"],[1,"song-artist"],["class","text-info fst-italic mb-0 mt-1",4,"ngIf"],[1,"progress-container"],[1,"time-display"],[1,"progress"],[1,"progress-bar"],[1,"update-button-container"],["title","Actualizar",1,"btn","btn-icon",3,"disabled","click"],[1,"fas","fa-sync-alt"],[1,"text-info","fst-italic","mb-0","mt-1"],[1,"fas","fa-heart","me-1"]],template:function(r,o){if(1&r&&(h(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),h(4,"span",4),_(5,"Siguiente en la cola"),f()(),N(6,Mj,8,3,"div",5),N(7,Oj,3,0,"ng-template",null,6,jo),f(),N(9,Pj,5,0,"ng-template",null,7,jo),N(11,Dj,20,12,"div",8),h(12,"div",9),N(13,Ej,1,0,"app-voting",10),f(),h(14,"app-search",11),k("voteCasted",function(){return o.onVoteCasted()}),f(),b(15,"app-voting-list"),f()),2&r){const i=pr(8),s=pr(10);p(6),O("ngIf",o.nextSong)("ngIfElse",i),p(5),O("ngIf",o.adminCurrentlyPlaying)("ngIfElse",s),p(2),O("ngIf",o.adminCurrentlyPlaying)}},dependencies:[Pn,On,ij,mj,wj],styles:['@charset "UTF-8";.home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.compact-card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--card-bg);border:1px solid var(--hover-bg);border-radius:12px;overflow:hidden;padding:.2rem;gap:1rem;transition:border-color .3s ease}.compact-card[_ngcontent-%COMP%]:hover{border-color:var(--primary-color)}.album-art-container[_ngcontent-%COMP%]{flex-shrink:0}.album-art[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:8px;box-shadow:0 4px 15px #00000080}.song-info-container[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:center;gap:.5rem;min-width:0}.song-details[_ngcontent-%COMP%]   .song-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--text-primary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.song-details[_ngcontent-%COMP%]   .song-artist[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.update-button-container[_ngcontent-%COMP%]{flex-shrink:0;margin-left:auto}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);font-size:1.2rem;cursor:pointer;padding:.5rem;border-radius:50%}.btn-icon[_ngcontent-%COMP%]:hover{color:var(--text-primary);background-color:var(--hover-bg)}.btn-icon[_ngcontent-%COMP%]:disabled{color:var(--text-tertiary);cursor:not-allowed}.progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;width:100%}.progress-container[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);min-width:40px;text-align:center}.progress-container[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{flex-grow:1;height:6px;background-color:#444;border-radius:3px;overflow:hidden}.progress-container[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background-color:var(--primary-color);height:100%;transition:width .25s linear}.no-song-playing[_ngcontent-%COMP%]{justify-content:center}.no-song-playing[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.no-song-playing[_ngcontent-%COMP%]   .fa-music-slash[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--text-tertiary)}.no-song-playing[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-weight:500}@media (max-width: 768px){.compact-card[_ngcontent-%COMP%]{padding:.75rem;gap:.75rem}.album-art[_ngcontent-%COMP%]{width:60px;height:60px}.song-details[_ngcontent-%COMP%]   .song-title[_ngcontent-%COMP%]{font-size:1rem}.song-details[_ngcontent-%COMP%]   .song-artist[_ngcontent-%COMP%]{font-size:.8rem}.progress-container[_ngcontent-%COMP%]{max-width:100%}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out;box-shadow:0 4px 15px #035f0b93}.fade-in[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #00000080}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.voting-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin:1.5rem 0}.next-song-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:1rem;gap:.5rem;background-color:#ffffff0d;border:1px solid rgba(255,255,255,.1)}.next-song-section[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;width:100%;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:.5rem}.next-song-section[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px}.next-song-section[_ngcontent-%COMP%]   .next-song-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;width:100%}.next-song-section[_ngcontent-%COMP%]   .album-art-mini[_ngcontent-%COMP%]{flex-shrink:0}.next-song-section[_ngcontent-%COMP%]   .album-art-mini[_ngcontent-%COMP%]   .album-art-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:6px;object-fit:cover}.next-song-section[_ngcontent-%COMP%]   .song-info-mini[_ngcontent-%COMP%]{flex-grow:1;min-width:0}.next-song-section[_ngcontent-%COMP%]   .song-info-mini[_ngcontent-%COMP%]   .song-title-mini[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.next-song-section[_ngcontent-%COMP%]   .song-info-mini[_ngcontent-%COMP%]   .song-artist-mini[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}']})}return t})();const Sj=function(t,n,e,r,o,i){return{width:t,height:n,left:e,top:r,"animation-duration":o,"animation-delay":i}};function Ij(t,n){if(1&t&&b(0,"div",8),2&t){const e=n.$implicit;O("ngStyle",jC(1,Sj,e.width,e.height,e.left,e.top,e.animationDuration,e.animationDelay))}}function kj(t,n){if(1&t&&(h(0,"div",19),_(1),f()),2&t){const e=P(2);p(1),te(" ",e.errorMessage," ")}}function Tj(t,n){1&t&&b(0,"i",20)}function Aj(t,n){if(1&t){const e=_e();h(0,"form",9),k("ngSubmit",function(){return H(e),z(P().login())}),h(1,"div",10)(2,"input",11),k("ngModelChange",function(o){return H(e),z(P().email=o)}),f(),h(3,"label",12),_(4,"Email"),f()(),h(5,"div",10)(6,"input",13),k("ngModelChange",function(o){return H(e),z(P().password=o)}),f(),h(7,"label",14),_(8,"Contrase\xf1a"),f()(),N(9,kj,2,1,"div",15),h(10,"button",16)(11,"span",17),_(12),f(),N(13,Tj,1,0,"i",18),f()()}if(2&t){const e=P();p(2),O("ngModel",e.email),p(4),O("ngModel",e.password),p(3),O("ngIf",e.errorMessage),p(1),O("disabled",e.isLoading),p(2),K(e.isLoading?"Verificando...":"Ingresar"),p(1),O("ngIf",e.isLoading)}}function Rj(t,n){1&t&&(h(0,"div",21)(1,"p"),_(2,"Sesi\xf3n iniciada. Redirigiendo al panel de administrador..."),f(),h(3,"a",22),_(4,"Ir al Panel"),f()())}let Nj=(()=>{class t{authService;router;email="";password="";errorMessage="";isLoading=!1;particles=[];constructor(e,r){this.authService=e,this.router=r}ngOnInit(){document.body.classList.add("login-page-active"),this.createParticles()}ngOnDestroy(){document.body.classList.remove("login-page-active")}createParticles(){for(let r=0;r<15;r++)this.particles.push(this.generateParticle())}generateParticle(){const e=20*Math.random()+20,r=90*Math.random()+15,o=7*Math.random();return{width:`${e}px`,height:`${e}px`,left:100*Math.random()+"%",animationDuration:`${r}s`,animationDelay:`${o}s`}}login(){this.email&&this.password?(this.isLoading=!0,this.errorMessage="",this.authService.login(this.email,this.password).subscribe({next:()=>{this.isLoading=!1,setTimeout(()=>{this.router.navigate(["/admin-panel"])},1500)},error:e=>{this.isLoading=!1,this.errorMessage=this.getFirebaseErrorMessage(e)}})):this.errorMessage="Por favor, completa ambos campos."}getFirebaseErrorMessage(e){switch(e.code){case"auth/invalid-email":return"El formato del correo electr\xf3nico no es v\xe1lido.";case"auth/user-disabled":return"Este usuario ha sido deshabilitado.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electr\xf3nico o contrase\xf1a incorrectos.";case"auth/too-many-requests":return"Acceso bloqueado por demasiados intentos. Intenta de nuevo m\xe1s tarde.";default:return console.error("Error de login no manejado:",e),"Error al iniciar sesi\xf3n. Verifica tus credenciales e intenta de nuevo."}}static \u0275fac=function(r){return new(r||t)(T(Yo),T(Xt))};static \u0275cmp=Ht({type:t,selectors:[["app-admin-login"]],standalone:!0,features:[Yt],decls:9,vars:3,consts:[[1,"admin-login-wrapper"],[1,"particles"],["class","particle",3,"ngStyle",4,"ngFor","ngForOf"],[1,"login-container"],[1,"glassmorphism-form"],[1,"form-title"],[3,"ngSubmit",4,"ngIf"],["class","logged-in-message",4,"ngIf"],[1,"particle",3,"ngStyle"],[3,"ngSubmit"],[1,"input-group"],["type","email","id","email","name","email","required","","placeholder"," ",1,"form-input",3,"ngModel","ngModelChange"],["for","email",1,"form-label"],["type","password","id","password","name","password","required","","placeholder"," ",1,"form-input",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"button-text"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"error-message"],[1,"fas","fa-spinner","fa-spin"],[1,"logged-in-message"],["routerLink","/admin-panel",1,"admin-link"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"div",1),N(2,Ij,1,8,"div",2),f(),h(3,"div",3)(4,"div",4)(5,"h2",5),_(6,"Acceso Administrador"),f(),N(7,Aj,14,6,"form",6),N(8,Rj,5,0,"div",7),f()()()),2&r&&(p(2),O("ngForOf",o.particles),p(5),O("ngIf",!o.authService.isLoggedIn()),p(1),O("ngIf",o.authService.isLoggedIn()))},dependencies:[Pn,vr,On,Cw,Jo,Z1,wr,vo,V1,Bu,Kr,$u,Za,Go],styles:['@charset "UTF-8";[_nghost-%COMP%]{--login-bg: #0a0a0a;--glass-bg: rgba(18, 18, 18, .85);--primary-color: #1DB954;--text-primary: #FFFFFF;--text-secondary: #B3B3B3;--hover-bg: rgba(255, 255, 255, .05)}.admin-login-wrapper[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--login-bg);position:relative;overflow:hidden;padding:2rem}.admin-login-wrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 10% 20%,rgba(29,185,84,.15) 0%,transparent 25%),radial-gradient(circle at 90% 80%,rgba(141,103,171,.15) 0%,transparent 25%),radial-gradient(circle at 50% 50%,rgba(29,185,84,.1) 0%,transparent 40%);z-index:0;pointer-events:none}.particles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}.particle[_ngcontent-%COMP%]{position:absolute;background:rgba(29,185,84,.3);border-radius:50%;animation:_ngcontent-%COMP%_float 6s infinite ease-in-out}.particle[_ngcontent-%COMP%]:nth-child(odd){background:rgba(141,103,171,.3);animation-duration:8s;animation-delay:1s}.particle[_ngcontent-%COMP%]:nth-child(3n){background:rgba(45,70,185,.2);animation-duration:10s;animation-delay:2s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) translate(0);opacity:.7}25%{transform:translateY(-20px) translate(10px);opacity:.4}50%{transform:translateY(-35px) translate(-15px);opacity:.6}75%{transform:translateY(-15px) translate(-20px);opacity:.5}}.login-container[_ngcontent-%COMP%]{position:relative;z-index:2;width:100%;max-width:450px}.glassmorphism-form[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2.5rem;box-shadow:0 15px 35px #00000080,0 0 0 1px #ffffff0d;transition:all .4s ease}.glassmorphism-form[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 45px #1db95433,0 0 0 1px #1db9541a}.form-title[_ngcontent-%COMP%]{color:var(--text-primary);text-align:center;margin-bottom:2rem;font-weight:800;font-size:1.8rem;letter-spacing:-.5px;position:relative}.form-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:50px;height:3px;background:var(--primary-color);border-radius:2px}.input-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1.8rem}.form-input[_ngcontent-%COMP%]{width:100%;background:rgba(42,42,42,.7);border:1px solid rgba(62,62,62,.5);color:var(--text-primary);border-radius:12px;padding:1rem 1.2rem;font-size:1rem;transition:all .3s ease}.form-input[_ngcontent-%COMP%]:focus{outline:none;background:rgba(42,42,42,.9);border-color:var(--primary-color);box-shadow:0 0 0 3px #1db95433}.form-input[_ngcontent-%COMP%]:focus + .form-label[_ngcontent-%COMP%], .form-input[_ngcontent-%COMP%]:not(:placeholder-shown) + .form-label[_ngcontent-%COMP%]{top:-12px;left:10px;font-size:.8rem;background:var(--glass-bg);padding:0 8px;color:var(--primary-color)}.form-label[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1.2rem;color:var(--text-secondary);font-size:1rem;pointer-events:none;transition:all .3s ease}.error-message[_ngcontent-%COMP%]{background:rgba(226,33,52,.15);color:#e22134;border:1px solid rgba(226,33,52,.2);border-radius:8px;padding:.8rem;margin-bottom:1.5rem;font-size:.9rem;text-align:center}.login-button[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,var(--primary-color) 0%,#1aa34a 100%);color:var(--text-primary);border:none;border-radius:50px;padding:1rem;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;box-shadow:0 5px 15px #1db9544d}.login-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:all .5s ease}.login-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 20px #1db95466}.login-button[_ngcontent-%COMP%]:hover:before{left:100%}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;transform:none;box-shadow:none;cursor:not-allowed}.button-text[_ngcontent-%COMP%]{position:relative;z-index:1}.logged-in-message[_ngcontent-%COMP%]{text-align:center;color:var(--text-primary)}.logged-in-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.1rem}.admin-link[_ngcontent-%COMP%]{display:inline-block;background:var(--primary-color);color:var(--text-primary);text-decoration:none;padding:.8rem 1.8rem;border-radius:50px;font-weight:700;transition:all .3s ease;box-shadow:0 4px 15px #1db9544d}.admin-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1db95466}@media (max-width: 576px){.admin-login-wrapper[_ngcontent-%COMP%]{padding:1rem}.glassmorphism-form[_ngcontent-%COMP%]{padding:2rem 1.5rem}.form-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})}return t})();function PO(t,n,e,r,o,i,s){try{var a=t[i](s),c=a.value}catch(l){return void e(l)}a.done?n(c):Promise.resolve(c).then(r,o)}function C(t){return function(){var n=this,e=arguments;return new Promise(function(r,o){var i=t.apply(n,e);function s(c){PO(i,r,o,s,a,"next",c)}function a(c){PO(i,r,o,s,a,"throw",c)}s(void 0)})}}let xO=(()=>{class t{http;authService;apiUrl=Vn_apiUrl;constructor(e,r){this.http=e,this.authService=r}getSchedules(){return this.http.get(`${this.apiUrl}/api/schedules`)}updateSchedules(e){const r=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/api/schedules`,e,{headers:r})}static \u0275fac=function(r){return new(r||t)(Q(Zn),Q(Yo))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fj(t,n){if(1&t&&(h(0,"div",33),b(1,"i",34),_(2),f()),2&t){const e=P();p(2),te(" ",e.successMessage," ")}}function Lj(t,n){if(1&t&&(h(0,"div",35),b(1,"i",36),_(2),f()),2&t){const e=P();p(2),te(" ",e.errorMessage," ")}}function jj(t,n){if(1&t&&(h(0,"div",37),b(1,"i",38),_(2),f()),2&t){const e=P();p(2),te(" ",e.actionInProgress," ")}}function Vj(t,n){if(1&t){const e=_e();h(0,"div",39),b(1,"div",40),h(2,"span",41),_(3),f(),h(4,"button",42),k("click",function(){H(e);const o=P();return z(o.spotifyStatus.authenticated?o.disconnectSpotify():o.connectSpotify())}),_(5),f()()}if(2&t){const e=P();p(1),ie("connected",e.spotifyStatus.authenticated&&e.spotifyStatus.token_valid)("disconnected",!e.spotifyStatus.authenticated||!e.spotifyStatus.token_valid),p(2),te(" ",e.spotifyStatus.authenticated&&e.spotifyStatus.token_valid?"Spotify Conectado":"Spotify Desconectado"," "),p(2),te(" ",e.spotifyStatus.authenticated?"Desconectar":"Conectar"," ")}}function $j(t,n){if(1&t){const e=_e();h(0,"div",43)(1,"div",44)(2,"div",45)(3,"div",46),b(4,"i",47),f(),h(5,"div",48)(6,"h3"),_(7),f(),h(8,"p"),_(9,"Canciones en ranking"),f()()(),h(10,"div",45)(11,"div",46),b(12,"i",49),f(),h(13,"div",48)(14,"h3"),_(15),f(),h(16,"p"),_(17,"Total de votos"),f()()(),h(18,"div",45)(19,"div",46),b(20,"i",50),f(),h(21,"div",48)(22,"h3"),_(23),f(),h(24,"p"),_(25,"Votantes \xfanicos"),f()()(),h(26,"div",45)(27,"div",46),b(28,"i",51),f(),h(29,"div",48)(30,"h3"),_(31),f(),h(32,"p"),_(33,"En cola"),f()()()(),h(34,"div",52)(35,"button",53),k("click",function(){return H(e),z(P().loadSongs())}),b(36,"i",54),_(37,"Actualizar Ranking "),f(),h(38,"button",55),k("click",function(){return H(e),z(P().toggleQueue())}),b(39,"i",56),_(40,"Ver Cola "),f(),h(41,"button",57),k("click",function(){return H(e),z(P().getAdminCurrentlyPlaying())}),b(42,"i",58),_(43,"Actualizar Reproducci\xf3n "),f()()()}if(2&t){const e=P();p(7),K(e.songs.length),p(8),K(e.totalVotes),p(8),K(e.uniqueVoters),p(8),K(e.queue.length)}}function Uj(t,n){if(1&t&&(h(0,"p",88),b(1,"i",89),_(2),f()),2&t){const e=P(3);p(2),te("",e.adminCurrentlyPlaying.dedication," ")}}function Bj(t,n){if(1&t){const e=_e();h(0,"div",64)(1,"div",65)(2,"label",66),_(3,"Auto-hist\xf3rico"),f(),h(4,"label",67)(5,"input",68),k("ngModelChange",function(o){return H(e),z(P(2).autoAddToHistory=o)})("change",function(){return H(e),z(P(2).toggleAutoAdd())}),f(),b(6,"span",69),f()(),h(7,"div",70),b(8,"img",71),h(9,"div",72)(10,"h3"),_(11),f(),h(12,"p",73),_(13),f(),N(14,Uj,3,1,"p",74),h(15,"div",75)(16,"div",76),b(17,"div",77),f(),h(18,"div",78)(19,"span"),_(20),f(),h(21,"span"),_(22),f()()()(),h(23,"div",79)(24,"button",80),k("click",function(){return H(e),z(P(2).checkPlayingSong())}),b(25,"i",81),f(),h(26,"button",82),k("click",function(){return H(e),z(P(2).checkAddToHistory())}),b(27,"i",51),f()()(),h(28,"div",83)(29,"button",84),k("click",function(){return H(e),z(P(2).previousTrack())}),b(30,"i",85),f(),h(31,"button",86),k("click",function(){return H(e),z(P(2).togglePlayback())}),b(32,"i",31),f(),h(33,"button",84),k("click",function(){return H(e),z(P(2).nextTrack())}),b(34,"i",87),f()()()}if(2&t){const e=P(2);p(5),O("ngModel",e.autoAddToHistory),p(3),O("src",e.adminCurrentlyPlaying.image,ln),p(3),K(e.adminCurrentlyPlaying.name),p(2),K(e.adminCurrentlyPlaying.artists.join(", ")),p(1),O("ngIf",e.adminCurrentlyPlaying.dedication),p(3),_a("width",e.adminCurrentlyPlaying.progress_ms/e.adminCurrentlyPlaying.duration_ms*100,"%"),p(3),K(e.formatTime(e.adminCurrentlyPlaying.progress_ms)),p(2),K(e.formatTime(e.adminCurrentlyPlaying.duration_ms)),p(4),O("disabled",!e.adminCurrentlyPlaying||e.actionInProgress),p(6),ie("fa-play",!e.isPlaying)("fa-pause",e.isPlaying)}}function Hj(t,n){if(1&t){const e=_e();h(0,"button",93),k("click",function(){return H(e),z(P(3).connectSpotify())}),_(1," Conectar Spotify "),f()}}function zj(t,n){if(1&t&&(h(0,"div",90),b(1,"i",91),h(2,"p"),_(3,"No se est\xe1 reproduciendo ninguna canci\xf3n"),f(),N(4,Hj,2,0,"button",92),f()),2&t){const e=P(2);p(4),O("ngIf",!(null!=e.spotifyStatus&&e.spotifyStatus.authenticated))}}function qj(t,n){if(1&t){const e=_e();h(0,"div",43)(1,"div",59)(2,"h2"),_(3,"Reproduciendo Ahora"),f(),h(4,"button",60),k("click",function(){return H(e),z(P().getAdminCurrentlyPlaying())}),b(5,"i",61),f()(),N(6,Bj,35,14,"div",62),N(7,zj,5,1,"ng-template",null,63,jo),f()}if(2&t){const e=pr(8),r=P();p(5),ie("fa-spin",r.isLoadingCurrent),p(1),O("ngIf",r.adminCurrentlyPlaying)("ngIfElse",e)}}function Gj(t,n){if(1&t){const e=_e();h(0,"div",99)(1,"span",100),_(2),f(),b(3,"img",101),h(4,"div",102)(5,"h4"),_(6),f(),h(7,"p"),_(8),f()(),h(9,"div",103)(10,"button",104),k("click",function(){const i=H(e).$implicit;return z(P(3).playTrack(i.uri))}),b(11,"i",105),f()()()}if(2&t){const e=n.$implicit,r=n.index;p(2),K(r+1),p(1),O("src",(null==e.album||null==e.album.images[0]?null:e.album.images[0].url)||"assets/default-song.png",ln),p(3),K(e.name),p(2),K(null==e.artists[0]?null:e.artists[0].name)}}function Wj(t,n){if(1&t&&(h(0,"div",97),N(1,Gj,12,4,"div",98),f()),2&t){const e=P(2);p(1),O("ngForOf",e.queue)}}function Kj(t,n){1&t&&(h(0,"div",90),b(1,"i",106),h(2,"p"),_(3,"No hay canciones en la cola de reproducci\xf3n"),f()())}function Jj(t,n){if(1&t){const e=_e();h(0,"div",43)(1,"div",59)(2,"h2"),_(3,"Cola de Reproducci\xf3n"),f(),h(4,"button",94),k("click",function(){return H(e),z(P().loadQueue())}),b(5,"i",61),f()(),N(6,Wj,2,1,"div",95),N(7,Kj,4,0,"ng-template",null,96,jo),f()}if(2&t){const e=pr(8),r=P();p(4),O("disabled",r.isLoadingQueue),p(1),ie("fa-spin",r.isLoadingQueue),p(1),O("ngIf",r.queue.length>0)("ngIfElse",e)}}function Yj(t,n){if(1&t&&(h(0,"small",131),b(1,"i",89),_(2),f()),2&t){const e=P().$implicit;p(2),te("",e.dedication," ")}}function Qj(t,n){if(1&t){const e=_e();h(0,"div",114)(1,"div",115),_(2),f(),b(3,"img",116),h(4,"div",117)(5,"h4"),_(6),f(),h(7,"p"),_(8),f(),N(9,Yj,3,1,"small",118),h(10,"div",119)(11,"span",120),b(12,"i",49),_(13),f(),h(14,"span",121),b(15,"i",122),_(16),f(),h(17,"span",123),_(18),f()()(),h(19,"div",124)(20,"button",125),k("click",function(){const i=H(e).$implicit;return z(P(3).adminVote(i,!1))}),b(21,"i",49),f(),h(22,"button",126),k("click",function(){const i=H(e).$implicit;return z(P(3).adminVote(i,!0))}),b(23,"i",122),f(),h(24,"button",127),k("click",function(){const i=H(e).$implicit;return z(P(3).addToQueueFromRanking(i.id))}),b(25,"i",128),f(),h(26,"button",129),k("click",function(){const i=H(e).$implicit;return z(P(3).deleteSong(i.id))}),b(27,"i",130),f()()()}if(2&t){const e=n.$implicit,r=n.index,o=P(3);p(2),K(r+1),p(1),O("src",e.image,ln),p(3),K(e.name),p(2),K(e.artists.join(", ")),p(1),O("ngIf",e.dedication),p(4),te(" ",e.votes||0,""),p(3),te(" ",e.dislikes||0,""),p(2),K(o.formatTimeAgo(e.createdat)),p(2),ie("active",o.hasAdminLiked(e.id)),p(2),ie("active",o.hasAdminDisliked(e.id))}}function Zj(t,n){if(1&t&&(h(0,"div",112),N(1,Qj,28,12,"div",113),f()),2&t){const e=P(2);p(1),O("ngForOf",e.songs)}}function Xj(t,n){1&t&&(h(0,"div",90),b(1,"i",132),h(2,"p"),_(3,"No hay canciones en el ranking"),f()())}function eV(t,n){if(1&t){const e=_e();h(0,"div",43)(1,"div",59)(2,"h2"),_(3,"Ranking de Canciones"),f(),h(4,"div",107)(5,"button",94),k("click",function(){return H(e),z(P().loadSongs())}),b(6,"i",61),f(),h(7,"button",108),k("click",function(){return H(e),z(P().deleteAllVotes())}),b(8,"i",109),_(9,"Eliminar Todos "),f()()(),N(10,Zj,2,1,"div",110),N(11,Xj,4,0,"ng-template",null,111,jo),f()}if(2&t){const e=pr(12),r=P();p(5),O("disabled",r.isLoading),p(1),ie("fa-spin",r.isLoading),p(4),O("ngIf",r.songs.length>0)("ngIfElse",e)}}const DO=function(){return["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes"]};function tV(t,n){if(1&t&&(h(0,"div",136)(1,"h4"),_(2),f(),h(3,"div",137)(4,"div",138)(5,"span",139),_(6,"Almuerzo:"),f(),h(7,"span",140),_(8),f()(),h(9,"div",138)(10,"span",139),_(11,"Cena:"),f(),h(12,"span",140),_(13),f()()(),h(14,"div",141)(15,"span",142),_(16),f()()()),2&t){const e=n.$implicit,r=P(3);p(2),K(Lo(10,DO)[e.day_of_week]),p(6),Vr("",r.convertToAmPm(e.lunch_start)||"-"," - ",r.convertToAmPm(e.lunch_end)||"-",""),p(5),Vr("",r.convertToAmPm(e.dinner_start)||"-"," - ",r.convertToAmPm(e.dinner_end)||"-",""),p(2),ie("active",e.is_active)("inactive",!e.is_active),p(1),te(" ",e.is_active?"Activo":"Inactivo"," ")}}function nV(t,n){if(1&t&&(h(0,"div"),N(1,tV,17,11,"div",135),f()),2&t){const e=P(2);p(1),O("ngForOf",e.schedules)}}function rV(t,n){if(1&t){const e=_e();h(0,"div",146)(1,"h4"),_(2),f(),h(3,"div",147)(4,"div",148)(5,"label"),_(6,"Almuerzo Inicio"),f(),h(7,"input",149),k("ngModelChange",function(o){return z(H(e).$implicit.lunch_start=o)}),f()(),h(8,"div",148)(9,"label"),_(10,"Almuerzo Fin"),f(),h(11,"input",149),k("ngModelChange",function(o){return z(H(e).$implicit.lunch_end=o)}),f()(),h(12,"div",148)(13,"label"),_(14,"Cena Inicio"),f(),h(15,"input",149),k("ngModelChange",function(o){return z(H(e).$implicit.dinner_start=o)}),f()(),h(16,"div",148)(17,"label"),_(18,"Cena Fin"),f(),h(19,"input",149),k("ngModelChange",function(o){return z(H(e).$implicit.dinner_end=o)}),f()(),h(20,"div",150)(21,"label"),_(22,"Activo"),f(),h(23,"label",67)(24,"input",151),k("ngModelChange",function(o){return z(H(e).$implicit.is_active=o)}),f(),b(25,"span",152),f()()()()}if(2&t){const e=n.$implicit;p(2),K(Lo(6,DO)[e.day_of_week]),p(5),O("ngModel",e.lunch_start),p(4),O("ngModel",e.lunch_end),p(4),O("ngModel",e.dinner_start),p(4),O("ngModel",e.dinner_end),p(5),O("ngModel",e.is_active)}}function oV(t,n){if(1&t){const e=_e();h(0,"div"),N(1,rV,26,7,"div",143),h(2,"button",144),k("click",function(){return H(e),z(P(2).saveSchedules())}),b(3,"i",145),_(4,"Guardar Horarios "),f()()}if(2&t){const e=P(2);p(1),O("ngForOf",e.schedules)}}function iV(t,n){if(1&t){const e=_e();h(0,"div",43)(1,"div",59)(2,"h2"),_(3,"Horarios de M\xfasica"),f(),h(4,"button",27),k("click",function(){H(e);const o=P();return z(o.isEditingSchedules=!o.isEditingSchedules)}),_(5),f()(),h(6,"div",133),N(7,nV,2,1,"div",134),N(8,oV,5,1,"div",134),f()()}if(2&t){const e=P();p(5),te(" ",e.isEditingSchedules?"Cancelar":"Editar"," "),p(2),O("ngIf",!e.isEditingSchedules),p(1),O("ngIf",e.isEditingSchedules)}}function sV(t,n){if(1&t){const e=_e();h(0,"div",160),b(1,"img",161),h(2,"div",162)(3,"h4"),_(4),f(),h(5,"p"),_(6),f(),h(7,"span",163),_(8),f()(),h(9,"div",164)(10,"button",165),k("click",function(){const i=H(e).$implicit;return z(P(3).voteFromSearch(i,!1))}),b(11,"i",49),f(),h(12,"button",166),k("click",function(){const i=H(e).$implicit;return z(P(3).voteFromSearch(i,!0))}),b(13,"i",122),f(),h(14,"button",127),k("click",function(){const i=H(e).$implicit;return z(P(3).addToQueueFromSearch(i.uri))}),b(15,"i",128),f(),h(16,"button",167),k("click",function(){const i=H(e).$implicit;return z(P(3).playNowFromSearch(i.uri))}),b(17,"i",105),f()()()}if(2&t){const e=n.$implicit;p(1),O("src",e.image,ln),p(3),K(e.name),p(2),K(null==e.artists[0]?null:e.artists[0].name),p(2),K(e.album.name)}}function aV(t,n){if(1&t&&(h(0,"div",158),N(1,sV,18,4,"div",159),f()),2&t){const e=P(2);p(1),O("ngForOf",e.searchResults)}}function cV(t,n){if(1&t){const e=_e();h(0,"div",153)(1,"div",154)(2,"input",155),k("ngModelChange",function(o){return H(e),z(P().searchQuery=o)})("keyup.enter",function(){return H(e),z(P().searchSpotify())}),f(),h(3,"button",156),k("click",function(){return H(e),z(P().searchSpotify())}),b(4,"i",81),f()(),N(5,aV,2,1,"div",157),f()}if(2&t){const e=P();p(2),O("ngModel",e.searchQuery),p(3),O("ngIf",e.searchResults.length>0)}}function lV(t,n){if(1&t&&(h(0,"small",131),b(1,"i",89),_(2),f()),2&t){const e=P().$implicit;p(2),te("",e.dedication," ")}}function uV(t,n){if(1&t){const e=_e();h(0,"div",173),b(1,"img",174),h(2,"div",175)(3,"h5"),_(4),f(),h(5,"p"),_(6),f(),N(7,lV,3,1,"small",118),h(8,"div",176)(9,"span",120),b(10,"i",49),_(11),f(),h(12,"span",121),b(13,"i",122),_(14),f()()(),h(15,"div",177)(16,"button",125),k("click",function(){const i=H(e).$implicit;return z(P(3).adminVote(i,!1))}),b(17,"i",49),f(),h(18,"button",126),k("click",function(){const i=H(e).$implicit;return z(P(3).adminVote(i,!0))}),b(19,"i",122),f(),h(20,"button",127),k("click",function(){const i=H(e).$implicit;return z(P(3).addToQueueFromRecent(i))}),b(21,"i",128),f()()()}if(2&t){const e=n.$implicit,r=P(3);p(1),O("src",e.image,ln),p(3),K(e.name),p(2),K(e.artists.join(", ")),p(1),O("ngIf",e.dedication),p(4),te(" ",e.votes||0,""),p(3),te(" ",e.dislikes||0,""),p(2),ie("active",r.hasAdminLiked(e.id)),p(2),ie("active",r.hasAdminDisliked(e.id))}}function dV(t,n){if(1&t&&(h(0,"div",171),N(1,uV,22,10,"div",172),f()),2&t){const e=P(2);p(1),O("ngForOf",e.recentlyAddedSongs)}}function hV(t,n){1&t&&(h(0,"div",90),b(1,"i",178),h(2,"p"),_(3,"No hay canciones recientes"),f()())}function fV(t,n){if(1&t&&(h(0,"div",168),N(1,dV,2,1,"div",169),N(2,hV,4,0,"ng-template",null,170,jo),f()),2&t){const e=pr(3),r=P();p(1),O("ngIf",r.recentlyAddedSongs.length>0)("ngIfElse",e)}}let gV=(()=>{class t{http;spotifyNowPlaying;votingService;spotifyService;scheduleService;authService;router;queueService;audioService;activeSection="dashboard";showSearch=!1;showRecentlyAdded=!0;isEditingSchedules=!1;songs=[];queue=[];recentlyAddedSongs=[];searchResults=[];schedules=[];spotifyStatus=null;adminCurrentlyPlaying=null;autoAddToHistory=!1;lastAddedSongId=null;isLoading=!1;isLoadingQueue=!1;isLoadingCurrent=!1;isPlaying=!1;searchQuery="";adminVotes={};totalVotes=0;uniqueVoters=0;successMessage="";errorMessage="";actionInProgress="";refreshTimer;currentSongTimer;recentlyAddedTimer;apiUrl=Vn_apiUrl;constructor(e,r,o,i,s,a,c,l,u){this.http=e,this.spotifyNowPlaying=r,this.votingService=o,this.spotifyService=i,this.scheduleService=s,this.authService=a,this.router=c,this.queueService=l,this.audioService=u}ngOnInit(){const e=localStorage.getItem("autoAddToHistory");this.autoAddToHistory="true"===e,this.loadInitialData(),this.setupAutoRefresh(),this.calculateStats()}calculateStats(){this.totalVotes=this.songs.reduce((e,r)=>e+(r.votes||0),0),this.uniqueVoters=Math.floor(.7*this.totalVotes)}showMessage(e,r=!0,o=3e3){r?this.successMessage=e:this.errorMessage=e,setTimeout(()=>{r?this.successMessage="":this.errorMessage=""},o)}ngOnDestroy(){this.refreshTimer&&clearInterval(this.refreshTimer),this.currentSongTimer&&clearInterval(this.currentSongTimer),this.recentlyAddedTimer&&clearInterval(this.recentlyAddedTimer)}loadInitialData(){this.loadSongs(),this.loadQueue(),this.getSpotifyStatus(),this.getAdminCurrentlyPlaying(),this.loadSchedules()}setupAutoRefresh(){this.refreshTimer=setInterval(()=>{this.loadSongs(),this.loadQueue(),this.getSpotifyStatus()},3e4),this.currentSongTimer=setInterval(()=>{this.getAdminCurrentlyPlaying()},5e3),this.recentlyAddedTimer=setInterval(()=>{this.filterRecentlyAdded()},15e3)}setActiveSection(e){this.activeSection=e,"queue"===e?this.loadQueue():"playing"===e?this.getAdminCurrentlyPlaying():"ranking"===e?this.loadSongs():"schedules"===e&&this.loadSchedules()}toggleSearch(){this.showSearch=!this.showSearch,this.showSearch&&(this.activeSection="dashboard")}toggleRecentlyAdded(){this.showRecentlyAdded=!this.showRecentlyAdded}loadSongs(){this.isLoading=!0,this.votingService.forceRefresh().subscribe({next:e=>{this.songs=e,this.filterRecentlyAdded(),this.calculateVotingStats(),this.isLoading=!1,this.showMessage("Ranking actualizado correctamente")},error:e=>{console.error("Error loading songs:",e),this.isLoading=!1,this.showMessage("Error al cargar las canciones",!1)}})}calculateVotingStats(){this.totalVotes=this.songs.reduce((e,r)=>e+(r.votes||0),0),this.uniqueVoters=Math.floor(.7*this.totalVotes)}filterRecentlyAdded(){const e=new Date;e.setHours(e.getHours()-6),this.recentlyAddedSongs=this.songs.filter(r=>new Date(r.createdat)>e).sort((r,o)=>new Date(o.createdat).getTime()-new Date(r.createdat).getTime()).slice(0,15)}addToQueueFromRecent(e){this.addToQueueFromSearch(`spotify:track:${e.id}`)}loadQueue(){this.isLoadingQueue=!0,this.queueService.getQueue().subscribe({next:e=>{this.queue=e.queue||[],this.isLoadingQueue=!1},error:e=>{console.error("Error loading queue:",e),this.isLoadingQueue=!1,this.showMessage("Error al cargar la cola de reproducci\xf3n",!1)}})}getSpotifyStatus(){this.spotifyNowPlaying.getAdminSpotifyStatus().subscribe({next:e=>{this.spotifyStatus=e},error:e=>{console.error("Error getting Spotify status:",e)}})}getAdminCurrentlyPlaying(){this.isLoadingCurrent=!0,this.spotifyNowPlaying.getAdminCurrentlyPlaying().subscribe({next:e=>{e&&e.is_playing?(this.adminCurrentlyPlaying=e,this.isPlaying=e.is_playing):(this.adminCurrentlyPlaying=null,this.isPlaying=!1),this.isLoadingCurrent=!1,this.checkAutoAdd()},error:e=>{console.error("Error getting currently playing:",e),this.adminCurrentlyPlaying=null,this.isLoadingCurrent=!1}})}loadSchedules(){this.scheduleService.getSchedules().subscribe({next:e=>{this.schedules=e},error:e=>{console.error("Error loading schedules:",e)}})}saveSchedules(){this.scheduleService.updateSchedules(this.schedules).subscribe({next:()=>{this.isEditingSchedules=!1},error:e=>{console.error("Error saving schedules:",e)}})}connectSpotify(){this.spotifyNowPlaying.startAdminSpotifyAuth().subscribe({next:e=>{e.authUrl&&(window.location.href=e.authUrl)},error:e=>{console.error("Error connecting to Spotify:",e)}})}disconnectSpotify(){this.spotifyNowPlaying.disconnectAdminSpotify().subscribe({next:()=>{this.getSpotifyStatus()},error:e=>{console.error("Error disconnecting from Spotify:",e)}})}searchSpotify(){this.searchQuery.trim()&&(this.isLoading=!0,this.spotifyService.searchTracks(this.searchQuery).subscribe({next:e=>{this.searchResults=e.map(r=>({...r,image:r.image||r.album?.images?.[0]?.url||"assets/default-song.png",artists:Array.isArray(r.artists)?r.artists:"string"==typeof r.artists||r.artists?[r.artists]:["Artista desconocido"]})),this.isLoading=!1},error:e=>{console.error("Error searching Spotify:",e),this.showMessage("Error al buscar en Spotify",!1),this.isLoading=!1}}))}voteFromSearch(e,r){this.votingService.voteForSong(e.id,{id:e.id,name:e.name,artists:e.artists,image:e.image,preview_url:e.preview_url},r).subscribe({next:i=>{this.loadSongs(),alert(r?"Dislike registrado":"Like registrado")},error:i=>{console.error("Error voting from search:",i),alert("Error al votar. Intenta nuevamente.")}})}adminVote(e,r){this.adminVotes[e.id]=r,this.votingService.voteForSong(e.id,e,r).subscribe({next:o=>{this.loadSongs()},error:o=>{console.error("Error with admin vote:",o),delete this.adminVotes[e.id],alert("Error al votar. Intenta nuevamente.")}})}hasAdminLiked(e){return!1===this.adminVotes[e]}hasAdminDisliked(e){return!0===this.adminVotes[e]}addToQueue(e){this.queueService.addToQueue(e).subscribe({next:()=>{this.loadQueue(),this.showMessage("Canci\xf3n agregada a la cola correctamente")},error:r=>{console.error("Error adding to queue:",r),this.showMessage("Error al agregar a la cola",!1)}})}addToQueueFromSearch(e){this.actionInProgress="Agregando a la cola...",this.queueService.addToQueue(e).subscribe({next:r=>{this.loadQueue(),this.showMessage("Canci\xf3n agregada a la cola correctamente"),this.actionInProgress=""},error:r=>{console.error("Error adding to queue:",r),this.showMessage("Error al agregar a la cola: "+r.message,!1),this.actionInProgress=""}})}addToQueueFromRanking(e){confirm("\xbfAgregar esta canci\xf3n a la cola de reproducci\xf3n?")&&this.addToQueueFromSearch(`spotify:track:${e}`)}confirmAddToHistory(){var e=this;return C(function*(){try{const r=yield e.spotifyNowPlaying.addToHistory().toPromise();r.can_add?confirm(`\xbfEst\xe1s seguro de que quieres agregar "${r.song.name}" al hist\xf3rico?`)&&e.http.post(`${e.apiUrl}/api/spotify/admin/add-to-history-confirmed`,{}).subscribe({next:i=>{e.showMessage(i.message||"Canci\xf3n agregada al hist\xf3rico"),e.loadSongs()},error:i=>{e.showMessage("Error al agregar al hist\xf3rico: "+i.error?.error,!1)}}):e.showMessage(r.message,!1)}catch{e.showMessage("Error al verificar hist\xf3rico",!1)}})()}playNowFromSearch(e){this.actionInProgress="Reproduciendo...",this.spotifyNowPlaying.playTrack(e).subscribe({next:()=>{setTimeout(()=>{this.getAdminCurrentlyPlaying()},1e3),this.showMessage("Reproduciendo canci\xf3n"),this.actionInProgress=""},error:r=>{console.error("Error playing track:",r),this.showMessage("Error al reproducir: "+(r.error?.message||"Error desconocido"),!1),this.actionInProgress=""}})}playTrack(e){this.spotifyNowPlaying.playTrack(e).subscribe({next:()=>{setTimeout(()=>{this.getAdminCurrentlyPlaying()},1e3)},error:r=>{console.error("Error playing track:",r),alert("Error al reproducir la canci\xf3n: "+r.message)}})}nextTrack(){this.spotifyNowPlaying.nextTrack().subscribe({next:()=>{setTimeout(()=>{this.getAdminCurrentlyPlaying()},1e3)},error:e=>{console.error("Error skipping to next track:",e)}})}previousTrack(){this.spotifyNowPlaying.previousTrack().subscribe({next:()=>{setTimeout(()=>{this.getAdminCurrentlyPlaying()},1e3)},error:e=>{console.error("Error going to previous track:",e)}})}togglePlayback(){this.isPlaying?this.spotifyNowPlaying.pausePlayback().subscribe({next:()=>{this.isPlaying=!1},error:e=>{console.error("Error pausing playback:",e)}}):this.spotifyNowPlaying.resumePlayback().subscribe({next:()=>{this.isPlaying=!0},error:e=>{console.error("Error resuming playback:",e)}})}deleteSong(e){confirm("\xbfEst\xe1s seguro de que quieres eliminar esta canci\xf3n del ranking?")&&this.votingService.deleteSong(e).subscribe({next:()=>{this.loadSongs(),this.showMessage("Canci\xf3n eliminada correctamente")},error:r=>{console.error("Error deleting song:",r),this.showMessage("Error al eliminar la canci\xf3n",!1)}})}deleteAllVotes(){confirm("\xbfEst\xe1s seguro de que quieres eliminar TODOS los votos? Esta acci\xf3n no se puede deshacer.")&&this.votingService.deleteAllVotes().subscribe({next:()=>{this.loadSongs(),this.showMessage("Todos los votos han sido eliminados")},error:e=>{console.error("Error deleting all votes:",e),this.showMessage("Error al eliminar todos los votos",!1)}})}forceRefresh(){this.showMessage("Actualizando todos los datos..."),Promise.all([new Promise(e=>this.loadSongs()),new Promise(e=>this.loadQueue()),new Promise(e=>this.getSpotifyStatus()),new Promise(e=>this.getAdminCurrentlyPlaying())]).then(()=>{this.showMessage("Todos los datos han sido actualizados")}).catch(e=>{this.showMessage("Error al actualizar los datos",!1)})}toggleQueue(){this.activeSection="queue"}addToHistory(){var e=this;return C(function*(){if(e.adminCurrentlyPlaying&&e.adminCurrentlyPlaying.id){e.actionInProgress="Verificando canci\xf3n...";try{const r=yield e.spotifyNowPlaying.addToHistory().toPromise();if(r.can_add){if(confirm(`\xbfEst\xe1s seguro de que quieres agregar "${e.adminCurrentlyPlaying.name}" al hist\xf3rico?\n\nEsta acci\xf3n eliminar\xe1 la canci\xf3n del ranking si est\xe1 presente.`)){e.actionInProgress="Agregando al hist\xf3rico...";const i=e.authService.getAuthHeaders(),s=yield e.http.post(`${e.apiUrl}/api/spotify/admin/add-to-history-confirmed`,{},{headers:i}).toPromise();e.showMessage(s.message||"Canci\xf3n agregada al hist\xf3rico correctamente"),e.loadSongs(),setTimeout(()=>{e.getAdminCurrentlyPlaying()},2e3)}}else e.showMessage(r.message,!1)}catch(r){console.error("Error al agregar al hist\xf3rico:",r),e.showMessage(r.error?.error||r.message||"Error al agregar al hist\xf3rico",!1)}finally{e.actionInProgress=""}}else e.showMessage("No hay canci\xf3n reproduci\xe9ndose actualmente",!1)})()}checkAddToHistory(){this.adminCurrentlyPlaying?this.spotifyNowPlaying.addToHistory().subscribe({next:e=>{e.can_add?this.addToHistory():this.showMessage(e.message,!1)},error:e=>{this.showMessage("Error al verificar: "+(e.error?.message||e.message),!1)}}):this.showMessage("No hay canci\xf3n reproduci\xe9ndose",!1)}checkPlayingSong(){this.adminCurrentlyPlaying&&(this.songs.find(r=>r.id===this.adminCurrentlyPlaying.id)?this.activeSection="ranking":alert("Esta canci\xf3n no est\xe1 en el ranking."))}forceRankSong(){this.adminCurrentlyPlaying&&this.votingService.vote({id:this.adminCurrentlyPlaying.id,name:this.adminCurrentlyPlaying.name,artists:this.adminCurrentlyPlaying.artists,image:this.adminCurrentlyPlaying.image},!1,!0).subscribe({next:()=>{this.loadSongs(),this.activeSection="ranking"},error:r=>{console.error("Error forcing song to rank:",r)}})}formatTime(e){const r=Math.floor(e/1e3),i=r%60;return`${Math.floor(r/60)}:${i<10?"0":""}${i}`}formatTimeAgo(e){const r=new Date(e),i=(new Date).getTime()-r.getTime(),s=Math.floor(i/6e4),a=Math.floor(s/60),c=Math.floor(a/24);return s<1?"Ahora mismo":s<60?`Hace ${s} min`:a<24?`Hace ${a} h`:1===c?"Ayer":`Hace ${c} d\xedas`}convertToAmPm(e){if(!e)return"";const[r,o]=e.split(":"),i=parseInt(r,10);return`${i%12||12}:${o} ${i>=12?"PM":"AM"}`}logout(){this.authService.logout(),this.router.navigate(["/login"])}checkAutoAdd(){if(this.autoAddToHistory&&this.adminCurrentlyPlaying&&this.adminCurrentlyPlaying.id){if(this.lastAddedSongId===this.adminCurrentlyPlaying.id)return;this.performAutoAdd()}}performAutoAdd(){const e=this.authService.getAuthHeaders();this.http.post(`${this.apiUrl}/api/spotify/admin/add-to-history-confirmed`,{},{headers:e}).subscribe({next:r=>{this.showMessage("Auto-agregado al hist\xf3rico: "+this.adminCurrentlyPlaying.name),this.lastAddedSongId=this.adminCurrentlyPlaying.id,this.loadSongs()},error:r=>{console.error("Error auto-adding to history:",r),this.lastAddedSongId=this.adminCurrentlyPlaying.id}})}toggleAutoAdd(){localStorage.setItem("autoAddToHistory",String(this.autoAddToHistory)),this.autoAddToHistory&&this.checkAutoAdd()}playPreview(e){e?this.audioService.play(e):alert("Esta canci\xf3n no tiene vista previa disponible.")}static \u0275fac=function(r){return new(r||t)(T(Zn),T(wp),T(ps),T(yO),T(xO),T(Yo),T(Xt),T(MO),T(qu))};static \u0275cmp=Ht({type:t,selectors:[["app-admin-panel"]],standalone:!0,features:[Yt],decls:64,vars:26,consts:[[1,"admin-panel-container"],[1,"message-container"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","progress-message",4,"ngIf"],[1,"admin-header"],[1,"header-content"],[1,"fab","fa-spotify","me-2"],[1,"header-subtitle"],[1,"btn-logout",3,"click"],[1,"fas","fa-sign-out-alt","me-1"],[1,"admin-content"],[1,"admin-sidebar"],[1,"sidebar-section"],[1,"sidebar-btn",3,"click"],[1,"fas","fa-tachometer-alt","me-2"],[1,"fas","fa-play-circle","me-2"],[1,"fas","fa-list-ol","me-2"],[1,"fas","fa-trophy","me-2"],[1,"fas","fa-clock","me-2"],[1,"fas","fa-sync-alt","me-2"],[1,"fas","fa-search","me-2"],["class","spotify-status",4,"ngIf"],[1,"admin-main"],["class","section",4,"ngIf"],[1,"search-section"],[1,"search-header"],[1,"btn-toggle",3,"click"],["class","search-content",4,"ngIf"],[1,"section","recently-added-section"],[1,"section-header","collapsible",3,"click"],[1,"fas"],["class","recently-added-content",4,"ngIf"],[1,"success-message"],[1,"fas","fa-check-circle"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"progress-message"],[1,"fas","fa-spinner","fa-spin"],[1,"spotify-status"],[1,"status-indicator"],[1,"status-text"],[1,"status-action",3,"click"],[1,"section"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"fas","fa-music"],[1,"stat-content"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-users"],[1,"fas","fa-history"],[1,"dashboard-actions"],[1,"action-btn","primary",3,"click"],[1,"fas","fa-sync-alt","me-1"],[1,"action-btn","secondary",3,"click"],[1,"fas","fa-list-ol","me-1"],[1,"action-btn","warning",3,"click"],[1,"fas","fa-play-circle","me-1"],[1,"section-header"],[1,"btn-refresh",3,"click"],[1,"fas","fa-sync-alt"],["class","currently-playing-card",4,"ngIf","ngIfElse"],["noSongPlaying",""],[1,"currently-playing-card"],[1,"auto-add-wrapper"],[1,"switch-label"],[1,"switch"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"slider","round"],[1,"playing-content"],["alt","Album cover",1,"album-art-large",3,"src"],[1,"track-info"],[1,"artists"],["class","text-info fst-italic mb-0 mt-1",4,"ngIf"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"time-display"],[1,"playing-actions"],["title","Verificar en ranking",1,"control-btn",3,"click"],[1,"fas","fa-search"],["title","Agregar al hist\xf3rico",1,"control-btn",3,"disabled","click"],[1,"player-controls"],[1,"player-btn",3,"click"],[1,"fas","fa-step-backward"],[1,"player-btn","play-pause",3,"click"],[1,"fas","fa-step-forward"],[1,"text-info","fst-italic","mb-0","mt-1"],[1,"fas","fa-heart","me-1"],[1,"empty-state"],[1,"fas","fa-music-slash"],["class","btn-spotify",3,"click",4,"ngIf"],[1,"btn-spotify",3,"click"],[1,"btn-refresh",3,"disabled","click"],["class","queue-container",4,"ngIf","ngIfElse"],["emptyQueue",""],[1,"queue-container"],["class","queue-item",4,"ngFor","ngForOf"],[1,"queue-item"],[1,"queue-position"],["alt","Album cover",1,"queue-image",3,"src"],[1,"queue-info"],[1,"queue-actions"],["title","Reproducir ahora",1,"queue-btn",3,"click"],[1,"fas","fa-play"],[1,"fas","fa-list-ol"],[1,"header-actions"],[1,"btn-danger",3,"click"],[1,"fas","fa-trash","me-1"],["class","ranking-container",4,"ngIf","ngIfElse"],["emptyRanking",""],[1,"ranking-container"],["class","ranking-item",4,"ngFor","ngForOf"],[1,"ranking-item"],[1,"rank-number"],["alt","Album cover",1,"rank-image",3,"src"],[1,"rank-info"],["class","text-info fst-italic d-block mb-1",4,"ngIf"],[1,"rank-stats"],[1,"votes"],[1,"dislikes"],[1,"fas","fa-thumbs-down"],[1,"time"],[1,"rank-actions"],["title","Me gusta",1,"vote-btn","like",3,"click"],["title","No me gusta",1,"vote-btn","dislike",3,"click"],["title","Agregar a cola",1,"action-btn",3,"click"],[1,"fas","fa-plus"],["title","Eliminar",1,"action-btn","danger",3,"click"],[1,"fas","fa-trash"],[1,"text-info","fst-italic","d-block","mb-1"],[1,"fas","fa-trophy"],[1,"schedules-container"],[4,"ngIf"],["class","schedule-card",4,"ngFor","ngForOf"],[1,"schedule-card"],[1,"schedule-times"],[1,"time-block"],[1,"time-label"],[1,"time-value"],[1,"schedule-status"],[1,"status-badge"],["class","schedule-edit-card",4,"ngFor","ngForOf"],[1,"btn-save",3,"click"],[1,"fas","fa-save","me-1"],[1,"schedule-edit-card"],[1,"edit-fields"],[1,"field-group"],["type","time",3,"ngModel","ngModelChange"],[1,"field-group","toggle"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider"],[1,"search-content"],[1,"search-bar"],["type","text","placeholder","Buscar canciones en Spotify...",3,"ngModel","ngModelChange","keyup.enter"],[1,"search-btn",3,"click"],["class","search-results",4,"ngIf"],[1,"search-results"],["class","result-item",4,"ngFor","ngForOf"],[1,"result-item"],["alt","Album cover","onerror","this.src='assets/default-song.png'",1,"result-image",3,"src"],[1,"result-info"],[1,"album-name"],[1,"result-actions"],["title","Votar positivo",1,"vote-btn","like",3,"click"],["title","Votar negativo",1,"vote-btn","dislike",3,"click"],["title","Reproducir ahora",1,"action-btn",3,"click"],[1,"recently-added-content"],["class","recent-grid",4,"ngIf","ngIfElse"],["emptyRecent",""],[1,"recent-grid"],["class","recent-card",4,"ngFor","ngForOf"],[1,"recent-card"],["alt","Album cover",1,"recent-image",3,"src"],[1,"recent-info"],[1,"recent-stats"],[1,"recent-actions"],[1,"fas","fa-clock"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"div",1),N(2,Fj,3,1,"div",2),N(3,Lj,3,1,"div",3),N(4,jj,3,1,"div",4),f(),h(5,"div",5)(6,"div",6)(7,"h1"),b(8,"i",7),_(9,"Panel de Administraci\xf3n "),f(),h(10,"p",8),_(11,"Gestiona la m\xfasica y votaciones del restaurante"),f()(),h(12,"button",9),k("click",function(){return o.logout()}),b(13,"i",10),_(14,"Cerrar Sesi\xf3n "),f()(),h(15,"div",11)(16,"div",12)(17,"div",13)(18,"h3"),_(19,"Navegaci\xf3n"),f(),h(20,"button",14),k("click",function(){return o.setActiveSection("dashboard")}),b(21,"i",15),_(22,"Dashboard "),f(),h(23,"button",14),k("click",function(){return o.setActiveSection("playing")}),b(24,"i",16),_(25,"Reproduciendo "),f(),h(26,"button",14),k("click",function(){return o.setActiveSection("queue")}),b(27,"i",17),_(28,"Cola de Reproducci\xf3n "),f(),h(29,"button",14),k("click",function(){return o.setActiveSection("ranking")}),b(30,"i",18),_(31,"Ranking "),f(),h(32,"button",14),k("click",function(){return o.setActiveSection("schedules")}),b(33,"i",19),_(34,"Horarios "),f()(),h(35,"div",13)(36,"h3"),_(37,"Acciones R\xe1pidas"),f(),h(38,"button",14),k("click",function(){return o.forceRefresh()}),b(39,"i",20),_(40,"Actualizar Todo "),f(),h(41,"button",14),k("click",function(){return o.toggleSearch()}),b(42,"i",21),_(43,"Buscar Canciones "),f()(),N(44,Vj,6,6,"div",22),f(),h(45,"div",23),N(46,$j,44,4,"div",24),N(47,qj,9,4,"div",24),N(48,Jj,9,5,"div",24),N(49,eV,13,5,"div",24),N(50,iV,9,3,"div",24),h(51,"div",25)(52,"div",26)(53,"h3"),_(54,"Buscar en Spotify"),f(),h(55,"button",27),k("click",function(){return o.showSearch=!o.showSearch}),_(56),f()(),N(57,cV,6,2,"div",28),f(),h(58,"div",29)(59,"div",30),k("click",function(){return o.toggleRecentlyAdded()}),h(60,"h2"),_(61,"Reci\xe9n Agregadas"),f(),b(62,"i",31),f(),N(63,fV,4,2,"div",32),f()()()()),2&r&&(p(2),O("ngIf",o.successMessage),p(1),O("ngIf",o.errorMessage),p(1),O("ngIf",o.actionInProgress),p(16),ie("active","dashboard"===o.activeSection),p(3),ie("active","playing"===o.activeSection),p(3),ie("active","queue"===o.activeSection),p(3),ie("active","ranking"===o.activeSection),p(3),ie("active","schedules"===o.activeSection),p(12),O("ngIf",o.spotifyStatus),p(2),O("ngIf","dashboard"===o.activeSection),p(1),O("ngIf","playing"===o.activeSection),p(1),O("ngIf","queue"===o.activeSection),p(1),O("ngIf","ranking"===o.activeSection),p(1),O("ngIf","schedules"===o.activeSection),p(6),te(" ",o.showSearch?"Ocultar":"Mostrar"," "),p(1),O("ngIf",o.showSearch),p(5),ie("fa-chevron-down",!o.showRecentlyAdded)("fa-chevron-up",o.showRecentlyAdded),p(1),O("ngIf",o.showRecentlyAdded))},dependencies:[Jo,wr,rp,vo,Kr,Pn,vr,On,UF],styles:['@import"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap";@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css";.admin-panel-container[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;background-color:#121212;color:#fff;min-height:100vh;padding:0;margin:0}.admin-header[_ngcontent-%COMP%]{background-color:#000;padding:16px 24px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #282828}.admin-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#fff}.admin-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1db954}.admin-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#b3b3b3;font-size:14px}.admin-header[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:transparent;color:#fff;padding:8px 16px;border-radius:20px;border:1px solid #B3B3B3;font-weight:500;transition:all .2s ease}.admin-header[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:scale(1.05)}.admin-content[_ngcontent-%COMP%]{display:flex;min-height:calc(100vh - 80px)}.admin-sidebar[_ngcontent-%COMP%]{width:240px;background-color:#000;padding:24px 16px;border-right:1px solid #282828}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]{margin-bottom:32px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;letter-spacing:1.5px;color:#b3b3b3;margin:0 0 16px;padding:0 8px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:100%;text-align:left;padding:10px 16px;border-radius:4px;margin-bottom:4px;color:#b3b3b3;font-weight:500;transition:all .2s ease}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ffffff1a}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn.active[_ngcontent-%COMP%]{color:#fff;background-color:#fff3}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn.refresh-btn[_ngcontent-%COMP%]{margin-top:12px;background-color:#1db9541a;border:1px solid #1DB954;color:#1db954;text-align:center;justify-content:center;display:flex;align-items:center;font-weight:600}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn.refresh-btn[_ngcontent-%COMP%]:hover{background-color:#1db954;color:#000;transform:scale(1.02);box-shadow:0 4px 12px #1db9544d}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn.refresh-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]{margin-top:32px;padding:12px;background-color:#181818;border-radius:8px;display:flex;align-items:center}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;margin-right:8px}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-indicator.connected[_ngcontent-%COMP%]{background-color:#1db954}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-indicator.disconnected[_ngcontent-%COMP%]{background-color:#e74c3c}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-size:12px;flex-grow:1}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-action[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;color:#1db954;font-size:12px;font-weight:600}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]   .status-action[_ngcontent-%COMP%]:hover{text-decoration:underline}.admin-main[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:24px}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header.collapsible[_ngcontent-%COMP%]{cursor:pointer;padding:12px 0;border-bottom:1px solid #282828}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;color:#1db954;font-size:14px;font-weight:600;padding:6px 12px;border-radius:4px;transition:all .2s ease;border:1px solid transparent}.admin-main[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover{background-color:#1db9541a;text-decoration:none;border-color:#1db954}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;margin-bottom:24px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;display:flex;align-items:center}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;background-color:#1db9541a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:16px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#1db954}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;color:#b3b3b3;font-size:14px}.dashboard-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:24px}.dashboard-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;padding:10px 16px;border-radius:4px;font-weight:500;transition:all .2s ease}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]{background-color:#1db954;color:#000}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]:hover{background-color:#2bde6a;transform:translateY(-2px)}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.secondary[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:1px solid #B3B3B3}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.secondary[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;border-color:#fff}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.warning[_ngcontent-%COMP%]{background-color:#f39c12;color:#000}.dashboard-actions[_ngcontent-%COMP%]   .action-btn.warning[_ngcontent-%COMP%]:hover{background-color:#f5b043}.currently-playing-card[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;position:relative}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;display:flex;align-items:center;gap:8px;background-color:#ffffff0d;padding:4px 12px;border-radius:20px;z-index:10}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch-label[_ngcontent-%COMP%]{font-size:12px;color:#b3b3b3;font-weight:500}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:36px;height:20px}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#1db954}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(16px)}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#555;transition:.4s;border-radius:34px}.currently-playing-card[_ngcontent-%COMP%]   .auto-add-wrapper[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:#fff;transition:.4s;border-radius:50%}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .album-art-large[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:8px;margin-right:20px;object-fit:cover}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]{flex:1}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:700}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .artists[_ngcontent-%COMP%]{margin:0 0 16px;color:#b3b3b3}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background-color:#5a5a5a;border-radius:2px;overflow:hidden;margin-bottom:8px}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background-color:#1db954;border-radius:2px;transition:width .3s ease}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .time-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:#b3b3b3}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:40px;height:40px;border-radius:50%;background-color:#ffffff1a;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]:hover{background-color:#fff3;transform:scale(1.1)}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]   .player-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:48px;height:48px;border-radius:50%;background-color:#ffffff1a;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]   .player-btn[_ngcontent-%COMP%]:hover{background-color:#fff3;transform:scale(1.05)}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]   .player-btn.play-pause[_ngcontent-%COMP%]{width:64px;height:64px;background-color:#1db954;color:#000}.currently-playing-card[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]   .player-btn.play-pause[_ngcontent-%COMP%]:hover{background-color:#2bde6a;transform:scale(1.1)}.queue-container[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;padding:0;overflow:hidden}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid #282828}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-position[_ngcontent-%COMP%]{width:24px;text-align:center;font-weight:600;color:#b3b3b3;margin-right:16px}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-image[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:4px;margin-right:16px;object-fit:cover}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-info[_ngcontent-%COMP%]{flex:1}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:500}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#b3b3b3}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]   .queue-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:32px;height:32px;border-radius:50%;background-color:transparent;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]   .queue-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]   .queue-btn.remove[_ngcontent-%COMP%]{color:#e74c3c}.queue-container[_ngcontent-%COMP%]   .queue-item[_ngcontent-%COMP%]   .queue-actions[_ngcontent-%COMP%]   .queue-btn.remove[_ngcontent-%COMP%]:hover{background-color:#e74c3c1a}.ranking-container[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;padding:0;overflow:hidden}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid #282828}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-number[_ngcontent-%COMP%]{width:24px;text-align:center;font-weight:700;font-size:16px;margin-right:16px;color:#b3b3b3}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-image[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:4px;margin-right:16px;object-fit:cover}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]{flex:1}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:500}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#b3b3b3}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]{display:flex;gap:16px}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;color:#b3b3b3}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-info[_ngcontent-%COMP%]   .rank-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]{color:#b3b3b3;background-color:transparent}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]:hover, .ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.like.active[_ngcontent-%COMP%]{color:#1db954;background-color:#1db9541a}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]{color:#b3b3b3;background-color:transparent}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]:hover, .ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .vote-btn.dislike.active[_ngcontent-%COMP%]{color:#e74c3c;background-color:#e74c3c1a}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:36px;height:36px;border-radius:50%;background-color:transparent;color:#b3b3b3;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#fff}.ranking-container[_ngcontent-%COMP%]   .ranking-item[_ngcontent-%COMP%]   .rank-actions[_ngcontent-%COMP%]   .action-btn.danger[_ngcontent-%COMP%]:hover{color:#e74c3c;background-color:#e74c3c1a}.schedules-container[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%], .schedules-container[_ngcontent-%COMP%]   .schedule-edit-card[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;margin-bottom:16px}.schedules-container[_ngcontent-%COMP%]   .schedule-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .schedules-container[_ngcontent-%COMP%]   .schedule-edit-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600}.schedules-container[_ngcontent-%COMP%]   .schedule-times[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.schedules-container[_ngcontent-%COMP%]   .schedule-times[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]{display:flex;flex-direction:column}.schedules-container[_ngcontent-%COMP%]   .schedule-times[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]   .time-label[_ngcontent-%COMP%]{font-size:12px;color:#b3b3b3;margin-bottom:4px}.schedules-container[_ngcontent-%COMP%]   .schedule-times[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]   .time-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.schedules-container[_ngcontent-%COMP%]   .schedule-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:600}.schedules-container[_ngcontent-%COMP%]   .schedule-status[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#1db95433;color:#1db954}.schedules-container[_ngcontent-%COMP%]   .schedule-status[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#e74c3c33;color:#e74c3c}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#b3b3b3;margin-bottom:4px}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]{background-color:#2a2a2a;border:1px solid #404040;border-radius:4px;color:#fff;padding:8px;font-family:inherit}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]:focus{outline:none;border-color:#1db954}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:20px}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#1db954}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px}.schedules-container[_ngcontent-%COMP%]   .edit-fields[_ngcontent-%COMP%]   .field-group.toggle[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:#fff;transition:.4s;border-radius:50%}.schedules-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:#1db954;color:#000;padding:10px 20px;border-radius:4px;font-weight:600;margin-top:16px;transition:all .2s ease}.schedules-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#2bde6a;transform:translateY(-2px)}.position-relative[_ngcontent-%COMP%]{position:relative!important}.btn-play-mini[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.6);border:none;color:#fff;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:0;transition:all .2s ease;z-index:10}.btn-play-mini[_ngcontent-%COMP%]:hover{background:#1DB954;transform:translate(-50%,-50%) scale(1.1)}.btn-play-mini[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.btn-play-mini[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;margin-left:2px}.result-item[_ngcontent-%COMP%]:hover   .btn-play-mini[_ngcontent-%COMP%], .recent-card[_ngcontent-%COMP%]:hover   .btn-play-mini[_ngcontent-%COMP%], .ranking-item[_ngcontent-%COMP%]:hover   .btn-play-mini[_ngcontent-%COMP%]{opacity:1}.recently-added-section[_ngcontent-%COMP%]   .recently-added-content[_ngcontent-%COMP%]{margin-top:16px}.recently-added-section[_ngcontent-%COMP%]   .recent-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;box-shadow:0 4px 12px #0000004d;padding:12px;transition:all .3s ease}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]:hover{background-color:#282828;transform:translateY(-4px)}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;border-radius:4px;object-fit:cover;margin-bottom:12px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:12px;color:#b3b3b3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   .recent-stats[_ngcontent-%COMP%]{display:flex;gap:12px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   .recent-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:11px;color:#b3b3b3}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-info[_ngcontent-%COMP%]   .recent-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px;margin-top:12px}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]{color:#b3b3b3}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]:hover, .recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.like.active[_ngcontent-%COMP%]{color:#1db954;background-color:#1db9541a}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]{color:#b3b3b3}.recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]:hover, .recently-added-section[_ngcontent-%COMP%]   .recent-card[_ngcontent-%COMP%]   .recent-actions[_ngcontent-%COMP%]   .vote-btn.dislike.active[_ngcontent-%COMP%]{color:#e74c3c;background-color:#e74c3c1a}.search-section[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease}.search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px}.search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;color:#1db954;font-weight:500}.search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover{text-decoration:underline}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;background-color:#2a2a2a;border:1px solid #404040;border-right:none;border-radius:4px 0 0 4px;color:#fff;padding:10px 16px;font-family:inherit}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1db954}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:#1db954;color:#000;padding:0 16px;border-radius:0 4px 4px 0;font-weight:600;transition:all .2s ease}.search-section[_ngcontent-%COMP%]   .search-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:hover{background-color:#2bde6a}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border-radius:4px;margin-bottom:8px;background-color:#ffffff0d;transition:all .2s ease}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-image[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:4px;margin-right:16px;object-fit:cover}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]{flex:1}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:500}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:12px;color:#b3b3b3}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-info[_ngcontent-%COMP%]   .album-name[_ngcontent-%COMP%]{font-size:11px;color:#b3b3b3}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%], .search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]{color:#b3b3b3;background-color:transparent}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn.like[_ngcontent-%COMP%]:hover{color:#1db954;background-color:#1db9541a}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]{color:#b3b3b3;background-color:transparent}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .vote-btn.dislike[_ngcontent-%COMP%]:hover{color:#e74c3c;background-color:#e74c3c1a}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{background-color:transparent;color:#b3b3b3}.search-section[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   .result-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#fff}.empty-state[_ngcontent-%COMP%]{background-color:#181818;border-radius:8px;box-shadow:0 4px 12px #0000004d;transition:all .3s ease;text-align:center;padding:40px 20px}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;color:#b3b3b3;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#b3b3b3}.empty-state[_ngcontent-%COMP%]   .btn-spotify[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:#1db954;color:#000;padding:10px 20px;border-radius:20px;font-weight:600;transition:all .2s ease}.empty-state[_ngcontent-%COMP%]   .btn-spotify[_ngcontent-%COMP%]:hover{background-color:#2bde6a;transform:scale(1.05)}.btn-refresh[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;width:36px;height:36px;border-radius:50%;background-color:#ffffff1a;color:#fff;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.btn-refresh[_ngcontent-%COMP%]:hover{background-color:#fff3;transform:rotate(180deg)}.btn-refresh[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-danger[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;outline:none;background-color:#e74c3c;color:#fff;padding:8px 16px;border-radius:4px;font-weight:500;transition:all .2s ease}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#ed7669}@media (max-width: 1024px){.admin-sidebar[_ngcontent-%COMP%]{width:200px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.admin-content[_ngcontent-%COMP%]{flex-direction:column}.admin-sidebar[_ngcontent-%COMP%]{width:100%;border-right:none;border-bottom:1px solid #282828;padding:16px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.admin-sidebar[_ngcontent-%COMP%]   .sidebar-section[_ngcontent-%COMP%]   .sidebar-btn[_ngcontent-%COMP%]{width:auto;margin-bottom:0}.admin-sidebar[_ngcontent-%COMP%]   .spotify-status[_ngcontent-%COMP%]{margin-top:16px}.admin-main[_ngcontent-%COMP%]{padding:16px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dashboard-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .album-art-large[_ngcontent-%COMP%]{margin-right:0;margin-bottom:16px}.currently-playing-card[_ngcontent-%COMP%]   .playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%]{margin-top:16px}.recent-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important}}@media (max-width: 480px){.admin-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.admin-header[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{align-self:stretch;text-align:center}.playing-content[_ngcontent-%COMP%]   .playing-actions[_ngcontent-%COMP%], .rank-actions[_ngcontent-%COMP%], .result-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.recent-grid[_ngcontent-%COMP%], .edit-fields[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}.message-container[_ngcontent-%COMP%]{position:fixed;top:90px;right:20px;z-index:10000;max-width:400px}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .progress-message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;margin-bottom:10px;box-shadow:0 4px 12px #0000004d;display:flex;align-items:center;animation:_ngcontent-%COMP%_slideIn .3s ease}.success-message[_ngcontent-%COMP%]{background-color:#1db954e6;color:#000;border-left:4px solid #1DB954}.error-message[_ngcontent-%COMP%]{background-color:#e74c3ce6;color:#fff;border-left:4px solid #e74c3c}.progress-message[_ngcontent-%COMP%]{background-color:#3498dbe6;color:#fff;border-left:4px solid #3498db}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.action-btn[_ngcontent-%COMP%]{transition:all .2s ease}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-btn[_ngcontent-%COMP%]:disabled:hover{transform:none!important}.btn-loading[_ngcontent-%COMP%]{position:relative}.btn-loading[_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:16px;top:50%;left:50%;margin:-8px 0 0 -8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})}return t})(),pV=(()=>{class t{http;apiUrl=Vn_apiUrl;constructor(e){this.http=e}getSongHistory(e="times_played",r="desc"){let o=(new qr).set("sort_by",e).set("order",r);return this.http.get(`${this.apiUrl}/api/ranking/history`,{params:o})}voteFromHistory(e){return this.http.post(`${this.apiUrl}/api/ranking/vote-from-history`,{track_id:e})}getRankingStats(){return this.http.get(`${this.apiUrl}/api/ranking/stats`)}forceRankCurrentSong(){return this.http.post(`${this.apiUrl}/api/ranking/force-rank-current`,{})}static \u0275fac=function(r){return new(r||t)(Q(Zn))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mV(t,n){if(1&t&&(h(0,"div",42),_(1),f()),2&t){const e=P();p(1),te(" ",e.voteMessage," ")}}function _V(t,n){if(1&t){const e=_e();h(0,"button",43),k("click",function(){return H(e),z(P().filterText="")}),b(1,"i",44),f()}}function vV(t,n){if(1&t&&(h(0,"div",45),b(1,"i",46),_(2),f()),2&t){const e=P();p(2),te(" ",e.error," ")}}function yV(t,n){1&t&&(h(0,"div",47),b(1,"div",48),h(2,"p",6),_(3,"Cargando ranking hist\xf3rico..."),f()())}function bV(t,n){1&t&&b(0,"i",72)}function CV(t,n){1&t&&b(0,"i",73)}function wV(t,n){if(1&t){const e=_e();h(0,"div",51)(1,"div",52)(2,"div",53),b(3,"img",54),h(4,"div",55),_(5),f()(),h(6,"div",56)(7,"h5",57),_(8),f(),h(9,"p",58),_(10),f(),h(11,"div",59)(12,"span",60),b(13,"i",61),_(14),f(),h(15,"span",60),b(16,"i",62),_(17),f(),h(18,"span",60),b(19,"i",63),_(20),f()(),h(21,"div",64),k("click",function(){const i=H(e).$implicit;return z(P(2).onShowDetails(i))}),h(22,"div",65),b(23,"div",66),f(),h(24,"span",67),_(25),f()(),h(26,"p",68),_(27),f(),h(28,"button",69),k("click",function(){const i=H(e).$implicit;return z(P(2).onVote(i))}),N(29,bV,1,0,"i",70),N(30,CV,1,0,"i",71),_(31," Votar "),f()()()()}if(2&t){const e=n.$implicit,r=n.index,o=P(2);p(3),O("src",e.image||"assets/default-song.png",ln)("alt",e.name),p(2),te("#",r+1,""),p(3),K(e.name),p(2),K(e.artists.join(", ")),p(4),te(" ",e.times_played," "),p(3),te(" ",e.total_votes," "),p(3),te(" ",e.total_dislikes," "),p(3),_a("width",o.getVotePercentage(e),"%"),p(2),te("",o.getVotePercentage(e),"% aprobaci\xf3n"),p(2),K(o.formatDate(e.last_played_at)),p(1),O("disabled",o.isVoting),p(1),O("ngIf",!o.isVoting),p(1),O("ngIf",o.isVoting)}}function MV(t,n){if(1&t&&(h(0,"div",49),N(1,wV,32,15,"div",50),f()),2&t){const e=P();p(1),O("ngForOf",e.getTabSongs())}}function OV(t,n){1&t&&(h(0,"div",47),b(1,"i",74),h(2,"h4",6),_(3,"No se encontraron canciones"),f(),h(4,"p",6),_(5,"Intenta con otros t\xe9rminos de b\xfasqueda"),f()())}function PV(t,n){if(1&t){const e=_e();h(0,"div",75),k("click",function(){return H(e),z(P().onCloseDetails())}),f()}}function xV(t,n){1&t&&b(0,"i",72)}function DV(t,n){1&t&&b(0,"i",73)}function EV(t,n){if(1&t){const e=_e();h(0,"div",76)(1,"div",77)(2,"div",78)(3,"div",79)(4,"h5",80),b(5,"i",81),_(6,"Detalles de la Canci\xf3n "),f(),h(7,"button",82),k("click",function(){return H(e),z(P().onCloseDetails())}),_(8," Cerrar "),f()(),h(9,"div",83)(10,"div",84)(11,"div",85),b(12,"img",86),h(13,"button",69),k("click",function(){H(e);const o=P();return z(o.onVote(o.selectedSong))}),N(14,xV,1,0,"i",70),N(15,DV,1,0,"i",71),_(16," Votar por esta canci\xf3n "),f()(),h(17,"div",87)(18,"h4",6),_(19),f(),h(20,"p",6),_(21),f(),h(22,"div",88)(23,"div",89)(24,"div",90)(25,"h3",91),_(26),f(),h(27,"p",92),_(28,"Reproducciones"),f()()(),h(29,"div",89)(30,"div",90)(31,"h3",93),_(32),f(),h(33,"p",92),_(34,"Votos positivos"),f()()(),h(35,"div",94)(36,"div",90)(37,"h3",95),_(38),f(),h(39,"p",92),_(40,"Votos negativos"),f()()(),h(41,"div",94)(42,"div",90)(43,"h3",96),_(44),f(),h(45,"p",92),_(46,"Porcentaje de aprobaci\xf3n"),f()()()(),h(47,"div",97)(48,"h6",6),_(49,"\xdaltima reproducci\xf3n"),f(),h(50,"p",6),_(51),f(),h(52,"h6",6),_(53,"D\xedas desde la \xfaltima reproducci\xf3n"),f(),h(54,"p",6),_(55),f()()()()()()()()}if(2&t){const e=P();p(12),O("src",e.selectedSong.image||"assets/default-song.png",ln)("alt",e.selectedSong.name),p(1),O("disabled",e.isVoting),p(1),O("ngIf",!e.isVoting),p(1),O("ngIf",e.isVoting),p(4),K(e.selectedSong.name),p(2),K(e.selectedSong.artists.join(", ")),p(5),K(e.selectedSong.times_played),p(6),K(e.selectedSong.total_votes),p(6),K(e.selectedSong.total_dislikes),p(6),te("",e.getVotePercentage(e.selectedSong),"%"),p(7),K(e.formatDate(e.selectedSong.last_played_at)),p(4),te("",e.getDaysSinceLastPlayed(e.selectedSong)," d\xedas")}}let SV=(()=>{class t{rankingService;votingService;audioService;songs=[];isLoading=!0;error="";sortBy="times_played";sortOrder="desc";filterText="";selectedSong=null;isVoting=!1;voteMessage="";activeTab="all";stats={};pollingSubscription=null;constructor(e,r,o){this.rankingService=e,this.votingService=r,this.audioService=o}ngOnInit(){this.loadRanking(),this.startPolling()}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe()}startPolling(){this.pollingSubscription=this.votingService.getRankedSongsPolling().subscribe({next:()=>{this.loadRanking()}})}loadRanking(){this.isLoading=!0,this.error="",this.rankingService.getSongHistory(this.sortBy,this.sortOrder).subscribe({next:e=>{this.songs=e,this.calculateStats(),this.isLoading=!1},error:e=>{console.error("Error loading ranking:",e),this.error="Error al cargar el ranking. Intenta nuevamente.",this.isLoading=!1}})}calculateStats(){0!==this.songs.length?(this.stats.totalSongs=this.songs.length,this.stats.totalPlays=this.songs.reduce((e,r)=>e+r.times_played,0),this.stats.totalVotes=this.songs.reduce((e,r)=>e+r.total_votes,0),this.stats.totalDislikes=this.songs.reduce((e,r)=>e+r.total_dislikes,0),this.stats.mostPlayed=this.songs.reduce((e,r)=>r.times_played>e.times_played?r:e,this.songs[0]),this.stats.mostVoted=this.songs.reduce((e,r)=>r.total_votes>e.total_votes?r:e,this.songs[0]),this.stats.bestRated=this.songs.reduce((e,r)=>this.getVotePercentage(r)>this.getVotePercentage(e)?r:e,this.songs[0])):this.stats={}}onSortChange(e){this.sortBy===e?this.sortOrder="desc"===this.sortOrder?"asc":"desc":(this.sortBy=e,this.sortOrder="desc"),this.loadRanking()}getSortIcon(e){return this.sortBy!==e?"fa-sort":"desc"===this.sortOrder?"fa-sort-down":"fa-sort-up"}onVote(e){this.isVoting=!0,this.voteMessage="",this.rankingService.voteFromHistory(e.track_id).subscribe({next:r=>{this.voteMessage="Agregada a Ranking de Votacion",this.isVoting=!1;const o=this.songs.findIndex(i=>i.track_id===e.track_id);-1!==o&&(this.songs[o].total_votes+=1,this.calculateStats()),setTimeout(()=>{this.voteMessage=""},5e3)},error:r=>{console.error("Error voting:",r),this.voteMessage=r.error?.error||"Error al votar",this.isVoting=!1,setTimeout(()=>{this.voteMessage=""},5e3)}})}onShowDetails(e){this.selectedSong=e}onCloseDetails(){this.selectedSong=null}get filteredSongs(){if(!this.filterText)return this.songs;const e=this.filterText.toLowerCase();return this.songs.filter(r=>r.name.toLowerCase().includes(e)||r.artists.some(o=>o.toLowerCase().includes(e)))}getVotePercentage(e){return e.total_votes||e.total_dislikes?Math.round(e.total_votes/(e.total_votes+e.total_dislikes)*100):0}formatDate(e){const r=new Date(e);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(r)}getDaysSinceLastPlayed(e){const r=new Date(e.last_played_at),i=Math.abs((new Date).getTime()-r.getTime());return Math.floor(i/864e5)}setActiveTab(e){this.activeTab=e}getTabSongs(){switch(this.activeTab){case"mostPlayed":return[...this.filteredSongs].sort((e,r)=>r.times_played-e.times_played);case"mostVoted":return[...this.filteredSongs].sort((e,r)=>r.total_votes-e.total_votes);case"bestRated":return[...this.filteredSongs].sort((e,r)=>{const o=this.getVotePercentage(e);return this.getVotePercentage(r)-o});default:return this.filteredSongs}}playPreview(e,r){r.stopPropagation(),e?this.audioService.play(e):alert("Esta canci\xf3n no tiene vista previa disponible.")}static \u0275fac=function(r){return new(r||t)(T(pV),T(ps),T(qu))};static \u0275cmp=Ht({type:t,selectors:[["app-ranking"]],standalone:!0,features:[Yt],decls:88,vars:30,consts:[[1,"ranking-container","fade-in"],[1,"message-container"],["class","success-message",4,"ngIf"],[1,"header-section"],[1,"gradient-text"],[1,"fas","fa-trophy","me-2"],[1,"text-muted"],[1,"stats-grid","mb-4"],[1,"stat-card","card"],[1,"card-body","text-center"],[1,"fas","fa-music","stat-icon"],[1,"stat-value"],[1,"stat-label"],[1,"fas","fa-play-circle","stat-icon"],[1,"fas","fa-thumbs-up","stat-icon"],[1,"fas","fa-thumbs-down","stat-icon"],[1,"tabs-container","mb-4"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-list","me-1"],[1,"fas","fa-play-circle","me-1"],[1,"fas","fa-thumbs-up","me-1"],[1,"fas","fa-star","me-1"],[1,"filters-card","card","mb-4"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-md-6","mb-3","mb-md-0"],[1,"search-container"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","Buscar canci\xf3n o artista...",1,"search-input",3,"ngModel","ngModelChange"],["class","search-clear",3,"click",4,"ngIf"],[1,"col-md-6"],[1,"d-flex","flex-wrap","gap-2","justify-content-md-end"],[1,"text-muted","me-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fas","fa-calendar","me-1"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","songs-grid",4,"ngIf"],["class","modal-backdrop show",3,"click",4,"ngIf"],["class","modal show d-block","tabindex","-1",4,"ngIf"],[1,"success-message"],[1,"search-clear",3,"click"],[1,"fas","fa-times"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],[1,"text-center","py-5"],[1,"loading-spinner","mb-3"],[1,"songs-grid"],["class","song-card spotify-card",4,"ngFor","ngForOf"],[1,"song-card","spotify-card"],[1,"card-content"],[1,"song-image-container"],[1,"song-image",3,"src","alt"],[1,"position-badge"],[1,"song-info"],[1,"song-title","text-truncate"],[1,"song-artist","text-truncate"],[1,"song-stats"],[1,"stat-item"],[1,"fas","fa-play"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-thumbs-down"],[1,"approval-container",3,"click"],[1,"approval-bar"],[1,"approval-progress"],[1,"approval-text"],[1,"last-played"],[1,"btn","btn-primary","w-100","mb-2",3,"disabled","click"],["class","fas fa-vote-yea me-1",4,"ngIf"],["class","fas fa-spinner fa-spin me-1",4,"ngIf"],[1,"fas","fa-vote-yea","me-1"],[1,"fas","fa-spinner","fa-spin","me-1"],[1,"fas","fa-music","fa-3x","text-muted","mb-3"],[1,"modal-backdrop","show",3,"click"],["tabindex","-1",1,"modal","show","d-block"],[1,"modal-dialog","modal-lg"],[1,"modal-content","card"],[1,"modal-header","card-header"],[1,"modal-title"],[1,"fas","fa-info-circle","me-2"],["type","button",1,"btn","btn-primary","w-100","mb-2",3,"click"],[1,"modal-body","card-body"],[1,"row"],[1,"col-md-4","text-center"],[1,"img-fluid","rounded","mb-3",3,"src","alt"],[1,"col-md-8"],[1,"row","mt-4"],[1,"col-6"],[1,"stat-box","text-center","p-3","rounded"],[1,"text-primary"],[1,"mb-0","text-muted"],[1,"text-success"],[1,"col-6","mt-3"],[1,"text-danger"],[1,"text-info"],[1,"mt-4"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"div",1),N(2,mV,2,1,"div",2),f(),h(3,"div",3)(4,"h1",4),b(5,"i",5),_(6,"Ranking Hist\xf3rico "),f(),h(7,"p",6),_(8," Descubre las canciones m\xe1s populares que han sonado en nuestro restaurante "),f()(),h(9,"div",7)(10,"div",8)(11,"div",9),b(12,"i",10),h(13,"h3",11),_(14),f(),h(15,"p",12),_(16,"Canciones totales"),f()()(),h(17,"div",8)(18,"div",9),b(19,"i",13),h(20,"h3",11),_(21),f(),h(22,"p",12),_(23,"Reproducciones"),f()()(),h(24,"div",8)(25,"div",9),b(26,"i",14),h(27,"h3",11),_(28),f(),h(29,"p",12),_(30,"Votos positivos"),f()()(),h(31,"div",8)(32,"div",9),b(33,"i",15),h(34,"h3",11),_(35),f(),h(36,"p",12),_(37,"Votos negativos"),f()()()(),h(38,"div",16)(39,"ul",17)(40,"li",18)(41,"a",19),k("click",function(){return o.setActiveTab("all")}),b(42,"i",20),_(43,"Todas "),f()(),h(44,"li",18)(45,"a",19),k("click",function(){return o.setActiveTab("mostPlayed")}),b(46,"i",21),_(47,"M\xe1s reproducidas "),f()(),h(48,"li",18)(49,"a",19),k("click",function(){return o.setActiveTab("mostVoted")}),b(50,"i",22),_(51,"M\xe1s votadas "),f()(),h(52,"li",18)(53,"a",19),k("click",function(){return o.setActiveTab("bestRated")}),b(54,"i",23),_(55,"Mejor valoradas "),f()()()(),h(56,"div",24)(57,"div",25)(58,"div",26)(59,"div",27)(60,"div",28),b(61,"i",29),h(62,"input",30),k("ngModelChange",function(s){return o.filterText=s}),f(),N(63,_V,2,0,"button",31),f(),h(64,"p",6),_(65,"Presiona la canci\xf3n para ver los detalles"),f()(),h(66,"div",32)(67,"div",33)(68,"span",34),_(69,"Ordenar por:"),f(),h(70,"button",35),k("click",function(){return o.onSortChange("times_played")}),b(71,"i",21),_(72," Reproducciones "),b(73,"i"),f(),h(74,"button",35),k("click",function(){return o.onSortChange("total_votes")}),b(75,"i",22),_(76," Votos "),b(77,"i"),f(),h(78,"button",35),k("click",function(){return o.onSortChange("last_played_at")}),b(79,"i",36),_(80," Fecha "),b(81,"i"),f()()()()()(),N(82,vV,3,1,"div",37),N(83,yV,4,0,"div",38),N(84,MV,2,1,"div",39),N(85,OV,6,0,"div",38),N(86,PV,1,0,"div",40),N(87,EV,56,13,"div",41),f()),2&r&&(p(2),O("ngIf",o.voteMessage),p(12),K(o.stats.totalSongs||0),p(7),K(o.stats.totalPlays||0),p(7),K(o.stats.totalVotes||0),p(7),K(o.stats.totalDislikes||0),p(6),ie("active","all"===o.activeTab),p(4),ie("active","mostPlayed"===o.activeTab),p(4),ie("active","mostVoted"===o.activeTab),p(4),ie("active","bestRated"===o.activeTab),p(9),O("ngModel",o.filterText),p(1),O("ngIf",o.filterText),p(10),Il("fas ",o.getSortIcon("times_played")," ms-1"),p(4),Il("fas ",o.getSortIcon("total_votes")," ms-1"),p(4),Il("fas ",o.getSortIcon("last_played_at")," ms-1"),p(1),O("ngIf",o.error),p(1),O("ngIf",o.isLoading),p(1),O("ngIf",!o.isLoading&&o.getTabSongs().length>0),p(1),O("ngIf",!o.isLoading&&0===o.getTabSongs().length),p(1),O("ngIf",o.selectedSong),p(1),O("ngIf",o.selectedSong))},dependencies:[Pn,vr,On,Jo,wr,vo,Kr,Za],styles:['.ranking-container[_ngcontent-%COMP%]{padding:1rem;max-width:1200px;margin:0 auto}@media (max-width: 768px){.ranking-container[_ngcontent-%COMP%]{padding:.5rem}}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding:1.5rem;background:linear-gradient(135deg,rgba(29,185,84,.1) 0%,rgba(25,20,20,.1) 100%);border-radius:16px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:800;margin-bottom:.5rem}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem}.search-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:rgba(42,42,42,.6);border-radius:50px;padding:.5rem 1rem;transition:all .3s ease;border:1px solid rgba(62,62,62,.5)}.search-container[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 2px #1db95440}.search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:var(--text-secondary);margin-right:.5rem}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-primary);flex-grow:1;padding:.5rem 0}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.search-container[_ngcontent-%COMP%]   .search-clear[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);cursor:pointer;padding:.25rem;border-radius:50%}.search-container[_ngcontent-%COMP%]   .search-clear[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:rgba(255,255,255,.1)}.songs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem}@media (max-width: 768px){.songs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}}.spotify-card[_ngcontent-%COMP%]{background:rgba(42,42,42,.6);border-radius:8px;overflow:hidden;transition:all .3s ease;border:1px solid rgba(255,255,255,.05)}.spotify-card[_ngcontent-%COMP%]:hover{background:rgba(42,42,42,.8);transform:translateY(-2px);box-shadow:0 8px 24px #0003}.spotify-card[_ngcontent-%COMP%]:hover   .play-button[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.spotify-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1rem;display:flex;gap:1rem}@media (max-width: 480px){.spotify-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:.75rem}}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .position-number[_ngcontent-%COMP%]{position:absolute;top:-8px;left:-8px;background:var(--primary-color);color:#000;font-weight:800;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.8rem;z-index:2;box-shadow:0 2px 8px #1db95466}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .song-image[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:6px;object-fit:cover;box-shadow:0 4px 12px #0000004d}@media (max-width: 480px){.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .song-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:160px}}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:var(--primary-color);color:#000;border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:0;transform:translateY(8px);transition:all .3s ease;box-shadow:0 4px 12px #0000004d}.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (max-width: 480px){.spotify-card[_ngcontent-%COMP%]   .song-image-container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{opacity:1;transform:none;bottom:16px;right:16px;width:40px;height:40px}}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]{flex-grow:1;min-width:0}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin:0 0 .25rem;color:var(--text-primary);cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-title[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-artist[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin:0 0 .75rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-stats[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-bottom:.75rem;flex-wrap:wrap}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.8rem;color:var(--text-secondary)}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .song-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .approval-container[_ngcontent-%COMP%]{margin-bottom:.75rem}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .approval-container[_ngcontent-%COMP%]   .approval-bar[_ngcontent-%COMP%]{height:4px;background-color:#ffffff1a;border-radius:2px;overflow:hidden;margin-bottom:.25rem}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .approval-container[_ngcontent-%COMP%]   .approval-bar[_ngcontent-%COMP%]   .approval-progress[_ngcontent-%COMP%]{height:100%;background:var(--primary-color);border-radius:2px;transition:width .5s ease}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .approval-container[_ngcontent-%COMP%]   .approval-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.spotify-card[_ngcontent-%COMP%]   .song-info[_ngcontent-%COMP%]   .last-played[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);margin:0}.tabs-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1);display:flex;overflow-x:auto;scrollbar-width:none}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{flex-shrink:0}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--text-secondary);border:none;padding:.75rem 1rem;border-radius:0;position:relative;font-weight:600;white-space:nowrap}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:2px;background:var(--primary-color);transition:width .3s ease}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:transparent}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:after{width:100%}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:var(--text-primary);background:transparent}.tabs-container[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after{width:100%}.alert[_ngcontent-%COMP%]{border-radius:12px;border:none;box-shadow:0 4px 12px #00000026}.alert.alert-info[_ngcontent-%COMP%]{background:rgba(23,162,184,.9);color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.alert.alert-danger[_ngcontent-%COMP%]{background:rgba(220,53,69,.9);color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:invert(1)}.btn-closeee[_ngcontent-%COMP%]{background:rgba(3,59,17,.9);color:#030000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}@keyframes _ngcontent-%COMP%_slideInDown{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.alert-dismissible[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInDown .3s ease-out}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:2rem}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:rgba(42,42,42,.6);border-radius:8px;padding:1rem;text-align:center;border:1px solid rgba(255,255,255,.05);transition:all .3s ease}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 16px #0003;border-color:#1db95433}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--primary-color);margin-bottom:.5rem}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;margin-bottom:.25rem;color:var(--text-primary)}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);margin:0}.text-center[_ngcontent-%COMP%]{padding:3rem 1rem}.text-center[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{border:3px solid rgba(29,185,84,.3);border-top-color:var(--primary-color);border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.text-center[_ngcontent-%COMP%]   .fa-music[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-tertiary);margin-bottom:1rem}.text-center[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:.5rem}.text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-tertiary)}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.btn-outline-secondary[_ngcontent-%COMP%]{background:transparent;color:var(--text-secondary);border:1px solid var(--text-secondary);border-radius:50px;padding:.4rem .8rem;font-size:.85rem;display:inline-flex;align-items:center;transition:all .3s ease}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.05);color:var(--text-primary);border-color:var(--text-primary)}.btn-outline-secondary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.25rem}.message-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1000;max-width:400px}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .progress-message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;margin-bottom:10px;box-shadow:0 4px 12px #0000004d;display:flex;align-items:center;animation:slideIn .3s ease}.success-message[_ngcontent-%COMP%]{background-color:#1db954e6;color:#000;border-left:4px solid #1DB954}']})}return t})(),IV=(()=>{class t{authService;router;constructor(e,r){this.authService=e,this.router=r}canActivate(){return!!this.authService.isLoggedIn()||(this.router.navigate(["/admin-login"]),!1)}static \u0275fac=function(r){return new(r||t)(Q(Yo),Q(Xt))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kV(t,n){if(1&t){const e=_e();h(0,"button",6),k("click",function(){return H(e),z(P().hideAnnouncement())}),h(1,"i"),_(2,"Cerrar"),f()()}}function TV(t,n){if(1&t){const e=_e();h(0,"button",7),k("click",function(){return H(e),z(P().nohideAnnouncement())}),h(1,"i"),_(2,"Abrir"),f()()}}function AV(t,n){1&t&&(h(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12),b(5,"i",13),f(),h(6,"div")(7,"p",14),_(8,"Desarrollado por "),h(9,"b",15),_(10,"Sebastian Vega"),f(),_(11,": "),f(),h(12,"div",16)(13,"a",17),b(14,"i",18),_(15,"GitHub "),f(),h(16,"a",19),b(17,"i",20),_(18,"LinkedIn "),f(),h(19,"a",21),b(20,"i",22),_(21,"Instagram "),f()()()()(),b(22,"div",10),_(23," UptcMusic.com 2025 - V3.0 "),h(24,"div",23)(25,"h4"),b(26,"i",24),_(27,"A nuestros queridos usuarios:"),f(),h(28,"p"),_(29,"-Una cancion es eliminada automaticamente al completar "),h(30,"strong"),_(31,"10 Dislikes "),f()(),h(32,"p"),_(33,"-Cancion que entre en reproducion se eliminara automaticamente del Ranking"),f(),h(34,"p"),_(35,"-Solo se puede votar una vez por cancion "),f(),h(36,"p"),_(37,"-Toda Cacion Reproducida va para Ranking Historico"),f(),h(38,"p"),_(39,"-Cancion con menos de 5 votos no se tiene en cuenta para ser reproducidas"),f(),h(40,"p"),_(41,"-Cada semana se eliminaran todas las canciones del Ranking "),f(),h(42,"p"),_(43,"No se puede usar Admin como nombre de usuario"),f(),h(44,"p"),_(45,"Cualquier hilo que sea ofensivo, se eliminara "),f(),h(46,"p"),_(47,"-El administrador tiene la potestad de evaluar cada sugerencia y decidir si es apropiada para el momento o ambiente."),f(),h(48,"p")(49,"strong"),_(50,"Agradecemos enormemente su entusiasmo y participaci\xf3n. \xa1Sigan votando por su m\xfasica favorita!"),f()()()()())}let RV=(()=>{class t{isHidden=!1;hideAnnouncement(){this.isHidden=!0,localStorage.setItem("announcementHidden","true")}nohideAnnouncement(){this.isHidden=!1,localStorage.setItem("announcementHidden","true")}ngOnInit(){"true"===localStorage.getItem("announcementHidden")&&(this.isHidden=!0)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ht({type:t,selectors:[["app-announcement"]],standalone:!0,features:[Yt],decls:8,vars:3,consts:[[1,"announcement-container","card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"fas","fa-info-circle","me-2"],["class","btn-close","title","Abrir",3,"click",4,"ngIf"],["class","btn-close","title","Cerrar",3,"click",4,"ngIf"],["class","card-body",4,"ngIf"],["title","Abrir",1,"btn-close",3,"click"],["title","Cerrar",1,"btn-close",3,"click"],[1,"card-body"],[1,"announcement-content"],[1,"developer-info"],[1,"d-flex","align-items-start"],[1,"me-3","mt-1"],[1,"fas","fa-laptop-code","text-primary"],[1,"mb-1"],["href","https://www.instagram.com/sebastian.vegar/"],[1,"social-links"],["href","https://github.com/SebastianVega4","target","_blank"],[1,"fab","fa-github","me-1"],["href","https://www.linkedin.com/in/johan-sebastian-vega-ruiz-b1292011b/","target","_blank"],[1,"fab","fa-linkedin","me-1"],["href","https://www.instagram.com/sebastian.vegar/","target","_blank"],[1,"fab","fa-instagram","me-1"],[1,"alert","alert-info"],[1,"fas","fa-exclamation-triangle","me-2"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"div",1)(2,"div"),b(3,"i",2),_(4,"Informaci\xf3n Importante "),f(),N(5,kV,3,0,"button",3),N(6,TV,3,0,"button",4),f(),N(7,AV,51,0,"div",5),f()),2&r&&(p(5),O("ngIf",!o.isHidden),p(1),O("ngIf",o.isHidden),p(1),O("ngIf",!o.isHidden))},dependencies:[Pn,On],styles:['@charset "UTF-8";.announcement-container[_ngcontent-%COMP%]{margin-bottom:.5rem;border:1px solid rgba(255,255,255,.1);border-radius:16px;overflow:hidden;background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);box-shadow:0 10px 30px #0003;transition:all .3s ease}.announcement-container[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 40px #1db95426;border-color:#1db95433}.announcement-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(29,185,84,.15) 0%,rgba(141,103,171,.15) 100%);color:var(--text-primary);font-weight:700;font-size:1.1rem;padding:1rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:space-between}.announcement-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.announcement-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:.25rem;border-radius:50%;transition:all .2s ease;width:28px;height:28px;display:flex;align-items:center;justify-content:center}.announcement-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:rgba(255,255,255,.1);transform:rotate(90deg)}.announcement-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.announcement-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:1.5rem;background:rgba(83,143,221,.1);border-left:4px solid rgba(83,143,221,.5)}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:1rem;color:var(--text-primary);display:flex;align-items:center}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#538fdd;margin-right:.5rem;font-size:1.2rem}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.6;color:var(--text-secondary);margin-bottom:1rem}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.announcement-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{align-items:flex-start}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin-bottom:.5rem}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-primary);margin-bottom:1rem;font-weight:600}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;transition:all .3s ease;font-size:.9rem;color:var(--text-secondary);display:flex;align-items:center}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color);transform:translateY(-2px)}.announcement-container[_ngcontent-%COMP%]   .developer-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.4rem;font-size:1rem}.announcement-container[_ngcontent-%COMP%]:hover{border-color:var(--primary-color)}']})}return t})();function NV(t,n){if(1&t){const e=_e();h(0,"button",7),k("click",function(){return H(e),z(P().hideAnnouncement())}),h(1,"i"),_(2,"Cerrar"),f()()}}function FV(t,n){if(1&t){const e=_e();h(0,"button",8),k("click",function(){return H(e),z(P().nohideAnnouncement())}),h(1,"i"),_(2,"Abrir"),f()()}}function LV(t,n){1&t&&(h(0,"div",12),b(1,"div",13),h(2,"p"),_(3,"Cargando horarios..."),f()())}const jV=function(){return["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes"]};function VV(t,n){if(1&t&&(h(0,"tr")(1,"td",17)(2,"strong"),_(3),f()(),h(4,"td",18)(5,"span",19),_(6),f()(),h(7,"td",20)(8,"span",19),_(9),f()(),h(10,"td",21)(11,"span",22),_(12),f()()()),2&t){const e=n.$implicit,r=P(3);p(3),K(Lo(14,jV)[e.day_of_week]),p(2),ie("empty",!e.lunch_start&&!e.lunch_end),p(1),Vr(" ",r.convertToAmPm(e.lunch_start)||"-"," - ",r.convertToAmPm(e.lunch_end)||"-"," "),p(2),ie("empty",!e.dinner_start&&!e.dinner_end),p(1),Vr(" ",r.convertToAmPm(e.dinner_start)||"-"," - ",r.convertToAmPm(e.dinner_end)||"-"," "),p(2),ie("active",e.is_active)("inactive",!e.is_active),p(1),te(" ",e.is_active?"Activo":"Inactivo"," ")}}function $V(t,n){if(1&t&&(h(0,"div",14)(1,"table",15)(2,"thead")(3,"tr")(4,"th"),_(5,"D\xeda"),f(),h(6,"th"),_(7,"Almuerzo"),f(),h(8,"th"),_(9,"Cena"),f(),h(10,"th"),_(11,"Estado"),f()()(),h(12,"tbody"),N(13,VV,13,15,"tr",16),f()()()),2&t){const e=P(2);p(13),O("ngForOf",e.schedules)}}function UV(t,n){if(1&t&&(h(0,"div",9),N(1,LV,4,0,"div",10),N(2,$V,14,1,"div",11),f()),2&t){const e=P();p(1),O("ngIf",e.isLoading),p(1),O("ngIf",!e.isLoading)}}let BV=(()=>{class t{scheduleService;schedules=[];isLoading=!0;isHidden=!1;constructor(e){this.scheduleService=e}hideAnnouncement(){this.isHidden=!0,localStorage.setItem("announcementHidden","true")}nohideAnnouncement(){this.isHidden=!1,localStorage.setItem("announcementHidden","true")}ngOnInit(){this.loadSchedules(),"true"===localStorage.getItem("announcementHidden")&&(this.isHidden=!0)}loadSchedules(){this.scheduleService.getSchedules().subscribe({next:e=>{this.schedules=e,this.isLoading=!1},error:e=>{console.error("Error al cargar horarios:",e),this.isLoading=!1}})}convertToAmPm(e){if(!e)return"";const[r,o]=e.split(":"),i=parseInt(r,10);return`${i%12||12}:${o} ${i>=12?"PM":"AM"}`}static \u0275fac=function(r){return new(r||t)(T(xO))};static \u0275cmp=Ht({type:t,selectors:[["app-schedule"]],standalone:!0,features:[Yt],decls:8,vars:3,consts:[[1,"card","schedule-card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"fas","fa-clock","me-2"],["class","btn-close","title","Abrir",3,"click",4,"ngIf"],["class","btn-close","title","Cerrar",3,"click",4,"ngIf"],["class","card-body",4,"ngIf"],["title","Abrir",1,"btn-close",3,"click"],["title","Cerrar",1,"btn-close",3,"click"],[1,"card-body"],["class","loading-container",4,"ngIf"],["class","schedule-table-container",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"schedule-table-container"],[1,"schedule-table"],[4,"ngFor","ngForOf"],["data-label","D\xeda"],["data-label","Almuerzo"],[1,"time-slot"],["data-label","Cena"],["data-label","Estado"],[1,"status-badge"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"div",1)(2,"h5",2),b(3,"i",3),_(4,"Horarios de M\xfasica"),f(),N(5,NV,3,0,"button",4),N(6,FV,3,0,"button",5),f(),N(7,UV,3,2,"div",6),f()),2&r&&(p(5),O("ngIf",!o.isHidden),p(1),O("ngIf",o.isHidden),p(1),O("ngIf",!o.isHidden))},dependencies:[Pn,vr,On],styles:[".schedule-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:16px;overflow:hidden;margin-bottom:.5rem;box-shadow:0 8px 32px #0003}.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(29,185,84,.15) 0%,rgba(141,103,171,.15) 100%);border-bottom:1px solid rgba(255,255,255,.1);padding:1.2rem 1.5rem}.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-weight:700;color:var(--text-primary);display:flex;align-items:center;font-size:1.2rem}.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);margin-right:.8rem;font-size:1.1rem}.schedule-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.schedule-table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:12px}.schedule-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;color:var(--text-primary)}.schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:rgba(29,185,84,.1);padding:.9rem 1rem;text-align:left;font-weight:600;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);border-bottom:2px solid rgba(255,255,255,.1)}.schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px}.schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;border-bottom:1px solid rgba(255,255,255,.05)}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.03)}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:8px}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:8px}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;font-size:.95rem}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:600;color:var(--text-primary)}.time-slot[_ngcontent-%COMP%]{display:inline-block;padding:.4rem .8rem;border-radius:6px;background:rgba(42,42,42,.4);font-size:.9rem}.time-slot.empty[_ngcontent-%COMP%]{color:var(--text-tertiary);font-style:italic}.status-badge[_ngcontent-%COMP%]{padding:.5rem .9rem;border-radius:50px;font-size:.8rem;font-weight:600;display:inline-flex;align-items:center;justify-content:center;min-width:80px}.status-badge.active[_ngcontent-%COMP%]{background:rgba(29,185,84,.2);color:var(--primary-color);border:1px solid rgba(29,185,84,.3)}.status-badge.inactive[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:var(--text-secondary);border:1px solid rgba(255,255,255,.1)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid rgba(29,185,84,.2);border-radius:50%;border-top-color:var(--primary-color);animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite;margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1rem}.schedule-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.schedule-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem}.schedule-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:1rem;padding:1rem;border-radius:12px;background:rgba(42,42,42,.3);border:1px solid rgba(255,255,255,.1)}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{margin-bottom:0}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;padding:.6rem 0;text-align:left;border:none;font-size:.9rem}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:700;display:block;margin-bottom:.3rem;color:var(--text-secondary);font-size:.8rem;text-transform:uppercase}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-top:0;font-size:1rem;margin-bottom:.5rem;padding-bottom:.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child:before{display:none}.time-slot[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.85rem}.status-badge[_ngcontent-%COMP%]{padding:.4rem .7rem;font-size:.75rem;min-width:70px}}@media (max-width: 480px){.schedule-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:.8rem}}.btn-close[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:.25rem;border-radius:50%;transition:all .2s ease;width:28px;height:28px;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:rgba(255,255,255,.1);transform:rotate(90deg)}.btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}"]})}return t})(),EO=(()=>{class t{http;apiUrl=Vn_apiUrl;likedItems=new Set;constructor(e){this.http=e,this.loadLikedItemsFromStorage()}loadLikedItemsFromStorage(){const e=localStorage.getItem("discussion_likes");e&&(this.likedItems=new Set(JSON.parse(e)))}saveLikedItemsToStorage(){localStorage.setItem("discussion_likes",JSON.stringify([...this.likedItems]))}getItemKey(e,r){return`${e}:${r}`}hasUserLiked(e,r){return this.likedItems.has(this.getItemKey(e,r))}updateLikeStatus(e,r,o){const i=this.getItemKey(e,r);o?this.likedItems.add(i):this.likedItems.delete(i),this.saveLikedItemsToStorage()}getThreads(e="updated_at",r="desc"){return this.http.get(`${this.apiUrl}/api/discussion/threads?sort=${e}&order=${r}`)}getThread(e){return this.http.get(`${this.apiUrl}/api/discussion/threads/${e}`)}createThread(e,r){return this.http.post(`${this.apiUrl}/api/discussion/threads`,{title:e,content:r})}addComment(e,r,o){return this.http.post(`${this.apiUrl}/api/discussion/threads/${e}/comments`,{content:r,parent_comment_id:o})}likeThread(e){return this.http.post(`${this.apiUrl}/api/discussion/like`,{thread_id:e}).pipe(Ue(r=>{this.updateLikeStatus("thread",e,"liked"===r.action)}))}likeComment(e){return this.http.post(`${this.apiUrl}/api/discussion/like`,{comment_id:e}).pipe(Ue(r=>{this.updateLikeStatus("comment",e,"liked"===r.action)}))}static \u0275fac=function(r){return new(r||t)(Q(Zn))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function HV(t,n){if(1&t){const e=_e();h(0,"div",22),b(1,"i",23),_(2),h(3,"button",24),k("click",function(){return H(e),z(P().error=null)}),b(4,"i",25),f()()}if(2&t){const e=P();p(2),te(" ",e.error," ")}}function zV(t,n){if(1&t){const e=_e();h(0,"div",26)(1,"div",27)(2,"h3"),_(3,"Crear Nuevo Hilo"),f(),h(4,"div",28)(5,"label",29),_(6,"T\xedtulo"),f(),h(7,"input",30),k("ngModelChange",function(o){return H(e),z(P().newThread.title=o)}),f(),h(8,"small"),_(9),f()(),h(10,"div",28)(11,"label",31),_(12,"Contenido"),f(),h(13,"textarea",32),k("ngModelChange",function(o){return H(e),z(P().newThread.content=o)}),f()(),h(14,"div",33)(15,"button",34),k("click",function(){H(e);const o=P();return o.showCreateForm=!1,z(o.newThread={title:"",content:""})}),_(16," Cancelar "),f(),h(17,"button",35),k("click",function(){return H(e),z(P().createThread())}),b(18,"i",36),_(19,"Publicar Hilo "),f()()()()}if(2&t){const e=P();p(7),O("ngModel",e.newThread.title),p(2),te("",e.newThread.title.length,"/200 caracteres"),p(4),O("ngModel",e.newThread.content),p(4),O("disabled",!e.newThread.title.trim()||!e.newThread.content.trim())}}function qV(t,n){1&t&&(h(0,"div",37),b(1,"div",38),h(2,"p"),_(3,"Cargando hilos..."),f()())}function GV(t,n){if(1&t){const e=_e();h(0,"div",39),b(1,"i",40),h(2,"h3"),_(3,"\xa1S\xe9 el primero en empezar una conversaci\xf3n!"),f(),h(4,"p"),_(5,"A\xfan no hay hilos de discusi\xf3n. Crea el primero para hablar sobre m\xfasica."),f(),h(6,"button",5),k("click",function(){return H(e),z(P().showCreateForm=!0)}),b(7,"i",6),_(8,"Crear Primer Hilo "),f()()}}const SO=function(t){return["/discussion/thread",t]};function WV(t,n){if(1&t){const e=_e();h(0,"div",41)(1,"div",42)(2,"h3",43)(3,"a",44),_(4),f()(),h(5,"span",45),_(6),f()(),h(7,"div",46)(8,"p"),_(9),f()(),h(10,"div",47)(11,"div",48)(12,"button",49),k("click",function(){const i=H(e).$implicit;return z(P().likeThread(i))}),b(13,"i",50),h(14,"span"),_(15),f()()(),h(16,"div",48),b(17,"i",51),h(18,"span"),_(19),f()(),h(20,"div",48),b(21,"i",52),h(22,"span"),_(23),f()()(),h(24,"div",53)(25,"a",54),b(26,"i",55),_(27,"Ver discusi\xf3n "),f()()()}if(2&t){const e=n.$implicit,r=P();p(3),O("routerLink",Pf(10,SO,e.id)),p(1),K(e.title),p(2),K(r.formatTimeAgo(e.updated_at)),p(3),K(e.content.length>300?e.content.substring(0,300)+"...":e.content),p(3),ie("liked",e.user_has_liked),p(3),K(e.likes_count),p(4),K(e.comments_count),p(4),te("Usuario ",e.author_fingerprint.substring(0,8),""),p(2),O("routerLink",Pf(12,SO,e.id))}}function KV(t,n){1&t&&(h(0,"div",56)(1,"button",57),b(2,"i",58),_(3," Anterior "),f(),h(4,"span",59),_(5,"P\xe1gina 1 de 1"),f(),h(6,"button",57),_(7," Siguiente "),b(8,"i",60),f()())}function YV(t,n){if(1&t){const e=_e();h(0,"div",8),b(1,"i",9),_(2),h(3,"button",10),k("click",function(){return H(e),z(P().error=null)}),b(4,"i",11),f()()}if(2&t){const e=P();p(2),te(" ",e.error," ")}}function QV(t,n){1&t&&(h(0,"div",12)(1,"div",13),b(2,"div",14),h(3,"p"),_(4,"Cargando hilo..."),f()()())}function ZV(t,n){if(1&t){const e=_e();h(0,"div",42)(1,"button",43),k("click",function(){return H(e),z(P(2).cancelReply())}),b(2,"i",44),_(3,"Cancelar "),f(),h(4,"button",45),k("click",function(){return H(e),z(P(2).addReply())}),b(5,"i",46),_(6,"Responder "),f()()}if(2&t){const e=P(2);p(4),O("disabled",!e.replyContent.trim())}}function XV(t,n){if(1&t){const e=_e();h(0,"div",42)(1,"button",45),k("click",function(){return H(e),z(P(2).addComment())}),b(2,"i",47),_(3,"Publicar comentario "),f()()}if(2&t){const e=P(2);p(1),O("disabled",!e.newComment.trim())}}function e$(t,n){1&t&&(h(0,"div",48)(1,"div",49),b(2,"i",50),h(3,"h4"),_(4,"\xa1S\xe9 el primero en comentar!"),f(),h(5,"p"),_(6,"A\xfan no hay comentarios en este hilo. Comparte tu opini\xf3n."),f()()())}function t$(t,n){if(1&t){const e=_e();h(0,"div",68)(1,"div",69),b(2,"i",56),f(),h(3,"div",57)(4,"div",58)(5,"span",59),b(6,"i",23),_(7),f(),h(8,"span",60),b(9,"i",21),_(10),f()(),h(11,"div",61)(12,"p"),_(13),f()(),h(14,"div",42)(15,"button",62),k("click",function(){const i=H(e).$implicit;return z(P(5).likeComment(i))}),b(16,"i",27),h(17,"span"),_(18),f()(),h(19,"button",63),k("click",function(){const i=H(e).$implicit,s=P(2).$implicit,a=P(3);return a.replyingTo=s.id,z(a.replyContent="@"+(i.author_fingerprint.substring(0,8)||"")+" ")}),b(20,"i",64),h(21,"span"),_(22,"Responder"),f()()()()()}if(2&t){const e=n.$implicit,r=P(5);p(7),te(" Usuario ",e.author_fingerprint.substring(0,8)," "),p(3),te("",r.formatTimeAgo(e.created_at)," "),p(3),K(e.content),p(2),ie("liked",e.user_has_liked),p(3),K(e.likes_count)}}function n$(t,n){if(1&t&&(h(0,"div",66),N(1,t$,23,6,"div",67),f()),2&t){const e=P().$implicit;p(1),O("ngForOf",e.replies)}}function r$(t,n){if(1&t){const e=_e();h(0,"div",53)(1,"div",54)(2,"div",55),b(3,"i",56),f(),h(4,"div",57)(5,"div",58)(6,"span",59),b(7,"i",23),_(8),f(),h(9,"span",60),b(10,"i",21),_(11),f()(),h(12,"div",61)(13,"p"),_(14),f()(),h(15,"div",42)(16,"button",62),k("click",function(){const i=H(e).$implicit;return z(P(3).likeComment(i))}),b(17,"i",27),h(18,"span"),_(19),f()(),h(20,"button",63),k("click",function(){const i=H(e).$implicit,s=P(3);return s.replyingTo=i.id,z(s.replyContent="")}),b(21,"i",64),h(22,"span"),_(23,"Responder"),f()()()()(),N(24,n$,2,1,"div",65),f()}if(2&t){const e=n.$implicit,r=P(3);ie("has-replies",e.replies&&e.replies.length>0),p(8),te(" Usuario ",e.author_fingerprint.substring(0,8)," "),p(3),te("",r.formatTimeAgo(e.created_at)," "),p(3),K(e.content),p(2),ie("liked",e.user_has_liked),p(3),K(e.likes_count),p(5),O("ngIf",e.replies&&e.replies.length>0)}}function o$(t,n){if(1&t&&(h(0,"div",51),N(1,r$,25,9,"div",52),f()),2&t){const e=P(2);p(1),O("ngForOf",e.comments)}}function i$(t,n){if(1&t){const e=_e();h(0,"div",15)(1,"div",16)(2,"div",17)(3,"h1",18),_(4),f(),h(5,"div",19)(6,"span",20),b(7,"i",21),_(8),f(),h(9,"span",22),b(10,"i",23),_(11),f()()(),h(12,"div",24)(13,"p"),_(14),f()(),h(15,"div",25)(16,"button",26),k("click",function(){H(e);const o=P();return z(o.likeThread(o.thread))}),b(17,"i",27),h(18,"span"),_(19),f(),h(20,"span",28),_(21,"Me gusta"),f()(),h(22,"div",29),b(23,"i",30),h(24,"span"),_(25),f(),h(26,"span",28),_(27),f()()()(),h(28,"div",31)(29,"div",32)(30,"h3"),b(31,"i",33),_(32),f(),h(33,"div",34)(34,"textarea",35),k("ngModelChange",function(o){H(e);const i=P();return z(i.replyingTo?i.replyContent=o:i.newComment=o)}),f(),N(35,ZV,7,1,"div",36),N(36,XV,4,1,"div",36),f()()(),h(37,"div",37)(38,"div",38)(39,"h3"),b(40,"i",39),_(41),f()(),N(42,e$,7,0,"div",40),N(43,o$,2,1,"div",41),f()()}if(2&t){const e=P();p(4),K(e.thread.title),p(4),te("Publicado ",e.formatTimeAgo(e.thread.created_at)," "),p(3),te("Usuario ",e.thread.author_fingerprint.substring(0,8)," "),p(3),K(e.thread.content),p(2),ie("liked",e.thread.user_has_liked),p(3),K(e.thread.likes_count),p(6),K(e.thread.comments_count),p(2),te("Comentario",1!==e.thread.comments_count?"s":"",""),p(5),te(" ",e.replyingTo?"Respondiendo a comentario...":"Agregar comentario"," "),p(2),xl("placeholder",e.replyingTo?"Escribe tu respuesta...":"Comparte tu opini\xf3n sobre este tema..."),O("ngModel",e.replyingTo?e.replyContent:e.newComment),p(1),O("ngIf",e.replyingTo),p(1),O("ngIf",!e.replyingTo),p(5),Vr(" ",e.thread.comments_count," Comentario",1!==e.thread.comments_count?"s":""," "),p(1),O("ngIf",0===e.comments.length),p(1),O("ngIf",e.comments.length>0)}}const IO=function(){return["/discussion"]};function s$(t,n){if(1&t&&(h(0,"div",70)(1,"div",71),b(2,"i",72),h(3,"h3"),_(4,"Error al cargar el hilo"),f(),h(5,"p"),_(6),f(),h(7,"a",73),b(8,"i",3),_(9,"Volver al foro "),f()()()),2&t){const e=P();p(6),K(e.error),p(1),O("routerLink",Lo(2,IO))}}const a$={providers:[function UL(t,...n){return ra([{provide:hs,multi:!0,useValue:t},[],{provide:qo,useFactory:l1,deps:[Xt]},{provide:Ea,multi:!0,useFactory:u1},n.map(e=>e.\u0275providers)])}([{path:"",component:OO},{path:"home",component:OO},{path:"ranking",component:SV},{path:"discussion",component:(()=>{class t{discussionService;threads=[];showCreateForm=!1;newThread={title:"",content:""};isLoading=!1;sortBy="updated_at";error=null;constructor(e){this.discussionService=e}ngOnInit(){this.loadThreads()}loadThreads(){this.isLoading=!0,this.error=null,this.discussionService.getThreads(this.sortBy).subscribe({next:e=>{this.threads=e.map(r=>({...r,user_has_liked:this.discussionService.hasUserLiked("thread",r.id)})),this.isLoading=!1},error:e=>{console.error("Error loading threads:",e),this.error="Error al cargar los hilos. Por favor, intenta nuevamente.",this.isLoading=!1}})}createThread(){!this.newThread.title.trim()||!this.newThread.content.trim()||this.discussionService.createThread(this.newThread.title,this.newThread.content).subscribe({next:e=>{this.threads.unshift({...e,user_has_liked:!1}),this.showCreateForm=!1,this.newThread={title:"",content:""},this.error=null},error:e=>{console.error("Error creating thread:",e),this.error="Error al crear el hilo. Por favor, intenta nuevamente."}})}likeThread(e){this.discussionService.likeThread(e.id).subscribe({next:r=>{e.likes_count=r.new_count,e.user_has_liked="liked"===r.action},error:r=>{console.error("Error liking thread:",r),this.error="Error al dar like. Por favor, intenta nuevamente."}})}formatTimeAgo(e){const r=new Date(e),i=(new Date).getTime()-r.getTime(),s=Math.floor(i/6e4),a=Math.floor(s/60),c=Math.floor(a/24);return s<1?"Ahora mismo":s<60?`Hace ${s} min`:a<24?`Hace ${a} h`:1===c?"Ayer":c<7?`Hace ${c} d\xedas`:c<30?`Hace ${Math.floor(c/7)} sem`:`Hace ${Math.floor(c/30)} mes`}static \u0275fac=function(r){return new(r||t)(T(EO))};static \u0275cmp=Ht({type:t,selectors:[["app-discussion"]],standalone:!0,features:[Yt],decls:36,vars:10,consts:[[1,"discussion-container"],[1,"discussion-header"],[1,"header-content"],[1,"fas","fa-comments","me-2"],[1,"header-subtitle"],[1,"btn-create-thread",3,"click"],[1,"fas","fa-plus","me-1"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","create-thread-form",4,"ngIf"],[1,"sort-controls"],[1,"sort-options"],[3,"ngModel","ngModelChange","change"],["value","updated_at"],["value","likes_count"],["value","comments_count"],["value","created_at"],[1,"threads-count"],[1,"threads-list"],["class","loader",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","thread-card",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"create-thread-form"],[1,"form-card"],[1,"form-group"],["for","threadTitle"],["type","text","id","threadTitle","placeholder","Escribe un t\xedtulo interesante...","maxlength","200",3,"ngModel","ngModelChange"],["for","threadContent"],["id","threadContent","placeholder","Comparte tus pensamientos, preguntas o temas musicales...","rows","6",3,"ngModel","ngModelChange"],[1,"form-actions"],[1,"btn-cancel",3,"click"],[1,"btn-submit",3,"disabled","click"],[1,"fas","fa-paper-plane","me-1"],[1,"loader"],[1,"spinner"],[1,"empty-state"],[1,"fas","fa-comments-slash"],[1,"thread-card"],[1,"thread-header"],[1,"thread-title"],[3,"routerLink"],[1,"thread-date"],[1,"thread-content"],[1,"thread-stats"],[1,"stat"],[1,"like-btn",3,"click"],[1,"fas","fa-heart"],[1,"fas","fa-comment"],[1,"fas","fa-user"],[1,"thread-actions"],[1,"btn-read-more",3,"routerLink"],[1,"fas","fa-arrow-right","me-1"],[1,"pagination"],["disabled","",1,"page-btn"],[1,"fas","fa-chevron-left","me-1"],[1,"page-info"],[1,"fas","fa-chevron-right","ms-1"]],template:function(r,o){1&r&&(h(0,"div",0),b(1,"app-announcement")(2,"app-schedule"),h(3,"div",1)(4,"div",2)(5,"h1"),b(6,"i",3),_(7,"Foro Musical "),f(),h(8,"p",4),_(9,"Comparte, discute y conecta con otros amantes de la m\xfasica"),f()(),h(10,"button",5),k("click",function(){return o.showCreateForm=!o.showCreateForm}),b(11,"i",6),_(12),f()(),N(13,HV,5,1,"div",7),N(14,zV,20,4,"div",8),h(15,"div",9)(16,"div",10)(17,"span"),_(18,"Ordenar por:"),f(),h(19,"select",11),k("ngModelChange",function(s){return o.sortBy=s})("change",function(){return o.loadThreads()}),h(20,"option",12),_(21,"M\xe1s reciente"),f(),h(22,"option",13),_(23,"M\xe1s populares"),f(),h(24,"option",14),_(25,"M\xe1s comentados"),f(),h(26,"option",15),_(27,"M\xe1s antiguos"),f()()(),h(28,"div",16)(29,"span"),_(30),f()()(),h(31,"div",17),N(32,qV,4,0,"div",18),N(33,GV,9,0,"div",19),N(34,WV,28,14,"div",20),f(),N(35,KV,9,0,"div",21),f()),2&r&&(p(12),te(" ",o.showCreateForm?"Cancelar":"Nuevo Hilo"," "),p(1),O("ngIf",o.error),p(1),O("ngIf",o.showCreateForm),p(5),O("ngModel",o.sortBy),p(11),Vr("",o.threads.length," hilo",1!==o.threads.length?"s":"",""),p(2),O("ngIf",o.isLoading),p(1),O("ngIf",!o.isLoading&&0===o.threads.length),p(1),O("ngForOf",o.threads),p(1),O("ngIf",o.threads.length>0))},dependencies:[Pn,vr,On,Jo,cO,uO,wr,Uu,vo,Cp,Kr,RV,BV,Za,Go],styles:[".discussion-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.discussion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.discussion-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;background:linear-gradient(135deg,var(--primary-color) 0%,var(--accent-purple) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;margin-bottom:.5rem}.discussion-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem;margin:0}.discussion-header[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:1rem 2rem;border-radius:50px;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #1db9544d}.discussion-header[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]:hover{background:#1ed760;transform:translateY(-2px);box-shadow:0 6px 20px #1db95466}.discussion-header[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.create-thread-form[_ngcontent-%COMP%]{margin-bottom:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:2rem;box-shadow:0 8px 32px #0003}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1.5rem;font-weight:700}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-primary);font-weight:600;margin-bottom:.5rem}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background:rgba(42,42,42,.6);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:1rem;color:var(--text-primary);font-size:1rem;transition:all .3s ease}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #1db95433}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.8rem}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:var(--text-secondary);border:1px solid rgba(255,255,255,.2);padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;transition:all .3s ease}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);color:var(--text-primary)}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;font-weight:700;cursor:pointer;transition:all .3s ease}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:#1ed760;transform:translateY(-2px)}.create-thread-form[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background:var(--text-tertiary);cursor:not-allowed;transform:none}.sort-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding:1rem 1.5rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.1)}.sort-controls[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.sort-controls[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600}.sort-controls[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:rgba(42,42,42,.6);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:.5rem 1rem;color:var(--text-primary);cursor:pointer}.sort-controls[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.sort-controls[_ngcontent-%COMP%]   .threads-count[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:700;background:var(--primary-color);padding:.5rem 1rem;border-radius:20px;font-size:.9rem}.threads-list[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{text-align:center;padding:3rem}.threads-list[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:3px solid rgba(255,255,255,.1);border-top:3px solid var(--primary-color);border-radius:50%;width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.threads-list[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ffffff1a;margin-bottom:1.5rem}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.5rem}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:1.1rem}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:1rem 2rem;border-radius:50px;font-weight:700;cursor:pointer;transition:all .3s ease}.threads-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .btn-create-thread[_ngcontent-%COMP%]:hover{background:#1ed760;transform:translateY(-2px)}.thread-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:2rem;margin-bottom:1.5rem;transition:all .3s ease;box-shadow:0 4px 20px #0000001a}.thread-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 30px #1db95426;border-color:#1db95433}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;font-weight:700}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-primary);text-decoration:none;transition:color .3s ease}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-date[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;white-space:nowrap}.thread-card[_ngcontent-%COMP%]   .thread-content[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.6;margin-bottom:1.5rem;font-size:1.1rem}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]{display:flex;gap:2rem;margin-bottom:1.5rem}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);font-size:.9rem}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);transition:all .3s ease;padding:.5rem;border-radius:8px}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.1);color:#e74c3c}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]{color:#e74c3c}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.thread-card[_ngcontent-%COMP%]   .thread-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.thread-card[_ngcontent-%COMP%]   .thread-actions[_ngcontent-%COMP%]   .btn-read-more[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:700;display:inline-flex;align-items:center;gap:.5rem;transition:all .3s ease;padding:.5rem 1rem;border-radius:8px}.thread-card[_ngcontent-%COMP%]   .thread-actions[_ngcontent-%COMP%]   .btn-read-more[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.1);transform:translate(5px)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;margin-top:2rem;padding:1.5rem}.pagination[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]{background:var(--glass-bg);border:1px solid rgba(255,255,255,.1);color:var(--text-primary);padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;transition:all .3s ease;font-weight:600}.pagination[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-color);transform:translateY(-2px)}.pagination[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_heartBeat{0%{transform:scale(1)}25%{transform:scale(1.3)}50%{transform:scale(1)}75%{transform:scale(1.2)}to{transform:scale(1)}}@media (max-width: 768px){.discussion-container[_ngcontent-%COMP%]{padding:1rem}.discussion-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.sort-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.thread-card[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.thread-stats[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]})}return t})()},{path:"discussion/thread/:id",component:(()=>{class t{route;discussionService;thread;comments=[];newComment="";replyingTo=null;replyContent="";error=null;isLoading=!0;constructor(e,r){this.route=e,this.discussionService=r}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e&&this.loadThread(e)}loadThread(e){this.isLoading=!0,this.error=null,this.discussionService.getThread(e).subscribe({next:r=>{this.thread={...r.thread,user_has_liked:this.discussionService.hasUserLiked("thread",r.thread.id)},this.comments=this.buildCommentTree(r.comments).map(o=>({...o,user_has_liked:this.discussionService.hasUserLiked("comment",o.id),replies:o.replies?.map(i=>({...i,user_has_liked:this.discussionService.hasUserLiked("comment",i.id)}))})),this.isLoading=!1,this.error=null},error:r=>{console.error("Error loading thread:",r),this.error="No se pudo cargar el hilo. Por favor, intenta nuevamente.",this.isLoading=!1}})}buildCommentTree(e){const r=new Map,o=[];return e.forEach(i=>{i.replies=[],r.set(i.id,i)}),e.forEach(i=>{if(i.parent_comment_id){const s=r.get(i.parent_comment_id);s&&s.replies.push(i)}else o.push(i)}),o}addComment(){this.newComment.trim()&&this.discussionService.addComment(this.thread.id,this.newComment).subscribe({next:e=>{const r={...e,user_has_liked:!1,replies:[]};this.comments.push(r),this.newComment="",this.thread.comments_count++,this.error=null},error:e=>{console.error("Error adding comment:",e),this.error="Error al agregar el comentario. Por favor, intenta nuevamente."}})}addReply(){!this.replyContent.trim()||!this.replyingTo||this.discussionService.addComment(this.thread.id,this.replyContent,this.replyingTo).subscribe({next:e=>{const r=this.findCommentById(this.replyingTo);if(r){r.replies||(r.replies=[]);const o={...e,user_has_liked:!1};r.replies.push(o)}this.replyContent="",this.replyingTo=null,this.thread.comments_count++,this.error=null},error:e=>{console.error("Error adding reply:",e),this.error="Error al agregar la respuesta. Por favor, intenta nuevamente."}})}findCommentById(e){for(const r of this.comments){if(r.id===e)return r;if(r.replies)for(const o of r.replies)if(o.id===e)return o}return null}likeThread(e){this.discussionService.likeThread(e.id).subscribe({next:r=>{e.likes_count=r.new_count,e.user_has_liked="liked"===r.action},error:r=>{console.error("Error liking thread:",r),this.error="Error al dar like. Por favor, intenta nuevamente."}})}likeComment(e){this.discussionService.likeComment(e.id).subscribe({next:r=>{e.likes_count=r.new_count,e.user_has_liked="liked"===r.action},error:r=>{console.error("Error liking comment:",r),this.error="Error al dar like. Por favor, intenta nuevamente."}})}formatTimeAgo(e){const r=new Date(e),i=(new Date).getTime()-r.getTime(),s=Math.floor(i/6e4),a=Math.floor(s/60),c=Math.floor(a/24);return s<1?"Ahora mismo":s<60?`Hace ${s} min`:a<24?`Hace ${a} h`:1===c?"Ayer":c<7?`Hace ${c} d\xedas`:c<30?`Hace ${Math.floor(c/7)} sem`:`Hace ${Math.floor(c/30)} mes`}cancelReply(){this.replyingTo=null,this.replyContent=""}static \u0275fac=function(r){return new(r||t)(T(qo),T(EO))};static \u0275cmp=Ht({type:t,selectors:[["app-thread-detail"]],standalone:!0,features:[Yt],decls:9,vars:6,consts:[[1,"thread-detail-container"],[1,"back-nav"],[1,"back-link",3,"routerLink"],[1,"fas","fa-arrow-left","me-2"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","thread-main",4,"ngIf"],["class","error-state",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-triangle","me-2"],["type","button",1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"loading-state"],[1,"loader"],[1,"spinner"],[1,"thread-main"],[1,"thread-card","detailed"],[1,"thread-header"],[1,"thread-title"],[1,"thread-meta"],[1,"thread-date"],[1,"fas","fa-clock","me-1"],[1,"thread-author"],[1,"fas","fa-user","me-1"],[1,"thread-content","detailed"],[1,"thread-stats","detailed"],[1,"like-btn",3,"click"],[1,"fas","fa-heart"],[1,"label"],[1,"stat"],[1,"fas","fa-comment"],[1,"comment-form-section"],[1,"form-card"],[1,"fas","fa-reply","me-2"],[1,"comment-form"],["rows","4",3,"ngModel","placeholder","ngModelChange"],["class","comment-actions",4,"ngIf"],[1,"comments-section"],[1,"comments-header"],[1,"fas","fa-comments","me-2"],["class","empty-comments",4,"ngIf"],["class","comments-list",4,"ngIf"],[1,"comment-actions"],[1,"btn-cancel",3,"click"],[1,"fas","fa-times","me-1"],[1,"btn-submit",3,"disabled","click"],[1,"fas","fa-reply","me-1"],[1,"fas","fa-paper-plane","me-1"],[1,"empty-comments"],[1,"empty-state"],[1,"fas","fa-comment-slash"],[1,"comments-list"],["class","comment-item",3,"has-replies",4,"ngFor","ngForOf"],[1,"comment-item"],[1,"comment-main"],[1,"comment-avatar"],[1,"fas","fa-user"],[1,"comment-content"],[1,"comment-header"],[1,"comment-author"],[1,"comment-date"],[1,"comment-text"],[1,"comment-like-btn",3,"click"],[1,"comment-reply-btn",3,"click"],[1,"fas","fa-reply"],["class","comment-replies",4,"ngIf"],[1,"comment-replies"],["class","reply-item",4,"ngFor","ngForOf"],[1,"reply-item"],[1,"comment-avatar","small"],[1,"error-state"],[1,"error-message"],[1,"fas","fa-exclamation-triangle"],[1,"btn-retry",3,"routerLink"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"div",1)(2,"a",2),b(3,"i",3),_(4,"Volver al foro "),f()(),N(5,YV,5,1,"div",4),N(6,QV,5,0,"div",5),N(7,i$,44,18,"div",6),N(8,s$,10,3,"div",7),f()),2&r&&(p(2),O("routerLink",Lo(5,IO)),p(3),O("ngIf",o.error),p(1),O("ngIf",o.isLoading),p(1),O("ngIf",o.thread&&!o.isLoading),p(1),O("ngIf",o.error&&!o.isLoading))},dependencies:[Pn,vr,On,Jo,wr,vo,Kr,Za,Go],styles:[".thread-detail-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.back-nav[_ngcontent-%COMP%]{margin-bottom:2rem}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:700;display:inline-flex;align-items:center;padding:.8rem 1.5rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:50px;transition:all .3s ease;box-shadow:0 4px 15px #0000001a}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.1);transform:translate(-5px);box-shadow:0 6px 20px #1db95433}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(-3px)}.alert[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:1.2rem 1.5rem;margin-bottom:2rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:space-between}.alert.alert-danger[_ngcontent-%COMP%]{background:rgba(226,33,52,.15);color:#e22134;border:1px solid rgba(226,33,52,.2)}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;color:inherit;cursor:pointer;padding:.5rem;border-radius:50%;transition:background .3s ease}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2.5rem;margin-bottom:2rem;box-shadow:0 8px 32px #0003;transition:all .3s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #1db95426;border-color:#1db95433}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:2.2rem;font-weight:800;color:var(--text-primary);line-height:1.3;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary-color) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]{display:flex;gap:2rem;color:var(--text-secondary);font-size:.95rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-header[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-content.detailed[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.7;color:var(--text-secondary);margin-bottom:2rem;padding:1.5rem;background:rgba(255,255,255,.05);border-radius:12px;border-left:4px solid var(--primary-color)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]{display:flex;gap:2rem}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%], .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.8rem 1.5rem;background:rgba(255,255,255,.05);border-radius:50px;cursor:pointer;transition:all .3s ease;border:1px solid rgba(255,255,255,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover, .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1);transform:translateY(-2px)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);font-weight:600}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]{border:none;background:rgba(29,185,84,.1);color:var(--text-secondary)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]{color:#e74c3c;background:rgba(231,76,60,.1)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover.liked{background:rgba(231,76,60,.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{color:var(--text-secondary)}.thread-main[_ngcontent-%COMP%]   .thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.comment-form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:2rem;box-shadow:0 8px 32px #0003}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-primary);font-weight:700;display:flex;align-items:center;font-size:1.3rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1.2rem;background:rgba(42,42,42,.6);border:1px solid rgba(255,255,255,.1);border-radius:12px;resize:vertical;font-size:1rem;color:var(--text-primary);margin-bottom:1.5rem;transition:all .3s ease;font-family:inherit}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #1db95433;background:rgba(42,42,42,.8)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:var(--text-secondary);border:1px solid rgba(255,255,255,.2);padding:.8rem 1.5rem;border-radius:50px;cursor:pointer;transition:all .3s ease;font-weight:600}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);color:var(--text-primary);transform:translateY(-2px)}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;padding:.8rem 2rem;border-radius:50px;cursor:pointer;font-weight:700;transition:all .3s ease;box-shadow:0 4px 15px #1db9544d}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:#1ed760;transform:translateY(-2px);box-shadow:0 6px 20px #1db95466}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background:var(--text-tertiary);cursor:not-allowed;transform:none;box-shadow:none}.comments-section[_ngcontent-%COMP%]   .comments-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}.comments-section[_ngcontent-%COMP%]   .comments-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);display:flex;align-items:center;font-size:1.5rem;font-weight:700}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ffffff1a;margin-bottom:1.5rem}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.5rem}.comments-section[_ngcontent-%COMP%]   .empty-comments[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]{margin-bottom:2rem;animation:_ngcontent-%COMP%_slideUp .4s ease-out}.comments-list[_ngcontent-%COMP%]   .comment-item.has-replies[_ngcontent-%COMP%]{border-left:3px solid var(--primary-color);padding-left:1.5rem;margin-left:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]{display:flex;gap:1.2rem;margin-bottom:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,var(--primary-color) 0%,var(--accent-purple) 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;flex-shrink:0;font-size:1.2rem;box-shadow:0 4px 15px #0003}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{flex:1;background:var(--glass-bg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1.5rem;transition:all .3s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]:hover{border-color:#1db95433;box-shadow:0 4px 20px #00000026}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-author[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary);display:flex;align-items:center;gap:.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem;display:flex;align-items:center;gap:.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-text[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.6;margin-bottom:1.2rem;font-size:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);font-size:.9rem;transition:all .3s ease;padding:.5rem 1rem;border-radius:8px}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.05);color:var(--text-primary)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn.liked[_ngcontent-%COMP%]{color:#e74c3c}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn.liked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heartBeat .6s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-like-btn[_ngcontent-%COMP%]:hover{color:#e74c3c}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button.comment-reply-btn[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-main[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]{margin-left:3.5rem;border-left:2px solid rgba(255,255,255,.1);padding-left:1.5rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.2rem;animation:_ngcontent-%COMP%_slideUp .4s ease-out .1s both}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]   .comment-avatar.small[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1rem}.comments-list[_ngcontent-%COMP%]   .comment-item[_ngcontent-%COMP%]   .comment-replies[_ngcontent-%COMP%]   .reply-item[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{background:rgba(255,255,255,.03);border-color:#ffffff0d}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.loading-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{border:3px solid rgba(255,255,255,.1);border-top:3px solid var(--primary-color);border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem}.loading-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:var(--text-secondary)}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#e74c3c;margin-bottom:1.5rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.5rem}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{display:inline-flex;align-items:center;margin-top:1.5rem;color:var(--primary-color);text-decoration:none;font-weight:700;padding:.8rem 1.5rem;background:rgba(29,185,84,.1);border-radius:50px;transition:all .3s ease}.loading-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover, .error-state[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{background:rgba(29,185,84,.2);transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_heartBeat{0%{transform:scale(1)}25%{transform:scale(1.3)}50%{transform:scale(1)}75%{transform:scale(1.2)}to{transform:scale(1)}}@media (max-width: 768px){.thread-detail-container[_ngcontent-%COMP%]{padding:1rem}.thread-card.detailed[_ngcontent-%COMP%]{padding:1.5rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-title[_ngcontent-%COMP%]{font-size:1.6rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-meta[_ngcontent-%COMP%]{flex-direction:column;gap:.8rem!important}.thread-card.detailed[_ngcontent-%COMP%]   .thread-stats.detailed[_ngcontent-%COMP%]{flex-direction:column;gap:1rem!important}.comment-form-section[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:1.5rem}.comments-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start!important}.comment-main[_ngcontent-%COMP%]{gap:1rem!important;flex-direction:column}.comment-replies[_ngcontent-%COMP%]{margin-left:1rem!important;padding-left:1rem!important}.comment-avatar[_ngcontent-%COMP%]{align-self:flex-start}}"]})}return t})()},{path:"admin-login",component:Nj},{path:"admin-panel",component:gV,canActivate:[IV]},{path:"**",redirectTo:""}]),qw(),function O5(...t){const n=[],e=new Set;for(const{\u0275providers:r,\u0275kind:o}of t)e.add(o),r.length&&n.push(r);return ra([[],e.has(0)?[]:MR(),e.has(1)?[]:[{provide:du,useFactory:()=>(W(Bv).add("httpcache"),{isCacheActive:!0})},{provide:jw,useValue:HF,multi:!0,deps:[Ti,du]},{provide:Ea,multi:!0,useFactory:()=>{const t=W(Vo),n=W(du);return()=>{t.isStable.pipe(Dr(e=>e)).toPromise().then(()=>{n.isCacheActive=!1})}}}],n])}()]};class Mp extends Error{constructor(n,e="FunctionsError",r){super(n),this.name=e,this.context=r}}class l$ extends Mp{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class kO extends Mp{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class TO extends Mp{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var AO=function(t){return t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",t}(AO||{});class u${constructor(n,{headers:e={},customFetch:r,region:o=AO.Any}={}){var t;this.url=n,this.headers=e,this.region=o,this.fetch=(t=r)?(...n)=>t(...n):(...n)=>fetch(...n)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return(0,U.__awaiter)(this,arguments,void 0,function*(e,r={}){var o;let i,s;try{const{headers:a,method:c,body:l,signal:u,timeout:d}=r;let g={},{region:m}=r;m||(m=this.region);const v=new URL(`${this.url}/${e}`);let y;m&&"any"!==m&&(g["x-region"]=m,v.searchParams.set("forceFunctionRegion",m)),l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",y=l):"string"==typeof l?(g["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(g["Content-Type"]="application/json",y=JSON.stringify(l)):y=l;let w=u;d&&(s=new AbortController,i=setTimeout(()=>s.abort(),d),u?(w=s.signal,u.addEventListener("abort",()=>s.abort())):w=s.signal);const x=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),a),body:y,signal:w}).catch(B=>{throw new l$(B)}),M=x.headers.get("x-relay-error");if(M&&"true"===M)throw new kO(x);if(!x.ok)throw new TO(x);let j,V=(null!==(o=x.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return j="application/json"===V?yield x.json():"application/octet-stream"===V||"application/pdf"===V?yield x.blob():"text/event-stream"===V?x:"multipart/form-data"===V?yield x.formData():yield x.text(),{data:j,error:null,response:x}}catch(a){return{data:null,error:a,response:a instanceof TO||a instanceof kO?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var RO=De(60),d$=De.t(RO,2);const{PostgrestClient:NO}=RO||d$,v$=class _${constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(n=navigator.userAgent)&&void 0!==n&&n.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const o=parseInt(e.node.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let e=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(e+=`\n\nSuggested solution: ${n.workaround}`),new Error(e)}static createWebSocket(n,e){return new(this.getWebSocketConstructor())(n,e)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return"native"===n.type||"ws"===n.type}catch{return!1}}};var ms=function(t){return t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",t}(ms||{}),Pt=function(t){return t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",t}(Pt||{}),Mr=function(t){return t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",t}(Mr||{}),jO=function(t){return t.websocket="websocket",t}(jO||{}),_s=function(t){return t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",t}(_s||{});class M${constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,e){return n.event!==this.BROADCAST_EVENT||n.payload instanceof ArrayBuffer||"string"!=typeof n.payload.event?e(JSON.stringify([n.join_ref,n.ref,n.topic,n.event,n.payload])):e(this._binaryEncodeUserBroadcastPush(n))}_binaryEncodeUserBroadcastPush(n){var e;return this._isArrayBuffer(null===(e=n.payload)||void 0===e?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var e,r;const o=null!==(r=null===(e=n.payload)||void 0===e?void 0:e.payload)&&void 0!==r?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var e,r;const o=null!==(r=null===(e=n.payload)||void 0===e?void 0:e.payload)&&void 0!==r?r:{},s=(new TextEncoder).encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(n,e,r){var o,i;const s=n.topic,a=null!==(o=n.ref)&&void 0!==o?o:"",c=null!==(i=n.join_ref)&&void 0!==i?i:"",l=n.payload.event,u=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},d=0===Object.keys(u).length?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const m=new ArrayBuffer(this.HEADER_LENGTH+(this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length));let v=new DataView(m),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,c.length),v.setUint8(y++,a.length),v.setUint8(y++,s.length),v.setUint8(y++,l.length),v.setUint8(y++,d.length),v.setUint8(y++,e),Array.from(c,x=>v.setUint8(y++,x.charCodeAt(0))),Array.from(a,x=>v.setUint8(y++,x.charCodeAt(0))),Array.from(s,x=>v.setUint8(y++,x.charCodeAt(0))),Array.from(l,x=>v.setUint8(y++,x.charCodeAt(0))),Array.from(d,x=>v.setUint8(y++,x.charCodeAt(0)));var w=new Uint8Array(m.byteLength+r.byteLength);return w.set(new Uint8Array(m),0),w.set(new Uint8Array(r),m.byteLength),w.buffer}decode(n,e){if(this._isArrayBuffer(n))return e(this._binaryDecode(n));if("string"==typeof n){const r=JSON.parse(n),[o,i,s,a,c]=r;return e({join_ref:o,ref:i,topic:s,event:a,payload:c})}return e({})}_binaryDecode(n){const e=new DataView(n),r=e.getUint8(0),o=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,e,o)}_decodeUserBroadcast(n,e,r){const o=e.getUint8(1),i=e.getUint8(2),s=e.getUint8(3),a=e.getUint8(4);let c=this.HEADER_LENGTH+4;const l=r.decode(n.slice(c,c+o));c+=o;const u=r.decode(n.slice(c,c+i));c+=i;const d=r.decode(n.slice(c,c+s));c+=s;const g=n.slice(c,n.byteLength),m=a===this.JSON_ENCODING?JSON.parse(r.decode(g)):g,v={type:this.BROADCAST_EVENT,event:u,payload:m};return s>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(n){var e;return n instanceof ArrayBuffer||"ArrayBuffer"===(null===(e=n?.constructor)||void 0===e?void 0:e.name)}_pick(n,e){return n&&"object"==typeof n?Object.fromEntries(Object.entries(n).filter(([r])=>e.includes(r))):{}}}class VO{constructor(n,e){this.callback=n,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze=function(t){return t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",t}(Ze||{});const $O=(t,n,e={})=>{var r;const o=null!==(r=e.skipTypes)&&void 0!==r?r:[];return n?Object.keys(n).reduce((i,s)=>(i[s]=O$(s,t,n,o),i),{}):{}},O$=(t,n,e,r)=>{const o=n.find(a=>a.name===t),i=o?.type,s=e[t];return i&&!r.includes(i)?UO(i,s):Pp(s)},UO=(t,n)=>{if("_"===t.charAt(0)){const e=t.slice(1,t.length);return E$(n,e)}switch(t){case Ze.bool:return P$(n);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return x$(n);case Ze.json:case Ze.jsonb:return D$(n);case Ze.timestamp:return S$(n);default:return Pp(n)}},Pp=t=>t,P$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},x$=t=>{if("string"==typeof t){const n=parseFloat(t);if(!Number.isNaN(n))return n}return t},D$=t=>{if("string"==typeof t)try{return JSON.parse(t)}catch(n){return console.log(`JSON parse error: ${n}`),t}return t},E$=(t,n)=>{if("string"!=typeof t)return t;const e=t.length-1;if("{"===t[0]&&"}"===t[e]){let i;const s=t.slice(1,e);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>UO(n,a))}return t},S$=t=>"string"==typeof t?t.replace(" ","T"):t,BO=t=>{const n=new URL(t);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname=""===n.pathname||"/"===n.pathname?"/api/broadcast":n.pathname+"/api/broadcast",n.href};class xp{constructor(n,e,r={},o=1e4){this.channel=n,this.event=e,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,e){var r;return this._hasReceived(n)&&e(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:n,callback:e}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(n,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:e}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(e))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}class oc{constructor(n,e){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oc.syncState(this.state,o,i,s),this.pendingDiffs.forEach(c=>{this.state=oc.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{const{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=oc.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,e,r,o){const i=this.cloneDeep(n),s=this.transformState(e),a={},c={};return this.map(i,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{const d=i[l];if(d){const g=u.map(w=>w.presence_ref),m=d.map(w=>w.presence_ref),v=u.filter(w=>m.indexOf(w.presence_ref)<0),y=d.filter(w=>g.indexOf(w.presence_ref)<0);v.length>0&&(a[l]=v),y.length>0&&(c[l]=y)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,o)}static syncDiff(n,e,r,o){const{joins:i,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,c)=>{var l;const u=null!==(l=n[a])&&void 0!==l?l:[];if(n[a]=this.cloneDeep(c),u.length>0){const d=n[a].map(m=>m.presence_ref),g=u.filter(m=>d.indexOf(m.presence_ref)<0);n[a].unshift(...g)}r(a,u,c)}),this.map(s,(a,c)=>{let l=n[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),n[a]=l,o(a,l,c),0===l.length&&delete n[a]}),n}static map(n,e){return Object.getOwnPropertyNames(n).map(r=>e(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((e,r)=>{const o=n[r];return e[r]="metas"in o?o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):o,e},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gu=function(t){return t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",t}(Gu||{}),yo=function(t){return t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",t}(yo||{});class Dp{constructor(n,e={config:{}},r){var o,i;if(this.topic=n,this.params=e,this.socket=r,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new xp(this,Mr.join,this.params,this.timeout),this.rejoinTimer=new VO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mr.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new oc(this),this.broadcastEndpointURL=BO(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&null!==(i=null===(o=this.params.config)||void 0===o?void 0:o.broadcast)&&void 0!==i&&i.replay)throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,e=this.timeout){var o,i,s,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:a,presence:c,private:l}}=this.params,u=null!==(i=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(v=>v.filter))&&void 0!==i?i:[],d=!!this.bindings[Gu.PRESENCE]&&this.bindings[Gu.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),g={},m={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(v=>n?.(yo.CHANNEL_ERROR,v)),this._onClose(()=>n?.(yo.CLOSED)),this.updateJoinPayload(Object.assign({config:m},g)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",function(){var v=C(function*({postgres_changes:y}){var w;if(r.socket.setAuth(),void 0!==y){const x=r.bindings.postgres_changes,M=null!==(w=x?.length)&&void 0!==w?w:0,V=[];for(let j=0;j<M;j++){const B=x[j],{filter:{event:be,schema:pt,table:Ie,filter:st}}=B,Or=y&&y[j];if(!Or||Or.event!==be||Or.schema!==pt||Or.table!==Ie||Or.filter!==st)return r.unsubscribe(),r.state=Pt.errored,void n?.(yo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));V.push(Object.assign(Object.assign({},B),{id:Or.id}))}return r.bindings.postgres_changes=V,void(n&&n(yo.SUBSCRIBED))}n?.(yo.SUBSCRIBED)});return function(y){return v.apply(this,arguments)}}()).receive("error",v=>{this.state=Pt.errored,n?.(yo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{n?.(yo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){var e=this;return C(function*(r,o={}){return yield e.send({type:"presence",event:"track",payload:r},o.timeout||e.timeout)}).apply(this,arguments)}untrack(){var n=this;return C(function*(e={}){return yield n.send({type:"presence",event:"untrack"},e)}).apply(this,arguments)}on(n,e,r){return this.state===Pt.joined&&n===Gu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,e,r)}httpSend(n,e){var r=this;return C(function*(o,i,s={}){var a;const c=r.socket.accessTokenValue?`Bearer ${r.socket.accessTokenValue}`:"";if(null==i)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:c,apikey:r.socket.apiKey?r.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:i,private:r.private}]})},u=yield r._fetchWithTimeout(r.broadcastEndpointURL,l,null!==(a=s.timeout)&&void 0!==a?a:r.timeout);if(202===u.status)return{success:!0};let d=u.statusText;try{const g=yield u.json();d=g.error||g.message||d}catch{}return Promise.reject(new Error(d))}).apply(this,arguments)}send(n){var e=this;return C(function*(r,o={}){var i,s;if(e._canPush()||"broadcast"!==r.type)return new Promise(a=>{var c,l,u;const d=e._push(r.type,r,o.timeout||e.timeout);"broadcast"===r.type&&!(null!==(u=null===(l=null===(c=e.params)||void 0===c?void 0:c.config)||void 0===l?void 0:l.broadcast)&&void 0!==u&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:c}=r,u={method:"POST",headers:{Authorization:e.socket.accessTokenValue?`Bearer ${e.socket.accessTokenValue}`:"",apikey:e.socket.apiKey?e.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:e.subTopic,event:a,payload:c,private:e.private}]})};try{const d=yield e._fetchWithTimeout(e.broadcastEndpointURL,u,null!==(i=o.timeout)&&void 0!==i?i:e.timeout);return yield null===(s=d.body)||void 0===s?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Pt.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new xp(this,Mr.leave,{},n),r.receive("ok",()=>{e(),o("ok")}).receive("timeout",()=>{e(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}_fetchWithTimeout(n,e,r){var o=this;return C(function*(){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=yield o.socket.fetch(n,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),a})()}_push(n,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new xp(this,n,e,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(n,e,r){return e}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,e,r){var o,i;const s=n.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Mr;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let g=this._onMessage(s,e,r);if(e&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(m=>{var v,y,w;return"*"===(null===(v=m.filter)||void 0===v?void 0:v.event)||(null===(w=null===(y=m.filter)||void 0===y?void 0:y.event)||void 0===w?void 0:w.toLocaleLowerCase())===s}).map(m=>m.callback(g,r)):null===(i=this.bindings[s])||void 0===i||i.filter(m=>{var v,y,w,x,M,V;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in m){const j=m.id,B=null===(v=m.filter)||void 0===v?void 0:v.event;return j&&(null===(y=e.ids)||void 0===y?void 0:y.includes(j))&&("*"===B||B?.toLocaleLowerCase()===(null===(w=e.data)||void 0===w?void 0:w.type.toLocaleLowerCase()))}{const j=null===(M=null===(x=m?.filter)||void 0===x?void 0:x.event)||void 0===M?void 0:M.toLocaleLowerCase();return"*"===j||j===(null===(V=e?.event)||void 0===V?void 0:V.toLocaleLowerCase())}}return m.type.toLocaleLowerCase()===s}).map(m=>{if("object"==typeof g&&"ids"in g){const v=g.data,{schema:y,table:w,commit_timestamp:x,type:M,errors:V}=v;g=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:x,eventType:M,new:{},old:{},errors:V}),this._getPayloadRecords(v))}m.callback(g,r)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,e,r){const o=n.toLocaleLowerCase(),i={type:o,filter:e,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(n,e){const r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!((null===(i=o.type)||void 0===i?void 0:i.toLocaleLowerCase())===r&&Dp.isEqual(o.filter,e))})),this}static isEqual(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(n[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Mr.close,{},n)}_onError(n){this._on(Mr.error,{},e=>n(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const e={new:{},old:{}};return("INSERT"===n.type||"UPDATE"===n.type)&&(e.new=$O(n.columns,n.record)),("UPDATE"===n.type||"DELETE"===n.type)&&(e.old=$O(n.columns,n.old_record)),e}}const Ep=()=>{},T$=[1e3,2e3,5e3,1e4];class N${constructor(n,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ep,this.ref=0,this.reconnectTimer=null,this.vsn="1.0.0",this.logger=Ep,this.conn=null,this.sendBuffer=[],this.serializer=new M$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),null===(r=e?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${n}/${jO.websocket}`,this.httpEndpoint=BO(n),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v$.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const e=n.message;throw e.includes("Node.js")?new Error(`${e}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(n?this.conn.close(n,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(n){var e=this;return C(function*(){const r=yield n.unsubscribe();return 0===e.channels.length&&e.disconnect(),r})()}removeAllChannels(){var n=this;return C(function*(){const e=yield Promise.all(n.channels.map(r=>r.unsubscribe()));return n.channels=[],n.disconnect(),e})()}log(n,e,r){this.logger(n,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ms.connecting:return _s.Connecting;case ms.open:return _s.Open;case ms.closing:return _s.Closing;default:return _s.Closed}}isConnected(){return this.connectionState()===_s.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(n,e={config:{}}){const r=`realtime:${n}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{const i=new Dp(`realtime:${n}`,e,this);return this.channels.push(i),i}}push(n){const{topic:e,event:r,payload:o,ref:i}=n,s=()=>{this.encode(n,a=>{var c;null===(c=this.conn)||void 0===c||c.send(a)})};this.log("push",`${e} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(){var n=this;return C(function*(e=null){n._authPromise=n._performAuth(e);try{yield n._authPromise}finally{n._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var n=this;return C(function*(){var e;if(n.isConnected()){if(n.pendingHeartbeatRef){n.pendingHeartbeatRef=null,n.log("transport","heartbeat timeout. Attempting to re-establish connection");try{n.heartbeatCallback("timeout")}catch(r){n.log("error","error in heartbeat callback",r)}return n._wasManualDisconnect=!1,null===(e=n.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;n.isConnected()||null===(r=n.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)}n.pendingHeartbeatRef=n._makeRef(),n.push({topic:"phoenix",event:"heartbeat",payload:{},ref:n.pendingHeartbeatRef});try{n.heartbeatCallback("sent")}catch(r){n.log("error","error in heartbeat callback",r)}n._setAuthSafely("heartbeat")}else try{n.heartbeatCallback("disconnected")}catch(r){n.log("error","error in heartbeat callback",r)}})()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return this.ref=n===this.ref?0:n,this.ref.toString()}_leaveOpenTopic(n){let e=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${n}"`),e.unsubscribe())}_remove(n){this.channels=this.channels.filter(e=>e.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:i,ref:s}=e;this.log("receive",`${i.status||""} ${r} ${o} ${s?`(${s})`:""}`.trim(),i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(o,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(n){var e;"heartbeat"===n&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===n&&(null===(e=this.reconnectTimer)||void 0===e||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ms.open||this.conn.readyState===ms.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var e;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Mr.error))}_appendParams(n,e){if(0===Object.keys(e).length)return n;const r=n.match(/\?/)?"&":"?";return`${n}${r}${new URLSearchParams(e)}`}_workerObjectUrl(n){let e;if(n)e=n;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(n,e=!1){this._connectionState=n,"connecting"===n?this._wasManualDisconnect=!1:"disconnecting"===n&&(this._wasManualDisconnect=e)}_performAuth(){var n=this;return C(function*(e=null){let r;r=e||(n.accessToken?yield n.accessToken():n.accessTokenValue),n.accessTokenValue!=r&&(n.accessTokenValue=r,n.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.86.0"}),o.joinedOnce&&o._isJoined()&&o._push(Mr.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var n=this;return C(function*(){n._authPromise&&(yield n._authPromise)})()}_setAuthSafely(n="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${n}`,e)})}_triggerStateCallbacks(n,e){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(e)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){var n=this;this.reconnectTimer=new VO(C(function*(){setTimeout(C(function*(){yield n._waitForAuthIfNeeded(),n.isConnected()||n.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(n){var e,r,o,i,s,a,c,l,u,d,g,m;switch(this.transport=null!==(e=n?.transport)&&void 0!==e?e:null,this.timeout=null!==(r=n?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=n?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(i=n?.worker)&&void 0!==i&&i,this.accessToken=null!==(s=n?.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=n?.heartbeatCallback)&&void 0!==a?a:Ep,this.vsn=null!==(c=n?.vsn)&&void 0!==c?c:"1.0.0",n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=n?.reconnectAfterMs)&&void 0!==l?l:v=>T$[v-1]||1e4,this.vsn){case"1.0.0":this.encode=null!==(u=n?.encode)&&void 0!==u?u:(v,y)=>y(JSON.stringify(v)),this.decode=null!==(d=n?.decode)&&void 0!==d?d:(v,y)=>y(JSON.parse(v));break;case"2.0.0":this.encode=null!==(g=n?.encode)&&void 0!==g?g:this.serializer.encode.bind(this.serializer),this.decode=null!==(m=n?.decode)&&void 0!==m?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class Ku extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function it(t){return"object"==typeof t&&null!==t&&"__isStorageError"in t}class F$ extends Ku{constructor(n,e,r){super(n),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sp extends Ku{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}}const Ip=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),kp=t=>{if(Array.isArray(t))return t.map(e=>kp(e));if("function"==typeof t||t!==Object(t))return t;const n={};return Object.entries(t).forEach(([e,r])=>{const o=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));n[o]=kp(r)}),n},Tp=t=>{var n;return t.msg||t.message||t.error_description||("string"==typeof t.error?t.error:null===(n=t.error)||void 0===n?void 0:n.message)||JSON.stringify(t)},$$=(t,n,e)=>(0,U.__awaiter)(void 0,void 0,void 0,function*(){const r=yield Response;t instanceof r&&!e?.noResolveJson?t.json().then(o=>{const i=t.status||500,s=o?.statusCode||i+"";n(new F$(Tp(o),i,s))}).catch(o=>{n(new Sp(Tp(o),o))}):n(new Sp(Tp(t),t))}),U$=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const n=Object.getPrototypeOf(t);return!(null!==n&&n!==Object.prototype&&null!==Object.getPrototypeOf(n)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(r)):o.body=r,n?.duplex&&(o.duplex=n.duplex),Object.assign(Object.assign({},o),e)):o};function ic(t,n,e,r,o,i){return(0,U.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(e,U$(n,r,o,i)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>$$(c,a,r))})})}function sc(t,n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){return ic(t,"GET",n,e,r)})}function er(t,n,e,r,o){return(0,U.__awaiter)(this,void 0,void 0,function*(){return ic(t,"POST",n,r,o,e)})}function Ap(t,n,e,r,o){return(0,U.__awaiter)(this,void 0,void 0,function*(){return ic(t,"PUT",n,r,o,e)})}function Rp(t,n,e,r,o){return(0,U.__awaiter)(this,void 0,void 0,function*(){return ic(t,"DELETE",n,r,o,e)})}class H${constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}execute(){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}}var HO;HO=Symbol.toStringTag;const G$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class W${constructor(n,e={},r,o){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=r,this.fetch=Ip(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,e,r,o){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},zO),o);let a=Object.assign(Object.assign({},this.headers),"POST"===n&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&"object"==typeof i&&"pipe"in i&&"function"==typeof i.pipe)&&!s.duplex&&(s.duplex="half")),o?.headers&&(a=Object.assign(Object.assign({},a),o.headers));const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=yield("PUT"==n?Ap:er)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}})}upload(n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,e,r)})}uploadToSignedUrl(n,e,r,o){return(0,U.__awaiter)(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(n),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let c;const l=Object.assign({upsert:zO.upsert},o),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType),{data:{path:i,fullPath:(yield Ap(this.fetch,a.toString(),c,{headers:u})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(it(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(n,e){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(n);const o=Object.assign({},this.headers);e?.upsert&&(o["x-upsert"]="true");const i=yield er(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new Ku("No token returned by API");return{data:{signedUrl:s.toString(),path:n,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}update(n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,e,r)})}move(n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield er(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}copy(n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield er(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}createSignedUrl(n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),i=yield er(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}createSignedUrls(n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{const o=yield er(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:n},{headers:this.headers}),i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}download(n,e){const o=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),s=i?`?${i}`:"",a=this._getFinalPath(n);return new class z${constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[HO]="BlobDownloadBuilder",this.promise=null}asStream(){return new H$(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}}(()=>sc(this.fetch,`${this.url}/${o}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(n);try{const r=yield sc(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:kp(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}exists(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){const e=this._getFinalPath(n);try{return yield function B$(t,n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){return ic(t,"HEAD",n,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r)&&r instanceof Sp){const o=r.originalError;if([400,404].includes(o?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(n,e){const r=this._getFinalPath(n),o=[],i=e?.download?`download=${!0===e.download?"":e.download}`:"";""!==i&&o.push(i);const a=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});""!==c&&o.push(c);let l=o.join("&");return""!==l&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Rp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}list(n,e,r){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},G$),e),{prefix:n||""});return{data:yield er(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}listV2(n,e){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{const r=Object.assign({},n);return{data:yield er(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}}const GO={"X-Client-Info":"storage-js/2.86.0"};class K${constructor(n,e={},r,o){this.shouldThrowOnError=!1;const i=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GO),e),this.fetch=Ip(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{const e=this.listBucketOptionsToQueryString(n);return{data:yield sc(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}getBucket(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}createBucket(n){return(0,U.__awaiter)(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield er(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}updateBucket(n,e){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Ap(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}emptyBucket(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield er(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Rp(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}}var ac=class extends Error{constructor(t,n){super(t),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown="CommitStateUnknownException"===n.icebergType||[500,502,504].includes(n.status)&&!0===n.icebergType?.includes("CommitState")}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function Np(){return(Np=C(function*(t){return t&&"none"!==t.type?"bearer"===t.type?{Authorization:`Bearer ${t.token}`}:"header"===t.type?{[t.name]:t.value}:"custom"===t.type?yield t.getHeaders():{}:{}})).apply(this,arguments)}function Ju(t){return t.join("\x1f")}function vs(t){return t.join("\x1f")}class tU{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},GO),e),this.fetch=Ip(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield er(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}listBuckets(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{const e=new URLSearchParams;void 0!==n?.limit&&e.set("limit",n.limit.toString()),void 0!==n?.offset&&e.set("offset",n.offset.toString()),n?.sortColumn&&e.set("sortColumn",n.sortColumn),n?.sortOrder&&e.set("sortOrder",n.sortOrder),n?.search&&e.set("search",n.search);const r=e.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield sc(this.fetch,o,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Rp(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}})}from(n){if(!(t=n)||"string"!=typeof t||0===t.length||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")||!/^[\w!.\*'() &$@=;:+,?-]+$/.test(t))throw new Ku("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");var t;return new class{constructor(t){let n="v1";t.catalogName&&(n+=`/${t.catalogName}`);const e=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=function Q$(t){const n=t.fetchImpl??globalThis.fetch;return{request(e){return C(function*({method:r,path:o,query:i,body:s,headers:a}){const c=function J$(t,n,e){const r=new URL(n,t);if(e)for(const[o,i]of Object.entries(e))void 0!==i&&r.searchParams.set(o,i);return r.toString()}(t.baseUrl,o,i),l=yield function Y$(t){return Np.apply(this,arguments)}(t.auth),u=yield n(c,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),d=yield u.text(),g=(u.headers.get("content-type")||"").includes("application/json"),m=g&&d?JSON.parse(d):d;if(!u.ok){const v=g?m:void 0,y=v?.error;throw new ac(y?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:y?.type,icebergCode:y?.code,details:v})}return{status:u.status,headers:u.headers,data:m}}).apply(this,arguments)}}}({baseUrl:e,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new class{constructor(t,n=""){this.client=t,this.prefix=n}listNamespaces(t){var n=this;return C(function*(){const e=t?{parent:Ju(t.namespace)}:void 0;return(yield n.client.request({method:"GET",path:`${n.prefix}/namespaces`,query:e})).data.namespaces.map(o=>({namespace:o}))})()}createNamespace(t,n){var e=this;return C(function*(){const r={namespace:t.namespace,properties:n?.properties};return(yield e.client.request({method:"POST",path:`${e.prefix}/namespaces`,body:r})).data})()}dropNamespace(t){var n=this;return C(function*(){yield n.client.request({method:"DELETE",path:`${n.prefix}/namespaces/${Ju(t.namespace)}`})})()}loadNamespaceMetadata(t){var n=this;return C(function*(){return{properties:(yield n.client.request({method:"GET",path:`${n.prefix}/namespaces/${Ju(t.namespace)}`})).data.properties}})()}namespaceExists(t){var n=this;return C(function*(){try{return yield n.client.request({method:"HEAD",path:`${n.prefix}/namespaces/${Ju(t.namespace)}`}),!0}catch(e){if(e instanceof ac&&404===e.status)return!1;throw e}})()}createNamespaceIfNotExists(t,n){var e=this;return C(function*(){try{return yield e.createNamespace(t,n)}catch(r){if(r instanceof ac&&409===r.status)return;throw r}})()}}(this.client,n),this.tableOps=new class{constructor(t,n="",e){this.client=t,this.prefix=n,this.accessDelegation=e}listTables(t){var n=this;return C(function*(){return(yield n.client.request({method:"GET",path:`${n.prefix}/namespaces/${vs(t.namespace)}/tables`})).data.identifiers})()}createTable(t,n){var e=this;return C(function*(){const r={};return e.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=e.accessDelegation),(yield e.client.request({method:"POST",path:`${e.prefix}/namespaces/${vs(t.namespace)}/tables`,body:n,headers:r})).data.metadata})()}updateTable(t,n){var e=this;return C(function*(){const r=yield e.client.request({method:"POST",path:`${e.prefix}/namespaces/${vs(t.namespace)}/tables/${t.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}})()}dropTable(t,n){var e=this;return C(function*(){yield e.client.request({method:"DELETE",path:`${e.prefix}/namespaces/${vs(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(n?.purge??!1)}})})()}loadTable(t){var n=this;return C(function*(){const e={};return n.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=n.accessDelegation),(yield n.client.request({method:"GET",path:`${n.prefix}/namespaces/${vs(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata})()}tableExists(t){var n=this;return C(function*(){const e={};n.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=n.accessDelegation);try{return yield n.client.request({method:"HEAD",path:`${n.prefix}/namespaces/${vs(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof ac&&404===r.status)return!1;throw r}})()}createTableIfNotExists(t,n){var e=this;return C(function*(){try{return yield e.createTable(t,n)}catch(r){if(r instanceof ac&&409===r.status)return yield e.loadTable({namespace:t.namespace,name:n.name});throw r}})()}}(this.client,n,this.accessDelegation)}listNamespaces(t){var n=this;return C(function*(){return n.namespaceOps.listNamespaces(t)})()}createNamespace(t,n){var e=this;return C(function*(){return e.namespaceOps.createNamespace(t,n)})()}dropNamespace(t){var n=this;return C(function*(){yield n.namespaceOps.dropNamespace(t)})()}loadNamespaceMetadata(t){var n=this;return C(function*(){return n.namespaceOps.loadNamespaceMetadata(t)})()}listTables(t){var n=this;return C(function*(){return n.tableOps.listTables(t)})()}createTable(t,n){var e=this;return C(function*(){return e.tableOps.createTable(t,n)})()}updateTable(t,n){var e=this;return C(function*(){return e.tableOps.updateTable(t,n)})()}dropTable(t,n){var e=this;return C(function*(){yield e.tableOps.dropTable(t,n)})()}loadTable(t){var n=this;return C(function*(){return n.tableOps.loadTable(t)})()}namespaceExists(t){var n=this;return C(function*(){return n.namespaceOps.namespaceExists(t)})()}tableExists(t){var n=this;return C(function*(){return n.tableOps.tableExists(t)})()}createNamespaceIfNotExists(t,n){var e=this;return C(function*(){return e.namespaceOps.createNamespaceIfNotExists(t,n)})()}createTableIfNotExists(t,n){var e=this;return C(function*(){return e.tableOps.createTableIfNotExists(t,n)})()}}({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:()=>(0,U.__awaiter)(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Fp={"X-Client-Info":"storage-js/2.86.0","Content-Type":"application/json"};class WO extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function xn(t){return"object"==typeof t&&null!==t&&"__isStorageVectorsError"in t}class Lp extends WO{constructor(n,e,r){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nU extends WO{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}}const jp=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),KO=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),iU=(t,n,e)=>(0,U.__awaiter)(void 0,void 0,void 0,function*(){if(t&&"object"==typeof t&&"status"in t&&"ok"in t&&"number"==typeof t.status&&!e?.noResolveJson){const o=t.status||500,i=t;"function"==typeof i.json?i.json().then(s=>{const a=s?.statusCode||s?.code||o+"";n(new Lp(KO(s),o,a))}).catch(()=>{n(new Lp(i.statusText||`HTTP ${o} error`,o,o+""))}):n(new Lp(i.statusText||`HTTP ${o} error`,o,o+""))}else n(new nU(KO(t),t))}),sU=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"!==t&&r?((t=>{if("object"!=typeof t||null===t)return!1;const n=Object.getPrototypeOf(t);return!(null!==n&&n!==Object.prototype&&null!==Object.getPrototypeOf(n)||Symbol.toStringTag in t||Symbol.iterator in t)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),e)):o};function Dn(t,n,e,r,o){return(0,U.__awaiter)(this,void 0,void 0,function*(){return function Yu(t,n,e,r,o,i){return(0,U.__awaiter)(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(e,sU(n,r,o,i)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;const l=c.headers.get("content-type");return l&&l.includes("application/json")?c.json():{}}).then(c=>s(c)).catch(c=>iU(c,a,r))})})}(t,"POST",n,r,o,e)})}class aU{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Fp),e),this.fetch=jp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}getIndex(n,e){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xn(r))return{data:null,error:r};throw r}})}listIndexes(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}deleteIndex(n,e){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xn(r))return{data:null,error:r};throw r}})}}class cU{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Fp),e),this.fetch=jp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Dn(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}getVectors(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}listVectors(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==n.segmentCount){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==n.segmentIndex&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error("segmentIndex must be between 0 and "+(n.segmentCount-1))}return{data:yield Dn(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}queryVectors(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}deleteVectors(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Dn(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}}class lU{constructor(n,e={},r){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Fp),e),this.fetch=jp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}getBucket(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,U.__awaiter)(this,arguments,void 0,function*(n={}){try{return{data:yield Dn(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}deleteBucket(n){return(0,U.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xn(e))return{data:null,error:e};throw e}})}}class uU extends lU{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new dU(this.url,this.headers,n,this.fetch)}createBucket(n){const e=Object.create(null,{createBucket:{get:()=>super.createBucket}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.createBucket.call(this,n)})}getBucket(n){const e=Object.create(null,{getBucket:{get:()=>super.getBucket}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.getBucket.call(this,n)})}listBuckets(){const n=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return(0,U.__awaiter)(this,arguments,void 0,function*(e={}){return n.listBuckets.call(this,e)})}deleteBucket(n){const e=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.deleteBucket.call(this,n)})}}class dU extends aU{constructor(n,e,r,o){super(n,e,o),this.vectorBucketName=r}createIndex(n){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,U.__awaiter)(this,arguments,void 0,function*(e={}){return n.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new hU(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class hU extends cU{constructor(n,e,r,o,i){super(n,e,i),this.vectorBucketName=r,this.indexName=o}putVectors(n){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,U.__awaiter)(this,arguments,void 0,function*(e={}){return n.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,U.__awaiter)(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class fU extends K${constructor(n,e={},r,o){super(n,e,r,o)}from(n){return new W$(this.url,this.headers,n,this.fetch)}get vectors(){return new uU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tU(this.url+"/iceberg",this.headers,this.fetch)}}let cc="";cc=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const pU={headers:{"X-Client-Info":`supabase-js-${cc}/2.86.0`}},mU={schema:"public"},_U={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vU={},CU=(t,n,e)=>{const r=(t=>t?(...n)=>t(...n):(...n)=>fetch(...n))(e),o=Headers;return function(){var i=C(function*(s,a){var c;const l=null!==(c=yield n())&&void 0!==c?c:t;let u=new o(a?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:u}))});return function(s,a){return i.apply(this,arguments)}}()},ys=3e4,Up="X-Supabase-Api-Version",YO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},EU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class lc extends Error{constructor(n,e,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}}function ne(t){return"object"==typeof t&&null!==t&&"__isAuthError"in t}class IU extends lc{constructor(n,e,r){super(n,e,r),this.name="AuthApiError",this.status=e,this.code=r}}class Qo extends lc{constructor(n,e){super(n),this.name="AuthUnknownError",this.originalError=e}}class bo extends lc{constructor(n,e,r,o){super(n,r,o),this.name=e,this.status=r}}class En extends bo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class bs extends bo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qu extends bo{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Zu extends bo{constructor(n,e=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class QO extends bo{constructor(n,e=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bp extends bo{constructor(n,e){super(n,"AuthRetryableFetchError",e,void 0)}}function Hp(t){return ne(t)&&"AuthRetryableFetchError"===t.name}class ZO extends bo{constructor(n,e,r){super(n,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}}class zp extends bo{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),XO=" \t\n\r=".split(""),RU=(()=>{const t=new Array(128);for(let n=0;n<t.length;n+=1)t[n]=-1;for(let n=0;n<XO.length;n+=1)t[XO[n].charCodeAt(0)]=-2;for(let n=0;n<Xu.length;n+=1)t[Xu[n].charCodeAt(0)]=n;return t})();function ed(t,n,e){if(null!==t)for(n.queue=n.queue<<8|t,n.queuedBits+=8;n.queuedBits>=6;)e(Xu[n.queue>>n.queuedBits-6&63]),n.queuedBits-=6;else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;)e(Xu[n.queue>>n.queuedBits-6&63]),n.queuedBits-=6}function eP(t,n,e){const r=RU[t];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)e(n.queue>>n.queuedBits-8&255),n.queuedBits-=8}function tP(t){const n=[],e=s=>{n.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{!function FU(t,n,e){if(0===n.utf8seq){if(t<=127)return void e(t);for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){n.utf8seq=r;break}if(2===n.utf8seq)n.codepoint=31&t;else if(3===n.utf8seq)n.codepoint=15&t;else{if(4!==n.utf8seq)throw new Error("Invalid UTF-8 sequence");n.codepoint=7&t}n.utf8seq-=1}else if(n.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|63&t,n.utf8seq-=1,0===n.utf8seq&&e(n.codepoint)}}(s,r,e)};for(let s=0;s<t.length;s+=1)eP(t.charCodeAt(s),o,i);return n.join("")}function NU(t,n){if(!(t<=127)){if(t<=2047)return n(192|t>>6),void n(128|63&t);if(t<=65535)return n(224|t>>12),n(128|t>>6&63),void n(128|63&t);if(t<=1114111)return n(240|t>>18),n(128|t>>12&63),n(128|t>>6&63),void n(128|63&t);throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}n(t)}function Cs(t){const n=[],e={queue:0,queuedBits:0},r=o=>{n.push(o)};for(let o=0;o<t.length;o+=1)eP(t.charCodeAt(o),e,r);return new Uint8Array(n)}function Zo(t){const n=[],e={queue:0,queuedBits:0},r=o=>{n.push(o)};return t.forEach(o=>ed(o,e,r)),ed(null,e,r),n.join("")}const Rt=()=>typeof window<"u"&&typeof document<"u",Xo={tested:!1,writable:!1},rP=()=>{if(!Rt())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Xo.tested)return Xo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xo.tested=!0,Xo.writable=!0}catch{Xo.tested=!0,Xo.writable=!1}return Xo.writable},oP=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),UU=t=>"object"==typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json,ws=function(){var t=C(function*(n,e,r){yield n.setItem(e,JSON.stringify(r))});return function(e,r,o){return t.apply(this,arguments)}}(),ei=function(){var t=C(function*(n,e){const r=yield n.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(e,r){return t.apply(this,arguments)}}(),Co=function(){var t=C(function*(n,e){yield n.removeItem(e)});return function(e,r){return t.apply(this,arguments)}}();class td{constructor(){this.promise=new td.promiseConstructor((n,e)=>{this.resolve=n,this.reject=e})}}function qp(t){const n=t.split(".");if(3!==n.length)throw new zp("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!EU.test(n[r]))throw new zp("JWT not in base64url format");return{header:JSON.parse(tP(n[0])),payload:JSON.parse(tP(n[1])),signature:Cs(n[2]),raw:{header:n[0],payload:n[1]}}}function Gp(){return(Gp=C(function*(t){return yield new Promise(n=>{setTimeout(()=>n(null),t)})})).apply(this,arguments)}function zU(t){return("0"+t.toString(16)).substr(-2)}function Wp(){return(Wp=C(function*(t){const e=(new TextEncoder).encode(t),r=yield crypto.subtle.digest("SHA-256",e),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})).apply(this,arguments)}function Kp(){return Kp=C(function*(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=yield function GU(t){return Wp.apply(this,arguments)}(t);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Kp.apply(this,arguments)}function Ms(t,n){return Jp.apply(this,arguments)}function Jp(){return Jp=C(function*(t,n,e=!1){const r=function qU(){const n=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let o="";for(let i=0;i<56;i++)o+=e.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(n),Array.from(n,zU).join("")}();let o=r;e&&(o+="/PASSWORD_RECOVERY"),yield ws(t,`${n}-code-verifier`,o);const i=yield function WU(t){return Kp.apply(this,arguments)}(r);return[i,r===i?"plain":"s256"]}),Jp.apply(this,arguments)}td.promiseConstructor=Promise;const KU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,ZU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Os(t){if(!ZU.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yp(){return new Proxy({},{get:(n,e)=>{if("__isUserNotAvailableProxy"===e)return!0;if("symbol"==typeof e){const r=e.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iP(t){return JSON.parse(JSON.stringify(t))}const ti=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),e8=[502,503,504];function sP(t){return Qp.apply(this,arguments)}function Qp(){return(Qp=C(function*(t){var n;if(!UU(t))throw new Bp(ti(t),0);if(e8.includes(t.status))throw new Bp(ti(t),t.status);let e,r;try{e=yield t.json()}catch(i){throw new Qo(ti(i),i)}const o=function JU(t){const n=t.headers.get(Up);if(!n||!n.match(KU))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}(t);if(o&&o.getTime()>=YO["2024-01-01"].timestamp&&"object"==typeof e&&e&&"string"==typeof e.code?r=e.code:"object"==typeof e&&e&&"string"==typeof e.error_code&&(r=e.error_code),r){if("weak_password"===r)throw new ZO(ti(e),t.status,(null===(n=e.weak_password)||void 0===n?void 0:n.reasons)||[]);if("session_not_found"===r)throw new En}else if("object"==typeof e&&e&&"object"==typeof e.weak_password&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,s)=>i&&"string"==typeof s,!0))throw new ZO(ti(e),t.status,e.weak_password.reasons);throw new IU(ti(e),t.status||500,r)})).apply(this,arguments)}const t8=(t,n,e,r)=>{const o={method:t,headers:n?.headers||{}};return"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),e))};function se(t,n,e,r){return Zp.apply(this,arguments)}function Zp(){return Zp=C(function*(t,n,e,r){var o;const i=Object.assign({},r?.headers);i[Up]||(i[Up]=YO["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=yield function n8(t,n,e,r,o,i){return Xp.apply(this,arguments)}(t,n,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}),Zp.apply(this,arguments)}function Xp(){return(Xp=C(function*(t,n,e,r,o,i){const s=t8(n,r,o,i);let a;try{a=yield t(e,Object.assign({},s))}catch(c){throw console.error(c),new Bp(ti(c),0)}if(a.ok||(yield sP(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield sP(c)}})).apply(this,arguments)}function tr(t){var n;let e=null;return function i8(t){return t.access_token&&t.refresh_token&&t.expires_in}(t)&&(e=Object.assign({},t),t.expires_at||(e.expires_at=function jU(t){return Math.round(Date.now()/1e3)+t}(t.expires_in))),{data:{session:e,user:null!==(n=t.user)&&void 0!==n?n:t},error:null}}function aP(t){const n=tr(t);return!n.error&&t.weak_password&&"object"==typeof t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&"string"==typeof t.weak_password.message&&t.weak_password.reasons.reduce((e,r)=>e&&"string"==typeof r,!0)&&(n.data.weak_password=t.weak_password),n}function wo(t){var n;return{data:{user:null!==(n=t.user)&&void 0!==n?n:t},error:null}}function r8(t){return{data:t,error:null}}function o8(t){const{action_link:n,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i}=t,s=(0,U.__rest)(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:n,email_otp:e,hashed_token:r,redirect_to:o,verification_type:i},user:Object.assign({},s)},error:null}}function cP(t){return t}const em=["global","local","others"];class s8{constructor({url:n="",headers:e={},fetch:r}){this.url=n,this.headers=e,this.fetch=oP(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(n){var e=this;return C(function*(r,o=em[0]){if(em.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${em.join(", ")}`);try{return yield se(e.fetch,"POST",`${e.url}/logout?scope=${o}`,{headers:e.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}).apply(this,arguments)}inviteUserByEmail(n){var e=this;return C(function*(r,o={}){try{return yield se(e.fetch,"POST",`${e.url}/invite`,{body:{email:r,data:o.data},headers:e.headers,redirectTo:o.redirectTo,xform:wo})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}generateLink(n){var e=this;return C(function*(){try{const{options:r}=n,o=(0,U.__rest)(n,["options"]),i=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(i.new_email=o?.newEmail,delete i.newEmail),yield se(e.fetch,"POST",`${e.url}/admin/generate_link`,{body:i,headers:e.headers,xform:o8,redirectTo:r?.redirectTo})}catch(r){if(ne(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(n){var e=this;return C(function*(){try{return yield se(e.fetch,"POST",`${e.url}/admin/users`,{body:n,headers:e.headers,xform:wo})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}})()}listUsers(n){var e=this;return C(function*(){var r,o,i,s,a,c,l;try{const u={nextPage:null,lastPage:0,total:0},d=yield se(e.fetch,"GET",`${e.url}/admin/users`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=n?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=n?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:cP});if(d.error)throw d.error;const g=yield d.json(),m=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,v=null!==(l=null===(c=d.headers.get("link"))||void 0===c?void 0:c.split(","))&&void 0!==l?l:[];return v.length>0&&(v.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},g),u),error:null}}catch(u){if(ne(u))return{data:{users:[]},error:u};throw u}})()}getUserById(n){var e=this;return C(function*(){Os(n);try{return yield se(e.fetch,"GET",`${e.url}/admin/users/${n}`,{headers:e.headers,xform:wo})}catch(r){if(ne(r))return{data:{user:null},error:r};throw r}})()}updateUserById(n,e){var r=this;return C(function*(){Os(n);try{return yield se(r.fetch,"PUT",`${r.url}/admin/users/${n}`,{body:e,headers:r.headers,xform:wo})}catch(o){if(ne(o))return{data:{user:null},error:o};throw o}})()}deleteUser(n){var e=this;return C(function*(r,o=!1){Os(r);try{return yield se(e.fetch,"DELETE",`${e.url}/admin/users/${r}`,{headers:e.headers,body:{should_soft_delete:o},xform:wo})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}_listFactors(n){var e=this;return C(function*(){Os(n.userId);try{const{data:r,error:o}=yield se(e.fetch,"GET",`${e.url}/admin/users/${n.userId}/factors`,{headers:e.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:o}}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_deleteFactor(n){var e=this;return C(function*(){Os(n.userId),Os(n.id);try{return{data:yield se(e.fetch,"DELETE",`${e.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:e.headers}),error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_listOAuthClients(n){var e=this;return C(function*(){var r,o,i,s,a,c,l;try{const u={nextPage:null,lastPage:0,total:0},d=yield se(e.fetch,"GET",`${e.url}/admin/oauth/clients`,{headers:e.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=n?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(s=null===(i=n?.perPage)||void 0===i?void 0:i.toString())&&void 0!==s?s:""},xform:cP});if(d.error)throw d.error;const g=yield d.json(),m=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,v=null!==(l=null===(c=d.headers.get("link"))||void 0===c?void 0:c.split(","))&&void 0!==l?l:[];return v.length>0&&(v.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},g),u),error:null}}catch(u){if(ne(u))return{data:{clients:[]},error:u};throw u}})()}_createOAuthClient(n){var e=this;return C(function*(){try{return yield se(e.fetch,"POST",`${e.url}/admin/oauth/clients`,{body:n,headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_getOAuthClient(n){var e=this;return C(function*(){try{return yield se(e.fetch,"GET",`${e.url}/admin/oauth/clients/${n}`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_updateOAuthClient(n,e){var r=this;return C(function*(){try{return yield se(r.fetch,"PUT",`${r.url}/admin/oauth/clients/${n}`,{body:e,headers:r.headers,xform:o=>({data:o,error:null})})}catch(o){if(ne(o))return{data:null,error:o};throw o}})()}_deleteOAuthClient(n){var e=this;return C(function*(){try{return yield se(e.fetch,"DELETE",`${e.url}/admin/oauth/clients/${n}`,{headers:e.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}_regenerateOAuthClientSecret(n){var e=this;return C(function*(){try{return yield se(e.fetch,"POST",`${e.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:e.headers,xform:r=>({data:r,error:null})})}catch(r){if(ne(r))return{data:null,error:r};throw r}})()}}function lP(t={}){return{getItem:n=>t[n]||null,setItem:(n,e)=>{t[n]=e},removeItem:n=>{delete t[n]}}}const Ps={debug:!!(globalThis&&rP()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class uP extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class a8 extends uP{}function l8(t,n,e){return tm.apply(this,arguments)}function tm(){return tm=C(function*(t,n,e){Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,n);const r=new globalThis.AbortController;return n>0&&setTimeout(()=>{r.abort(),Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},n),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(t,0===n?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=C(function*(i){if(!i){if(0===n)throw Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new a8(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ps.debug)try{const s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return yield e()}finally{Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}});return function(i){return o.apply(this,arguments)}}()))}),tm.apply(this,arguments)}function hP(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function h8(t){const n=(new TextEncoder).encode(t);return"0x"+Array.from(n,r=>r.toString(16).padStart(2,"0")).join("")}class vt extends Error{constructor({message:n,code:e,cause:r,name:o}){var i;super(n,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=o??(r instanceof Error?r.name:void 0))&&void 0!==i?i:"Unknown Error",this.code=e}}class nd extends vt{constructor(n,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:n}),this.name="WebAuthnUnknownError",this.originalError=e}}function g8({error:t,options:n}){var e,r,o;const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(e=i.authenticatorSelection)||void 0===e?void 0:e.requireResidentKey))return new vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===n.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(o=i.authenticatorSelection)||void 0===o?void 0:o.userVerification))return new vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name)return 0===i.pubKeyCredParams.filter(a=>"public-key"===a.type).length?new vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if("SecurityError"===t.name){const s=window.location.hostname;if(!fP(s))return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==s)return new vt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function p8({error:t,options:n}){const{publicKey:e}=n;if(!e)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const r=window.location.hostname;if(!fP(r))return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(e.rpId!==r)return new vt({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const _8=new class m8{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}};function v8(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:n,user:e,excludeCredentials:r}=t,o=(0,U.__rest)(t,["challenge","user","excludeCredentials"]),i=Cs(n).buffer,s=Object.assign(Object.assign({},e),{id:Cs(e.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:Cs(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function y8(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:n,allowCredentials:e}=t,r=(0,U.__rest)(t,["challenge","allowCredentials"]),o=Cs(n).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){const a=e[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Cs(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function b8(t){var n;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const e=t;return{id:t.id,rawId:t.id,response:{attestationObject:Zo(new Uint8Array(t.response.attestationObject)),clientDataJSON:Zo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:null!==(n=e.authenticatorAttachment)&&void 0!==n?n:void 0}}function C8(t){var n;if("toJSON"in t&&"function"==typeof t.toJSON)return t.toJSON();const e=t,r=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Zo(new Uint8Array(o.authenticatorData)),clientDataJSON:Zo(new Uint8Array(o.clientDataJSON)),signature:Zo(new Uint8Array(o.signature)),userHandle:o.userHandle?Zo(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(n=e.authenticatorAttachment)&&void 0!==n?n:void 0}}function fP(t){return"localhost"===t||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function gP(){var t,n;return!!(Rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(t=navigator?.credentials)||void 0===t?void 0:t.create)&&"function"==typeof(null===(n=navigator?.credentials)||void 0===n?void 0:n.get))}function rm(){return(rm=C(function*(t){try{const n=yield navigator.credentials.create(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new nd("Browser returned unexpected credential type",n)}:{data:null,error:new nd("Empty credential response",n)}}catch(n){return{data:null,error:g8({error:n,options:t})}}})).apply(this,arguments)}function om(){return(om=C(function*(t){try{const n=yield navigator.credentials.get(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new nd("Browser returned unexpected credential type",n)}:{data:null,error:new nd("Empty credential response",n)}}catch(n){return{data:null,error:p8({error:n,options:t})}}})).apply(this,arguments)}const O8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},P8={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function rd(...t){const n=o=>null!==o&&"object"==typeof o&&!Array.isArray(o),e=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of t)if(o)for(const i in o){const s=o[i];if(void 0!==s)if(Array.isArray(s))r[i]=s;else if(e(s))r[i]=s;else if(n(s)){const a=r[i];r[i]=n(a)?rd(a,s):rd(s)}else r[i]=s}return r}class E8{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(n){var e=this;return C(function*(){return e.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))})()}_challenge(n,e){var r=this;return C(function*({factorId:o,webauthn:i,friendlyName:s,signal:a},c){try{const{data:l,error:u}=yield r.client.mfa.challenge({factorId:o,webauthn:i});if(!l)return{data:null,error:u};const d=a??_8.createNewAbortSignal();if("create"===l.webauthn.type){const{user:g}=l.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${s}`),g.displayName||(g.displayName=g.name)}switch(l.webauthn.type){case"create":{const g=function x8(t,n){return rd(O8,t,n||{})}(l.webauthn.credential_options.publicKey,c?.create),{data:m,error:v}=yield function w8(t){return rm.apply(this,arguments)}({publicKey:g,signal:d});return m?{data:{factorId:o,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}case"request":{const g=function D8(t,n){return rd(P8,t,n||{})}(l.webauthn.credential_options.publicKey,c?.request),{data:m,error:v}=yield function M8(t){return om.apply(this,arguments)}(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:g,signal:d}));return m?{data:{factorId:o,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}}}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Qo("Unexpected error in challenge",l)}}}).apply(this,arguments)}_verify(n){var e=this;return C(function*({challengeId:r,factorId:o,webauthn:i}){return e.client.mfa.verify({factorId:o,challengeId:r,webauthn:i})}).apply(this,arguments)}_authenticate(n,e){var r=this;return C(function*({factorId:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}={}},c){if(!i)return{data:null,error:new lc("rpId is required for WebAuthn authentication")};try{if(!gP())return{data:null,error:new Qo("Browser does not support WebAuthn",null)};const{data:l,error:u}=yield r.challenge({factorId:o,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:c});if(!l)return{data:null,error:u};const{webauthn:d}=l;return r._verify({factorId:o,challengeId:l.challengeId,webauthn:{type:d.type,rpId:i,rpOrigins:s,credential_response:d.credential_response}})}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Qo("Unexpected error in authenticate",l)}}}).apply(this,arguments)}_register(n,e){var r=this;return C(function*({friendlyName:o,webauthn:{rpId:i=(typeof window<"u"?window.location.hostname:void 0),rpOrigins:s=(typeof window<"u"?[window.location.origin]:void 0),signal:a}={}},c){if(!i)return{data:null,error:new lc("rpId is required for WebAuthn registration")};try{if(!gP())return{data:null,error:new Qo("Browser does not support WebAuthn",null)};const{data:l,error:u}=yield r._enroll({friendlyName:o});if(!l)return yield r.client.mfa.listFactors().then(m=>{var v;return null===(v=m.data)||void 0===v?void 0:v.all.find(y=>"webauthn"===y.factor_type&&y.friendly_name===o&&"unverified"!==y.status)}).then(m=>m?r.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:u};const{data:d,error:g}=yield r._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:c});return d?r._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:i,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:g}}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Qo("Unexpected error in register",l)}}}).apply(this,arguments)}}!function u8(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const S8={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.86.0"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function pP(t,n,e){return im.apply(this,arguments)}function im(){return(im=C(function*(t,n,e){return yield e()})).apply(this,arguments)}const xs={},k8=(()=>{class t{get jwks(){var e,r;return null!==(r=null===(e=xs[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==r?r:{keys:[]}}set jwks(e){xs[this.storageKey]=Object.assign(Object.assign({},xs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return null!==(r=null===(e=xs[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xs[this.storageKey]=Object.assign(Object.assign({},xs[this.storageKey]),{cachedAt:e})}constructor(e){var o,i,s,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},S8),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(o=t.nextInstanceID[this.storageKey])&&void 0!==o?o:0,t.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"==typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&Rt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new s8({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=oP(a.fetch),this.lock=a.lock||pP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lock=a.lock?a.lock:Rt()&&null!==(i=globalThis?.navigator)&&void 0!==i&&i.locks?l8:pP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new E8(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:rP()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=lP(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",function(){var c=C(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return c.apply(this,arguments)}}())}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (2.86.0) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}initialize(){var e=this;return C(function*(){return e.initializePromise||(e.initializePromise=C(function*(){return yield e._acquireLock(-1,C(function*(){return yield e._initialize()}))})()),yield e.initializePromise})()}_initialize(){var e=this;return C(function*(){var r;try{let o={},i="none";if(Rt()&&(o=function $U(t){const n={},e=new URL(t);if(e.hash&&"#"===e.hash[0])try{new URLSearchParams(e.hash.substring(1)).forEach((o,i)=>{n[i]=o})}catch{}return e.searchParams.forEach((r,o)=>{n[o]=r}),n}(window.location.href),e._isImplicitGrantCallback(o)?i="implicit":(yield e._isPKCECallback(o))&&(i="pkce")),Rt()&&e.detectSessionInUrl&&"none"!==i){const{data:s,error:a}=yield e._getSessionFromURL(o,i);if(a){if(e._debug("#_initialize()","error detecting session from URL",a),function AU(t){return ne(t)&&"AuthImplicitGrantRedirectError"===t.name}(a)){const u=null===(r=a.details)||void 0===r?void 0:r.code;if("identity_already_exists"===u||"identity_not_found"===u||"single_identity_not_deletable"===u)return{error:a}}return yield e._removeSession(),{error:a}}const{session:c,redirectType:l}=s;return e._debug("#_initialize()","detected session in URL",c,"redirect type",l),yield e._saveSession(c),setTimeout(C(function*(){"recovery"===l?yield e._notifyAllSubscribers("PASSWORD_RECOVERY",c):yield e._notifyAllSubscribers("SIGNED_IN",c)}),0),{error:null}}return yield e._recoverAndRefresh(),{error:null}}catch(o){return ne(o)?e._returnResult({error:o}):e._returnResult({error:new Qo("Unexpected error during initialization",o)})}finally{yield e._handleVisibilityChange(),e._debug("#_initialize()","end")}})()}signInAnonymously(e){var r=this;return C(function*(){var o,i,s;try{const a=yield se(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(i=null===(o=e?.options)||void 0===o?void 0:o.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:null===(s=e?.options)||void 0===s?void 0:s.captchaToken}},xform:tr}),{data:c,error:l}=a;if(l||!c)return r._returnResult({data:{user:null,session:null},error:l});const u=c.session,d=c.user;return c.session&&(yield r._saveSession(c.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),r._returnResult({data:{user:d,session:u},error:null})}catch(a){if(ne(a))return r._returnResult({data:{user:null,session:null},error:a});throw a}})()}signUp(e){var r=this;return C(function*(){var o,i,s;try{let a;if("email"in e){const{email:g,password:m,options:v}=e;let y=null,w=null;"pkce"===r.flowType&&([y,w]=yield Ms(r.storage,r.storageKey)),a=yield se(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:m,data:null!==(o=v?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:y,code_challenge_method:w},xform:tr})}else{if(!("phone"in e))throw new Qu("You must provide either an email or phone number and a password");{const{phone:g,password:m,options:v}=e;a=yield se(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:g,password:m,data:null!==(i=v?.data)&&void 0!==i?i:{},channel:null!==(s=v?.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:tr})}}const{data:c,error:l}=a;if(l||!c)return r._returnResult({data:{user:null,session:null},error:l});const u=c.session,d=c.user;return c.session&&(yield r._saveSession(c.session),yield r._notifyAllSubscribers("SIGNED_IN",u)),r._returnResult({data:{user:d,session:u},error:null})}catch(a){if(ne(a))return r._returnResult({data:{user:null,session:null},error:a});throw a}})()}signInWithPassword(e){var r=this;return C(function*(){try{let o;if("email"in e){const{email:a,password:c,options:l}=e;o=yield se(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:c,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:aP})}else{if(!("phone"in e))throw new Qu("You must provide either an email or phone number and a password");{const{phone:a,password:c,options:l}=e;o=yield se(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:c,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:aP})}}const{data:i,error:s}=o;if(s)return r._returnResult({data:{user:null,session:null},error:s});if(!i||!i.session||!i.user){const a=new bs;return r._returnResult({data:{user:null,session:null},error:a})}return i.session&&(yield r._saveSession(i.session),yield r._notifyAllSubscribers("SIGNED_IN",i.session)),r._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(o){if(ne(o))return r._returnResult({data:{user:null,session:null},error:o});throw o}})()}signInWithOAuth(e){var r=this;return C(function*(){var o,i,s,a;return yield r._handleProviderSignIn(e.provider,{redirectTo:null===(o=e.options)||void 0===o?void 0:o.redirectTo,scopes:null===(i=e.options)||void 0===i?void 0:i.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(e){var r=this;return C(function*(){return yield r.initializePromise,r._acquireLock(-1,C(function*(){return r._exchangeCodeForSession(e)}))})()}signInWithWeb3(e){var r=this;return C(function*(){const{chain:o}=e;switch(o){case"ethereum":return yield r.signInWithEthereum(e);case"solana":return yield r.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}})()}signInWithEthereum(e){var r=this;return C(function*(){var o,i,s,a,c,l,u,d,g,m,v;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{wallet:M,statement:V,options:j}=e;let B;if(Rt())if("object"==typeof M)B=M;else{const nr=window;if(!("ethereum"in nr)||"object"!=typeof nr.ethereum||!("request"in nr.ethereum)||"function"!=typeof nr.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");B=nr.ethereum}else{if("object"!=typeof M||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=M}const be=new URL(null!==(o=j?.url)&&void 0!==o?o:window.location.href),pt=yield B.request({method:"eth_requestAccounts"}).then(nr=>nr).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!pt||0===pt.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Ie=hP(pt[0]);let st=null===(i=j?.signInWithEthereum)||void 0===i?void 0:i.chainId;st||(st=function d8(t){return parseInt(t,16)}(yield B.request({method:"eth_chainId"}))),y=function f8(t){var n;const{chainId:e,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:g}=t;if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==g)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(null!==(n=t.statement)&&void 0!==n&&n.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`);const w=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${hP(t.address)}\n\n${t.statement?`${t.statement}\n`:""}`;let x=`URI: ${d}\nVersion: ${g}\nChain ID: ${e}${s?`\nNonce: ${s}`:""}\nIssued At: ${i.toISOString()}`;if(o&&(x+=`\nExpiration Time: ${o.toISOString()}`),a&&(x+=`\nNot Before: ${a.toISOString()}`),c&&(x+=`\nRequest ID: ${c}`),l){let M="\nResources:";for(const V of l){if(!V||"string"!=typeof V)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${V}`);M+=`\n- ${V}`}x+=M}return`${w}\n${x}`}({domain:be.host,address:Ie,statement:V,uri:be.href,version:"1",chainId:st,nonce:null===(s=j?.signInWithEthereum)||void 0===s?void 0:s.nonce,issuedAt:null!==(c=null===(a=j?.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==c?c:new Date,expirationTime:null===(l=j?.signInWithEthereum)||void 0===l?void 0:l.expirationTime,notBefore:null===(u=j?.signInWithEthereum)||void 0===u?void 0:u.notBefore,requestId:null===(d=j?.signInWithEthereum)||void 0===d?void 0:d.requestId,resources:null===(g=j?.signInWithEthereum)||void 0===g?void 0:g.resources}),w=yield B.request({method:"personal_sign",params:[h8(y),Ie]})}try{const{data:x,error:M}=yield se(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"ethereum",message:y,signature:w},null!==(m=e.options)&&void 0!==m&&m.captchaToken?{gotrue_meta_security:{captcha_token:null===(v=e.options)||void 0===v?void 0:v.captchaToken}}:null),xform:tr});if(M)throw M;if(!x||!x.session||!x.user){const V=new bs;return r._returnResult({data:{user:null,session:null},error:V})}return x.session&&(yield r._saveSession(x.session),yield r._notifyAllSubscribers("SIGNED_IN",x.session)),r._returnResult({data:Object.assign({},x),error:M})}catch(x){if(ne(x))return r._returnResult({data:{user:null,session:null},error:x});throw x}})()}signInWithSolana(e){var r=this;return C(function*(){var o,i,s,a,c,l,u,d,g,m,v,y;let w,x;if("message"in e)w=e.message,x=e.signature;else{const{wallet:V,statement:j,options:B}=e;let be;if(Rt())if("object"==typeof V)be=V;else{const Ie=window;if(!("solana"in Ie)||"object"!=typeof Ie.solana||!("signIn"in Ie.solana&&"function"==typeof Ie.solana.signIn||"signMessage"in Ie.solana&&"function"==typeof Ie.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");be=Ie.solana}else{if("object"!=typeof V||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");be=V}const pt=new URL(null!==(o=B?.url)&&void 0!==o?o:window.location.href);if("signIn"in be&&be.signIn){const Ie=yield be.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},B?.signInWithSolana),{version:"1",domain:pt.host,uri:pt.href}),j?{statement:j}:null));let st;if(Array.isArray(Ie)&&Ie[0]&&"object"==typeof Ie[0])st=Ie[0];else{if(!(Ie&&"object"==typeof Ie&&"signedMessage"in Ie&&"signature"in Ie))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");st=Ie}if(!("signedMessage"in st&&"signature"in st&&("string"==typeof st.signedMessage||st.signedMessage instanceof Uint8Array)&&st.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");w="string"==typeof st.signedMessage?st.signedMessage:(new TextDecoder).decode(st.signedMessage),x=st.signature}else{if(!("signMessage"in be&&"function"==typeof be.signMessage&&"publicKey"in be&&"object"==typeof be&&be.publicKey&&"toBase58"in be.publicKey&&"function"==typeof be.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${pt.host} wants you to sign in with your Solana account:`,be.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${pt.href}`,`Issued At: ${null!==(s=null===(i=B?.signInWithSolana)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...null!==(a=B?.signInWithSolana)&&void 0!==a&&a.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...null!==(c=B?.signInWithSolana)&&void 0!==c&&c.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...null!==(l=B?.signInWithSolana)&&void 0!==l&&l.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...null!==(u=B?.signInWithSolana)&&void 0!==u&&u.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...null!==(d=B?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...null!==(m=null===(g=B?.signInWithSolana)||void 0===g?void 0:g.resources)&&void 0!==m&&m.length?["Resources",...B.signInWithSolana.resources.map(st=>`- ${st}`)]:[]].join("\n");const Ie=yield be.signMessage((new TextEncoder).encode(w),"utf8");if(!(Ie&&Ie instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=Ie}}try{const{data:M,error:V}=yield se(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:w,signature:Zo(x)},null!==(v=e.options)&&void 0!==v&&v.captchaToken?{gotrue_meta_security:{captcha_token:null===(y=e.options)||void 0===y?void 0:y.captchaToken}}:null),xform:tr});if(V)throw V;if(!M||!M.session||!M.user){const j=new bs;return r._returnResult({data:{user:null,session:null},error:j})}return M.session&&(yield r._saveSession(M.session),yield r._notifyAllSubscribers("SIGNED_IN",M.session)),r._returnResult({data:Object.assign({},M),error:V})}catch(M){if(ne(M))return r._returnResult({data:{user:null,session:null},error:M});throw M}})()}_exchangeCodeForSession(e){var r=this;return C(function*(){const o=yield ei(r.storage,`${r.storageKey}-code-verifier`),[i,s]=(o??"").split("/");try{const{data:a,error:c}=yield se(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:e,code_verifier:i},xform:tr});if(yield Co(r.storage,`${r.storageKey}-code-verifier`),c)throw c;if(!a||!a.session||!a.user){const l=new bs;return r._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),r._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:c})}catch(a){if(ne(a))return r._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}})()}signInWithIdToken(e){var r=this;return C(function*(){try{const{options:o,provider:i,token:s,access_token:a,nonce:c}=e,l=yield se(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:i,id_token:s,access_token:a,nonce:c,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:tr}),{data:u,error:d}=l;if(d)return r._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const g=new bs;return r._returnResult({data:{user:null,session:null},error:g})}return u.session&&(yield r._saveSession(u.session),yield r._notifyAllSubscribers("SIGNED_IN",u.session)),r._returnResult({data:u,error:d})}catch(o){if(ne(o))return r._returnResult({data:{user:null,session:null},error:o});throw o}})()}signInWithOtp(e){var r=this;return C(function*(){var o,i,s,a,c;try{if("email"in e){const{email:l,options:u}=e;let d=null,g=null;"pkce"===r.flowType&&([d,g]=yield Ms(r.storage,r.storageKey));const{error:m}=yield se(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:l,data:null!==(o=u?.data)&&void 0!==o?o:{},create_user:null===(i=u?.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:g},redirectTo:u?.emailRedirectTo});return r._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:l,options:u}=e,{data:d,error:g}=yield se(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:l,data:null!==(s=u?.data)&&void 0!==s?s:{},create_user:null===(a=u?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:null!==(c=u?.channel)&&void 0!==c?c:"sms"}});return r._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:g})}throw new Qu("You must provide either an email or phone number.")}catch(l){if(ne(l))return r._returnResult({data:{user:null,session:null},error:l});throw l}})()}verifyOtp(e){var r=this;return C(function*(){var o,i;try{let s,a;"options"in e&&(s=null===(o=e.options)||void 0===o?void 0:o.redirectTo,a=null===(i=e.options)||void 0===i?void 0:i.captchaToken);const{data:c,error:l}=yield se(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:tr});if(l)throw l;if(!c)throw new Error("An error occurred on token verification.");const u=c.session,d=c.user;return u?.access_token&&(yield r._saveSession(u),yield r._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",u)),r._returnResult({data:{user:d,session:u},error:null})}catch(s){if(ne(s))return r._returnResult({data:{user:null,session:null},error:s});throw s}})()}signInWithSSO(e){var r=this;return C(function*(){var o,i,s,a,c;try{let l=null,u=null;"pkce"===r.flowType&&([l,u]=yield Ms(r.storage,r.storageKey));const d=yield se(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(i=null===(o=e.options)||void 0===o?void 0:o.redirectTo)&&void 0!==i?i:void 0}),null!==(s=e?.options)&&void 0!==s&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:r.headers,xform:r8});return!(null===(a=d.data)||void 0===a)&&a.url&&Rt()&&!(null!==(c=e.options)&&void 0!==c&&c.skipBrowserRedirect)&&window.location.assign(d.data.url),r._returnResult(d)}catch(l){if(ne(l))return r._returnResult({data:null,error:l});throw l}})()}reauthenticate(){var e=this;return C(function*(){return yield e.initializePromise,yield e._acquireLock(-1,C(function*(){return yield e._reauthenticate()}))})()}_reauthenticate(){var e=this;return C(function*(){try{return yield e._useSession(function(){var r=C(function*(o){const{data:{session:i},error:s}=o;if(s)throw s;if(!i)throw new En;const{error:a}=yield se(e.fetch,"GET",`${e.url}/reauthenticate`,{headers:e.headers,jwt:i.access_token});return e._returnResult({data:{user:null,session:null},error:a})});return function(o){return r.apply(this,arguments)}}())}catch(r){if(ne(r))return e._returnResult({data:{user:null,session:null},error:r});throw r}})()}resend(e){var r=this;return C(function*(){try{const o=`${r.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:c}=yield se(r.fetch,"POST",o,{headers:r.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return r._returnResult({data:{user:null,session:null},error:c})}if("phone"in e){const{phone:i,type:s,options:a}=e,{data:c,error:l}=yield se(r.fetch,"POST",o,{headers:r.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return r._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:l})}throw new Qu("You must provide either an email or phone number and a type")}catch(o){if(ne(o))return r._returnResult({data:{user:null,session:null},error:o});throw o}})()}getSession(){var e=this;return C(function*(){return yield e.initializePromise,yield e._acquireLock(-1,C(function*(){return e._useSession(function(){var o=C(function*(i){return i});return function(i){return o.apply(this,arguments)}}())}))})()}_acquireLock(e,r){var o=this;return C(function*(){o._debug("#_acquireLock","begin",e);try{if(o.lockAcquired){const i=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),s=C(function*(){return yield i,yield r()})();return o.pendingInLock.push(C(function*(){try{yield s}catch{}})()),s}return yield o.lock(`lock:${o.storageKey}`,e,C(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const i=r();for(o.pendingInLock.push(C(function*(){try{yield i}catch{}})()),yield i;o.pendingInLock.length;){const s=[...o.pendingInLock];yield Promise.all(s),o.pendingInLock.splice(0,s.length)}return yield i}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(e){var r=this;return C(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield e(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var e=this;return C(function*(){e._debug("#__loadSession()","begin"),e.lockAcquired||e._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield ei(e.storage,e.storageKey);if(e._debug("#getSession()","session from storage",o),null!==o&&(e._isValidSession(o)?r=o:(e._debug("#getSession()","session from storage is not valid"),yield e._removeSession())),!r)return{data:{session:null},error:null};const i=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(e._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",r.expires_at),!i){if(e.userStorage){const c=yield ei(e.userStorage,e.storageKey+"-user");r.user=c?.user?c.user:Yp()}if(e.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const c={value:e.suppressGetSessionWarning};r.user=function XU(t,n){return new Proxy(t,{get:(e,r,o)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"==typeof r){const i=r.toString();if("Symbol(Symbol.toPrimitive)"===i||"Symbol(Symbol.toStringTag)"===i||"Symbol(util.inspect.custom)"===i||"Symbol(nodejs.util.inspect.custom)"===i)return Reflect.get(e,r,o)}return!n.value&&"string"==typeof r&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(e,r,o)}})}(r.user,c),c.value&&(e.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:s,error:a}=yield e._callRefreshToken(r.refresh_token);return e._returnResult(a?{data:{session:null},error:a}:{data:{session:s},error:null})}finally{e._debug("#__loadSession()","end")}})()}getUser(e){var r=this;return C(function*(){return e?yield r._getUser(e):(yield r.initializePromise,yield r._acquireLock(-1,C(function*(){return yield r._getUser()})))})()}_getUser(e){var r=this;return C(function*(){try{return e?yield se(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:e,xform:wo}):yield r._useSession(function(){var o=C(function*(i){var s,a,c;const{data:l,error:u}=i;if(u)throw u;return null!==(s=l.session)&&void 0!==s&&s.access_token||r.hasCustomAuthorizationHeader?yield se(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(c=null===(a=l.session)||void 0===a?void 0:a.access_token)&&void 0!==c?c:void 0,xform:wo}):{data:{user:null},error:new En}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return function TU(t){return ne(t)&&"AuthSessionMissingError"===t.name}(o)&&(yield r._removeSession(),yield Co(r.storage,`${r.storageKey}-code-verifier`)),r._returnResult({data:{user:null},error:o});throw o}})()}updateUser(e){var r=this;return C(function*(o,i={}){return yield r.initializePromise,yield r._acquireLock(-1,C(function*(){return yield r._updateUser(o,i)}))}).apply(this,arguments)}_updateUser(e){var r=this;return C(function*(o,i={}){try{return yield r._useSession(function(){var s=C(function*(a){const{data:c,error:l}=a;if(l)throw l;if(!c.session)throw new En;const u=c.session;let d=null,g=null;"pkce"===r.flowType&&null!=o.email&&([d,g]=yield Ms(r.storage,r.storageKey));const{data:m,error:v}=yield se(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:g}),jwt:u.access_token,xform:wo});if(v)throw v;return u.user=m.user,yield r._saveSession(u),yield r._notifyAllSubscribers("USER_UPDATED",u),r._returnResult({data:{user:u.user},error:null})});return function(a){return s.apply(this,arguments)}}())}catch(s){if(ne(s))return r._returnResult({data:{user:null},error:s});throw s}}).apply(this,arguments)}setSession(e){var r=this;return C(function*(){return yield r.initializePromise,yield r._acquireLock(-1,C(function*(){return yield r._setSession(e)}))})()}_setSession(e){var r=this;return C(function*(){try{if(!e.access_token||!e.refresh_token)throw new En;const o=Date.now()/1e3;let i=o,s=!0,a=null;const{payload:c}=qp(e.access_token);if(c.exp&&(i=c.exp,s=i<=o),s){const{data:l,error:u}=yield r._callRefreshToken(e.refresh_token);if(u)return r._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:u}=yield r._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-o,expires_at:i},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return r._returnResult({data:{user:a.user,session:a},error:null})}catch(o){if(ne(o))return r._returnResult({data:{session:null,user:null},error:o});throw o}})()}refreshSession(e){var r=this;return C(function*(){return yield r.initializePromise,yield r._acquireLock(-1,C(function*(){return yield r._refreshSession(e)}))})()}_refreshSession(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s;if(!e){const{data:l,error:u}=i;if(u)throw u;e=null!==(s=l.session)&&void 0!==s?s:void 0}if(!e?.refresh_token)throw new En;const{data:a,error:c}=yield r._callRefreshToken(e.refresh_token);return r._returnResult(c?{data:{user:null,session:null},error:c}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return r._returnResult({data:{user:null,session:null},error:o});throw o}})()}_getSessionFromURL(e,r){var o=this;return C(function*(){try{if(!Rt())throw new Zu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Zu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new QO("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new Zu("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new QO("No code detected.");const{data:j,error:B}=yield o._exchangeCodeForSession(e.code);if(B)throw B;const be=new URL(window.location.href);return be.searchParams.delete("code"),window.history.replaceState(window.history.state,"",be.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:c,expires_in:l,expires_at:u,token_type:d}=e;if(!(a&&l&&c&&d))throw new Zu("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(l);let v=g+m;u&&(v=parseInt(u));const y=v-g;1e3*y<=ys&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const w=v-m;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,g);const{data:x,error:M}=yield o._getUser(a);if(M)throw M;const V={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:m,expires_at:v,refresh_token:c,token_type:d,user:x.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),o._returnResult({data:{session:V,redirectType:e.type},error:null})}catch(i){if(ne(i))return o._returnResult({data:{session:null,redirectType:null},error:i});throw i}})()}_isImplicitGrantCallback(e){return!(!e.access_token&&!e.error_description)}_isPKCECallback(e){var r=this;return C(function*(){const o=yield ei(r.storage,`${r.storageKey}-code-verifier`);return!(!e.code||!o)})()}signOut(){var e=this;return C(function*(r={scope:"global"}){return yield e.initializePromise,yield e._acquireLock(-1,C(function*(){return yield e._signOut(r)}))}).apply(this,arguments)}_signOut(){var e=this;return C(function*({scope:r}={scope:"global"}){return yield e._useSession(function(){var o=C(function*(i){var s;const{data:a,error:c}=i;if(c)return e._returnResult({error:c});const l=null===(s=a.session)||void 0===s?void 0:s.access_token;if(l){const{error:u}=yield e.admin.signOut(l,r);if(u&&(!function kU(t){return ne(t)&&"AuthApiError"===t.name}(u)||404!==u.status&&401!==u.status&&403!==u.status))return e._returnResult({error:u})}return"others"!==r&&(yield e._removeSession(),yield Co(e.storage,`${e.storageKey}-code-verifier`)),e._returnResult({error:null})});return function(i){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(e){var r=this;const o=function VU(){return Symbol("auth-callback")}(),i={id:o,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,i),C(function*(){yield r.initializePromise,yield r._acquireLock(-1,C(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:i}}}_emitInitialSession(e){var r=this;return C(function*(){return yield r._useSession(function(){var o=C(function*(i){var s,a;try{const{data:{session:c},error:l}=i;if(l)throw l;yield null===(s=r.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",c),r._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){yield null===(a=r.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}});return function(i){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(e){var r=this;return C(function*(o,i={}){let s=null,a=null;"pkce"===r.flowType&&([s,a]=yield Ms(r.storage,r.storageKey,!0));try{return yield se(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:r.headers,redirectTo:i.redirectTo})}catch(c){if(ne(c))return r._returnResult({data:null,error:c});throw c}}).apply(this,arguments)}getUserIdentities(){var e=this;return C(function*(){var r;try{const{data:o,error:i}=yield e.getUser();if(i)throw i;return e._returnResult({data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null})}catch(o){if(ne(o))return e._returnResult({data:null,error:o});throw o}})()}linkIdentity(e){var r=this;return C(function*(){return"token"in e?r.linkIdentityIdToken(e):r.linkIdentityOAuth(e)})()}linkIdentityOAuth(e){var r=this;return C(function*(){var o;try{const{data:i,error:s}=yield r._useSession(function(){var a=C(function*(c){var l,u,d,g,m;const{data:v,error:y}=c;if(y)throw y;const w=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,e.provider,{redirectTo:null===(l=e.options)||void 0===l?void 0:l.redirectTo,scopes:null===(u=e.options)||void 0===u?void 0:u.scopes,queryParams:null===(d=e.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield se(r.fetch,"GET",w,{headers:r.headers,jwt:null!==(m=null===(g=v.session)||void 0===g?void 0:g.access_token)&&void 0!==m?m:void 0})});return function(c){return a.apply(this,arguments)}}());if(s)throw s;return Rt()&&!(null!==(o=e.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(i?.url),r._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(ne(i))return r._returnResult({data:{provider:e.provider,url:null},error:i});throw i}})()}linkIdentityIdToken(e){var r=this;return C(function*(){return yield r._useSession(function(){var o=C(function*(i){var s;try{const{error:a,data:{session:c}}=i;if(a)throw a;const{options:l,provider:u,token:d,access_token:g,nonce:m}=e,v=yield se(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,jwt:null!==(s=c?.access_token)&&void 0!==s?s:void 0,body:{provider:u,id_token:d,access_token:g,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:tr}),{data:y,error:w}=v;return w?r._returnResult({data:{user:null,session:null},error:w}):y&&y.session&&y.user?(y.session&&(yield r._saveSession(y.session),yield r._notifyAllSubscribers("USER_UPDATED",y.session)),r._returnResult({data:y,error:w})):r._returnResult({data:{user:null,session:null},error:new bs})}catch(a){if(ne(a))return r._returnResult({data:{user:null,session:null},error:a});throw a}});return function(i){return o.apply(this,arguments)}}())})()}unlinkIdentity(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s,a;const{data:c,error:l}=i;if(l)throw l;return yield se(r.fetch,"DELETE",`${r.url}/user/identities/${e.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(s=c.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return r._returnResult({data:null,error:o});throw o}})()}_refreshAccessToken(e){var r=this;return C(function*(){const o=`#_refreshAccessToken(${e.substring(0,5)}...)`;r._debug(o,"begin");try{const i=Date.now();return yield function HU(t,n){return new Promise((r,o)=>{C(function*(){for(let i=0;i<1/0;i++)try{const s=yield t(i);if(!n(i,null,s))return void r(s)}catch(s){if(!n(i,s))return void o(s)}})()})}(function(){var s=C(function*(a){return a>0&&(yield function BU(t){return Gp.apply(this,arguments)}(200*Math.pow(2,a-1))),r._debug(o,"refreshing attempt",a),yield se(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:r.headers,xform:tr})});return function(a){return s.apply(this,arguments)}}(),(s,a)=>{const c=200*Math.pow(2,s);return a&&Hp(a)&&Date.now()+c-i<ys})}catch(i){if(r._debug(o,"error",i),ne(i))return r._returnResult({data:{session:null,user:null},error:i});throw i}finally{r._debug(o,"end")}})()}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){var o=this;return C(function*(){const i=yield o._getUrlForProvider(`${o.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Rt()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})()}_recoverAndRefresh(){var e=this;return C(function*(){var r,o;const i="#_recoverAndRefresh()";e._debug(i,"begin");try{const s=yield ei(e.storage,e.storageKey);if(s&&e.userStorage){let c=yield ei(e.userStorage,e.storageKey+"-user");!e.storage.isServer&&Object.is(e.storage,e.userStorage)&&!c&&(c={user:s.user},yield ws(e.userStorage,e.storageKey+"-user",c)),s.user=null!==(r=c?.user)&&void 0!==r?r:Yp()}else if(s&&!s.user&&!s.user){const c=yield ei(e.storage,e.storageKey+"-user");c&&c?.user?(s.user=c.user,yield Co(e.storage,e.storageKey+"-user"),yield ws(e.storage,e.storageKey,s)):s.user=Yp()}if(e._debug(i,"session from storage",s),!e._isValidSession(s))return e._debug(i,"session is not valid"),void(null!==s&&(yield e._removeSession()));const a=1e3*(null!==(o=s.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(e._debug(i,`session has${a?"":" not"} expired with margin of 90000s`),a){if(e.autoRefreshToken&&s.refresh_token){const{error:c}=yield e._callRefreshToken(s.refresh_token);c&&(console.error(c),Hp(c)||(e._debug(i,"refresh failed with a non-retryable error, removing the session",c),yield e._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:c,error:l}=yield e._getUser(s.access_token);!l&&c?.user?(s.user=c.user,yield e._saveSession(s),yield e._notifyAllSubscribers("SIGNED_IN",s)):e._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),e._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else yield e._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return e._debug(i,"error",s),void console.error(s)}finally{e._debug(i,"end")}})()}_callRefreshToken(e){var r=this;return C(function*(){var o,i;if(!e)throw new En;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;r._debug(s,"begin");try{r.refreshingDeferred=new td;const{data:a,error:c}=yield r._refreshAccessToken(e);if(c)throw c;if(!a.session)throw new En;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return r.refreshingDeferred.resolve(l),l}catch(a){if(r._debug(s,"error",a),ne(a)){const c={data:null,error:a};return Hp(a)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(c),c}throw null===(i=r.refreshingDeferred)||void 0===i||i.reject(a),a}finally{r.refreshingDeferred=null,r._debug(s,"end")}})()}_notifyAllSubscribers(e,r){var o=this;return C(function*(i,s,a=!0){const c=`#_notifyAllSubscribers(${i})`;o._debug(c,"begin",s,`broadcast = ${a}`);try{o.broadcastChannel&&a&&o.broadcastChannel.postMessage({event:i,session:s});const l=[],u=Array.from(o.stateChangeEmitters.values()).map(function(){var d=C(function*(g){try{yield g.callback(i,s)}catch(m){l.push(m)}});return function(g){return d.apply(this,arguments)}}());if(yield Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{o._debug(c,"end")}}).apply(this,arguments)}_saveSession(e){var r=this;return C(function*(){r._debug("#_saveSession()",e),r.suppressGetSessionWarning=!0;const o=Object.assign({},e);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield ws(r.userStorage,r.storageKey+"-user",{user:o.user}));const s=Object.assign({},o);delete s.user;const a=iP(s);yield ws(r.storage,r.storageKey,a)}else{const s=iP(o);yield ws(r.storage,r.storageKey,s)}})()}_removeSession(){var e=this;return C(function*(){e._debug("#_removeSession()"),yield Co(e.storage,e.storageKey),yield Co(e.storage,e.storageKey+"-code-verifier"),yield Co(e.storage,e.storageKey+"-user"),e.userStorage&&(yield Co(e.userStorage,e.storageKey+"-user")),yield e._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var e=this;return C(function*(){yield e._stopAutoRefresh(),e._debug("#_startAutoRefresh()");const r=setInterval(()=>e._autoRefreshTokenTick(),ys);e.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(C(function*(){yield e.initializePromise,yield e._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var e=this;return C(function*(){e._debug("#_stopAutoRefresh()");const r=e.autoRefreshTicker;e.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var e=this;return C(function*(){e._removeVisibilityChangedCallback(),yield e._startAutoRefresh()})()}stopAutoRefresh(){var e=this;return C(function*(){e._removeVisibilityChangedCallback(),yield e._stopAutoRefresh()})()}_autoRefreshTokenTick(){var e=this;return C(function*(){e._debug("#_autoRefreshTokenTick()","begin");try{yield e._acquireLock(0,C(function*(){try{const r=Date.now();try{return yield e._useSession(function(){var o=C(function*(i){const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at)return void e._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*s.expires_at-r)/ys);e._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield e._callRefreshToken(s.refresh_token))});return function(i){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{e._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof uP))throw r;e._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var e=this;return C(function*(){if(e._debug("#_handleVisibilityChange()"),!Rt()||!window?.addEventListener)return e.autoRefreshToken&&e.startAutoRefresh(),!1;try{e.visibilityChangedCallback=C(function*(){return yield e._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",e.visibilityChangedCallback),yield e._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(e){var r=this;return C(function*(){const o=`#_onVisibilityChanged(${e})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),e||(yield r.initializePromise,yield r._acquireLock(-1,C(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(e,r,o){var i=this;return C(function*(){const s=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&s.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===i.flowType){const[a,c]=yield Ms(i.storage,i.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});s.push(l.toString())}if(o?.queryParams){const a=new URLSearchParams(o.queryParams);s.push(a.toString())}return o?.skipBrowserRedirect&&s.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${s.join("&")}`})()}_unenroll(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s;const{data:a,error:c}=i;return c?r._returnResult({data:null,error:c}):yield se(r.fetch,"DELETE",`${r.url}/factors/${e.factorId}`,{headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return r._returnResult({data:null,error:o});throw o}})()}_enroll(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s,a;const{data:c,error:l}=i;if(l)return r._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:d,error:g}=yield se(r.fetch,"POST",`${r.url}/factors`,{body:u,headers:r.headers,jwt:null===(s=c?.session)||void 0===s?void 0:s.access_token});return g?r._returnResult({data:null,error:g}):("totp"===e.factorType&&"totp"===d.type&&!(null===(a=d?.totp)||void 0===a)&&a.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),r._returnResult({data:d,error:null}))});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return r._returnResult({data:null,error:o});throw o}})()}_verify(e){var r=this;return C(function*(){return r._acquireLock(-1,C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s;const{data:a,error:c}=i;if(c)return r._returnResult({data:null,error:c});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?b8(e.webauthn.credential_response):C8(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=yield se(r.fetch,"POST",`${r.url}/factors/${e.factorId}/verify`,{body:l,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});return d?r._returnResult({data:null,error:d}):(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),r._returnResult({data:u,error:d}))});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return r._returnResult({data:null,error:o});throw o}}))})()}_challenge(e){var r=this;return C(function*(){return r._acquireLock(-1,C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){var s;const{data:a,error:c}=i;if(c)return r._returnResult({data:null,error:c});const l=yield se(r.fetch,"POST",`${r.url}/factors/${e.factorId}/challenge`,{body:e,headers:r.headers,jwt:null===(s=a?.session)||void 0===s?void 0:s.access_token});if(l.error)return l;const{data:u}=l;if("webauthn"!==u.type)return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:v8(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:y8(u.webauthn.credential_options.publicKey)})})}),error:null}}});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return r._returnResult({data:null,error:o});throw o}}))})()}_challengeAndVerify(e){var r=this;return C(function*(){const{data:o,error:i}=yield r._challenge({factorId:e.factorId});return i?r._returnResult({data:null,error:i}):yield r._verify({factorId:e.factorId,challengeId:o.id,code:e.code})})()}_listFactors(){var e=this;return C(function*(){var r;const{data:{user:o},error:i}=yield e.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(r=o?.factors)&&void 0!==r?r:[])s.all.push(a),"verified"===a.status&&s[a.factor_type].push(a);return{data:s,error:null}})()}_getAuthenticatorAssuranceLevel(){var e=this;return C(function*(){var r,o;const{data:{session:i},error:s}=yield e.getSession();if(s)return e._returnResult({data:null,error:s});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=qp(i.access_token);let c=null;a.aal&&(c=a.aal);let l=c;return(null!==(o=null===(r=i.user.factors)||void 0===r?void 0:r.filter(g=>"verified"===g.status))&&void 0!==o?o:[]).length>0&&(l="aal2"),{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:a.amr||[]},error:null}})()}_getAuthorizationDetails(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){const{data:{session:s},error:a}=i;return a?r._returnResult({data:null,error:a}):s?yield se(r.fetch,"GET",`${r.url}/oauth/authorizations/${e}`,{headers:r.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):r._returnResult({data:null,error:new En})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return r._returnResult({data:null,error:o});throw o}})()}_approveAuthorization(e,r){var o=this;return C(function*(){try{return yield o._useSession(function(){var i=C(function*(s){const{data:{session:a},error:c}=s;if(c)return o._returnResult({data:null,error:c});if(!a)return o._returnResult({data:null,error:new En});const l=yield se(o.fetch,"POST",`${o.url}/oauth/authorizations/${e}/consent`,{headers:o.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Rt()&&!r?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l});return function(s){return i.apply(this,arguments)}}())}catch(i){if(ne(i))return o._returnResult({data:null,error:i});throw i}})()}_denyAuthorization(e,r){var o=this;return C(function*(){try{return yield o._useSession(function(){var i=C(function*(s){const{data:{session:a},error:c}=s;if(c)return o._returnResult({data:null,error:c});if(!a)return o._returnResult({data:null,error:new En});const l=yield se(o.fetch,"POST",`${o.url}/oauth/authorizations/${e}/consent`,{headers:o.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Rt()&&!r?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l});return function(s){return i.apply(this,arguments)}}())}catch(i){if(ne(i))return o._returnResult({data:null,error:i});throw i}})()}_listOAuthGrants(){var e=this;return C(function*(){try{return yield e._useSession(function(){var r=C(function*(o){const{data:{session:i},error:s}=o;return s?e._returnResult({data:null,error:s}):i?yield se(e.fetch,"GET",`${e.url}/user/oauth/grants`,{headers:e.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):e._returnResult({data:null,error:new En})});return function(o){return r.apply(this,arguments)}}())}catch(r){if(ne(r))return e._returnResult({data:null,error:r});throw r}})()}_revokeOAuthGrant(e){var r=this;return C(function*(){try{return yield r._useSession(function(){var o=C(function*(i){const{data:{session:s},error:a}=i;return a?r._returnResult({data:null,error:a}):s?(yield se(r.fetch,"DELETE",`${r.url}/user/oauth/grants`,{headers:r.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):r._returnResult({data:null,error:new En})});return function(i){return o.apply(this,arguments)}}())}catch(o){if(ne(o))return r._returnResult({data:null,error:o});throw o}})()}fetchJwk(e){var r=this;return C(function*(o,i={keys:[]}){let s=i.keys.find(u=>u.kid===o);if(s)return s;const a=Date.now();if(s=r.jwks.keys.find(u=>u.kid===o),s&&r.jwks_cached_at+6e5>a)return s;const{data:c,error:l}=yield se(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(l)throw l;return c.keys&&0!==c.keys.length&&(r.jwks=c,r.jwks_cached_at=a,s=c.keys.find(u=>u.kid===o),s)?s:null}).apply(this,arguments)}getClaims(e){var r=this;return C(function*(o,i={}){try{let s=o;if(!s){const{data:w,error:x}=yield r.getSession();if(x||!w.session)return r._returnResult({data:null,error:x});s=w.session.access_token}const{header:a,payload:c,signature:l,raw:{header:u,payload:d}}=qp(s);i?.allowExpired||function YU(t){if(!t)throw new Error("Missing exp claim");if(t<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(c.exp);const g=a.alg&&!a.alg.startsWith("HS")&&a.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks):null;if(!g){const{error:w}=yield r.getUser(s);if(w)throw w;return{data:{claims:c,header:a,signature:l},error:null}}const m=function QU(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),v=yield crypto.subtle.importKey("jwk",g,m,!0,["verify"]);if(!(yield crypto.subtle.verify(m,v,l,function LU(t){const n=[];return function nP(t,n){for(let e=0;e<t.length;e+=1){let r=t.charCodeAt(e);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(t.charCodeAt(e+1)-56320&65535|o),e+=1}NU(r,n)}}(t,e=>n.push(e)),new Uint8Array(n)}(`${u}.${d}`))))throw new zp("Invalid JWT signature");return{data:{claims:c,header:a,signature:l},error:null}}catch(s){if(ne(s))return r._returnResult({data:null,error:s});throw s}}).apply(this,arguments)}}return t.nextInstanceID={},t})();class T8 extends k8{constructor(n){super(n)}}class A8{constructor(n,e,r){var o,i,s;this.supabaseUrl=n,this.supabaseKey=e;const a=function OU(t){const n=t?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(function wU(t){return t.endsWith("/")?t:t+"/"}(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,u=function MU(t,n){var e,r;const{db:o,auth:i,realtime:s,global:a}=t,{db:c,auth:l,realtime:u,global:d}=n,g={db:Object.assign(Object.assign({},c),o),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(e=d?.headers)&&void 0!==e?e:{}),null!==(r=a?.headers)&&void 0!==r?r:{})}),accessToken:(m=C(function*(){return""}),function(){return m.apply(this,arguments)})};var m;return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}(r??{},{db:mU,realtime:vU,auth:Object.assign(Object.assign({},_U),{storageKey:c}),global:pU});this.storageKey=null!==(o=u.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=u.auth)&&void 0!==s?s:{},this.headers,u.global.fetch),this.fetch=CU(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new NO(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new fU(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new u$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,r)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n=this;return C(function*(){var e,r;if(n.accessToken)return yield n.accessToken();const{data:o}=yield n.auth.getSession();return null!==(r=null===(e=o.session)||void 0===e?void 0:e.access_token)&&void 0!==r?r:n.supabaseKey})()}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,storageKey:s,flowType:a,lock:c,debug:l,throwOnError:u},d,g){return new T8({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),d),storageKey:s,autoRefreshToken:n,persistSession:e,detectSessionInUrl:r,storage:o,userStorage:i,flowType:a,lock:c,debug:l,throwOnError:u,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>"authorization"===v.toLowerCase())})}_initRealtimeClient(n){return new N$(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(n,e,r){"TOKEN_REFRESHED"!==n&&"SIGNED_IN"!==n||this.changedAccessToken===r?"SIGNED_OUT"===n&&(this.realtime.setAuth(),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function N8(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(null==t)return!1;const n=t.match(/^v(\d+)\./);return!!n&&parseInt(n[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let F8=(()=>{class t{http;apiUrl=Vn_apiUrl;supabase;channel=null;messagesSubject=new mt([]);messages$=this.messagesSubject.asObservable();typingUsersSubject=new mt([]);typingUsers$=this.typingUsersSubject.asObservable();statsSubject=new mt(null);stats$=this.statsSubject.asObservable();connectedSubject=new mt(!0);connected$=this.connectedSubject.asObservable();onlineUsersSubject=new mt(1);onlineUsers$=this.onlineUsersSubject.asObservable();currentUser="Usuario";userId=this.generateUserId();currentRoom="general";isTyping=!1;subscriptions=[];constructor(e){this.http=e,this.supabase=((t,n,e)=>new A8(t,n,e))("https://nkojabtbosvzbfcveyfm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rb2phYnRib3N2emJmY3ZleWZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNjgwNzAsImV4cCI6MjA3Mjk0NDA3MH0.rJdadnVoVBw-vrt2XCm3619YzSIX3jSaxRftJQdAw00",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage},realtime:{params:{eventsPerSecond:10}}}),this.loadUserFromStorage(),this.loadInitialHistory().subscribe(()=>{this.setupRealtimeSubscription()}),this.subscriptions.push(this.setupPeriodicStats(),this.setupOnlineUsersCheck())}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.setTyping(!1),this.channel&&this.supabase.removeChannel(this.channel)}setupRealtimeSubscription(){this.channel=this.supabase.channel("chat-messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`room=eq.${this.currentRoom}`},e=>{this.handleNewMessage(e)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:"message_type=eq.system"},e=>{this.handleSystemMessage(e)}).subscribe(e=>{console.log("Canal de Supabase:",e),this.connectedSubject.next("SUBSCRIBED"===e)})}handleNewMessage(e){const r={id:e.new.id,user:e.new.user_name,user_id:e.new.user_id,message:e.new.message,timestamp:e.new.created_at,room:e.new.room,type:e.new.message_type||"message"},o=this.messagesSubject.value;if(!o.find(i=>i.id===r.id)){const s=[...o,r].sort((a,c)=>new Date(a.timestamp).getTime()-new Date(c.timestamp).getTime()).slice(-200);this.messagesSubject.next(s)}}getAuthToken(){return localStorage.getItem("auth_token")}handleSystemMessage(e){this.handleNewMessage(e)}setupPeriodicStats(){return new X(()=>{const e=setInterval(()=>{this.loadStatsObservable().subscribe()},3e4);return()=>clearInterval(e)})}setupOnlineUsersCheck(){return new X(()=>{const e=setInterval(()=>{this.checkOnlineUsers().subscribe()},15e3);return()=>clearInterval(e)})}loadUserFromStorage(){const e=localStorage.getItem("chat_user_name");e&&(this.currentUser=e)}loadInitialHistory(){return this.http.get(`${this.apiUrl}/api/chat/messages?limit=100`).pipe(Ue({next:e=>{this.messagesSubject.next(e.messages||[]),this.connectedSubject.next(!0)},error:e=>{console.error("Error loading initial history:",e),this.connectedSubject.next(!1)}}),At(e=>(console.error("API call failed for initial history:",e),this.connectedSubject.next(!1),re(null))))}checkOnlineUsers(){return this.http.get(`${this.apiUrl}/api/chat/online-users`).pipe(At(e=>re({online_users:1})),Ue(e=>this.onlineUsersSubject.next(e.online_users)))}sendMessage(e){const r=this.getAuthToken(),o={"Content-Type":"application/json"};r&&(o.Authorization=`Bearer ${r}`);const i={message:e.trim(),user:this.currentUser,user_id:this.userId,room:this.currentRoom};return this.http.post(`${this.apiUrl}/api/chat/send`,i,{headers:o}).pipe(Ue(s=>{s.success&&s.message&&this.setTyping(!1)}),At(s=>{throw console.error("Error sending message:",s),this.connectedSubject.next(!1),s}))}setTyping(e){this.isTyping!==e&&(this.isTyping=e,this.http.post(`${this.apiUrl}/api/chat/typing`,{user:this.currentUser,room:this.currentRoom,is_typing:e}).pipe(At(()=>re(null))).subscribe())}setUser(e){e&&e.trim()&&(this.currentUser=e.trim(),localStorage.setItem("chat_user_name",this.currentUser))}getUser(){return this.currentUser}loadStatsObservable(){return this.http.get(`${this.apiUrl}/api/chat/stats`).pipe(At(()=>re(null)),Ue(e=>{e&&this.statsSubject.next(e)}))}loadStats(){this.loadStatsObservable().subscribe()}validateUsername(e){const r=this.getAuthToken(),o={"Content-Type":"application/json"};return r&&(o.Authorization=`Bearer ${r}`),this.http.post(`${this.apiUrl}/api/chat/validate-username`,{username:e},{headers:o}).pipe(At(i=>re({valid:!1,error:"Error validando nombre"})))}generateUserId(){let e=localStorage.getItem("chat_user_id");return e||(e=`user_${Math.random().toString(36).substring(2,11)}`,localStorage.setItem("chat_user_id",e)),e}static \u0275fac=function(r){return new(r||t)(Q(Zn))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const L8=["messagesContainer"],j8=["chatContainer"];function V8(t,n){if(1&t&&(h(0,"span",14),_(1),f()),2&t){const e=P(2);p(1),K(e.unreadMessages)}}function $8(t,n){1&t&&(h(0,"div",22),b(1,"i",23),_(2," Reconectando... "),f())}function U8(t,n){if(1&t){const e=_e();h(0,"div",24)(1,"div",25),b(2,"i",26),_(3),f(),h(4,"button",27),k("click",function(){return H(e),z(P(3).showUserModal=!0)}),b(5,"i",28),f(),h(6,"button",29),k("click",function(){return H(e),z(P(3).isChatOpen=!1)}),b(7,"i",30),f()()}if(2&t){const e=n.ngIf;p(3),te(" ",e,"")}}function B8(t,n){if(1&t&&(h(0,"div",15)(1,"div",16)(2,"h4"),b(3,"i",17),_(4," Chat Musical"),f(),h(5,"div",18),b(6,"span",19),_(7),f(),N(8,$8,3,0,"div",20),f(),N(9,U8,8,1,"div",21),Wn(10,"async"),f()),2&t){const e=n.ngIf,r=P(2);p(5),ie("connected",e)("disconnected",!e),p(2),te(" ",e?"Conectado":"Reconectando..."," "),p(1),O("ngIf",!e),p(1),O("ngIf",Kn(10,7,r.onlineUsers$))}}function H8(t,n){if(1&t&&(h(0,"div",31)(1,"div",32)(2,"small"),_(3),f()(),h(4,"div",32)(5,"small"),_(6),f()()()),2&t){const e=n.ngIf;p(3),te("Total: ",null==e?null:e.total_messages,""),p(3),te("Hoy: ",null==e?null:e.messages_today,"")}}function z8(t,n){if(1&t&&(h(0,"div",36)(1,"strong",37),_(2),f(),h(3,"span",38),_(4),f()()),2&t){const e=P().$implicit,r=P(2);p(2),K(e.user),p(2),K(r.formatTime(e.timestamp))}}function q8(t,n){if(1&t&&(h(0,"div",33),N(1,z8,5,2,"div",34),h(2,"div",35),_(3),f()()),2&t){const e=n.$implicit,r=P().ngIf;ie("system-message","system"===e.type)("own-message",e.user===r&&"message"===e.type),p(1),O("ngIf","message"===e.type),p(2),K(e.message)}}function G8(t,n){if(1&t&&(h(0,"div")(1,"div",41),b(2,"span")(3,"span")(4,"span"),f(),h(5,"span",42),_(6),f()()),2&t){const e=P().ngIf;p(6),Vr("",e.join(", ")," ",1===e.length?"est\xe1 escribiendo...":"est\xe1n escribiendo...","")}}function W8(t,n){if(1&t&&(h(0,"div",39),N(1,G8,7,2,"div",40),f()),2&t){const e=n.ngIf;p(1),O("ngIf",e.length>0)}}function K8(t,n){if(1&t){const e=_e();h(0,"div",43)(1,"input",44,45),k("ngModelChange",function(o){return H(e),z(P(2).newMessage=o)})("input",function(){return H(e),z(P(2).onInputChange())})("keyup.enter",function(){return H(e),z(P(2).sendMessage())}),f(),h(3,"button",46),k("click",function(){return H(e),z(P(2).sendMessage())}),b(4,"i",47),f()()}if(2&t){const e=n.ngIf,r=P(2);p(1),xl("placeholder",e?"Escribe un mensaje...":"Conectando..."),O("ngModel",r.newMessage)("disabled",!e),p(2),O("disabled",!r.newMessage.trim()||!e)}}function J8(t,n){if(1&t&&(h(0,"div",56)(1,"small",57),_(2),f()()),2&t){const e=P(3);p(2),K(e.usernameError)}}function Y8(t,n){if(1&t){const e=_e();h(0,"div",48),k("click",function(){return H(e),z(P(2).showUserModal=!1)}),h(1,"div",49),k("click",function(o){return o.stopPropagation()}),h(2,"h4"),_(3,"Cambiar Nombre"),f(),h(4,"input",50,51),k("keyup",function(){H(e);const o=pr(5);return z(P(2).onUsernameInput(o.value))})("keyup.enter",function(){H(e);const o=pr(5);return z(P(2).updateUser(o.value))}),f(),N(6,J8,3,1,"div",52),h(7,"div",53)(8,"button",54),k("click",function(){return H(e),z(P(2).showUserModal=!1)}),_(9,"Cancelar"),f(),h(10,"button",55),k("click",function(){H(e);const o=pr(5);return z(P(2).updateUser(o.value))}),_(11," Guardar "),f()()()()}if(2&t){const e=P().ngIf,r=P();p(4),O("value",e),p(2),O("ngIf",r.usernameError),p(4),O("disabled",r.usernameError)}}function Q8(t,n){if(1&t){const e=_e();h(0,"div",1)(1,"button",2),k("click",function(){return H(e),z(P().toggleChat())}),b(2,"i",3),N(3,V8,2,1,"span",4),f(),h(4,"div",5),N(5,B8,11,9,"div",6),Wn(6,"async"),N(7,H8,7,2,"div",7),Wn(8,"async"),h(9,"div",8,9),N(11,q8,4,6,"div",10),Wn(12,"async"),N(13,W8,2,1,"div",11),Wn(14,"async"),f(),N(15,K8,5,4,"div",12),Wn(16,"async"),N(17,Y8,12,3,"div",13),f()()}if(2&t){const e=P();p(1),ie("has-unread",e.unreadMessages>0),p(2),O("ngIf",e.unreadMessages>0),p(1),ie("open",e.isChatOpen),p(1),O("ngIf",Kn(6,12,e.connected$)),p(2),O("ngIf",Kn(8,14,e.stats$)),p(4),O("ngForOf",Kn(12,16,e.messages$))("ngForTrackBy",e.trackByMessage),p(2),O("ngIf",Kn(14,18,e.typingUsers$)),p(2),O("ngIf",Kn(16,20,e.connected$)),p(2),O("ngIf",e.showUserModal)}}let Z8=(()=>{class t{chatService;cdr;elementRef;messagesContainer;chatContainer;isChatOpen=!1;newMessage="";showUserModal=!1;unreadMessages=0;usernameError="";previousMessageCount=0;messages$;typingUsers$;onlineUsers$;connected$;stats$;currentUser$;subscriptions=new X;typingTimeout;constructor(e,r,o){this.chatService=e,this.cdr=r,this.elementRef=o,this.messages$=this.chatService.messages$,this.typingUsers$=this.chatService.typingUsers$,this.onlineUsers$=this.chatService.onlineUsers$,this.connected$=this.chatService.connected$,this.stats$=this.chatService.stats$,this.currentUser$=re(this.chatService.getUser())}ngOnInit(){const e=this.messages$.subscribe(r=>{setTimeout(()=>{this.handleNewMessages(r),this.cdr.detectChanges(),this.autoScrollToBottom()})});this.subscriptions.add(e),setTimeout(()=>{this.chatService.loadInitialHistory().subscribe()},1e3)}onUsernameInput(e){const r=e.trim();r?this.chatService.validateUsername(r).subscribe({next:o=>{this.usernameError=o.valid?"":o.error||"",this.cdr.markForCheck()},error:()=>{this.usernameError="",this.cdr.markForCheck()}}):(this.usernameError="",this.cdr.markForCheck())}ngOnDestroy(){this.subscriptions.unsubscribe(),this.typingTimeout&&clearTimeout(this.typingTimeout)}handleNewMessages(e){if(!this.messagesContainer)return;const r=e.length,o=this.previousMessageCount;if(this.previousMessageCount=r,this.isChatOpen){const i=r-o;i>0&&o>0&&(this.unreadMessages+=i)}else{const i=r-o;i>0&&(this.unreadMessages+=i,this.showNewMessageNotification(this.unreadMessages))}}sendMessage(){this.connected$.pipe(Yr(1)).subscribe(e=>{if(this.newMessage.trim()&&e){const r=this.newMessage.trim();this.newMessage="",this.cdr.markForCheck(),this.chatService.sendMessage(r).subscribe({next:()=>{this.stopTyping(),this.scrollToBottom()},error:o=>{this.newMessage=r,this.cdr.markForCheck(),o.error&&o.error.error&&alert(o.error.error)}})}})}scrollToBottom(){this.messagesContainer&&setTimeout(()=>{try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch(e){console.error("Error en scroll:",e)}},50)}showNewMessageNotification(e){!document.hasFocus()&&"Notification"in window&&"granted"===Notification.permission&&new Notification(`Tienes ${e} nuevo${e>1?"s":""} mensaje${e>1?"s":""}`)}toggleChat(){this.isChatOpen=!this.isChatOpen,this.isChatOpen&&(this.unreadMessages=0,this.chatService.loadStats(),setTimeout(()=>{this.scrollToBottom(),this.chatService.loadInitialHistory().subscribe()},100))}setupRealtimeMessages(){const e=this.messages$.subscribe(r=>{const o=this.isNearBottom();this.handleNewMessages(r),this.cdr.markForCheck(),o&&this.autoScrollToBottom()});this.subscriptions.add(e)}isNearBottom(){if(!this.messagesContainer)return!0;const e=this.messagesContainer.nativeElement;return e.scrollHeight-(e.scrollTop+e.clientHeight)<=150}autoScrollToBottom(){this.messagesContainer&&setTimeout(()=>{const e=this.messagesContainer.nativeElement;e.scrollTop=e.scrollHeight},100)}onInputChange(){this.connected$.pipe(Yr(1)).subscribe(e=>{this.newMessage.trim()&&e?(this.chatService.setTyping(!0),this.typingTimeout&&clearTimeout(this.typingTimeout),this.typingTimeout=setTimeout(()=>this.stopTyping(),2500)):this.stopTyping()})}stopTyping(){this.typingTimeout&&(clearTimeout(this.typingTimeout),this.typingTimeout=null),this.chatService.setTyping(!1)}updateUser(e){const r=e.trim();r&&this.chatService.validateUsername(r).subscribe({next:o=>{o.valid?(this.chatService.setUser(r),this.currentUser$=re(r),this.showUserModal=!1,this.usernameError="",this.cdr.markForCheck(),o.is_admin&&console.log("\u2705 Modo administrador activado para el chat")):(this.usernameError=o.error||"Nombre no v\xe1lido",this.cdr.markForCheck())},error:()=>{this.usernameError="Error validando el nombre de usuario",this.cdr.markForCheck()}})}formatTime(e){return new Date(e).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}trackByMessage(e,r){return r.id}onDocumentClick(e){this.isChatOpen&&!this.elementRef.nativeElement.contains(e.target)&&(this.isChatOpen=!1,this.cdr.markForCheck())}static \u0275fac=function(r){return new(r||t)(T(F8),T(Xi),T(un))};static \u0275cmp=Ht({type:t,selectors:[["app-floating-chat"]],viewQuery:function(r,o){if(1&r&&(Af(L8,5),Af(j8,5)),2&r){let i;Ll(i=jl())&&(o.messagesContainer=i.first),Ll(i=jl())&&(o.chatContainer=i.first)}},hostBindings:function(r,o){1&r&&k("click",function(s){return o.onDocumentClick(s)},0,sy)},standalone:!0,features:[Yt],decls:2,vars:3,consts:[["class","floating-chat-container",4,"ngIf"],[1,"floating-chat-container"],[1,"floating-chat-button",3,"click"],[1,"fas","fa-comments"],["class","unread-badge",4,"ngIf"],[1,"chat-window"],["class","chat-header",4,"ngIf"],["class","chat-stats",4,"ngIf"],[1,"messages-container"],["messagesContainer",""],["class","message",3,"system-message","own-message",4,"ngFor","ngForOf","ngForTrackBy"],["class","typing-indicator",4,"ngIf"],["class","input-container",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"unread-badge"],[1,"chat-header"],[1,"header-left"],[1,"fas","fa-comments","me-2"],[1,"connection-status"],[1,"status-dot"],["class","reconnection-message",4,"ngIf"],["class","header-right",4,"ngIf"],[1,"reconnection-message"],[1,"fas","fa-sync-alt","fa-spin"],[1,"header-right"],[1,"online-users"],[1,"fas","fa-users","me-1"],["title","Cambiar usuario",1,"btn-user",3,"click"],[1,"fas","fa-user-edit"],["title","Cerrar chat",1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"chat-stats"],[1,"stat-item"],[1,"message"],["class","message-header",4,"ngIf"],[1,"message-content"],[1,"message-header"],[1,"username"],[1,"message-time"],[1,"typing-indicator"],[4,"ngIf"],[1,"typing-dots"],[1,"typing-text"],[1,"input-container"],["type","text",1,"message-input",3,"ngModel","disabled","placeholder","ngModelChange","input","keyup.enter"],["messageInput",""],[1,"send-button",3,"disabled","click"],[1,"fas","fa-paper-plane"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],["type","text","placeholder","Tu nombre de usuario","maxlength","20",1,"user-input",3,"value","keyup","keyup.enter"],["userInput",""],["class","validation-message",4,"ngIf"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"disabled","click"],[1,"validation-message"],[1,"text-danger"]],template:function(r,o){1&r&&(N(0,Q8,18,22,"div",0),Wn(1,"async")),2&r&&O("ngIf",Kn(1,1,o.currentUser$))},dependencies:[Pn,vr,On,iu,Jo,wr,vo,Kr],styles:[".floating-chat-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:10002}.floating-chat-button[_ngcontent-%COMP%]{position:relative;width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,var(--primary-color),#1db954);color:#fff;border:none;cursor:pointer;box-shadow:0 6px 25px #1db95480;display:flex;align-items:center;justify-content:center;font-size:1.8rem;transition:all .3s ease}.floating-chat-button[_ngcontent-%COMP%]:hover{transform:scale(1.15);box-shadow:0 8px 30px #1db954b3}.floating-chat-button.has-unread[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.floating-chat-button[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:#e74c3c;color:#fff;border-radius:50%;width:24px;height:24px;font-size:.8rem;display:flex;align-items:center;justify-content:center;font-weight:700;border:2px solid var(--card-bg)}.chat-window[_ngcontent-%COMP%]{position:absolute;bottom:85px;right:0;width:450px;height:650px;background:var(--card-bg);border:1px solid var(--hover-bg);border-radius:16px;box-shadow:0 15px 50px #0006;display:flex;flex-direction:column;opacity:0;transform:translateY(20px) scale(.95);pointer-events:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.chat-window.open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:all}.chat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem;background:linear-gradient(135deg,var(--hover-bg),var(--card-bg));border-bottom:1px solid var(--border-color);border-radius:16px 16px 0 0}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.1rem;font-weight:600}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;padding:.3rem .6rem;border-radius:20px;background:var(--bg-color);font-weight:500}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]{color:#10b981;background:rgba(16,185,129,.1)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status.connected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#10b981;box-shadow:0 0 8px #10b98180}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status.disconnected[_ngcontent-%COMP%]{color:#ef4444;background:rgba(239,68,68,.1)}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status.disconnected[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#ef4444}.chat-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .connection-status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .online-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem;padding:.4rem .8rem;background:var(--bg-color);border-radius:20px;font-size:.8rem;color:var(--text-secondary);font-weight:500}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-user[_ngcontent-%COMP%], .chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);padding:.5rem;border-radius:8px;cursor:pointer;transition:all .2s ease}.chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-user[_ngcontent-%COMP%]:hover, .chat-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary);transform:scale(1.1)}.chat-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem;padding:.75rem 1.25rem;background:var(--bg-color);border-bottom:1px solid var(--border-color)}.chat-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.75rem;font-weight:500}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.25rem;display:flex;flex-direction:column;gap:.75rem;background:var(--bg-color)}.message[_ngcontent-%COMP%]{max-width:90%;padding:.75rem 1rem;border-radius:16px;background:var(--hover-bg);animation:_ngcontent-%COMP%_messageSlide .25s ease-out;border:1px solid transparent;transition:all .2s ease}.message[_ngcontent-%COMP%]:hover{border-color:var(--border-color);transform:translateY(-1px)}.message.own-message[_ngcontent-%COMP%]{align-self:flex-end;background:linear-gradient(135deg,var(--primary-color),#1a8cff);color:#fff;box-shadow:0 4px 15px #1db9544d}.message.own-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{color:#fffffff2}.message.own-message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#fffc}.message.system-message[_ngcontent-%COMP%]{align-self:center;background:transparent;text-align:center;color:var(--text-secondary);font-style:italic;max-width:100%;border:1px dashed var(--border-color)}.message.system-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500}.message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.3rem}.message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:var(--text-primary)}.message[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8;color:var(--text-secondary)}.message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{word-wrap:break-word;line-height:1.4;font-size:.9rem}.typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;color:var(--text-secondary);font-size:.85rem;font-style:italic;background:var(--hover-bg);border-radius:12px;margin-top:.5rem}.typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]{display:flex;gap:3px}.typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:var(--primary-color);animation:_ngcontent-%COMP%_typingBounce 1.4s infinite ease-in-out}.typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.typing-indicator[_ngcontent-%COMP%]   .typing-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}.input-container[_ngcontent-%COMP%]{display:flex;padding:1rem;border-top:1px solid var(--border-color);background:var(--card-bg);gap:.75rem;align-items:center}.input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:2px solid var(--border-color);border-radius:25px;background:var(--bg-color);color:var(--text-primary);font-size:.9rem;transition:all .3s ease}.input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #1db9541a}.input-container[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.input-container[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{padding:.75rem;background:linear-gradient(135deg,var(--primary-color),#1db954);color:#fff;border:none;border-radius:50%;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.input-container[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1) rotate(5deg);box-shadow:0 6px 20px #1db95466}.input-container[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.modal-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:16px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem;border-radius:16px;width:90%;max-width:400px;border:1px solid var(--border-color);box-shadow:0 20px 60px #0000004d}.modal-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-primary);font-size:1.2rem;font-weight:600;text-align:center}.modal-content[_ngcontent-%COMP%]   .user-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid var(--border-color);border-radius:12px;background:var(--bg-color);color:var(--text-primary);margin-bottom:1.5rem;font-size:1rem;transition:all .3s ease}.modal-content[_ngcontent-%COMP%]   .user-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #1db9541a}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding:.6rem 1.25rem;border:none;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:500;transition:all .3s ease}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:transparent;color:var(--text-secondary);border:2px solid var(--border-color)}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:var(--hover-bg);border-color:var(--text-secondary)}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),#1db954);color:#fff}.modal-content[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #1db9544d}@keyframes _ngcontent-%COMP%_messageSlide{0%{opacity:0;transform:translateY(8px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_typingBounce{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1.2);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 6px 25px #1db95480}50%{box-shadow:0 6px 30px #1db954cc}}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}.messages-container[_ngcontent-%COMP%]{scroll-behavior:smooth;overflow-anchor:auto}@media (max-width: 768px){.floating-chat-container[_ngcontent-%COMP%]{bottom:15px;right:15px}.floating-chat-button[_ngcontent-%COMP%]{width:60px;height:60px;font-size:1.5rem}.chat-window[_ngcontent-%COMP%]{width:380px;height:550px;bottom:75px}}@media (max-width: 480px){.floating-chat-container[_ngcontent-%COMP%]{bottom:10px;right:10px}.chat-window[_ngcontent-%COMP%]{width:calc(100vw - 30px);height:70vh;right:-5px;bottom:65px}.floating-chat-button[_ngcontent-%COMP%]{width:55px;height:55px;font-size:1.3rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.chat-window[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.connection-status[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.message[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary-color);outline-offset:2px}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], .message[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.reconnection-message[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:var(--text-secondary);font-size:.9rem}.reconnection-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.reconnect-info[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8}.reconnect-info[_ngcontent-%COMP%]{font-size:.7rem;opacity:.8;margin-left:.3rem}.reconnection-message[_ngcontent-%COMP%]{text-align:center;padding:.5rem;color:var(--text-secondary);font-size:.8rem;background:rgba(239,68,68,.1);border-radius:8px;margin-top:.5rem}.reconnection-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.connection-status.disconnected[_ngcontent-%COMP%]{background:rgba(239,68,68,.15)!important;border:1px solid rgba(239,68,68,.3)}.connection-status.connected[_ngcontent-%COMP%]{background:rgba(16,185,129,.15)!important;border:1px solid rgba(16,185,129,.3)}.validation-message[_ngcontent-%COMP%]{margin:-.5rem 0 1rem;text-align:center}.validation-message[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:#e74c3c;font-size:.8rem;font-weight:500}.modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.modal-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:disabled:hover{box-shadow:none!important;transform:none!important}"],changeDetection:0})}return t})();const X8=function(){return{exact:!0}};(function d5(t,n){return J2({rootComponent:t,...nM(n)})})((()=>{class t{title="UPTC Music";isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ht({type:t,selectors:[["app-root"]],standalone:!0,features:[Yt],decls:43,vars:6,consts:[[1,"main-container"],[1,"main-header"],[1,"container","d-flex","justify-content-between","align-items-center"],[1,"logo-container"],["routerLink","/",1,"text-decoration-none","text-white","d-flex","align-items-center"],[1,"logo-icon"],[1,"fab","fa-spotify"],[1,"app-title","mb-0","ms-2"],[1,"hamburger-menu","d-md-none",3,"click"],[1,"fas",3,"ngClass"],[1,"main-nav"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions","click"],[1,"fas","fa-home","me-1"],["routerLink","/discussion","routerLinkActive","active",3,"click"],[1,"fas","fa-comments","me-1"],["routerLink","/ranking","routerLinkActive","active",3,"click"],[1,"fas","fa-trophy","me-1"],["routerLink","/admin-login","routerLinkActive","active",3,"click"],[1,"fas","fa-lock","me-1"],[1,"content-area"],[1,"container"],[1,"now-playing-bar"],[1,"footer-content","text-center"],[1,"footer-text","mb-0"],[1,"footer-text","mb-1"],[1,"social-links"],["href","https://github.com/SebastianVega4","target","_blank"],[1,"fab","fa-github","me-1"],["href","https://www.linkedin.com/in/johan-sebastian-vega-ruiz-b1292011b/","target","_blank"],[1,"fab","fa-linkedin","me-1"],["href","https://www.instagram.com/sebastian.vegar/","target","_blank"],[1,"fab","fa-instagram","me-1"]],template:function(r,o){1&r&&(h(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"div",5),b(6,"i",6),f(),h(7,"h1",7),_(8),f()()(),h(9,"button",8),k("click",function(){return o.toggleMenu()}),b(10,"i",9),f(),h(11,"nav",10)(12,"a",11),k("click",function(){return o.toggleMenu()}),b(13,"i",12),_(14,"Inicio "),f(),h(15,"a",13),k("click",function(){return o.toggleMenu()}),b(16,"i",14),_(17,"Foro "),f(),h(18,"a",15),k("click",function(){return o.toggleMenu()}),b(19,"i",16),_(20,"Ranking "),f(),h(21,"a",17),k("click",function(){return o.toggleMenu()}),b(22,"i",18),f()()()(),h(23,"main",19)(24,"div",20),b(25,"router-outlet"),f()(),b(26,"app-floating-chat"),f(),h(27,"footer",21)(28,"div",22)(29,"p",23),_(30,"Desarrollado por:"),f(),h(31,"p",24),_(32,"Estudiante de Ingenier\xeda de Sistemas - UPTC Sogamoso 2025-II"),f(),h(33,"div",25)(34,"a",26),b(35,"i",27),_(36,"GitHub "),f(),h(37,"a",28),b(38,"i",29),_(39,"LinkedIn "),f(),h(40,"a",30),b(41,"i",31),_(42,"Instagram "),f()()()()),2&r&&(p(8),K(o.title),p(2),O("ngClass",o.isMenuOpen?"fa-times":"fa-bars"),p(1),ie("active",o.isMenuOpen),p(1),O("routerLinkActiveOptions",Lo(5,X8)))},dependencies:[Za,Kg,Go,s1,Pn,ou,Z8],styles:[".main-header[_ngcontent-%COMP%]{padding:0rem;background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-bottom:1px solid rgba(255,255,255,.1);top:0;z-index:10000;box-shadow:0 4px 30px #0000004d}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem}.logo-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--primary-color) 0%,var(--accent-purple) 100%);display:flex;align-items:center;justify-content:center;box-shadow:0 0 15px #1db95466}.logo-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--text-primary)}.app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:var(--text-primary);margin:0;letter-spacing:-.5px;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary-color) 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.main-nav[_ngcontent-%COMP%]{display:flex;gap:1rem}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-secondary);text-decoration:none;font-weight:600;padding:.5rem 1rem;border-radius:50px;transition:all .3s ease;display:flex;align-items:center}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:rgba(255,255,255,.05);transform:translateY(-2px)}.main-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--text-primary);background:rgba(29,185,84,.15);box-shadow:0 0 15px #1db95433}.main-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;transition:color .3s ease}.now-playing-bar[_ngcontent-%COMP%]{background:var(--glass-bg);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-top:1px solid rgba(255,255,255,.1);padding:1rem;color:var(--text-primary);display:flex;align-items:center;justify-content:center;position:relative;z-index:5}.footer-content[_ngcontent-%COMP%]{width:100%;text-align:center}.footer-text[_ngcontent-%COMP%]{font-size:.8rem;margin:.3rem 0;color:var(--text-secondary)}.social-links[_ngcontent-%COMP%]{margin-top:.5rem}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-secondary);text-decoration:none;margin:0 .8rem;font-size:.9rem;transition:all .3s ease;display:inline-flex;align-items:center}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-color);transform:translateY(-2px)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.3rem;font-size:1rem}@media (max-width: 768px){.main-header[_ngcontent-%COMP%]{padding:.8rem 1rem}.main-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative}.main-header[_ngcontent-%COMP%]   .hamburger-menu[_ngcontent-%COMP%]{display:block;background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;position:relative;z-index:10001}.main-header[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;background-color:#000000f2;flex-direction:column;align-items:center;padding:1rem 0;display:none;z-index:1000;border-bottom:1px solid rgba(255,255,255,.1);gap:0}.main-header[_ngcontent-%COMP%]   .main-nav.active[_ngcontent-%COMP%]{display:flex}.main-header[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;text-align:center;padding:1rem;margin:0;border-bottom:1px solid rgba(255,255,255,.05);border-radius:0}.main-header[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{border-bottom:none}.main-header[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:none}.app-title[_ngcontent-%COMP%]{font-size:1.2rem}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 .5rem;font-size:.8rem}}@media (min-width: 769px){.hamburger-menu[_ngcontent-%COMP%]{display:none}.main-nav[_ngcontent-%COMP%]{display:flex!important}}"]})}return t})(),a$).catch(t=>console.error(t))},958:(Nt,Ce,De)=>{"use strict";var oe=De(293).default;Object.defineProperty(Ce,"__esModule",{value:!0});const Je=De(215).__importDefault(De(659));Ce.default=class Ye{constructor(I){var R,J;this.shouldThrowOnError=!1,this.method=I.method,this.url=I.url,this.headers=new Headers(I.headers),this.schema=I.schema,this.body=I.body,this.shouldThrowOnError=null!==(R=I.shouldThrowOnError)&&void 0!==R&&R,this.signal=I.signal,this.isMaybeSingle=null!==(J=I.isMaybeSingle)&&void 0!==J&&J,this.fetch=I.fetch?I.fetch:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(I,R){return this.headers=new Headers(this.headers),this.headers.set(I,R),this}then(I,R){var J=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let we=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var ue=oe(function*(Me){var lt,ut,Ut,dt;let Oe=null,Ve=null,nt=null,tn=Me.status,xt=Me.statusText;if(Me.ok){if("HEAD"!==J.method){const Sn=yield Me.text();""===Sn||(Ve="text/csv"===J.headers.get("Accept")||J.headers.get("Accept")&&null!==(lt=J.headers.get("Accept"))&&void 0!==lt&&lt.includes("application/vnd.pgrst.plan+text")?Sn:JSON.parse(Sn))}const rr=null===(ut=J.headers.get("Prefer"))||void 0===ut?void 0:ut.match(/count=(exact|planned|estimated)/),fn=null===(Ut=Me.headers.get("content-range"))||void 0===Ut?void 0:Ut.split("/");rr&&fn&&fn.length>1&&(nt=parseInt(fn[1])),J.isMaybeSingle&&"GET"===J.method&&Array.isArray(Ve)&&(Ve.length>1?(Oe={code:"PGRST116",details:`Results contain ${Ve.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Ve=null,nt=null,tn=406,xt="Not Acceptable"):Ve=1===Ve.length?Ve[0]:null)}else{const rr=yield Me.text();try{Oe=JSON.parse(rr),Array.isArray(Oe)&&404===Me.status&&(Ve=[],Oe=null,tn=200,xt="OK")}catch{404===Me.status&&""===rr?(tn=204,xt="No Content"):Oe={message:rr}}if(Oe&&J.isMaybeSingle&&!(null===(dt=Oe?.details)||void 0===dt)&&dt.includes("0 rows")&&(Oe=null,tn=200,xt="OK"),Oe&&J.shouldThrowOnError)throw new Je.default(Oe)}return{error:Oe,data:Ve,count:nt,status:tn,statusText:xt}});return function(Me){return ue.apply(this,arguments)}}());return this.shouldThrowOnError||(we=we.catch(ue=>{var Me,lt,ut,Ut,dt,Oe;let Ve="";const nt=ue?.cause;if(nt){const tn=null!==(Me=nt?.message)&&void 0!==Me?Me:"",xt=null!==(lt=nt?.code)&&void 0!==lt?lt:"";Ve=`${null!==(ut=ue?.name)&&void 0!==ut?ut:"FetchError"}: ${ue?.message}`,Ve+=`\n\nCaused by: ${null!==(Ut=nt?.name)&&void 0!==Ut?Ut:"Error"}: ${tn}`,xt&&(Ve+=` (${xt})`),nt?.stack&&(Ve+=`\n${nt.stack}`)}else Ve=null!==(dt=ue?.stack)&&void 0!==dt?dt:"";return{error:{message:`${null!==(Oe=ue?.name)&&void 0!==Oe?Oe:"FetchError"}: ${ue?.message}`,details:Ve,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),we.then(I,R)}returns(){return this}overrideTypes(){return this}}},242:(Nt,Ce,De)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});const oe=De(215),Te=oe.__importDefault(De(666)),Je=oe.__importDefault(De(608));class Ye{constructor(I,{headers:R={},schema:J,fetch:le}={}){this.url=I,this.headers=new Headers(R),this.schemaName=J,this.fetch=le}from(I){if(!I||"string"!=typeof I||""===I.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");const R=new URL(`${this.url}/${I}`);return new Te.default(R,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(I){return new Ye(this.url,{headers:this.headers,schema:I,fetch:this.fetch})}rpc(I,R={},{head:J=!1,get:le=!1,count:we}={}){var ue;let Me;const lt=new URL(`${this.url}/rpc/${I}`);let ut;J||le?(Me=J?"HEAD":"GET",Object.entries(R).filter(([dt,Oe])=>void 0!==Oe).map(([dt,Oe])=>[dt,Array.isArray(Oe)?`{${Oe.join(",")}}`:`${Oe}`]).forEach(([dt,Oe])=>{lt.searchParams.append(dt,Oe)})):(Me="POST",ut=R);const Ut=new Headers(this.headers);return we&&Ut.set("Prefer",`count=${we}`),new Je.default({method:Me,url:lt,headers:Ut,schema:this.schemaName,body:ut,fetch:null!==(ue=this.fetch)&&void 0!==ue?ue:fetch})}}Ce.default=Ye},659:(Nt,Ce)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});class De extends Error{constructor(Te){super(Te.message),this.name="PostgrestError",this.details=Te.details,this.hint=Te.hint,this.code=Te.code}}Ce.default=De},608:(Nt,Ce,De)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});const Te=De(215).__importDefault(De(342)),Je=new RegExp("[,()]");Ce.default=class Ye extends Te.default{eq(I,R){return this.url.searchParams.append(I,`eq.${R}`),this}neq(I,R){return this.url.searchParams.append(I,`neq.${R}`),this}gt(I,R){return this.url.searchParams.append(I,`gt.${R}`),this}gte(I,R){return this.url.searchParams.append(I,`gte.${R}`),this}lt(I,R){return this.url.searchParams.append(I,`lt.${R}`),this}lte(I,R){return this.url.searchParams.append(I,`lte.${R}`),this}like(I,R){return this.url.searchParams.append(I,`like.${R}`),this}likeAllOf(I,R){return this.url.searchParams.append(I,`like(all).{${R.join(",")}}`),this}likeAnyOf(I,R){return this.url.searchParams.append(I,`like(any).{${R.join(",")}}`),this}ilike(I,R){return this.url.searchParams.append(I,`ilike.${R}`),this}ilikeAllOf(I,R){return this.url.searchParams.append(I,`ilike(all).{${R.join(",")}}`),this}ilikeAnyOf(I,R){return this.url.searchParams.append(I,`ilike(any).{${R.join(",")}}`),this}regexMatch(I,R){return this.url.searchParams.append(I,`match.${R}`),this}regexIMatch(I,R){return this.url.searchParams.append(I,`imatch.${R}`),this}is(I,R){return this.url.searchParams.append(I,`is.${R}`),this}isDistinct(I,R){return this.url.searchParams.append(I,`isdistinct.${R}`),this}in(I,R){const J=Array.from(new Set(R)).map(le=>"string"==typeof le&&Je.test(le)?`"${le}"`:`${le}`).join(",");return this.url.searchParams.append(I,`in.(${J})`),this}contains(I,R){return"string"==typeof R?this.url.searchParams.append(I,`cs.${R}`):Array.isArray(R)?this.url.searchParams.append(I,`cs.{${R.join(",")}}`):this.url.searchParams.append(I,`cs.${JSON.stringify(R)}`),this}containedBy(I,R){return"string"==typeof R?this.url.searchParams.append(I,`cd.${R}`):Array.isArray(R)?this.url.searchParams.append(I,`cd.{${R.join(",")}}`):this.url.searchParams.append(I,`cd.${JSON.stringify(R)}`),this}rangeGt(I,R){return this.url.searchParams.append(I,`sr.${R}`),this}rangeGte(I,R){return this.url.searchParams.append(I,`nxl.${R}`),this}rangeLt(I,R){return this.url.searchParams.append(I,`sl.${R}`),this}rangeLte(I,R){return this.url.searchParams.append(I,`nxr.${R}`),this}rangeAdjacent(I,R){return this.url.searchParams.append(I,`adj.${R}`),this}overlaps(I,R){return this.url.searchParams.append(I,"string"==typeof R?`ov.${R}`:`ov.{${R.join(",")}}`),this}textSearch(I,R,{config:J,type:le}={}){let we="";return"plain"===le?we="pl":"phrase"===le?we="ph":"websearch"===le&&(we="w"),this.url.searchParams.append(I,`${we}fts${void 0===J?"":`(${J})`}.${R}`),this}match(I){return Object.entries(I).forEach(([R,J])=>{this.url.searchParams.append(R,`eq.${J}`)}),this}not(I,R,J){return this.url.searchParams.append(I,`not.${R}.${J}`),this}or(I,{foreignTable:R,referencedTable:J=R}={}){return this.url.searchParams.append(J?`${J}.or`:"or",`(${I})`),this}filter(I,R,J){return this.url.searchParams.append(I,`${R}.${J}`),this}}},666:(Nt,Ce,De)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});const Te=De(215).__importDefault(De(608));Ce.default=class Je{constructor(X,{headers:I={},schema:R,fetch:J}){this.url=X,this.headers=new Headers(I),this.schema=R,this.fetch=J}select(X,I){const{head:R=!1,count:J}=I??{},le=R?"HEAD":"GET";let we=!1;const ue=(X??"*").split("").map(Me=>/\s/.test(Me)&&!we?"":('"'===Me&&(we=!we),Me)).join("");return this.url.searchParams.set("select",ue),J&&this.headers.append("Prefer",`count=${J}`),new Te.default({method:le,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(X,{count:I,defaultToNull:R=!0}={}){var J;if(I&&this.headers.append("Prefer",`count=${I}`),R||this.headers.append("Prefer","missing=default"),Array.isArray(X)){const we=X.reduce((ue,Me)=>ue.concat(Object.keys(Me)),[]);if(we.length>0){const ue=[...new Set(we)].map(Me=>`"${Me}"`);this.url.searchParams.set("columns",ue.join(","))}}return new Te.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:X,fetch:null!==(J=this.fetch)&&void 0!==J?J:fetch})}upsert(X,{onConflict:I,ignoreDuplicates:R=!1,count:J,defaultToNull:le=!0}={}){var we;if(this.headers.append("Prefer",`resolution=${R?"ignore":"merge"}-duplicates`),void 0!==I&&this.url.searchParams.set("on_conflict",I),J&&this.headers.append("Prefer",`count=${J}`),le||this.headers.append("Prefer","missing=default"),Array.isArray(X)){const Me=X.reduce((lt,ut)=>lt.concat(Object.keys(ut)),[]);if(Me.length>0){const lt=[...new Set(Me)].map(ut=>`"${ut}"`);this.url.searchParams.set("columns",lt.join(","))}}return new Te.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:X,fetch:null!==(we=this.fetch)&&void 0!==we?we:fetch})}update(X,{count:I}={}){var R;return I&&this.headers.append("Prefer",`count=${I}`),new Te.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:X,fetch:null!==(R=this.fetch)&&void 0!==R?R:fetch})}delete({count:X}={}){var I;return X&&this.headers.append("Prefer",`count=${X}`),new Te.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(I=this.fetch)&&void 0!==I?I:fetch})}}},342:(Nt,Ce,De)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});const Te=De(215).__importDefault(De(958));Ce.default=class Je extends Te.default{select(X){let I=!1;const R=(X??"*").split("").map(J=>/\s/.test(J)&&!I?"":('"'===J&&(I=!I),J)).join("");return this.url.searchParams.set("select",R),this.headers.append("Prefer","return=representation"),this}order(X,{ascending:I=!0,nullsFirst:R,foreignTable:J,referencedTable:le=J}={}){const we=le?`${le}.order`:"order",ue=this.url.searchParams.get(we);return this.url.searchParams.set(we,`${ue?`${ue},`:""}${X}.${I?"asc":"desc"}${void 0===R?"":R?".nullsfirst":".nullslast"}`),this}limit(X,{foreignTable:I,referencedTable:R=I}={}){return this.url.searchParams.set(typeof R>"u"?"limit":`${R}.limit`,`${X}`),this}range(X,I,{foreignTable:R,referencedTable:J=R}={}){const we=typeof J>"u"?"limit":`${J}.limit`;return this.url.searchParams.set(typeof J>"u"?"offset":`${J}.offset`,`${X}`),this.url.searchParams.set(we,""+(I-X+1)),this}abortSignal(X){return this.signal=X,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:X=!1,verbose:I=!1,settings:R=!1,buffers:J=!1,wal:le=!1,format:we="text"}={}){var ue;const Me=[X?"analyze":null,I?"verbose":null,R?"settings":null,J?"buffers":null,le?"wal":null].filter(Boolean).join("|"),lt=null!==(ue=this.headers.get("Accept"))&&void 0!==ue?ue:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${we}; for="${lt}"; options=${Me};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(X){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${X}`),this}}},60:(Nt,Ce,De)=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.PostgrestError=Ce.PostgrestBuilder=Ce.PostgrestTransformBuilder=Ce.PostgrestFilterBuilder=Ce.PostgrestQueryBuilder=Ce.PostgrestClient=void 0;const oe=De(215),Te=oe.__importDefault(De(242));Ce.PostgrestClient=Te.default;const Je=oe.__importDefault(De(666));Ce.PostgrestQueryBuilder=Je.default;const Ye=oe.__importDefault(De(608));Ce.PostgrestFilterBuilder=Ye.default;const X=oe.__importDefault(De(342));Ce.PostgrestTransformBuilder=X.default;const I=oe.__importDefault(De(958));Ce.PostgrestBuilder=I.default;const R=oe.__importDefault(De(659));Ce.PostgrestError=R.default,Ce.default={PostgrestClient:Te.default,PostgrestQueryBuilder:Je.default,PostgrestFilterBuilder:Ye.default,PostgrestTransformBuilder:X.default,PostgrestBuilder:I.default,PostgrestError:R.default}},215:(Nt,Ce,De)=>{"use strict";De.r(Ce),De.d(Ce,{__addDisposableResource:()=>Qe,__assign:()=>Je,__asyncDelegator:()=>rr,__asyncGenerator:()=>Mo,__asyncValues:()=>fn,__await:()=>xt,__awaiter:()=>Me,__classPrivateFieldGet:()=>$n,__classPrivateFieldIn:()=>Ds,__classPrivateFieldSet:()=>dc,__createBinding:()=>ut,__decorate:()=>X,__disposeResources:()=>fc,__esDecorate:()=>R,__exportStar:()=>Ut,__extends:()=>Te,__generator:()=>lt,__importDefault:()=>ni,__importStar:()=>uc,__makeTemplateObject:()=>Sn,__metadata:()=>ue,__param:()=>I,__propKey:()=>le,__read:()=>Oe,__rest:()=>Ye,__rewriteRelativeImportExtension:()=>gc,__runInitializers:()=>J,__setFunctionName:()=>we,__spread:()=>Ve,__spreadArray:()=>tn,__spreadArrays:()=>nt,__values:()=>dt,default:()=>id});var oe=function(D,S){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var F in E)Object.prototype.hasOwnProperty.call(E,F)&&(A[F]=E[F])})(D,S)};function Te(D,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function A(){this.constructor=D}oe(D,S),D.prototype=null===S?Object.create(S):(A.prototype=S.prototype,new A)}var Je=function(){return Je=Object.assign||function(S){for(var A,E=1,F=arguments.length;E<F;E++)for(var q in A=arguments[E])Object.prototype.hasOwnProperty.call(A,q)&&(S[q]=A[q]);return S},Je.apply(this,arguments)};function Ye(D,S){var A={};for(var E in D)Object.prototype.hasOwnProperty.call(D,E)&&S.indexOf(E)<0&&(A[E]=D[E]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var F=0;for(E=Object.getOwnPropertySymbols(D);F<E.length;F++)S.indexOf(E[F])<0&&Object.prototype.propertyIsEnumerable.call(D,E[F])&&(A[E[F]]=D[E[F]])}return A}function X(D,S,A,E){var G,F=arguments.length,q=F<3?S:null===E?E=Object.getOwnPropertyDescriptor(S,A):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)q=Reflect.decorate(D,S,A,E);else for(var U=D.length-1;U>=0;U--)(G=D[U])&&(q=(F<3?G(q):F>3?G(S,A,q):G(S,A))||q);return F>3&&q&&Object.defineProperty(S,A,q),q}function I(D,S){return function(A,E){S(A,E,D)}}function R(D,S,A,E,F,q){function G(or){if(void 0!==or&&"function"!=typeof or)throw new TypeError("Function expected");return or}for(var yt,U=E.kind,Ot="getter"===U?"get":"setter"===U?"set":"value",fe=!S&&D?E.static?D:D.prototype:null,Xe=S||(fe?Object.getOwnPropertyDescriptor(fe,E.name):{}),Jr=!1,He=A.length-1;He>=0;He--){var Ft={};for(var nn in E)Ft[nn]="access"===nn?{}:E[nn];for(var nn in E.access)Ft.access[nn]=E.access[nn];Ft.addInitializer=function(or){if(Jr)throw new TypeError("Cannot add initializers after decoration has completed");q.push(G(or||null))};var In=(0,A[He])("accessor"===U?{get:Xe.get,set:Xe.set}:Xe[Ot],Ft);if("accessor"===U){if(void 0===In)continue;if(null===In||"object"!=typeof In)throw new TypeError("Object expected");(yt=G(In.get))&&(Xe.get=yt),(yt=G(In.set))&&(Xe.set=yt),(yt=G(In.init))&&F.unshift(yt)}else(yt=G(In))&&("field"===U?F.unshift(yt):Xe[Ot]=yt)}fe&&Object.defineProperty(fe,E.name,Xe),Jr=!0}function J(D,S,A){for(var E=arguments.length>2,F=0;F<S.length;F++)A=E?S[F].call(D,A):S[F].call(D);return E?A:void 0}function le(D){return"symbol"==typeof D?D:"".concat(D)}function we(D,S,A){return"symbol"==typeof S&&(S=S.description?"[".concat(S.description,"]"):""),Object.defineProperty(D,"name",{configurable:!0,value:A?"".concat(A," ",S):S})}function ue(D,S){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,S)}function Me(D,S,A,E){return new(A||(A=Promise))(function(q,G){function U(Xe){try{fe(E.next(Xe))}catch(yt){G(yt)}}function Ot(Xe){try{fe(E.throw(Xe))}catch(yt){G(yt)}}function fe(Xe){Xe.done?q(Xe.value):function F(q){return q instanceof A?q:new A(function(G){G(q)})}(Xe.value).then(U,Ot)}fe((E=E.apply(D,S||[])).next())})}function lt(D,S){var E,F,q,A={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]},G=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return G.next=U(0),G.throw=U(1),G.return=U(2),"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G;function U(fe){return function(Xe){return function Ot(fe){if(E)throw new TypeError("Generator is already executing.");for(;G&&(G=0,fe[0]&&(A=0)),A;)try{if(E=1,F&&(q=2&fe[0]?F.return:fe[0]?F.throw||((q=F.return)&&q.call(F),0):F.next)&&!(q=q.call(F,fe[1])).done)return q;switch(F=0,q&&(fe=[2&fe[0],q.value]),fe[0]){case 0:case 1:q=fe;break;case 4:return A.label++,{value:fe[1],done:!1};case 5:A.label++,F=fe[1],fe=[0];continue;case 7:fe=A.ops.pop(),A.trys.pop();continue;default:if(!(q=(q=A.trys).length>0&&q[q.length-1])&&(6===fe[0]||2===fe[0])){A=0;continue}if(3===fe[0]&&(!q||fe[1]>q[0]&&fe[1]<q[3])){A.label=fe[1];break}if(6===fe[0]&&A.label<q[1]){A.label=q[1],q=fe;break}if(q&&A.label<q[2]){A.label=q[2],A.ops.push(fe);break}q[2]&&A.ops.pop(),A.trys.pop();continue}fe=S.call(D,A)}catch(Xe){fe=[6,Xe],F=0}finally{E=q=0}if(5&fe[0])throw fe[1];return{value:fe[0]?fe[1]:void 0,done:!0}}([fe,Xe])}}}var ut=Object.create?function(D,S,A,E){void 0===E&&(E=A);var F=Object.getOwnPropertyDescriptor(S,A);(!F||("get"in F?!S.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return S[A]}}),Object.defineProperty(D,E,F)}:function(D,S,A,E){void 0===E&&(E=A),D[E]=S[A]};function Ut(D,S){for(var A in D)"default"!==A&&!Object.prototype.hasOwnProperty.call(S,A)&&ut(S,D,A)}function dt(D){var S="function"==typeof Symbol&&Symbol.iterator,A=S&&D[S],E=0;if(A)return A.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&E>=D.length&&(D=void 0),{value:D&&D[E++],done:!D}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oe(D,S){var A="function"==typeof Symbol&&D[Symbol.iterator];if(!A)return D;var F,G,E=A.call(D),q=[];try{for(;(void 0===S||S-- >0)&&!(F=E.next()).done;)q.push(F.value)}catch(U){G={error:U}}finally{try{F&&!F.done&&(A=E.return)&&A.call(E)}finally{if(G)throw G.error}}return q}function Ve(){for(var D=[],S=0;S<arguments.length;S++)D=D.concat(Oe(arguments[S]));return D}function nt(){for(var D=0,S=0,A=arguments.length;S<A;S++)D+=arguments[S].length;var E=Array(D),F=0;for(S=0;S<A;S++)for(var q=arguments[S],G=0,U=q.length;G<U;G++,F++)E[F]=q[G];return E}function tn(D,S,A){if(A||2===arguments.length)for(var q,E=0,F=S.length;E<F;E++)(q||!(E in S))&&(q||(q=Array.prototype.slice.call(S,0,E)),q[E]=S[E]);return D.concat(q||Array.prototype.slice.call(S))}function xt(D){return this instanceof xt?(this.v=D,this):new xt(D)}function Mo(D,S,A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,E=A.apply(D,S||[]),q=[];return F=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),U("next"),U("throw"),U("return",function G(He){return function(Ft){return Promise.resolve(Ft).then(He,yt)}}),F[Symbol.asyncIterator]=function(){return this},F;function U(He,Ft){E[He]&&(F[He]=function(nn){return new Promise(function(In,or){q.push([He,nn,In,or])>1||Ot(He,nn)})},Ft&&(F[He]=Ft(F[He])))}function Ot(He,Ft){try{!function fe(He){He.value instanceof xt?Promise.resolve(He.value.v).then(Xe,yt):Jr(q[0][2],He)}(E[He](Ft))}catch(nn){Jr(q[0][3],nn)}}function Xe(He){Ot("next",He)}function yt(He){Ot("throw",He)}function Jr(He,Ft){He(Ft),q.shift(),q.length&&Ot(q[0][0],q[0][1])}}function rr(D){var S,A;return S={},E("next"),E("throw",function(F){throw F}),E("return"),S[Symbol.iterator]=function(){return this},S;function E(F,q){S[F]=D[F]?function(G){return(A=!A)?{value:xt(D[F](G)),done:!1}:q?q(G):G}:q}}function fn(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A,S=D[Symbol.asyncIterator];return S?S.call(D):(D=dt(D),A={},E("next"),E("throw"),E("return"),A[Symbol.asyncIterator]=function(){return this},A);function E(q){A[q]=D[q]&&function(G){return new Promise(function(U,Ot){!function F(q,G,U,Ot){Promise.resolve(Ot).then(function(fe){q({value:fe,done:U})},G)}(U,Ot,(G=D[q](G)).done,G.value)})}}}function Sn(D,S){return Object.defineProperty?Object.defineProperty(D,"raw",{value:S}):D.raw=S,D}var od=Object.create?function(D,S){Object.defineProperty(D,"default",{enumerable:!0,value:S})}:function(D,S){D.default=S},Oo=function(D){return(Oo=Object.getOwnPropertyNames||function(S){var A=[];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(A[A.length]=E);return A})(D)};function uc(D){if(D&&D.__esModule)return D;var S={};if(null!=D)for(var A=Oo(D),E=0;E<A.length;E++)"default"!==A[E]&&ut(S,D,A[E]);return od(S,D),S}function ni(D){return D&&D.__esModule?D:{default:D}}function $n(D,S,A,E){if("a"===A&&!E)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof S?D!==S||!E:!S.has(D))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===A?E:"a"===A?E.call(D):E?E.value:S.get(D)}function dc(D,S,A,E,F){if("m"===E)throw new TypeError("Private method is not writable");if("a"===E&&!F)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof S?D!==S||!F:!S.has(D))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===E?F.call(D,A):F?F.value=A:S.set(D,A),A}function Ds(D,S){if(null===S||"object"!=typeof S&&"function"!=typeof S)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof D?S===D:D.has(S)}function Qe(D,S,A){if(null!=S){if("object"!=typeof S&&"function"!=typeof S)throw new TypeError("Object expected.");var E,F;if(A){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");E=S[Symbol.asyncDispose]}if(void 0===E){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");E=S[Symbol.dispose],A&&(F=E)}if("function"!=typeof E)throw new TypeError("Object not disposable.");F&&(E=function(){try{F.call(this)}catch(q){return Promise.reject(q)}}),D.stack.push({value:S,dispose:E,async:A})}else A&&D.stack.push({async:!0});return S}var hc="function"==typeof SuppressedError?SuppressedError:function(D,S,A){var E=new Error(A);return E.name="SuppressedError",E.error=D,E.suppressed=S,E};function fc(D){function S(q){D.error=D.hasError?new hc(q,D.error,"An error was suppressed during disposal."):q,D.hasError=!0}var A,E=0;return function F(){for(;A=D.stack.pop();)try{if(!A.async&&1===E)return E=0,D.stack.push(A),Promise.resolve().then(F);if(A.dispose){var q=A.dispose.call(A.value);if(A.async)return E|=2,Promise.resolve(q).then(F,function(G){return S(G),F()})}else E|=1}catch(G){S(G)}if(1===E)return D.hasError?Promise.reject(D.error):Promise.resolve();if(D.hasError)throw D.error}()}function gc(D,S){return"string"==typeof D&&/^\.\.?\//.test(D)?D.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(A,E,F,q,G){return E?S?".jsx":".js":!F||q&&G?F+q+"."+G.toLowerCase()+"js":A}):D}const id={__extends:Te,__assign:Je,__rest:Ye,__decorate:X,__param:I,__esDecorate:R,__runInitializers:J,__propKey:le,__setFunctionName:we,__metadata:ue,__awaiter:Me,__generator:lt,__createBinding:ut,__exportStar:Ut,__values:dt,__read:Oe,__spread:Ve,__spreadArrays:nt,__spreadArray:tn,__await:xt,__asyncGenerator:Mo,__asyncDelegator:rr,__asyncValues:fn,__makeTemplateObject:Sn,__importStar:uc,__importDefault:ni,__classPrivateFieldGet:$n,__classPrivateFieldSet:dc,__classPrivateFieldIn:Ds,__addDisposableResource:Qe,__disposeResources:fc,__rewriteRelativeImportExtension:gc}},293:Nt=>{function Ce(oe,Te,Je,Ye,X,I,R){try{var J=oe[I](R),le=J.value}catch(we){return void Je(we)}J.done?Te(le):Promise.resolve(le).then(Ye,X)}Nt.exports=function De(oe){return function(){var Te=this,Je=arguments;return new Promise(function(Ye,X){var I=oe.apply(Te,Je);function R(le){Ce(I,Ye,X,R,J,"next",le)}function J(le){Ce(I,Ye,X,R,J,"throw",le)}R(void 0)})}},Nt.exports.__esModule=!0,Nt.exports.default=Nt.exports}},Nt=>{Nt(Nt.s=328)}]);