<div class="home-container">
  <!-- Sección de canción en reproducción -->
  <div class="now-playing-section compact-card fade-in" *ngIf="adminCurrentlyPlaying; else noSongPlaying">
    <div class="album-art-container">
      <img [src]="adminCurrentlyPlaying.image" alt="Carátula de {{ adminCurrentlyPlaying.name }}" class="album-art">
    </div>
    <div class="song-info-container">
      <div class="song-details">
        <h3 class="song-title">{{ adminCurrentlyPlaying.name }}</h3>
        <p class="song-artist">{{ adminCurrentlyPlaying.artists }}</p>
      </div>
      <div class="progress-container">
        <span class="time-display">{{ formatTime(progress * songDurationMs / 100) }}</span>
        <div class="progress">
          <div class="progress-bar" [style.width.%]="progress"></div>
        </div>
        <span class="time-display">{{ formatTime(songDurationMs) }}</span>
      </div>
    </div>
    <div class="update-button-container">
      <button class="btn btn-icon" (click)="forceUpdate()" [disabled]="isUpdating" title="Actualizar">
        <i class="fas fa-sync-alt" [class.fa-spin]="isUpdating"></i>
      </button>
    </div>
  </div>
  <div class="voting-section">
    <app-voting *ngIf="adminCurrentlyPlaying"></app-voting>
  </div>

  <!-- Sección de siguiente canción -->
  <div class="next-song-section compact-card fade-in">
    <div class="card-header">
      <i class="fas fa-forward text-primary"></i>
      <span class="header-title">Siguiente en la cola</span>
    </div>
    
    <div class="next-song-content" *ngIf="nextSong; else noNextSong">
      <div class="album-art-mini">
        <img [src]="nextSong.image || 'assets/default-song.png'" alt="Carátula" class="album-art-img">
      </div>
      <div class="song-info-mini">
        <h4 class="song-title-mini">{{ nextSong.name }}</h4>
        <p class="song-artist-mini">{{ nextSong.artists.join(', ') }}</p>
      </div>
    </div>

    <ng-template #noNextSong>
      <div class="no-next-song-content">
        <p class="text-muted small mb-0">No hay canciones en la cola de Spotify</p>
      </div>
    </ng-template>
  </div>

  <!-- Mensaje cuando no hay canción -->
  <ng-template #noSongPlaying>
    <div class="no-song-playing compact-card fade-in">
      <div class="card-body">
        <i class="fas fa-music-slash text-muted"></i>
        <p class="text-muted">No hay música sonando.</p>
      </div>
    </div>
  </ng-template>

  <!-- Componente de búsqueda -->
  <app-search (voteCasted)="onVoteCasted()"></app-search>
  <app-voting-list></app-voting-list>

</div>