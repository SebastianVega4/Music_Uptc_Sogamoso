<div class="home-container">
  <!-- Sección de canción en reproducción -->
  <div class="now-playing-section card fade-in" *ngIf="adminCurrentlyPlaying; else noSongPlaying">
    <h2 class="card-header">Reproduciendo Ahora</h2>
    <div class="card-body text-center">
      <img [src]="adminCurrentlyPlaying.image" alt="Carátula de {{ adminCurrentlyPlaying.name }}"
        class="album-art mb-3">
      <h3 class="song-title">{{ adminCurrentlyPlaying.name }}</h3>
      <p class="song-artist">{{ adminCurrentlyPlaying.artists }}</p>

      <!-- Barra de Progreso -->
      <div class="progress-container mt-3">
        <span class="time-display">{{ formatTime(progress * songDurationMs / 100) }}</span>
        <div class="progress">
          <div class="progress-bar" [style.width.%]="progress"></div>
        </div>
        <span class="time-display">{{ formatTime(songDurationMs) }}</span>
      </div>

      <!-- Botón de Actualización Manual -->
      <button class="btn btn-secondary mt-3" (click)="forceUpdate()" [disabled]="isUpdating">
        <i class="fas fa-sync-alt" [class.fa-spin]="isUpdating"></i>
        {{ isUpdating ? 'Actualizando...' : 'Actualizar' }}
      </button>
    </div>
  </div>

  <!-- Mensaje cuando no hay canción -->
  <ng-template #noSongPlaying>
    <div class="no-song-playing card fade-in">
      <div class="card-body text-center">
        <i class="fas fa-music-slash fa-3x text-muted mb-3"></i>
        <h3 class="text-light">Aún no hay música sonando</h3>
        <p class="text-muted">¡Busca y añade canciones a la lista para empezar la fiesta!</p>
        <!-- Botón de Actualización Manual -->
        <button class="btn btn-secondary mt-3" (click)="forceUpdate()">
          <i class="fas fa-sync-alt"></i>
          {{ isUpdating ? 'Actualizando...' : 'Actualizar' }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- Componente de búsqueda -->
  <app-search (voteCasted)="onVoteCasted()"></app-search>
  <app-voting-list></app-voting-list>

</div>