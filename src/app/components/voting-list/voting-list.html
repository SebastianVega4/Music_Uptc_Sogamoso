<div class="spotify-container">
  <div class="header">
    <h1>Votación de Canciones</h1>
    <button class="btn-refresh" (click)="forceRefresh()" [disabled]="isRefreshing">
      <i class="fas fa-sync-alt" [class.fa-spin]="isRefreshing"></i>
      {{ isRefreshing ? 'Actualizando...' : 'Actualizar' }}
    </button>
  </div>

  <div class="loader" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Cargando canciones...</p>
  </div>

  <div class="content" *ngIf="!isLoading">
    <div class="recently-added" *ngIf="recentlyAddedSongs.length > 0">
      <h2>Agregadas Recientemente</h2>
      <div class="song-grid">
        <div class="song-card" *ngFor="let song of recentlyAddedSongs">
          <img [src]="song.image" [alt]="song.name">
          <div class="song-info">
            <h6>{{ song.name }}</h6>
            <p>{{ song.artists.join(', ') }}</p>
          </div>
        </div>
      </div>
    </div>

    <h2>Ranking General</h2>
    <div class="song-table-container">
      <table class="song-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Título</th>
            <th>Artista</th>
            <th>Álbum</th>
            <th>Votos</th>
            <th>Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let song of songs; let i = index">
            <td>{{ i + 1 }}</td>
            <td>
              <div class="song-cell">
                <img [src]="song.image" [alt]="song.name">
                <span>{{ song.name }}</span>
              </div>
            </td>
            <td>{{ song.artists.join(', ') }}</td>
            <td>{{ song.album }}</td>
            <td>
              <span class="vote-count"><i class="fas fa-thumbs-up"></i> {{ song.votes || 0 }}</span>
            </td>
            <td>
              <button class="btn-vote" (click)="vote(song)">Votar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
